/*! For license information please see main.1208cfa4.js.LICENSE.txt */
(function(){var __webpack_modules__={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3646:function(e,t,n){var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},4559:function(e){function t(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function s(e){t(i,a,o,s,c,"next",e)}function c(e){t(i,a,o,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3269:function(e,t,n){var r=n(379);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},9754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,n){var r=n(9489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){s=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8585:function(e,t,n){var r=n(8).default,a=n(1506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),a=n(3884),o=n(379),i=n(521);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,n){var r=n(3646),a=n(6860),o=n(379),i=n(8206);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){e.exports=n(9727)},4115:function(e){e.exports=[{date:new Date("2020-01-01"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-02"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-03"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-04"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-05"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-06"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-07"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-08"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-09"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-10"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-11"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-12"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-13"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-14"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-15"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-16"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-17"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-18"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-19"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-20"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-21"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-22"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-23"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-24"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-25"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-26"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-27"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-28"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-29"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-30"),open:32.4,high:27,low:28,close:3.4},{date:new Date("2020-01-31"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-01"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-02"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-03"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-04"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-05"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-06"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-07"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-08"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-09"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-10"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-11"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-12"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-13"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-14"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-15"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-16"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-17"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-18"),open:32.4,high:27,low:28,close:33.4}]},76:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a=Math.abs,o=String.fromCharCode,i=Object.assign;function s(e){return e.trim()}function c(e,t,n){return e.replace(t,n)}function u(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function g(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function h(e,t){return t.push(e),e}var f=1,I=1,C=0,m=0,v=0,b="";function A(e,t,n,r,a,o,i){return{value:e,root:t,parent:n,type:r,props:a,children:o,line:f,column:I,length:i,return:""}}function y(e,t){return i(A("",null,null,"",null,null,0),e,{length:-e.length},t)}function k(){return v=m>0?l(b,--m):0,I--,10===v&&(I=1,f--),v}function Z(){return v=m<C?l(b,m++):0,I++,10===v&&(I=1,f++),v}function S(){return l(b,m)}function w(){return m}function B(e,t){return g(b,e,t)}function G(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x(e){return f=I=1,C=d(b=e),m=0,[]}function R(e){return b="",e}function W(e){return s(B(m-1,X(91===e?e+2:40===e?e+1:e)))}function V(e){for(;(v=S())&&v<33;)Z();return G(e)>2||G(v)>3?"":" "}function N(e,t){for(;--t&&Z()&&!(v<48||v>102||v>57&&v<65||v>70&&v<97););return B(e,w()+(t<6&&32==S()&&32==Z()))}function X(e){for(;Z();)switch(v){case e:return m;case 34:case 39:34!==e&&39!==e&&X(v);break;case 40:41===e&&X(e);break;case 92:Z()}return m}function J(e,t){for(;Z()&&e+v!==57&&(e+v!==84||47!==S()););return"/*"+B(t,m-1)+"*"+o(47===e?e:Z())}function F(e){for(;!G(S());)Z();return B(e,m)}var E="-ms-",T="-moz-",Y="-webkit-",H="comm",M="rule",D="decl",K="@keyframes";function z(e,t){for(var n="",r=p(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function L(e,t,n,r){switch(e.type){case"@import":case D:return e.return=e.return||e.value;case H:return"";case K:return e.return=e.value+"{"+z(e.children,r)+"}";case M:e.value=e.props.join(",")}return d(n=z(e.children,r))?e.return=e.value+"{"+n+"}":""}function P(e,t){switch(function(e,t){return(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3)}(e,t)){case 5103:return Y+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Y+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Y+e+T+e+E+e+e;case 6828:case 4268:return Y+e+E+e+e;case 6165:return Y+e+E+"flex-"+e+e;case 5187:return Y+e+c(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return Y+e+E+"flex-item-"+c(e,/flex-|-self/,"")+e;case 4675:return Y+e+E+"flex-line-pack"+c(e,/align-content|flex-|-self/,"")+e;case 5548:return Y+e+E+c(e,"shrink","negative")+e;case 5292:return Y+e+E+c(e,"basis","preferred-size")+e;case 6060:return Y+"box-"+c(e,"-grow","")+Y+e+E+c(e,"grow","positive")+e;case 4554:return Y+c(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return c(c(c(e,/(zoom-|grab)/,Y+"$1"),/(image-set)/,Y+"$1"),e,"")+e;case 5495:case 3959:return c(e,/(image-set\([^]*)/,Y+"$1$`$1");case 4968:return c(c(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Y+e+e;case 4095:case 3583:case 4068:case 2532:return c(e,/(.+)-inline(.+)/,Y+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return c(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+T+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~u(e,"stretch")?P(c(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,d(e)-3-(~u(e,"!important")&&10))){case 107:return c(e,":",":"+Y)+e;case 101:return c(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Y+(45===l(e,14)?"inline-":"")+"box$3$1"+Y+"$2$3$1"+E+"$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return Y+e+E+c(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Y+e+E+c(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Y+e+E+c(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Y+e+E+e+e}return e}function _(e){return R(O("",null,null,null,[""],e=x(e),0,[0],e))}function O(e,t,n,r,a,i,s,l,g){for(var p=0,f=0,I=s,C=0,m=0,v=0,b=1,A=1,y=1,B=0,G="",x=a,R=i,X=r,E=G;A;)switch(v=B,B=Z()){case 40:if(108!=v&&58==E.charCodeAt(I-1)){-1!=u(E+=c(W(B),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:E+=W(B);break;case 9:case 10:case 13:case 32:E+=V(v);break;case 92:E+=N(w()-1,7);continue;case 47:switch(S()){case 42:case 47:h(j(J(Z(),w()),t,n),g);break;default:E+="/"}break;case 123*b:l[p++]=d(E)*y;case 125*b:case 59:case 0:switch(B){case 0:case 125:A=0;case 59+f:m>0&&d(E)-I&&h(m>32?Q(E+";",r,n,I-1):Q(c(E," ","")+";",r,n,I-2),g);break;case 59:E+=";";default:if(h(X=U(E,t,n,p,f,a,l,G,x=[],R=[],I),i),123===B)if(0===f)O(E,t,X,X,x,i,I,l,R);else switch(C){case 100:case 109:case 115:O(e,X,X,r&&h(U(e,X,X,0,0,a,l,G,a,x=[],I),R),a,R,I,l,r?x:R);break;default:O(E,X,X,X,[""],R,0,l,R)}}p=f=m=0,b=y=1,G=E="",I=s;break;case 58:I=1+d(E),m=v;default:if(b<1)if(123==B)--b;else if(125==B&&0==b++&&125==k())continue;switch(E+=o(B),B*b){case 38:y=f>0?1:(E+="\f",-1);break;case 44:l[p++]=(d(E)-1)*y,y=1;break;case 64:45===S()&&(E+=W(Z())),C=S(),f=I=d(G=E+=F(w())),B++;break;case 45:45===v&&2==d(E)&&(b=0)}}return i}function U(e,t,n,r,o,i,u,l,d,h,f){for(var I=o-1,C=0===o?i:[""],m=p(C),v=0,b=0,y=0;v<r;++v)for(var k=0,Z=g(e,I+1,I=a(b=u[v])),S=e;k<m;++k)(S=s(b>0?C[k]+" "+Z:c(Z,/&\f/g,C[k])))&&(d[y++]=S);return A(e,t,n,0===o?M:l,d,h,f)}function j(e,t,n){return A(e,t,n,H,o(v),g(e,2,-2),0)}function Q(e,t,n,r){return A(e,t,n,D,g(e,0,r),g(e,r+1,-1),r)}var q=function(e,t,n){for(var r=0,a=0;r=a,a=S(),38===r&&12===a&&(t[n]=1),!G(a);)Z();return B(e,m)},$=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(G(r)){case 0:38===r&&12===S()&&(t[n]=1),e[n]+=q(m-1,t,n);break;case 2:e[n]+=W(r);break;case 4:if(44===r){e[++n]=58===S()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=Z());return e}(x(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var a=[],o=$(t,a),i=n.props,s=0,c=0;s<o.length;s++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[s]?o[s].replace(/&\f/g,i[u]):i[u]+" "+o[s]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case D:e.return=P(e.value,e.length);break;case K:return z([y(e,{value:c(e.value,"@","@"+Y)})],r);case M:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return z([y(e,{props:[c(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return z([y(e,{props:[c(t,/:(plac\w+)/,":-webkit-input-$1")]}),y(e,{props:[c(t,/:(plac\w+)/,":-moz-$1")]}),y(e,{props:[c(t,/:(plac\w+)/,E+"input-$1")]})],r)}return""}))}}],ae=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var a=e.stylisPlugins||re;var o,i,s={},c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;c.push(e)}));var u,l,g=[L,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],d=function(e){var t=p(e);return function(n,r,a,o){for(var i="",s=0;s<t;s++)i+=e[s](n,r,a,o)||"";return i}}([te,ne].concat(a,g));i=function(e,t,n,r){u=n,z(_(e?e+"{"+t.styles+"}":t.styles),d),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return h.sheet.hydrate(c),h}},620:function(e,t){"use strict";t.Z=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},1688:function(e,t,n){"use strict";var r;n.d(t,{T:function(){return c},w:function(){return s}});var a=n(2791),o=n(76),i=(n(4804),(0,a.createContext)("undefined"!==typeof HTMLElement?(0,o.Z)({key:"css"}):null));i.Provider;var s=function(e){return(0,a.forwardRef)((function(t,n){var r=(0,a.useContext)(i);return e(t,r,n)}))},c=(0,a.createContext)({});(r||(r=n.t(a,2))).useInsertionEffect&&(r||(r=n.t(a,2))).useInsertionEffect},4804:function(e,t,n){"use strict";n.d(t,{O:function(){return f}});var r=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},a=n(3840),o=n(620),i=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c=function(e){return 45===e.charCodeAt(1)},u=function(e){return null!=e&&"boolean"!==typeof e},l=(0,o.Z)((function(e){return c(e)?e:e.replace(i,"-$&").toLowerCase()})),g=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===a.Z[e]||c(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=d(e,t,n[a])+";";else for(var o in n){var i=n[o];if("object"!==typeof i)null!=t&&void 0!==t[i]?r+=o+"{"+t[i]+"}":u(i)&&(r+=l(o)+":"+g(o,i)+";");else if(!Array.isArray(i)||"string"!==typeof i[0]||null!=t&&void 0!==t[i[0]]){var s=d(e,t,i);switch(o){case"animation":case"animationName":r+=l(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var c=0;c<i.length;c++)u(i[c])&&(r+=l(o)+":"+g(o,i[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=p,o=n(e);return p=a,d(e,t,o)}}if(null==t)return n;var i=t[n];return void 0!==i?i:n}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,o="";p=void 0;var i=e[0];null==i||void 0===i.raw?(a=!1,o+=d(n,t,i)):o+=i[0];for(var s=1;s<e.length;s++)o+=d(n,t,e[s]),a&&(o+=i[s]);h.lastIndex=0;for(var c,u="";null!==(c=h.exec(o));)u+="-"+c[1];return{name:r(o)+u,styles:o,next:p}}},3840:function(e,t){"use strict";t.Z={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},5438:function(e,t,n){"use strict";n.d(t,{fp:function(){return r},My:function(){return o},hC:function(){return a}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var a=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){a(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}}},9451:function(e,t,n){"use strict";var r=n(5318),a=n(8);var o=r(n(7757)),i=r(n(3038)),s=r(n(2205)),c=r(n(8585)),u=r(n(9754)),l=r(n(4559)),g=r(n(4575)),d=r(n(3913)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n(9810));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var I=function(){function e(){(0,g.default)(this,e),this.NEW_OD_OUTPUT_TENSORS=["detected_boxes","detected_scores","detected_classes"]}return(0,d.default)(e,[{key:"loadModelAsync",value:function(){var e=(0,l.default)(o.default.mark((function e(t){var n,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,e.next=3,p.loadGraphModel(t,n);case 3:this.model=e.sent,this.input_size=this.model.inputs[0].shape[1],this.is_new_od_model=3==this.model.outputs.length,this.is_rgb_input=this.model.metadata&&"Rgb8"==this.model.metadata["Image.BitmapPixelFormat"]||this.is_new_od_model;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.model.dispose()}},{key:"executeAsync",value:function(){var e=(0,l.default)(o.default.mark((function e(t){var n,r,a,i=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.tidy((function(){return t instanceof p.Tensor?t:i._preprocess(p.browser.fromPixels(t,3))})),e.next=3,this.model.executeAsync(n,this.is_new_od_model?this.NEW_OD_OUTPUT_TENSORS:null);case 3:return r=e.sent,p.dispose(n),e.next=7,Array.isArray(r)?Promise.all(r.map((function(e){return e.array()}))):r.array();case 7:return a=e.sent,p.dispose(r),e.abrupt("return",this._postprocess(a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_postprocess",value:function(){var e=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e;return(0,g.default)(this,n),(e=t.call(this)).ANCHORS=[.573,.677,1.87,2.06,3.34,5.47,7.88,3.53,9.77,9.17],e}return(0,d.default)(n,[{key:"_preprocess",value:function(e){var t=p.image.resizeBilinear(e.expandDims().toFloat(),[this.input_size,this.input_size]);return this.is_rgb_input?t:t.reverse(-1)}},{key:"_postprocess",value:function(){var e=(0,l.default)(o.default.mark((function e(t){var n,r,a,s,c,u,l,g,d=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3!=t.length){e.next=2;break}return e.abrupt("return",t);case 2:return n=p.tidy((function(){for(var e=d.ANCHORS.length/2,n=t[0][0][0].length,r=t[0].length,a=t[0][0].length,o=n/e-5,i=[],s=[],c=[],u=0;u<r;u++)for(var l=0;l<a;l++)for(var g=0,h=0;h<e;h++){var f=(d._logistic(t[0][u][l][g++])+l)/a,I=(d._logistic(t[0][u][l][g++])+u)/r,C=Math.exp(t[0][u][l][g++])*d.ANCHORS[2*h]/a,m=Math.exp(t[0][u][l][g++])*d.ANCHORS[2*h+1]/r,v=p.scalar(d._logistic(t[0][u][l][g++])),b=p.tensor1d(t[0][u][l].slice(g,g+o)).softmax();g+=o;var A=(b=b.mul(v)).argMax();i.push([f-C/2,I-m/2,f+C/2,I+m/2]),s.push(b.max().dataSync()[0]),c.push(A.dataSync()[0])}return[i=p.tensor2d(i),s=p.tensor1d(s),c=p.tensor1d(c)]})),r=(0,i.default)(n,3),a=r[0],s=r[1],c=r[2],e.next=5,p.image.nonMaxSuppressionAsync(a,s,10);case 5:return u=e.sent,l=[a.gather(u),s.gather(u),c.gather(u)],e.next=9,l[0].array();case 9:return e.t0=e.sent,e.next=12,l[1].array();case 12:return e.t1=e.sent,e.next=15,l[2].array();case 15:return e.t2=e.sent,g=[e.t0,e.t1,e.t2],p.dispose([a,s,c]),p.dispose(u),p.dispose(l),e.abrupt("return",g);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_logistic",value:function(e){if(e>0)return 1/(1+Math.exp(-e));var t=Math.exp(e);return t/(1+t)}}]),n}(I);var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){return(0,g.default)(this,n),t.apply(this,arguments)}return(0,d.default)(n,[{key:"_preprocess",value:function(e){var t=e.shape.slice(0,2),n=(0,i.default)(t,2),r=n[0],a=n[1],o=r>a?(r-a)/2:0,s=r>a?0:(a-r)/2,c=Math.min(r,a),u=p.image.cropAndResize(e.expandDims().toFloat(),[[o/r,s/a,(o+c)/r,(s+c)/a]],[0],[this.input_size,this.input_size]);return this.is_rgb_input?u:u.reverse(-1)}}]),n}(I)},7829:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},767:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(a){r[a]=e[a].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},5159:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7829),a={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function o(e,t){return a[t]||"".concat(r.Z.generate(e),"-").concat(t)}},208:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5159);function a(e,t){var n={};return t.forEach((function(t){n[t]=(0,r.Z)(e,t)})),n}},5403:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),o=n(184),i=(0,a.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=i},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(4454)},6532:function(e,t){"use strict";var n=60103,r=60106,a=60107,o=60108,i=60114,s=60109,c=60110,u=60112,l=60113,g=60120,d=60115,p=60116,h=60121,f=60122,I=60117,C=60129,m=60131;if("function"===typeof Symbol&&Symbol.for){var v=Symbol.for;n=v("react.element"),r=v("react.portal"),a=v("react.fragment"),o=v("react.strict_mode"),i=v("react.profiler"),s=v("react.provider"),c=v("react.context"),u=v("react.forward_ref"),l=v("react.suspense"),g=v("react.suspense_list"),d=v("react.memo"),p=v("react.lazy"),h=v("react.block"),f=v("react.server.block"),I=v("react.fundamental"),C=v("react.debug_trace_mode"),m=v("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case i:case o:case l:case g:return e;default:switch(e=e&&e.$$typeof){case c:case u:case p:case d:case s:return e;default:return t}}case r:return t}}}},8457:function(e,t,n){"use strict";n(6532)},4591:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y}});var r=n(7462),a=n(3366),o=n(2466),i=n(5080),s=n(4942);function c(e,t,n){var a;return(0,r.Z)({toolbar:(a={minHeight:56},(0,s.Z)(a,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,s.Z)(a,e.up("sm"),{minHeight:64}),a)},n)}var u=n(6189),l=n(2065),g={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},h={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},f={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},I={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},C={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},m={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},v=["mode","contrastThreshold","tonalOffset"],b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:g.white,default:g.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},A={text:{primary:g.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:g.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y(e,t,n,r){var a=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,l.$n)(e.main,a):"dark"===t&&(e.dark=(0,l._j)(e.main,o)))}function k(e){var t=e.mode,n=void 0===t?"light":t,i=e.contrastThreshold,s=void 0===i?3:i,c=e.tonalOffset,k=void 0===c?.2:c,Z=(0,a.Z)(e,v),S=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:I[200],light:I[50],dark:I[400]}:{main:I[700],light:I[400],dark:I[800]}}(n),w=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(n),B=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:h[500],light:h[300],dark:h[700]}:{main:h[700],light:h[400],dark:h[800]}}(n),G=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:C[400],light:C[300],dark:C[700]}:{main:C[700],light:C[500],dark:C[900]}}(n),x=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:m[800],light:m[500],dark:m[900]}}(n),R=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[400],light:f[300],dark:f[700]}:{main:"#ed6c02",light:f[500],dark:f[900]}}(n);function W(e){return(0,l.mi)(e,A.text.primary)>=s?A.text.primary:b.text.primary}var V=function(e){var t=e.color,n=e.name,a=e.mainShade,o=void 0===a?500:a,i=e.lightShade,s=void 0===i?300:i,c=e.darkShade,l=void 0===c?700:c;if(!(t=(0,r.Z)({},t)).main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,u.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof t.main)throw new Error((0,u.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return y(t,"light",s,k),y(t,"dark",l,k),t.contrastText||(t.contrastText=W(t.main)),t},N={dark:A,light:b};return(0,o.Z)((0,r.Z)({common:g,mode:n,primary:V({color:S,name:"primary"}),secondary:V({color:w,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:V({color:B,name:"error"}),warning:V({color:R,name:"warning"}),info:V({color:G,name:"info"}),success:V({color:x,name:"success"}),grey:d,contrastThreshold:s,getContrastText:W,augmentColor:V,tonalOffset:k},N[n]),Z)}var Z=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var S={textTransform:"uppercase"},w='"Roboto", "Helvetica", "Arial", sans-serif';function B(e,t){var n="function"===typeof t?t(e):t,i=n.fontFamily,s=void 0===i?w:i,c=n.fontSize,u=void 0===c?14:c,l=n.fontWeightLight,g=void 0===l?300:l,d=n.fontWeightRegular,p=void 0===d?400:d,h=n.fontWeightMedium,f=void 0===h?500:h,I=n.fontWeightBold,C=void 0===I?700:I,m=n.htmlFontSize,v=void 0===m?16:m,b=n.allVariants,A=n.pxToRem,y=(0,a.Z)(n,Z);var k=u/14,B=A||function(e){return"".concat(e/v*k,"rem")},G=function(e,t,n,a,o){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:B(t),lineHeight:n},s===w?{letterSpacing:"".concat((i=a/t,Math.round(1e5*i)/1e5),"em")}:{},o,b);var i},x={h1:G(g,96,1.167,-1.5),h2:G(g,60,1.2,-.5),h3:G(p,48,1.167,0),h4:G(p,34,1.235,.25),h5:G(p,24,1.334,0),h6:G(f,20,1.6,.15),subtitle1:G(p,16,1.75,.15),subtitle2:G(f,14,1.57,.1),body1:G(p,16,1.5,.15),body2:G(p,14,1.43,.15),button:G(f,14,1.75,.4,S),caption:G(p,12,1.66,.4),overline:G(p,12,2.66,1,S)};return(0,o.Z)((0,r.Z)({htmlFontSize:v,pxToRem:B,fontFamily:s,fontSize:u,fontWeightLight:g,fontWeightRegular:p,fontWeightMedium:f,fontWeightBold:C},x),y,{clone:!1})}function G(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var x=["none",G(0,2,1,-1,0,1,1,0,0,1,3,0),G(0,3,1,-2,0,2,2,0,0,1,5,0),G(0,3,3,-2,0,3,4,0,0,1,8,0),G(0,2,4,-1,0,4,5,0,0,1,10,0),G(0,3,5,-1,0,5,8,0,0,1,14,0),G(0,3,5,-1,0,6,10,0,0,1,18,0),G(0,4,5,-2,0,7,10,1,0,2,16,1),G(0,5,5,-3,0,8,10,1,0,3,14,2),G(0,5,6,-3,0,9,12,1,0,3,16,2),G(0,6,6,-3,0,10,14,1,0,4,18,3),G(0,6,7,-4,0,11,15,1,0,4,20,3),G(0,7,8,-4,0,12,17,2,0,5,22,4),G(0,7,8,-4,0,13,19,2,0,5,24,4),G(0,7,9,-4,0,14,21,2,0,5,26,4),G(0,8,9,-5,0,15,22,2,0,6,28,5),G(0,8,10,-5,0,16,24,2,0,6,30,5),G(0,8,11,-5,0,17,26,2,0,6,32,5),G(0,9,11,-5,0,18,28,2,0,7,34,6),G(0,9,12,-6,0,19,29,2,0,7,36,6),G(0,10,13,-6,0,20,31,3,0,8,38,7),G(0,10,13,-6,0,21,33,3,0,8,40,7),G(0,10,14,-6,0,22,35,3,0,8,42,7),G(0,11,14,-7,0,23,36,3,0,9,44,8),G(0,11,15,-7,0,24,38,3,0,9,46,8)],R=["duration","easing","delay"],W={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},V={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function N(e){return"".concat(Math.round(e),"ms")}function X(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function J(e){var t=(0,r.Z)({},W,e.easing),n=(0,r.Z)({},V,e.duration);return(0,r.Z)({getAutoHeightDuration:X,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,i=void 0===o?n.standard:o,s=r.easing,c=void 0===s?t.easeInOut:s,u=r.delay,l=void 0===u?0:u;(0,a.Z)(r,R);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof i?i:N(i)," ").concat(c," ").concat("string"===typeof l?l:N(l))})).join(",")}},e,{easing:t,duration:n})}var F={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},E=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,s=e.palette,u=void 0===s?{}:s,l=e.transitions,g=void 0===l?{}:l,d=e.typography,p=void 0===d?{}:d,h=(0,a.Z)(e,E),f=k(u),I=(0,i.Z)(e),C=(0,o.Z)(I,{mixins:c(I.breakpoints,I.spacing,n),palette:f,shadows:x.slice(),typography:B(f,p),transitions:J(g),zIndex:(0,r.Z)({},F)});C=(0,o.Z)(C,h);for(var m=arguments.length,v=new Array(m>1?m-1:0),b=1;b<m;b++)v[b-1]=arguments[b];return C=v.reduce((function(e,t){return(0,o.Z)(e,t)}),C)}var Y=T()},9217:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Q},FO:function(){return O},Dz:function(){return U}});var r=n(3433),a=n(9439),o=n(7462),i=n(3366),s=n(2791),c=n.t(s,2),u=n(620),l=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,g=(0,u.Z)((function(e){return l.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),d=n(1688),p=n(5438),h=n(4804),f=g,I=function(e){return"theme"!==e},C=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?f:I},m=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},v=c.useInsertionEffect?c.useInsertionEffect:function(e){e()};var b=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,p.hC)(t,n,r);!function(e){v(e)}((function(){return(0,p.My)(t,n,r)}));return null},A=function e(t,n){var r,a,i=t.__emotion_real===t,c=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,a=n.target);var u=m(t,n,i),l=u||C(c),g=!l("as");return function(){var f=arguments,I=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&I.push("label:"+r+";"),null==f[0]||void 0===f[0].raw)I.push.apply(I,f);else{0,I.push(f[0][0]);for(var v=f.length,A=1;A<v;A++)I.push(f[A],f[0][A])}var y=(0,d.w)((function(e,t,n){var r=g&&e.as||c,o="",i=[],f=e;if(null==e.theme){for(var m in f={},e)f[m]=e[m];f.theme=(0,s.useContext)(d.T)}"string"===typeof e.className?o=(0,p.fp)(t.registered,i,e.className):null!=e.className&&(o=e.className+" ");var v=(0,h.O)(I.concat(i),t.registered,f);o+=t.key+"-"+v.name,void 0!==a&&(o+=" "+a);var A=g&&void 0===u?C(r):l,y={};for(var k in e)g&&"as"===k||A(k)&&(y[k]=e[k]);return y.className=o,y.ref=n,(0,s.createElement)(s.Fragment,null,(0,s.createElement)(b,{cache:t,serialized:v,isStringTag:"string"===typeof r}),(0,s.createElement)(r,y))}));return y.displayName=void 0!==r?r:"Styled("+("string"===typeof c?c:c.displayName||c.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=c,y.__emotion_styles=I,y.__emotion_forwardProp=u,Object.defineProperty(y,"toString",{value:function(){return"."+a}}),y.withComponent=function(t,r){return e(t,(0,o.Z)({},n,r,{shouldForwardProp:m(y,r,!0)})).apply(void 0,I)},y}},y=A.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){y[e]=y(e)}));var k=y;function Z(e,t){return k(e,t)}var S=n(5080),w=n(7312),B=["variant"];function G(e){return 0===e.length}function x(e){var t=e.variant,n=(0,i.Z)(e,B),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?G(r)?e[t]:(0,w.Z)(e[t]):"".concat(G(r)?t:(0,w.Z)(t)).concat((0,w.Z)(e[t].toString()))})),r}var R=n(4942),W=n(8247),V=n(6001),N=n(1184);function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(r);return t.every((function(e){return a.size===Object.keys(e).length}))}function J(e,t){return"function"===typeof e?e(t):e}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V.G$,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var a,o=(a={},(0,R.Z)(a,e,n),(0,R.Z)(a,"theme",r),a),i=t[e];return i?i(o):(0,R.Z)({},e,n)}function r(e){var a=e||{},o=a.sx,i=a.theme,s=void 0===i?{}:i;if(!o)return null;function c(e){var a=e;if("function"===typeof e)a=e(s);else if("object"!==typeof e)return e;if(!a)return null;var o=(0,N.W8)(s.breakpoints),i=Object.keys(o),c=o;return Object.keys(a).forEach((function(e){var o=J(a[e],s);if(null!==o&&void 0!==o)if("object"===typeof o)if(t[e])c=(0,W.Z)(c,n(e,o,s));else{var i=(0,N.k9)({theme:s},o,(function(t){return(0,R.Z)({},e,t)}));X(i,o)?c[e]=r({sx:o,theme:s}):c=(0,W.Z)(c,i)}else c=(0,W.Z)(c,n(e,o,s))})),(0,N.L7)(i,c)}return Array.isArray(o)?o.map(c):c(o)}return r}();F.filterProps=["sx"];var E=F,T=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Y=["theme"],H=["theme"];function M(e){return 0===Object.keys(e).length}var D=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},K=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=x(e.props);r[t]=e.style})),r},z=function(e,t,n,r){var a,o,i=e.ownerState,s=void 0===i?{}:i,c=[],u=null==n||null==(a=n.components)||null==(o=a[r])?void 0:o.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&c.push(t[x(n.props)])})),c};function L(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var P=(0,S.Z)();var _=n(4591),O=function(e){return L(e)&&"classes"!==e},U=L,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?P:t,s=e.rootShouldForwardProp,c=void 0===s?L:s,u=e.slotShouldForwardProp,l=void 0===u?L:u,g=e.styleFunctionSx,d=void 0===g?E:g;return function(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.name,g=s.slot,p=s.skipVariantsResolver,h=s.skipSx,f=s.overridesResolver,I=(0,i.Z)(s,T),C=void 0!==p?p:g&&"Root"!==g||!1,m=h||!1;var v=L;"Root"===g?v=c:g&&(v=l);var b=Z(e,(0,o.Z)({shouldForwardProp:v,label:t},I)),A=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),c=1;c<t;c++)s[c-1]=arguments[c];var l=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,a=(0,i.Z)(t,Y);return e((0,o.Z)({theme:M(r)?n:r},a))}:e})):[],g=e;u&&f&&l.push((function(e){var t=M(e.theme)?n:e.theme,r=D(u,t);if(r){var o={};return Object.entries(r).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];o[r]="function"===typeof i?i(e):i})),f(e,o)}return null})),u&&!C&&l.push((function(e){var t=M(e.theme)?n:e.theme;return z(e,K(u,t),t,u)})),m||l.push((function(e){var t=M(e.theme)?n:e.theme;return d((0,o.Z)({},e,{theme:t}))}));var p=l.length-s.length;if(Array.isArray(e)&&p>0){var h=new Array(p).fill("");(g=[].concat((0,r.Z)(e),(0,r.Z)(h))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(h))}else"function"===typeof e&&e.__emotion_real!==e&&(g=function(t){var r=t.theme,a=(0,i.Z)(t,H);return e((0,o.Z)({theme:M(r)?n:r},a))});var I=b.apply(void 0,[g].concat((0,r.Z)(l)));return I};return b.withConfig&&(A.withConfig=b.withConfig),A}}({defaultTheme:_.Z,rootShouldForwardProp:O}),Q=j},1046:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5735);var a=n(418);function o(e){var t=e.props,n=e.name,o=e.defaultTheme,i=function(e){var t=e.theme,n=e.name,a=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,a):a}({theme:(0,a.Z)(o),name:n,props:t});return i}var i=n(4591);function s(e){return o({props:e.props,name:e.name,defaultTheme:i.Z})}},4036:function(e,t,n){"use strict";var r=n(7312);t.Z=r.Z},9201:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(7462),a=n(2791),o=n(3366),i=n(8182),s=n(767),c=n(4036),u=n(1046),l=n(9217),g=n(5159);function d(e){return(0,g.Z)("MuiSvgIcon",e)}(0,n(208).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(184),h=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],f=(0,l.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,c.Z)(n.color))],t["fontSize".concat((0,c.Z)(n.fontSize))]]}})((function(e){var t,n,r,a,o,i,s,c,u,l,g,d,p,h,f,I,C,m=e.theme,v=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=m.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=m.transitions)||null==(a=r.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(o=m.typography)||null==(i=o.pxToRem)?void 0:i.call(o,20))||"1.25rem",medium:(null==(s=m.typography)||null==(c=s.pxToRem)?void 0:c.call(s,24))||"1.5rem",large:(null==(u=m.typography)||null==(l=u.pxToRem)?void 0:l.call(u,35))||"2.1875"}[v.fontSize],color:null!=(g=null==(d=m.palette)||null==(p=d[v.color])?void 0:p.main)?g:{action:null==(h=m.palette)||null==(f=h.action)?void 0:f.active,disabled:null==(I=m.palette)||null==(C=I.action)?void 0:C.disabled,inherit:void 0}[v.color]}})),I=a.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiSvgIcon"}),a=n.children,l=n.className,g=n.color,I=void 0===g?"inherit":g,C=n.component,m=void 0===C?"svg":C,v=n.fontSize,b=void 0===v?"medium":v,A=n.htmlColor,y=n.inheritViewBox,k=void 0!==y&&y,Z=n.titleAccess,S=n.viewBox,w=void 0===S?"0 0 24 24":S,B=(0,o.Z)(n,h),G=(0,r.Z)({},n,{color:I,component:m,fontSize:b,instanceFontSize:e.fontSize,inheritViewBox:k,viewBox:w}),x={};k||(x.viewBox=w);var R=function(e){var t=e.color,n=e.fontSize,r=e.classes,a={root:["root","inherit"!==t&&"color".concat((0,c.Z)(t)),"fontSize".concat((0,c.Z)(n))]};return(0,s.Z)(a,d,r)}(G);return(0,p.jsxs)(f,(0,r.Z)({as:m,className:(0,i.Z)(R.root,l),ownerState:G,focusable:"false",color:A,"aria-hidden":!Z||void 0,role:Z?"img":void 0,ref:t},x,B,{children:[a,Z?(0,p.jsx)("title",{children:Z}):null]}))}));I.muiName="SvgIcon";var C=I;function m(e,t){var n=function(n,a){return(0,p.jsx)(C,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:a},n,{children:e}))};return n.muiName=C.muiName,a.memo(a.forwardRef(n))}},3199:function(e,t,n){"use strict";var r=n(3981);t.Z=r.Z},4454:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return i.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return c},isMuiElement:function(){return u.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return g.Z},requirePropFactory:function(){return d},setRef:function(){return p},unstable_ClassNameGenerator:function(){return A},unstable_useEnhancedEffect:function(){return h.Z},unstable_useId:function(){return f},unsupportedProp:function(){return I},useControlled:function(){return C.Z},useEventCallback:function(){return m.Z},useForkRef:function(){return v.Z},useIsFocusVisible:function(){return b.Z}});var r=n(7829),a=n(4036),o=n(8949).Z,i=n(9201),s=n(3199);var c=function(e,t){return function(){return null}},u=n(9103),l=n(8301),g=n(7602);n(7462);var d=function(e,t){return function(){return null}},p=n(2971).Z,h=n(162),f=n(6248).Z;var I=function(e,t,n,r,a){return null},C=n(8278),m=n(9683),v=n(2071),b=n(3031),A={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},9103:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);var a=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},8301:function(e,t,n){"use strict";var r=n(9723);t.Z=r.Z},7602:function(e,t,n){"use strict";var r=n(7979);t.Z=r.Z},8278:function(e,t,n){"use strict";var r=n(8959);t.Z=r.Z},162:function(e,t,n){"use strict";var r=n(5721);t.Z=r.Z},9683:function(e,t,n){"use strict";var r=n(8956);t.Z=r.Z},2071:function(e,t,n){"use strict";var r=n(7563);t.Z=r.Z},3031:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r,a=n(2791),o=!0,i=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function l(){"hidden"===this.visibilityState&&i&&(o=!0)}function g(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var d=function(){var e=a.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=a.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!g(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(i=!0,window.clearTimeout(r),r=window.setTimeout((function(){i=!1}),100),t.current=!1,!0)},ref:e}}},1184:function(e,t,n){"use strict";n.d(t,{VO:function(){return r},k9:function(){return o},W8:function(){return i},L7:function(){return s}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,n){var o=e.theme||{};if(Array.isArray(t)){var i=o.breakpoints||a;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var s=o.breakpoints||a;return Object.keys(t).reduce((function(e,a){if(-1!==Object.keys(s.values||r).indexOf(a)){e[s.up(a)]=n(t[a],a)}else{var o=a;e[o]=t[o]}return e}),{})}return n(t)}function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},2065:function(e,t,n){"use strict";n.d(t,{mi:function(){return c},Fq:function(){return u},_j:function(){return l},$n:function(){return g}});var r=n(6189);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var a,i=e.substring(t+1,e.length-1);if("color"===n){if(a=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a))throw new Error((0,r.Z)(10,a))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:a}}function i(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=o(e)).type?o(function(e){var t=(e=o(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,s=r*Math.min(a,1-a),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-s*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",l=[Math.round(255*c(0)),Math.round(255*c(8)),Math.round(255*c(4))];return"hsla"===e.type&&(u+="a",l.push(t[3])),i({type:u,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e,t){return e=o(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,i(e)}function l(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return i(e)}function g(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return i(e)}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7462),a=n(3366),o=n(2466),i=n(4942),s=["values","unit","step"];function c(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,o=e.unit,c=void 0===o?"px":o,u=e.step,l=void 0===u?5:u,g=(0,a.Z)(e,s),d=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,i.Z)({},t.key,t.val))}),{})}(n),p=Object.keys(d);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(c,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(c,")")}function I(e,t){var r=p.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(c,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:t)-l/100).concat(c,")")}return(0,r.Z)({keys:p,values:d,up:h,down:f,between:I,only:function(e){return p.indexOf(e)+1<p.length?I(e,p[p.indexOf(e)+1]):h(e)},not:function(e){var t=p.indexOf(e);return 0===t?h(p[1]):t===p.length-1?f(p[t]):I(e,p[p.indexOf(e)+1]).replace("@media","@media not all and")},unit:c},g)}var u={borderRadius:4},l=n(5682);function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=0===n.length?[1]:n;return a.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var d=["breakpoints","palette","spacing","shape"];var p=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,i=e.palette,s=void 0===i?{}:i,l=e.spacing,p=e.shape,h=void 0===p?{}:p,f=(0,a.Z)(e,d),I=c(n),C=g(l),m=(0,o.Z)({breakpoints:I,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:C,shape:(0,r.Z)({},u,h)},f),v=arguments.length,b=new Array(v>1?v-1:0),A=1;A<v;A++)b[A-1]=arguments[A];return m=b.reduce((function(e,t){return(0,o.Z)(e,t)}),m)}},6001:function(e,t,n){"use strict";n.d(t,{Gc:function(){return U},G$:function(){return O}});var r=n(8529),a=n(8247);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),o=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,a.Z)(t,r[n](e)):t}),{})};return o.propTypes={},o.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),o},i=n(5682),s=n(1184);function c(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var u=(0,r.Z)({prop:"border",themeKey:"borders",transform:c}),l=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:c}),g=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:c}),d=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:c}),p=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:c}),h=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),f=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),I=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),C=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),v=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,i.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,i.NA)(t,e)}}))}return null};v.propTypes={},v.filterProps=["borderRadius"];var b=o(u,l,g,d,p,h,f,I,C,m,v),A=o((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"})),y=o((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"})),k=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,i.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,i.NA)(t,e)}}))}return null};k.propTypes={},k.filterProps=["gap"];var Z=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,i.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,i.NA)(t,e)}}))}return null};Z.propTypes={},Z.filterProps=["columnGap"];var S=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,i.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,i.NA)(t,e)}}))}return null};S.propTypes={},S.filterProps=["rowGap"];var w=o(k,Z,S,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"})),B=o((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"})),G=o((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"})),x=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function R(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var W=(0,r.Z)({prop:"width",transform:R}),V=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,a;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(a=r.values)?void 0:a[t])||s.VO[t]||R(t)}}))}return null};V.filterProps=["maxWidth"];var N=(0,r.Z)({prop:"minWidth",transform:R}),X=(0,r.Z)({prop:"height",transform:R}),J=(0,r.Z)({prop:"maxHeight",transform:R}),F=(0,r.Z)({prop:"minHeight",transform:R}),E=((0,r.Z)({prop:"size",cssProperty:"width",transform:R}),(0,r.Z)({prop:"size",cssProperty:"height",transform:R}),o(W,V,N,X,J,F,(0,r.Z)({prop:"boxSizing"}))),T=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),Y=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),H=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),M=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),D=(0,r.Z)({prop:"letterSpacing"}),K=(0,r.Z)({prop:"textTransform"}),z=(0,r.Z)({prop:"lineHeight"}),L=(0,r.Z)({prop:"textAlign"}),P=o((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),T,Y,H,M,D,z,L,K),_={borders:b.filterProps,display:A.filterProps,flexbox:y.filterProps,grid:w.filterProps,positions:B.filterProps,palette:G.filterProps,shadows:x.filterProps,sizing:E.filterProps,spacing:i.ZP.filterProps,typography:P.filterProps},O={borders:b,display:A,flexbox:y,grid:w,positions:B,palette:G,shadows:x,sizing:E,spacing:i.ZP,typography:P},U=Object.keys(_).reduce((function(e,t){return _[t].forEach((function(n){e[n]=O[t]})),e}),{})},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return f},eI:function(){return h},ZP:function(){return y},NA:function(){return I}});var r=n(9439),a=n(1184),o=n(8529),i=n(8247);var s={m:"margin",p:"padding"},c={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!u[e])return[e];e=u[e]}var t=e.split(""),n=(0,r.Z)(t,2),a=n[0],o=n[1],i=s[a],l=c[o]||"";return Array.isArray(l)?l.map((function(e){return i+e})):[i+l]})),g=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(g,d);function h(e,t,n,r){var a=(0,o.D)(e,t)||n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function f(e){return h(e,"spacing",8)}function I(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function C(e,t,n,r){if(-1===t.indexOf(n))return null;var o=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=I(t,n),e}),{})}}(l(n),r),i=e[n];return(0,a.k9)(e,i,o)}function m(e,t){var n=f(e.theme);return Object.keys(e).map((function(r){return C(e,t,r,n)})).reduce(i.Z,{})}function v(e){return m(e,g)}function b(e){return m(e,d)}function A(e){return m(e,p)}v.propTypes={},v.filterProps=g,b.propTypes={},b.filterProps=d,A.propTypes={},A.filterProps=p;var y=A},8529:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});var r=n(4942),a=n(7312),o=n(1184);function i(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}function s(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||a:i(e,n)||a,t&&(r=t(r)),r}t.Z=function(e){var t=e.prop,n=e.cssProperty,c=void 0===n?e.prop:n,u=e.themeKey,l=e.transform,g=function(e){if(null==e[t])return null;var n=e[t],g=i(e.theme,u)||{};return(0,o.k9)(e,n,(function(e){var n=s(g,l,e);return e===n&&"string"===typeof e&&(n=s(g,l,"".concat(t).concat("default"===e?"":(0,a.Z)(e)),e)),!1===c?n:(0,r.Z)({},c,n)}))};return g.propTypes={},g.filterProps=[t],g}},418:function(e,t,n){"use strict";var r=n(5080),a=n(7301),o=(0,r.Z)();t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,a.Z)(e)}},7301:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(2791);var a=r.createContext(null);function o(){return r.useContext(a)}function i(e){return 0===Object.keys(e).length}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o();return!t||i(t)?e:t}},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6189);function a(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},8949:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},3981:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];var s=function(){e.apply(r,o)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},2466:function(e,t,n){"use strict";n.d(t,{P:function(){return a},Z:function(){return o}});var r=n(7462);function a(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?(0,r.Z)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(a(t[r])&&r in e&&a(e[r])?i[r]=o(e[r],t[r],n):i[r]=t[r])})),i}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},9723:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},7979:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9723);function a(e){return(0,r.Z)(e).defaultView||window}},5735:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7462);function a(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},8959:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9439),a=n(2791);function o(e){var t=e.controlled,n=e.default,o=(e.name,e.state,a.useRef(void 0!==t).current),i=a.useState(n),s=(0,r.Z)(i,2),c=s[0],u=s[1];return[o?t:c,a.useCallback((function(e){o||u(e)}),[])]}},5721:function(e,t,n){"use strict";var r=n(2791),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=a},8956:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),a=n(5721);function o(e){var t=r.useRef(e);return(0,a.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},7563:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),a=n(2971);function o(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,a.Z)(e,n),(0,a.Z)(t,n)}}),[e,t])}},6248:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return c}});var a=n(9439),o=n(2791),i=0;var s=(r||(r=n.t(o,2))).useId;function c(e){if(void 0!==s){var t=s();return null!=e?e:t}return function(e){var t=o.useState(e),n=(0,a.Z)(t,2),r=n[0],s=n[1],c=e||r;return o.useEffect((function(){null==r&&s("mui-".concat(i+=1))}),[r]),c}(e)}},9810:function(e,t,n){"use strict";n.r(t),n.d(t,{Abs:function(){return it},Acos:function(){return st},Acosh:function(){return ct},AdadeltaOptimizer:function(){return lu},AdagradOptimizer:function(){return du},AdamOptimizer:function(){return fu},AdamaxOptimizer:function(){return mu},Add:function(){return ut},AddN:function(){return lt},All:function(){return gt},Any:function(){return dt},ArgMax:function(){return pt},ArgMin:function(){return ht},Asin:function(){return ft},Asinh:function(){return It},Atan:function(){return Ct},Atan2:function(){return vt},Atanh:function(){return mt},AvgPool:function(){return bt},AvgPool3D:function(){return yt},AvgPool3DGrad:function(){return kt},AvgPoolGrad:function(){return At},BatchMatMul:function(){return Zt},BatchToSpaceND:function(){return St},Bincount:function(){return wt},BroadcastArgs:function(){return Gt},BroadcastTo:function(){return Bt},Callback:function(){return bS},CallbackList:function(){return Yv},Cast:function(){return xt},Ceil:function(){return Rt},ClipByValue:function(){return Wt},Complex:function(){return Vt},ComplexAbs:function(){return Nt},Concat:function(){return Xt},Conv2D:function(){return Jt},Conv2DBackpropFilter:function(){return Ft},Conv2DBackpropInput:function(){return Et},Conv3D:function(){return Tt},Conv3DBackpropFilterV2:function(){return Yt},Conv3DBackpropInputV2:function(){return Ht},Cos:function(){return Mt},Cosh:function(){return Dt},CropAndResize:function(){return Lt},Cumprod:function(){return Kt},Cumsum:function(){return zt},CustomCallback:function(){return Dv},DataStorage:function(){return $},DenseBincount:function(){return Pt},DepthToSpace:function(){return _t},DepthwiseConv2dNative:function(){return Ot},DepthwiseConv2dNativeBackpropFilter:function(){return Ut},DepthwiseConv2dNativeBackpropInput:function(){return jt},Diag:function(){return Qt},Dilation2D:function(){return qt},Dilation2DBackpropFilter:function(){return en},Dilation2DBackpropInput:function(){return $t},ENV:function(){return rt},EarlyStopping:function(){return kS},Einsum:function(){return nn},Elu:function(){return rn},EluGrad:function(){return an},Environment:function(){return qe},Equal:function(){return sn},Erf:function(){return on},Exp:function(){return cn},ExpandDims:function(){return un},Expm1:function(){return ln},FFT:function(){return gn},Fill:function(){return dn},FlipLeftRight:function(){return pn},Floor:function(){return hn},FloorDiv:function(){return fn},FromPixels:function(){return ca},FusedBatchNorm:function(){return In},FusedConv2D:function(){return ga},FusedDepthwiseConv2D:function(){return da},GatherNd:function(){return mn},GatherV2:function(){return Cn},GraphModel:function(){return Ow},Greater:function(){return vn},GreaterEqual:function(){return bn},History:function(){return Mv},IFFT:function(){return yn},Identity:function(){return An},Imag:function(){return kn},InputSpec:function(){return Sv},IsFinite:function(){return Zn},IsInf:function(){return Sn},IsNan:function(){return wn},KernelBackend:function(){return ee},LRN:function(){return En},LRNGrad:function(){return Tn},LayerVariable:function(){return yv},LayersModel:function(){return CA},LeakyRelu:function(){return Bn},Less:function(){return Gn},LessEqual:function(){return xn},LinSpace:function(){return Rn},Log:function(){return Wn},Log1p:function(){return Vn},LogSoftmax:function(){return Fn},LogicalAnd:function(){return Nn},LogicalNot:function(){return Xn},LogicalOr:function(){return Jn},Max:function(){return Yn},MaxPool:function(){return Mn},MaxPool3D:function(){return Kn},MaxPool3DGrad:function(){return zn},MaxPoolGrad:function(){return Dn},MaxPoolWithArgmax:function(){return Ln},Maximum:function(){return Hn},Mean:function(){return Pn},Min:function(){return _n},Minimum:function(){return On},MirrorPad:function(){return Un},Mod:function(){return jn},MomentumOptimizer:function(){return bu},Multinomial:function(){return Qn},Multiply:function(){return qn},Neg:function(){return $n},NonMaxSuppressionV3:function(){return tr},NonMaxSuppressionV4:function(){return nr},NonMaxSuppressionV5:function(){return rr},NotEqual:function(){return er},OP_SCOPE_SUFFIX:function(){return Uo},OneHot:function(){return or},OnesLike:function(){return ar},Optimizer:function(){return uu},OptimizerConstructors:function(){return yu},Pack:function(){return ir},PadV2:function(){return sr},Pool:function(){return cr},Pow:function(){return ur},Prelu:function(){return lr},Prod:function(){return gr},RMSPropOptimizer:function(){return Au},RNN:function(){return Wy},Range:function(){return dr},Rank:function(){return mo},Real:function(){return pr},RealDiv:function(){return tn},Reciprocal:function(){return hr},Reduction:function(){return dh},Relu:function(){return fr},Relu6:function(){return Ar},Reshape:function(){return Ir},ResizeBilinear:function(){return vr},ResizeBilinearGrad:function(){return br},ResizeNearestNeighbor:function(){return Cr},ResizeNearestNeighborGrad:function(){return mr},Reverse:function(){return yr},RotateWithOffset:function(){return ua},Round:function(){return kr},Rsqrt:function(){return Zr},SGDOptimizer:function(){return vu},ScatterNd:function(){return Sr},Select:function(){return wr},Selu:function(){return Br},Sequential:function(){return SA},Sigmoid:function(){return Vr},Sign:function(){return Wr},Sin:function(){return xr},Sinh:function(){return Rr},Slice:function(){return Gr},Softmax:function(){return Tr},Softplus:function(){return Nr},SpaceToBatchND:function(){return Fr},SparseFillEmptyRows:function(){return Yr},SparseReshape:function(){return Hr},SparseSegmentMean:function(){return Mr},SparseSegmentSum:function(){return Dr},SparseToDense:function(){return Kr},SplitV:function(){return Er},Sqrt:function(){return Xr},Square:function(){return Lr},SquaredDifference:function(){return zr},Step:function(){return sa},StridedSlice:function(){return Pr},StringNGrams:function(){return _r},StringSplit:function(){return Or},StringToHashBucketFast:function(){return Ur},Sub:function(){return jr},Sum:function(){return Jr},SymbolicTensor:function(){return wv},Tan:function(){return Qr},Tanh:function(){return qr},Tensor:function(){return Io},TensorBuffer:function(){return po},Tile:function(){return $r},TopK:function(){return ea},Transform:function(){return ta},Transpose:function(){return na},Unique:function(){return ra},Unpack:function(){return aa},UnsortedSegmentSum:function(){return oa},Variable:function(){return ko},ZerosLike:function(){return ia},_FusedMatMul:function(){return la},abs:function(){return Iu},acos:function(){return ku},acosh:function(){return Zu},add:function(){return Oc},addN:function(){return Su},all:function(){return wu},any:function(){return Bu},argMax:function(){return Gu},argMin:function(){return xu},asin:function(){return Ru},asinh:function(){return Wu},atan:function(){return Vu},atan2:function(){return Nu},atanh:function(){return Xu},avgPool:function(){return qu},avgPool3d:function(){return $u},backend:function(){return Pc},backend_util:function(){return C},basicLSTMCell:function(){return al},batchNorm:function(){return il},batchNorm2d:function(){return sl},batchNorm3d:function(){return cl},batchNorm4d:function(){return ul},batchToSpaceND:function(){return ol},bincount:function(){return ll},booleanMaskAsync:function(){return rp},broadcastArgs:function(){return gl},broadcastTo:function(){return dl},broadcast_util:function(){return c},browser:function(){return u},buffer:function(){return os},callbacks:function(){return wS},cast:function(){return is},ceil:function(){return pl},clipByValue:function(){return hl},clone:function(){return ss},complex:function(){return Qo},concat:function(){return el},concat1d:function(){return fl},concat2d:function(){return Il},concat3d:function(){return Cl},concat4d:function(){return ml},constraints:function(){return v},conv1d:function(){return bl},conv2d:function(){return vl},conv2dTranspose:function(){return yl},conv3d:function(){return kl},conv3dTranspose:function(){return Sl},copyRegisteredKernels:function(){return Za},cos:function(){return wl},cosh:function(){return Bl},cosineWindow:function(){return pp},cumprod:function(){return Gl},cumsum:function(){return xl},customGrad:function(){return iu},data:function(){return L},denseBincount:function(){return Rl},deprecationWarn:function(){return Rc},depthToSpace:function(){return Wl},depthwiseConv2d:function(){return Vl},deregisterOp:function(){return RS},device_util:function(){return o},diag:function(){return Nl},dilation2d:function(){return Xl},disableDeprecationWarnings:function(){return xc},dispose:function(){return Fc},disposeVariables:function(){return Wc},div:function(){return jc},divNoNan:function(){return El},dot:function(){return Tl},dropout:function(){return gp},einsum:function(){return Yl},elu:function(){return Hl},enableDebugMode:function(){return Gc},enableProdMode:function(){return Bc},enclosingPowerOfTwo:function(){return dp},engine:function(){return Vc},env:function(){return tt},equal:function(){return Jl},erf:function(){return Ml},exp:function(){return Dl},expandDims:function(){return Kl},expm1:function(){return zl},eye:function(){return Pl},fft:function(){return Wd},fill:function(){return gu},findBackend:function(){return Kc},findBackendFactory:function(){return zc},floor:function(){return _l},floorDiv:function(){return Uc},fused:function(){return f},gather:function(){return Ol},gatherND:function(){return lp},gather_util:function(){return l},getBackend:function(){return Mc},getGradient:function(){return ma},getKernel:function(){return Ca},getKernelsForBackend:function(){return va},grad:function(){return tu},grads:function(){return nu},greater:function(){return Ul},greaterEqual:function(){return jl},ifft:function(){return Vd},imag:function(){return Ql},image:function(){return Xh},inTopKAsync:function(){return fp},initializers:function(){return b},input:function(){return xA},io:function(){return i},irfft:function(){return Nd},isFinite:function(){return ql},isInf:function(){return $l},isNaN:function(){return eg},keep:function(){return Ec},kernel_impls:function(){return m},layers:function(){return A},leakyRelu:function(){return tg},less:function(){return ng},lessEqual:function(){return rg},linalg:function(){return Jh},linspace:function(){return ag},loadGraphModel:function(){return Uw},loadLayersModel:function(){return GA},localResponseNormalization:function(){return og},log:function(){return ig},log1p:function(){return sg},logSigmoid:function(){return lg},logSoftmax:function(){return pg},logSumExp:function(){return yg},logicalAnd:function(){return kg},logicalNot:function(){return Zg},logicalOr:function(){return Sg},logicalXor:function(){return wg},losses:function(){return Fh},matMul:function(){return xs},math:function(){return s},max:function(){return gg},maxPool:function(){return Bg},maxPool3d:function(){return Gg},maxPoolWithArgmax:function(){return xg},maximum:function(){return Cu},mean:function(){return Rg},memory:function(){return Nc},meshgrid:function(){return Ng},metrics:function(){return y},min:function(){return Xg},minimum:function(){return Jg},mirrorPad:function(){return Fg},mod:function(){return Eg},model:function(){return wA},models:function(){return k},moments:function(){return Tg},movingAverage:function(){return ip},mul:function(){return Qc},multiRNNCell:function(){return Yg},multinomial:function(){return Hg},neg:function(){return cg},nextFrame:function(){return Mh},norm:function(){return op},notEqual:function(){return Mg},oneHot:function(){return Rs},ones:function(){return Vg},onesLike:function(){return Dg},op:function(){return jo},outerProduct:function(){return Kg},pad:function(){return zg},pad1d:function(){return Lg},pad2d:function(){return Pg},pad3d:function(){return _g},pad4d:function(){return Og},pool:function(){return jg},pow:function(){return pu},prelu:function(){return Qg},print:function(){return cs},prod:function(){return qg},profile:function(){return Xc},rand:function(){return $g},randomGamma:function(){return ad},randomNormal:function(){return od},randomUniform:function(){return id},range:function(){return sd},ready:function(){return Hc},real:function(){return cd},reciprocal:function(){return ud},registerBackend:function(){return Lc},registerCallbackConstructor:function(){return RA},registerGradient:function(){return Aa},registerKernel:function(){return ba},registerOp:function(){return GS},regularizers:function(){return Z},relu:function(){return ld},relu6:function(){return gd},removeBackend:function(){return Dc},reshape:function(){return Qu},reverse:function(){return dd},reverse1d:function(){return pd},reverse2d:function(){return hd},reverse3d:function(){return fd},reverse4d:function(){return Id},rfft:function(){return Jd},round:function(){return Cd},rsqrt:function(){return md},scalar:function(){return cu},scatterND:function(){return sp},scatter_util:function(){return g},selu:function(){return vd},separableConv2d:function(){return bd},sequential:function(){return BA},serialization:function(){return p},setBackend:function(){return Yc},setPlatform:function(){return _c},setdiff1dAsync:function(){return yd},sigmoid:function(){return tl},sign:function(){return kd},signal:function(){return Nh},sin:function(){return Zd},sinh:function(){return Sd},slice:function(){return nl},slice1d:function(){return wd},slice2d:function(){return Bd},slice3d:function(){return Gd},slice4d:function(){return xd},slice_util:function(){return d},softmax:function(){return Rd},softplus:function(){return ug},spaceToBatchND:function(){return Ug},sparse:function(){return Eh},sparseToDense:function(){return up},spectral:function(){return Vh},split:function(){return Xd},sqrt:function(){return qc},square:function(){return $c},squaredDifference:function(){return Fd},squeeze:function(){return Ed},stack:function(){return Td},step:function(){return Yd},stridedSlice:function(){return Hd},string:function(){return Th},sub:function(){return hu},sum:function(){return dg},sumOutType:function(){return wo},tan:function(){return Md},tanh:function(){return rl},tensor:function(){return $o},tensor1d:function(){return Dd},tensor2d:function(){return Kd},tensor3d:function(){return Es},tensor4d:function(){return zd},tensor5d:function(){return Ld},tensor6d:function(){return Pd},tensor_util:function(){return a},test_util:function(){return h},tidy:function(){return Jc},tile:function(){return Ll},time:function(){return Tc},topk:function(){return _d},train:function(){return Yh},transpose:function(){return Ws},truncatedNormal:function(){return Od},unique:function(){return Ud},unregisterGradient:function(){return ka},unregisterKernel:function(){return ya},unsortedSegmentSum:function(){return jd},unstack:function(){return Qd},upcastType:function(){return So},util:function(){return r},valueAndGrad:function(){return ru},valueAndGrads:function(){return au},variable:function(){return qd},variableGrads:function(){return ou},version:function(){return qK},version_converter:function(){return Qw},version_core:function(){return wc},version_layers:function(){return Wb},where:function(){return Fl},whereAsync:function(){return tp},zeros:function(){return Wg},zerosLike:function(){return eu}});var r={};n.r(r),n.d(r,{arraysEqual:function(){return Ce},assert:function(){return ge},assertNonNegativeIntegerDimensions:function(){return _e},assertNonNull:function(){return pe},assertShapesMatch:function(){return de},bytesFromStringArray:function(){return Xe},bytesPerElement:function(){return Ne},checkConversionForErrors:function(){return xe},clamp:function(){return oe},computeStrides:function(){return Me},createScalarValue:function(){return Ka},createShuffledIndices:function(){return Ae},decodeString:function(){return Oa},distSquared:function(){return le},encodeString:function(){return _a},fetch:function(){return Pa},fingerPrint64:function(){return Da},flatten:function(){return he},getArrayFromDType:function(){return Ge},getTypedArrayFromDType:function(){return Be},hasEncodingLoss:function(){return We},hexToLong:function(){return Ga},indexToLoc:function(){return Ue},inferDtype:function(){return Te},inferFromImplicitShape:function(){return Ze},isBoolean:function(){return Fe},isFunction:function(){return Ye},isInt:function(){return me},isNumber:function(){return Ee},isPromise:function(){return je},isScalarShape:function(){return Ie},isString:function(){return Je},isTypedArray:function(){return Ve},isValidDtype:function(){return Re},locToIndex:function(){return Oe},makeOnesTypedArray:function(){return ze},makeZerosNestedTypedArray:function(){return Pe},makeZerosTypedArray:function(){return Le},nearestDivisor:function(){return He},nearestLargerEven:function(){return ie},now:function(){return La},parseAxisParam:function(){return Se},randUniform:function(){return ue},repeatedTry:function(){return ke},rightPad:function(){return ye},shuffle:function(){return re},shuffleCombo:function(){return ae},sizeFromShape:function(){return fe},sizeToSquarishShape:function(){return be},squeezeShape:function(){return we},sum:function(){return ce},swap:function(){return se},tanh:function(){return ve},toNestedArray:function(){return Ke},toTypedArray:function(){return za}});var a={};n.r(a),n.d(a,{assertTypesMatch:function(){return Go},getTensorsInContainer:function(){return Ro},isTensorInList:function(){return xo},makeTypesMatch:function(){return Bo}});var o={};n.r(o),n.d(o,{isBrowser:function(){return Do},isMobile:function(){return Mo},mockIsMobile:function(){return Ho}});var i={};n.r(i),n.d(i,{browserFiles:function(){return ds},browserHTTPRequest:function(){return Zs},concatenateArrayBuffers:function(){return ui},copyModel:function(){return Qi},decodeWeights:function(){return ri},encodeWeights:function(){return ti},fromMemory:function(){return Bs},getLoadHandlers:function(){return bi},getModelArtifactsForJSON:function(){return di},getModelArtifactsInfoForJSON:function(){return hi},getSaveHandlers:function(){return vi},http:function(){return ks},isHTTPScheme:function(){return As},listModels:function(){return _i},loadWeights:function(){return Is},moveModel:function(){return $i},registerLoadRouter:function(){return mi},registerSaveRouter:function(){return Ci},removeModel:function(){return Ui},weightsLoaderFactory:function(){return ms},withSaveHandler:function(){return Gs}});var s={};n.r(s),n.d(s,{confusionMatrix:function(){return Ns}});var c={};n.r(c),n.d(c,{assertAndGetBroadcastShape:function(){return Fs},getBroadcastDims:function(){return Xs},getReductionAxes:function(){return Js}});var u={};n.r(u),n.d(u,{fromPixels:function(){return zs},fromPixelsAsync:function(){return Hs},toPixels:function(){return Ds}});var l={};n.r(l),n.d(l,{prepareAndValidate:function(){return Ls}});var g={};n.r(g),n.d(g,{calculateShapes:function(){return Os},validateInput:function(){return _s},validateUpdateShape:function(){return Ps}});var d={};n.r(d),n.d(d,{assertParamsValid:function(){return Us},computeFlatOffset:function(){return cc},computeOutShape:function(){return Qs},getNormalizedAxes:function(){return tc},isSliceContinous:function(){return sc},maskToAxes:function(){return js},parseSliceParams:function(){return uc},sliceInfo:function(){return lc},startForAxis:function(){return oc},startIndicesWithElidedDims:function(){return nc},stopForAxis:function(){return ic},stopIndicesWithElidedDims:function(){return rc},stridesForAxis:function(){return ac},stridesWithElidedDims:function(){return qs}});var p={};n.r(p),n.d(p,{Serializable:function(){return dc},SerializationMap:function(){return pc},registerClass:function(){return hc}});var h={};n.r(h),n.d(h,{TEST_EPSILON_FLOAT16:function(){return fc},encodeStrings:function(){return Sc},expectArrayBuffersEqual:function(){return Zc},expectArraysClose:function(){return Ic},expectArraysEqual:function(){return bc},expectNumbersClose:function(){return Ac},expectPromiseToFail:function(){return vc},expectValuesInRange:function(){return kc},testEpsilon:function(){return Cc}});var f={};n.r(f),n.d(f,{conv2d:function(){return Ap},depthwiseConv2d:function(){return Zp},matMul:function(){return Sp}});var I={};n.r(I),n.d(I,{collectGatherOpShapeInfo:function(){return Tf},computeOutShape:function(){return Ef},segOpComputeOptimalWindowSize:function(){return Ff}});var C={};n.r(C),n.d(C,{ERF_A1:function(){return tf},ERF_A2:function(){return nf},ERF_A3:function(){return rf},ERF_A4:function(){return af},ERF_A5:function(){return of},ERF_P:function(){return ef},PARALLELIZE_THRESHOLD:function(){return zh},SELU_SCALE:function(){return $h},SELU_SCALEALPHA:function(){return qh},applyActivation:function(){return vp},assertAndGetBroadcastShape:function(){return Fs},assertAxesAreInnerMostDims:function(){return mg},assertParamsConsistent:function(){return Dh},assignToTypedArray:function(){return df},axesAreInnerMostDims:function(){return hg},calculateShapes:function(){return Os},checkEinsumDimSizes:function(){return vf},checkPadOnDimRoundingMode:function(){return ju},combineLocations:function(){return fg},complexWithEvenIndex:function(){return uf},complexWithOddIndex:function(){return lf},computeConv2DInfo:function(){return Tu},computeConv3DInfo:function(){return Yu},computeDefaultPad:function(){return Hu},computeDilation2DInfo:function(){return Ju},computeOptimalWindowSize:function(){return Lh},computeOutAndReduceShapes:function(){return Ig},computeOutShape:function(){return Kh},computePool2DInfo:function(){return Fu},computePool3DInfo:function(){return Eu},convertConv2DDataFormat:function(){return Uu},decodeEinsumEquation:function(){return Cf},eitherStridesOrDilationsAreOne:function(){return Ou},expandShapeToKeepDim:function(){return Cg},exponent:function(){return hf},exponents:function(){return pf},fromStringArrayToUint8:function(){return Hf},fromUint8ToStringArray:function(){return Yf},getAxesPermutation:function(){return vg},getBroadcastDims:function(){return Xs},getComplexWithIndex:function(){return gf},getEinsumComputePath:function(){return bf},getEinsumPermutation:function(){return mf},getFusedBiasGradient:function(){return mp},getFusedDyActivation:function(){return Cp},getImageCenter:function(){return Ph},getInnerMostAxes:function(){return Ag},getPermuted:function(){return Oh},getReductionAxes:function(){return Js},getReshaped:function(){return _h},getReshapedPermuted:function(){return Uh},getSliceBeginCoords:function(){return jh},getSliceSize:function(){return Qh},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return Zf},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return Sf},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return wf},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return xf},getSparseReshapeInputOutputMismatchErrorMessage:function(){return Wf},getSparseReshapeInputOutputMultipleErrorMessage:function(){return Rf},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return Bf},getSparseReshapeNegativeOutputDimErrorMessage:function(){return Gf},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return Jf},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return Vf},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return Nf},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return Xf},getUndoAxesPermutation:function(){return bg},isIdentityPermutation:function(){return Af},log:function(){return ha},mergeRealAndImagArrays:function(){return sf},prepareAndValidate:function(){return Ls},prepareSplitSize:function(){return kf},segment_util:function(){return I},shouldFuse:function(){return bp},slice_util:function(){return d},splitRealAndImagArrays:function(){return cf},tupleValuesAreOne:function(){return _u},upcastType:function(){return So},validateInput:function(){return _s},validateUpdateShape:function(){return Ps},warn:function(){return pa}});var m={};n.r(m),n.d(m,{nonMaxSuppressionV3Impl:function(){return Tp},nonMaxSuppressionV4Impl:function(){return Yp},nonMaxSuppressionV5Impl:function(){return Hp},whereImpl:function(){return $d}});var v={};n.r(v),n.d(v,{maxNorm:function(){return DC},minMaxNorm:function(){return LC},nonNeg:function(){return zC},unitNorm:function(){return KC}});var b={};n.r(b),n.d(b,{constant:function(){return $m},glorotNormal:function(){return iv},glorotUniform:function(){return ov},heNormal:function(){return sv},heUniform:function(){return cv},identity:function(){return rv},leCunNormal:function(){return uv},leCunUniform:function(){return lv},ones:function(){return qm},orthogonal:function(){return gv},randomNormal:function(){return tv},randomUniform:function(){return ev},truncatedNormal:function(){return nv},varianceScaling:function(){return av},zeros:function(){return Qm}});var A={};n.r(A),n.d(A,{Layer:function(){return Rv},RNN:function(){return Wy},RNNCell:function(){return Vy},activation:function(){return tZ},add:function(){return lZ},alphaDropout:function(){return eS},average:function(){return gZ},averagePooling1d:function(){return bZ},averagePooling2d:function(){return kZ},averagePooling3d:function(){return wZ},avgPool1d:function(){return AZ},avgPool2d:function(){return ZZ},avgPool3d:function(){return BZ},avgPooling1d:function(){return yZ},avgPooling2d:function(){return SZ},avgPooling3d:function(){return GZ},batchNormalization:function(){return CZ},bidirectional:function(){return PZ},concatenate:function(){return dZ},conv1d:function(){return Pk},conv2d:function(){return _k},conv2dTranspose:function(){return Ok},conv3d:function(){return Uk},conv3dTranspose:function(){return jk},convLstm2d:function(){return DZ},convLstm2dCell:function(){return KZ},cropping2D:function(){return qk},dense:function(){return nZ},depthwiseConv2d:function(){return eZ},dot:function(){return IZ},dropout:function(){return rZ},elu:function(){return Hk},embedding:function(){return uZ},flatten:function(){return oZ},gaussianDropout:function(){return $Z},gaussianNoise:function(){return qZ},globalAveragePooling1d:function(){return xZ},globalAveragePooling2d:function(){return RZ},globalMaxPool1d:function(){return OZ},globalMaxPool2d:function(){return UZ},globalMaxPooling1d:function(){return WZ},globalMaxPooling2d:function(){return VZ},gru:function(){return FZ},gruCell:function(){return EZ},input:function(){return xA},inputLayer:function(){return Yk},layerNormalization:function(){return mZ},leakyReLU:function(){return Dk},lstm:function(){return TZ},lstmCell:function(){return YZ},masking:function(){return tS},maxPool1d:function(){return jZ},maxPool2d:function(){return QZ},maxPooling1d:function(){return NZ},maxPooling2d:function(){return XZ},maxPooling3d:function(){return JZ},maximum:function(){return pZ},minimum:function(){return hZ},multiply:function(){return fZ},permute:function(){return cZ},prelu:function(){return Kk},reLU:function(){return Mk},repeatVector:function(){return iZ},reshape:function(){return sZ},rnn:function(){return zZ},separableConv2d:function(){return Qk},simpleRNN:function(){return HZ},simpleRNNCell:function(){return MZ},softmax:function(){return zk},spatialDropout1d:function(){return aZ},stackedRNNCells:function(){return LZ},thresholdedReLU:function(){return Lk},timeDistributed:function(){return _Z},upSampling2d:function(){return $k},zeroPadding2d:function(){return vZ}});var y={};n.r(y),n.d(y,{MAPE:function(){return dS},MSE:function(){return fS},binaryAccuracy:function(){return nS},binaryCrossentropy:function(){return rS},categoricalAccuracy:function(){return oS},categoricalCrossentropy:function(){return iS},cosineProximity:function(){return uS},mape:function(){return pS},meanAbsoluteError:function(){return lS},meanAbsolutePercentageError:function(){return gS},meanSquaredError:function(){return hS},mse:function(){return IS},precision:function(){return sS},recall:function(){return cS},sparseCategoricalAccuracy:function(){return aS}});var k={};n.r(k),n.d(k,{modelFromJSON:function(){return vA}});var Z={};n.r(Z),n.d(Z,{l1:function(){return mS},l1l2:function(){return CS},l2:function(){return vS}});var S={};n.r(S),n.d(S,{json:function(){return TS}});var w={};n.r(w),n.d(w,{json:function(){return YS}});var B={};n.r(B),n.d(B,{json:function(){return HS}});var G={};n.r(G),n.d(G,{json:function(){return MS}});var x={};n.r(x),n.d(x,{json:function(){return DS}});var R={};n.r(R),n.d(R,{json:function(){return KS}});var W={};n.r(W),n.d(W,{json:function(){return zS}});var V={};n.r(V),n.d(V,{json:function(){return LS}});var N={};n.r(N),n.d(N,{json:function(){return PS}});var X={};n.r(X),n.d(X,{json:function(){return _S}});var J={};n.r(J),n.d(J,{json:function(){return OS}});var F={};n.r(F),n.d(F,{json:function(){return US}});var E={};n.r(E),n.d(E,{json:function(){return jS}});var T={};n.r(T),n.d(T,{json:function(){return QS}});var Y={};n.r(Y),n.d(Y,{json:function(){return qS}});var H={};n.r(H),n.d(H,{json:function(){return $S}});var M={};n.r(M),n.d(M,{json:function(){return ew}});var D={};n.r(D),n.d(D,{json:function(){return tw}});var K={};n.r(K),n.d(K,{json:function(){return nw}});var z={};n.r(z),n.d(z,{OP_SCOPE_SUFFIX:function(){return Uo},abs:function(){return Iu},acos:function(){return ku},acosh:function(){return Zu},add:function(){return Oc},addN:function(){return Su},all:function(){return wu},any:function(){return Bu},argMax:function(){return Gu},argMin:function(){return xu},asin:function(){return Ru},asinh:function(){return Wu},atan:function(){return Vu},atan2:function(){return Nu},atanh:function(){return Xu},avgPool:function(){return qu},avgPool3d:function(){return $u},basicLSTMCell:function(){return al},batchNorm:function(){return il},batchNorm2d:function(){return sl},batchNorm3d:function(){return cl},batchNorm4d:function(){return ul},batchToSpaceND:function(){return ol},bincount:function(){return ll},booleanMaskAsync:function(){return rp},broadcastArgs:function(){return gl},broadcastTo:function(){return dl},buffer:function(){return os},cast:function(){return is},ceil:function(){return pl},clipByValue:function(){return hl},clone:function(){return ss},complex:function(){return Qo},concat:function(){return el},concat1d:function(){return fl},concat2d:function(){return Il},concat3d:function(){return Cl},concat4d:function(){return ml},conv1d:function(){return bl},conv2d:function(){return vl},conv2dTranspose:function(){return yl},conv3d:function(){return kl},conv3dTranspose:function(){return Sl},cos:function(){return wl},cosh:function(){return Bl},cosineWindow:function(){return pp},cumprod:function(){return Gl},cumsum:function(){return xl},denseBincount:function(){return Rl},depthToSpace:function(){return Wl},depthwiseConv2d:function(){return Vl},diag:function(){return Nl},dilation2d:function(){return Xl},div:function(){return jc},divNoNan:function(){return El},dot:function(){return Tl},dropout:function(){return gp},einsum:function(){return Yl},elu:function(){return Hl},enclosingPowerOfTwo:function(){return dp},equal:function(){return Jl},erf:function(){return Ml},exp:function(){return Dl},expandDims:function(){return Kl},expm1:function(){return zl},eye:function(){return Pl},fft:function(){return Wd},fill:function(){return gu},floor:function(){return _l},floorDiv:function(){return Uc},fused:function(){return f},gather:function(){return Ol},gatherND:function(){return lp},greater:function(){return Ul},greaterEqual:function(){return jl},ifft:function(){return Vd},imag:function(){return Ql},image:function(){return Xh},inTopKAsync:function(){return fp},irfft:function(){return Nd},isFinite:function(){return ql},isInf:function(){return $l},isNaN:function(){return eg},leakyRelu:function(){return tg},less:function(){return ng},lessEqual:function(){return rg},linalg:function(){return Jh},linspace:function(){return ag},localResponseNormalization:function(){return og},log:function(){return ig},log1p:function(){return sg},logSigmoid:function(){return lg},logSoftmax:function(){return pg},logSumExp:function(){return yg},logicalAnd:function(){return kg},logicalNot:function(){return Zg},logicalOr:function(){return Sg},logicalXor:function(){return wg},losses:function(){return Fh},matMul:function(){return xs},max:function(){return gg},maxPool:function(){return Bg},maxPool3d:function(){return Gg},maxPoolWithArgmax:function(){return xg},maximum:function(){return Cu},mean:function(){return Rg},meshgrid:function(){return Ng},min:function(){return Xg},minimum:function(){return Jg},mirrorPad:function(){return Fg},mod:function(){return Eg},moments:function(){return Tg},movingAverage:function(){return ip},mul:function(){return Qc},multiRNNCell:function(){return Yg},multinomial:function(){return Hg},neg:function(){return cg},norm:function(){return op},notEqual:function(){return Mg},oneHot:function(){return Rs},ones:function(){return Vg},onesLike:function(){return Dg},op:function(){return jo},outerProduct:function(){return Kg},pad:function(){return zg},pad1d:function(){return Lg},pad2d:function(){return Pg},pad3d:function(){return _g},pad4d:function(){return Og},pool:function(){return jg},pow:function(){return pu},prelu:function(){return Qg},print:function(){return cs},prod:function(){return qg},rand:function(){return $g},randomGamma:function(){return ad},randomNormal:function(){return od},randomUniform:function(){return id},range:function(){return sd},real:function(){return cd},reciprocal:function(){return ud},relu:function(){return ld},relu6:function(){return gd},reshape:function(){return Qu},reverse:function(){return dd},reverse1d:function(){return pd},reverse2d:function(){return hd},reverse3d:function(){return fd},reverse4d:function(){return Id},rfft:function(){return Jd},round:function(){return Cd},rsqrt:function(){return md},scalar:function(){return cu},scatterND:function(){return sp},selu:function(){return vd},separableConv2d:function(){return bd},setdiff1dAsync:function(){return yd},sigmoid:function(){return tl},sign:function(){return kd},signal:function(){return Nh},sin:function(){return Zd},sinh:function(){return Sd},slice:function(){return nl},slice1d:function(){return wd},slice2d:function(){return Bd},slice3d:function(){return Gd},slice4d:function(){return xd},softmax:function(){return Rd},softplus:function(){return ug},spaceToBatchND:function(){return Ug},sparse:function(){return Eh},sparseToDense:function(){return up},spectral:function(){return Vh},split:function(){return Xd},sqrt:function(){return qc},square:function(){return $c},squaredDifference:function(){return Fd},squeeze:function(){return Ed},stack:function(){return Td},step:function(){return Yd},stridedSlice:function(){return Hd},string:function(){return Th},sub:function(){return hu},sum:function(){return dg},tan:function(){return Md},tanh:function(){return rl},tensor:function(){return $o},tensor1d:function(){return Dd},tensor2d:function(){return Kd},tensor3d:function(){return Es},tensor4d:function(){return zd},tensor5d:function(){return Ld},tensor6d:function(){return Pd},tile:function(){return Ll},topk:function(){return _d},transpose:function(){return Ws},truncatedNormal:function(){return Od},unique:function(){return Ud},unsortedSegmentSum:function(){return jd},unstack:function(){return Qd},variable:function(){return qd},where:function(){return Fl},whereAsync:function(){return tp},zeros:function(){return Wg},zerosLike:function(){return eu}});var L={};n.r(L),n.d(L,{CSVDataset:function(){return KB},Dataset:function(){return WB},FileDataSource:function(){return aG},TextLineDataset:function(){return FB},URLDataSource:function(){return oG},array:function(){return NB},csv:function(){return iG},func:function(){return sG},generator:function(){return cG},microphone:function(){return gG},version_data:function(){return pG},webcam:function(){return uG},zip:function(){return XB}});var P=n(7762),_=n(3433),O=n(5861),U=n(5671),j=n(3144),Q=n(7757),q=n.n(Q),$=function(){function e(t,n){(0,U.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,j.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),ee=function(){function e(){(0,U.Z)(this,e)}return(0,j.Z)(e,[{key:"refCount",value:function(e){return te("refCount")}},{key:"incRef",value:function(e){return te("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return te("time")}},{key:"read",value:function(e){return te("read")}},{key:"readSync",value:function(e){return te("readSync")}},{key:"readToGPU",value:function(e,t){return te("readToGPU")}},{key:"numDataIds",value:function(){return te("numDataIds")}},{key:"disposeData",value:function(e,t){return te("disposeData")}},{key:"write",value:function(e,t,n){return te("write")}},{key:"move",value:function(e,t,n,r,a){return te("move")}},{key:"memory",value:function(){return te("memory")}},{key:"floatPrecision",value:function(){return te("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return te("dispose")}}]),e}();function te(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}var ne=n(9439);function re(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,se(e,--t,n)}function ae(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,se(e,--n,r),se(t,n,r)}function oe(e,t,n){return Math.max(e,Math.min(t,n))}function ie(e){return e%2===0?e:e+1}function se(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ce(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function ue(e,t){var n=Math.random();return t*n+(1-n)*e}function le(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function ge(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function de(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";ge(Ce(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function pe(e){ge(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Ve(e)&&!n)for(var r=0;r<e.length;++r)he(e[r],t,n);else t.push(e);return t}function fe(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Ie(e){return 0===e.length}function Ce(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function me(e){return e%1===0}function ve(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function be(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Ae(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return re(t),t}function ye(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var o=0;!function i(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?a():setTimeout(i,s)}}()}))}function Ze(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function Se(e,t){var n=t.length;return ge((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),ge(e.every((function(e){return me(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function we(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:Se(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Be(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Ge(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function xe(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function Re(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function We(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Ve(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Ne(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Xe(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function Je(e){return"string"===typeof e||e instanceof String}function Fe(e){return"boolean"===typeof e}function Ee(e){return"number"===typeof e}function Te(e){return Array.isArray(e)?Te(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Ee(e)?"float32":Je(e)?"string":Fe(e)?"bool":"float32"}function Ye(e){return!!(e&&e.constructor&&e.call&&e.apply)}function He(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Me(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function De(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var s=t[0],c=t.slice(1),u=c.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=De(e+l*u,c,n,r);return a}function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return De(0,e,t,n)}function ze(e,t){for(var n=Le(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Le(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Pe(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Ke(e,new Float32Array(n));if("int32"===t)return Ke(e,new Int32Array(n));if("bool"===t)return Ke(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function _e(e){e.forEach((function(t){ge(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function Oe(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Ue(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function je(e){return e&&e.then&&"function"===typeof e.then}var Qe="tfjsflags",qe=function(){function e(t){(0,U.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=$e,this.populateURLFlags()}return(0,j.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(tt().getBool("IS_TEST")||tt().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];tt().getBool("IS_TEST")||tt().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(je(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(Qe in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=(0,ne.Z)(n,2),a=r[0],o=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,o)}))}}}]),e}();function $e(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return et(t,r[0],r[1]),r.join("=")})),t}function et(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function tt(){return rt}var nt,rt=null;function at(){if(null==nt){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}nt=e}return nt}function ot(e,t){var n=function(){var e=at();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var it="Abs",st="Acos",ct="Acosh",ut="Add",lt="AddN",gt="All",dt="Any",pt="ArgMax",ht="ArgMin",ft="Asin",It="Asinh",Ct="Atan",mt="Atanh",vt="Atan2",bt="AvgPool",At="AvgPoolGrad",yt="AvgPool3D",kt="AvgPool3DGrad",Zt="BatchMatMul",St="BatchToSpaceND",wt="Bincount",Bt="BroadcastTo",Gt="BroadcastArgs",xt="Cast",Rt="Ceil",Wt="ClipByValue",Vt="Complex",Nt="ComplexAbs",Xt="Concat",Jt="Conv2D",Ft="Conv2DBackpropFilter",Et="Conv2DBackpropInput",Tt="Conv3D",Yt="Conv3DBackpropFilterV2",Ht="Conv3DBackpropInputV2",Mt="Cos",Dt="Cosh",Kt="Cumprod",zt="Cumsum",Lt="CropAndResize",Pt="DenseBincount",_t="DepthToSpace",Ot="DepthwiseConv2dNative",Ut="DepthwiseConv2dNativeBackpropFilter",jt="DepthwiseConv2dNativeBackpropInput",Qt="Diag",qt="Dilation2D",$t="Dilation2DBackpropInput",en="Dilation2DBackpropFilter",tn="RealDiv",nn="Einsum",rn="Elu",an="EluGrad",on="Erf",sn="Equal",cn="Exp",un="ExpandDims",ln="Expm1",gn="FFT",dn="Fill",pn="FlipLeftRight",hn="Floor",fn="FloorDiv",In="FusedBatchNorm",Cn="GatherV2",mn="GatherNd",vn="Greater",bn="GreaterEqual",An="Identity",yn="IFFT",kn="Imag",Zn="IsFinite",Sn="IsInf",wn="IsNan",Bn="LeakyRelu",Gn="Less",xn="LessEqual",Rn="LinSpace",Wn="Log",Vn="Log1p",Nn="LogicalAnd",Xn="LogicalNot",Jn="LogicalOr",Fn="LogSoftmax",En="LRN",Tn="LRNGrad",Yn="Max",Hn="Maximum",Mn="MaxPool",Dn="MaxPoolGrad",Kn="MaxPool3D",zn="MaxPool3DGrad",Ln="MaxPoolWithArgmax",Pn="Mean",_n="Min",On="Minimum",Un="MirrorPad",jn="Mod",Qn="Multinomial",qn="Multiply",$n="Neg",er="NotEqual",tr="NonMaxSuppressionV3",nr="NonMaxSuppressionV4",rr="NonMaxSuppressionV5",ar="OnesLike",or="OneHot",ir="Pack",sr="PadV2",cr="Pool",ur="Pow",lr="Prelu",gr="Prod",dr="Range",pr="Real",hr="Reciprocal",fr="Relu",Ir="Reshape",Cr="ResizeNearestNeighbor",mr="ResizeNearestNeighborGrad",vr="ResizeBilinear",br="ResizeBilinearGrad",Ar="Relu6",yr="Reverse",kr="Round",Zr="Rsqrt",Sr="ScatterNd",wr="Select",Br="Selu",Gr="Slice",xr="Sin",Rr="Sinh",Wr="Sign",Vr="Sigmoid",Nr="Softplus",Xr="Sqrt",Jr="Sum",Fr="SpaceToBatchND",Er="SplitV",Tr="Softmax",Yr="SparseFillEmptyRows",Hr="SparseReshape",Mr="SparseSegmentMean",Dr="SparseSegmentSum",Kr="SparseToDense",zr="SquaredDifference",Lr="Square",Pr="StridedSlice",_r="StringNGrams",Or="StringSplit",Ur="StringToHashBucketFast",jr="Sub",Qr="Tan",qr="Tanh",$r="Tile",ea="TopK",ta="Transform",na="Transpose",ra="Unique",aa="Unpack",oa="UnsortedSegmentSum",ia="ZerosLike",sa="Step",ca="FromPixels",ua="RotateWithOffset",la="_FusedMatMul",ga="FusedConv2D",da="FusedDepthwiseConv2D";function pa(){var e;tt().getBool("IS_TEST")||tt().getBool("PROD")||(e=console).warn.apply(e,arguments)}function ha(){var e;tt().getBool("IS_TEST")||tt().getBool("PROD")||(e=console).log.apply(e,arguments)}var fa=ot("kernelRegistry",(function(){return new Map})),Ia=ot("gradRegistry",(function(){return new Map}));function Ca(e,t){var n=Sa(e,t);return fa.get(n)}function ma(e){return Ia.get(e)}function va(e){for(var t=fa.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=(0,ne.Z)(o,2),s=i[0],c=i[1],u=s.split("_");(0,ne.Z)(u,1)[0]===e&&n.push(c)}return n}function ba(e){var t=e.kernelName,n=e.backendName,r=Sa(t,n);fa.has(r)&&pa("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),fa.set(r,e)}function Aa(e){var t=e.kernelName;Ia.has(t)&&tt().getBool("DEBUG")&&pa("Overriding the gradient for '".concat(t,"'")),Ia.set(t,e)}function ya(e,t){var n=Sa(e,t);if(!fa.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));fa.delete(n)}function ka(e){if(!Ia.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));Ia.delete(e)}function Za(e,t){va(e).forEach((function(e){ba(Object.assign({},e,{backendName:t}))}))}function Sa(e,t){return"".concat(t,"_").concat(e)}var wa=n(8987),Ba=n.n(wa)()||wa;function Ga(e){return Ba.fromString(e,!0,16)}var xa=Ga("c3a5c85c97cb3127"),Ra=Ga("b492b66fbe98f273"),Wa=Ga("9ae16a3b2f90404f");function Va(e){return e.xor(e.shru(47))}function Na(e,t,n){var r=e.slice(t,t+n);return Ba.fromBytes(Array.from(r),!0,!0)}function Xa(e,t){return Na(e,t,8)}function Ja(e,t){return Na(e,t,4)}function Fa(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ga("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function Ta(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=Fa(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(Fa(a,44)),[a.add(r),o.add(i)]}(Xa(e,t),Xa(e,t+8),Xa(e,t+16),Xa(e,t+24),n,r)}function Ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Wa.add(2*t),r=Xa(e,0).add(Wa),a=Xa(e,t-8),o=Fa(a,37).mul(n).add(r),i=Fa(r,25).add(a).mul(n);return Ea(o,i,n)}if(t>=4){var s=Wa.add(2*t),c=Ja(e,0);return Ea(c.shl(3).add(t),Ja(e,t-4),s)}if(t>0){var u=e[0],l=e[t>>1],g=e[t-1],d=u+(l<<8),p=t+(g<<2);return Va(Wa.mul(d).xor(xa.mul(p))).mul(Wa)}return Wa}function Ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Wa.add(2*t),r=Xa(e,0).mul(Ra),a=Xa(e,8),o=Xa(e,t-8).mul(n),i=Xa(e,t-16).mul(Wa);return Ea(Fa(r.add(a),43).add(Fa(o,30)).add(i),r.add(Fa(a.add(Wa),18)).add(o),n)}function Ma(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Wa.add(2*t),r=Xa(e,0).mul(Wa),a=Xa(e,8),o=Xa(e,t-8).mul(n),i=Xa(e,t-16).mul(Wa),s=Fa(r.add(a),43).add(Fa(o,30)).add(i),c=Ea(s,r.add(Fa(a.add(Wa),18)).add(o),n),u=Xa(e,16).mul(n),l=Xa(e,24),g=s.add(Xa(e,t-32)).mul(n),d=c.add(Xa(e,t-24)).mul(n);return Ea(Fa(u.add(l),43).add(Fa(g,30)).add(d),u.add(Fa(l.add(r),18)).add(g),n)}function Da(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Ba.fromNumber(81,!0);if(t<=32)return t<=16?Ya(e,t):Ha(e,t);if(t<=64)return Ma(e,t);var r=n,a=n.mul(Ra).add(113),o=Va(a.mul(Wa).add(113)).mul(Wa),i=[Ba.UZERO,Ba.UZERO],s=[Ba.UZERO,Ba.UZERO];r=r.mul(Wa).add(Xa(e,0));var c=0,u=64*(t-1>>6),l=u+(t-1&63)-63;do{r=Fa(r.add(a).add(i[0]).add(Xa(e,c+8)),37).mul(Ra),a=Fa(a.add(i[1]).add(Xa(e,c+48)),42).mul(Ra),r=r.xor(s[1]),a=a.add(i[0]).add(Xa(e,c+40)),o=Fa(o.add(s[0]),33).mul(Ra),i=Ta(e,c,i[1].mul(Ra),r.add(s[0])),s=Ta(e,c+32,o.add(s[1]),a.add(Xa(e,c+16)));var g=[r,o];o=g[0],r=g[1],c+=64}while(c!==u);var d=Ra.add(o.and(255).shl(1));c=l,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),r=Fa(r.add(a).add(i[0]).add(Xa(e,c+8)),37).mul(d),a=Fa(a.add(i[1]).add(Xa(e,c+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(i[0].mul(9).add(Xa(e,c+40))),o=Fa(o.add(s[0]),33).mul(d),i=Ta(e,c,i[1].mul(d),r.add(s[0])),s=Ta(e,c+32,o.add(s[1]),a.add(Xa(e,c+16)));var p=[r,o];return o=p[0],r=p[1],Ea(Ea(i[0],s[0],d).add(Va(a).mul(xa)).add(o),Ea(i[1],s[1],d).add(r),d)}function Ka(e,t){return"string"===t?_a(e):za([e],t)}function za(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=he(e)),tt().getBool("DEBUG")&&xe(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function La(){return tt().platform.now()}function Pa(e,t){return tt().platform.fetch(e,t)}function _a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",tt().platform.encode(e,t)}function Oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",tt().platform.decode(e,t)}var Ua=function(){function e(t,n){(0,U.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new ja)}return(0,j.Z)(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=La();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var s,c=(0,P.Z)(r);try{for(c.s();!(s=c.n()).done;){s.value.dataSync()}}catch(g){c.e(g)}finally{c.f()}a=Promise.resolve({kernelMs:La()-i})}if(tt().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var u=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)u(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();var ja=function(){function e(){(0,U.Z)(this,e)}return(0,j.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"===typeof r?ye("".concat(r,"ms"),9):r.error,s=ye(e,25),c=t.rank,u=t.size,l=ye(t.shape.toString(),14),g="";for(var d in a){var p=a[d];if(null!=p){var h=p.shape||t.shape,f=h.length;g+="".concat(d,": ").concat(f,"D ").concat(f>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(c,"D ").concat(l,"\t%c").concat(u,"\t%c").concat(g,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Qa(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],c=s.inputs;for(var u in c){for(var l=c[u],g=!1,d=0;d<t.length;d++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),g=!0,a[s.id]=!0;break}if(g)break}}var p={};p[n.id]=!0;for(var h={},f=e.length-1;f>=0;f--)for(var I=e[f],C=I.inputs,m=0;m<I.outputs.length;m++)if(p[I.outputs[m].id]){for(var v in C)p[C[v].id]=!0,h[I.id]=!0;break}for(var b=[],A=0;A<e.length;A++){var y=e[A];if(a[y.id]&&h[y.id]){var k={};for(var Z in y.inputs){var S=y.inputs[Z];r[S.id]&&(k[Z]=S)}var w=Object.assign({},y);w.inputs=k,w.outputs=y.outputs,b.push(w)}}return b}function qa(e,t,n,r){for(var a=function(a){var o=t[a],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));var s=o.gradient(i),c=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var i=o.inputs[t];if(!Ce(a.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=a;else{var c=e[i.id];e[i.id]=r(c,a),c.dispose()}};for(var u in o.inputs)c(u)},o=t.length-1;o>=0;o--)a(o)}var $a=n(9611);function eo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,$a.Z)(e,t)}function to(e){return to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},to(e)}function no(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ro=n(7478),ao=n(7326);function oo(e,t){if(t&&("object"===(0,ro.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,ao.Z)(e)}function io(e){var t=no();return function(){var n,r=to(e);if(t){var a=to(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oo(this,n)}}function so(e,t,n,r){var a=Me(t),o=function(e,t,n,r){var a=fe(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,c="complex64"===n?go(e):e;if(s>1)for(var u=0;u<a/o;u++)for(var l=u*o,g=0;g<o;g++)i[g]=Math.max(i[g],co(c[l+g],0,n).length);return i}(e,t,n,a),i=t.length,s=lo(e,t,n,a,o),c=["Tensor"];return r&&(c.push("  dtype: ".concat(n)),c.push("  rank: ".concat(i)),c.push("  shape: [".concat(t,"]")),c.push("  values:")),c.push(s.map((function(e){return"    "+e})).join("\n")),c.join("\n")}function co(e,t,n){return ye(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):Je(e)?"'".concat(e,"'"):"bool"===n?uo(e):parseFloat(e.toFixed(7)).toString(),t)}function uo(e){return 0===e?"false":"true"}function lo(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],c=t.length;if(0===c){if("complex64"===n){var u=go(e);return[co(u[0],0,n)]}return"bool"===n?[uo(e[0])]:[e[0].toString()]}if(1===c){if(s>20){var l=3*i,g=Array.from(e.slice(0,l)),d=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(g=go(g),d=go(d)),["["+g.map((function(e,t){return co(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return co(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?go(e):Array.from(e);return["["+p.map((function(e,t){return co(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),f=r.slice(1),I=r[0]*i,C=[];if(s>20){for(var m=0;m<3;m++){var v=m*I,b=v+I;C.push.apply(C,(0,_.Z)(lo(e.slice(v,b),h,n,f,a,!1)))}C.push("...");for(var A=s-3;A<s;A++){var y=A*I,k=y+I;C.push.apply(C,(0,_.Z)(lo(e.slice(y,k),h,n,f,a,A===s-1)))}}else for(var Z=0;Z<s;Z++){var S=Z*I,w=S+I;C.push.apply(C,(0,_.Z)(lo(e.slice(S,w),h,n,f,a,Z===s-1)))}var B=2===c?",":"";C[0]="["+C[0]+B;for(var G=1;G<C.length-1;G++)C[G]=" "+C[G]+B;for(var x=",\n",R=2;R<c;R++)x+="\n";return C[C.length-1]=" "+C[C.length-1]+"]"+(o?"":x),C}function go(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var po=function(){function e(t,n,r){var a=this;if((0,U.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=fe(t),null!=r){var o=r.length;ge(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ge(n,this.size),this.strides=Me(t)}return(0,j.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),ge(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var c=t[t.length-1],u=0;u<t.length-1;++u)c+=this.strides[u]*t[u];return this.values[c]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return ho().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),ho=null,fo=null;var Io=function(){function e(t,n,r,a){(0,U.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=fe(t),this.strides=Me(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,j.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",fo.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return fo.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Ke(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Ke(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=ho().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Oa(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),ho().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=ho().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Oa(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,ho().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(ho().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fo.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),fo.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return so(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),fo.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),ho().makeVariable(this,e,t,n)}}]),e}();function Co(){return ot("Tensor",(function(){return Io}))}Object.defineProperty(Io,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),Co();var mo,vo,bo,Ao,yo,ko=function(e){eo(n,e);var t=io(n);function n(e,r,a,o){var i;return(0,U.Z)(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return(0,j.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Ce(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));ho().disposeTensor(this),this.dataId=e.dataId,ho().incRef(this,null)}},{key:"dispose",value:function(){ho().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Io);Object.defineProperty(ko,Symbol.hasInstance,{value:function(e){return e instanceof Io&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(mo||(mo={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(vo||(vo={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(bo||(bo={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Ao||(Ao={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(yo||(yo={}));var Zo={float32:Ao,int32:vo,bool:bo,complex64:yo};function So(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Zo[e][t]}function wo(e){return So(e,"int32")}function Bo(e,t){if(e.dtype===t.dtype)return[e,t];var n=So(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Go(e,t){ge(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function xo(e,t){return t.some((function(t){return t.id===e.id}))}function Ro(e){var t=[];return Wo(e,t,new Set),t}function Wo(e,t,n){if(null!=e)if(e instanceof Io)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var o in a){var i=a[o];n.has(i)||(n.add(i),Wo(i,t,n))}}}function Vo(e){return null!=e.kernelName}var No=function(){function e(){(0,U.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,j.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Xo=function(){function e(t){(0,U.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new No}return(0,j.Z)(e,[{key:"ready",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(pa("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Ua(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;va(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;va(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof ee||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,pa("Initialization of backend ".concat(e," failed")),pa(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(i){return pa("Initialization of backend ".concat(e," failed")),pa(i.stack||i.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=To.runKernel(An,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return To.runKernel(xt,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=Ca(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,c=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var u=Vo(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Vo(e)){var l=e.kernelName,g=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var p=Ca(l,this.backendName);ge(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:g,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(i){var s=a.getTensorsForGradient(l,g,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,f=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,f)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(u,e,t),t}}var I,C=e.inputs,m=e.attrs,v=Vo(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(I=a.profiler.profileKernel(u,C,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(I),t=I.outputs):t=n()})),i&&this.addTapeNode(u,C,t,v,o,m),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-c,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(C).map((function(e){return null!=C[e]?C[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:I.timeMs,extraInfo:I.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=ma(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(ge(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Je(e[0])&&(a=e.map((function(e){return _a(e)})));var o=r.write(a,t,n),i=new Io(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),c=Xe(a);this.state.numBytes+=c-s.bytes,s.bytes=c}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new Io(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new ko(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ne(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof ko||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Ne(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,_.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=(0,P.Z)(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((o=a.n()).done){e.next=24;break}return i=o.value,e.next=18,i.kernelTimeMs;case 18:return i.kernelTimeMs=e.sent,e.next=21,i.extraInfo;case 21:i.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},c=ma(e);null!=c&&(r=c.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Le(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Ro(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(ge(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));ge(o instanceof Io,(function(){return"The result y returned by f() must be a tensor."}));var i=Qa(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?Jo(o.shape):n,qa(e,i,(function(e){return r.tidy(e)}),Yo);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=(0,P.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return ge(Ye(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;ge(r.every((function(e){return e instanceof Io})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};r.forEach((function(e,t){i[t]=e}));var s=function(t,n){return ge((o=e.apply(void 0,[].concat(r,[n]))).value instanceof Io,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),ge(Ye(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},c=function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];ge(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),ge(a.every((function(e){return e instanceof Io})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i};return t.runKernelFunc({forwardFunc:s,backwardsFunc:c,inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=La(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=La()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new No,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function Jo(e){var t=ze(fe(e),"float32");return To.makeTensor(t,e,"float32")}function Fo(){var e=at();if(null==e._tfengine){var t=new qe(e);e._tfengine=new Xo(t)}return function(e){rt=e}(e._tfengine.ENV),ho=function(){return e._tfengine},e._tfengine}Xo.nextTensorId=0,Xo.nextVariableId=0;var Eo,To=Fo();function Yo(e,t){var n={a:e,b:t};return To.runKernel(ut,n)}function Ho(e){Eo=e}function Mo(e){if(void 0!==Eo)return Eo;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Do(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var Ko=tt();function zo(e,t){var n=e;if(Ve(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Ve(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&tt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Lo(e,r,[]),r}function Lo(e,t,n){if(n=n||[],Array.isArray(e)||Ve(e)){ge(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),ge(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)Lo(e[a],r,n.concat(a))}else ge(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Po(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function _o(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Io)return Po(r,e.dtype,t,n),e;var a=Te(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Po(r,a,t,n),null==e||!Ve(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(o,"'"))}var i=zo(e,a);Ve(e)||Array.isArray(e)||(e=[e]);var s=!0,c="string"!==a?za(e,a):he(e,[],s);return To.makeTensor(c,i,a)}function Oo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return _o(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Ko.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ko.registerFlag("IS_BROWSER",(function(){return Do()})),Ko.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),Ko.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ko.registerFlag("PROD",(function(){return!1})),Ko.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ko.getBool("DEBUG")})),Ko.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ko.registerFlag("IS_TEST",(function(){return!1})),Ko.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),Ko.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),Ko.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var Uo="__op";function jo(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Uo;var a=function(){To.startScope(n);try{var e=r.apply(void 0,arguments);return je(e)&&console.error("Cannot return a Promise inside of tidy."),To.endScope(e),e}catch(t){throw To.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Qo=jo({complex_:function(e,t){var n=_o(e,"real","complex"),r=_o(t,"imag","complex");de(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return To.runKernel(Vt,a)}});function qo(e,t,n,r){if(null==r&&(r=Te(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ve(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){_e(t);var a=fe(t),o=fe(n);ge(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var s=n[i],c=i!==n.length-1||s!==fe(t.slice(i));ge(n[i]===t[i]||!c,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Ve(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?za(e,r):he(e,[],!0),To.makeTensor(e,t,r)}function $o(e,t,n){return qo(e,t,zo(e,n),n)}var ei={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function ti(e,t){return ni.apply(this,arguments)}function ni(){return ni=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),i=function(e){var i=o[e],s=Array.isArray(t)?t[e].tensor:t[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(s.dtype));var c={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var u=new Promise(function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i,c,u;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),o=0,i=0;i<n.length;i++)c=n[i],u=new Uint8Array(new Uint32Array([c.length]).buffer),a.set(u,o),o+=4,a.set(c,o),o+=c.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(u)}else a.push(s.data());null!=n&&(c.group=n),r.push(c)},s=0;s<o.length;++s)i(s);return e.next=7,Promise.all(a);case 7:return c=e.sent,e.abrupt("return",{data:ai(c),specs:r});case 9:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t){var n,r,a={},o=0,i=(0,P.Z)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,c=s.name,u=s.dtype,l=s.shape,g=fe(l),d=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==u)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(u,"."))}var h=ei[p.dtype],f=e.slice(o,o+g*h),I="uint8"===p.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===u)if("uint8"===p.dtype||"uint16"===p.dtype){d=new Float32Array(I.length);for(var C=0;C<I.length;C++){var m=I[C];d[C]=m*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=fi()),d=n(I)}else{if("int32"!==u)throw new Error("Unsupported dtype in weight '".concat(c,"': ").concat(u));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");d=new Int32Array(I.length);for(var v=0;v<I.length;v++){var b=I[v];d[v]=Math.round(b*p.scale+p.min)}}o+=g*h}else if("string"===u){var A=fe(s.shape);d=[];for(var y=0;y<A;y++){var k=new Uint32Array(e.slice(o,o+4))[0];o+=4;var Z=new Uint8Array(e.slice(o,o+k));d.push(Z),o+=k}}else{var S=ei[u],w=e.slice(o,o+g*S);if("float32"===u)d=new Float32Array(w);else if("int32"===u)d=new Int32Array(w);else if("bool"===u)d=new Uint8Array(w);else{if("complex64"!==u)throw new Error("Unsupported dtype in weight '".concat(c,"': ").concat(u));d=new Float32Array(w);for(var B=new Float32Array(d.length/2),G=new Float32Array(d.length/2),x=0;x<B.length;x++)B[x]=d[2*x],G[x]=d[2*x+1];var R=$o(B,l,"float32"),W=$o(G,l,"float32");a[c]=Qo(R,W),R.dispose(),W.dispose()}o+=g*S}"complex64"!==u&&(a[c]=$o(d,l,u))}}catch(V){i.e(V)}finally{i.f()}return a}function ai(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var oi="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function ii(e){return oi?Buffer.byteLength(e):new Blob([e]).size}function si(e){if(oi)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function ci(e){if(oi){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function ui(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function li(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function gi(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function di(e,t){return pi.apply(this,arguments)}function pi(){return pi=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,o=(0,ne.Z)(a,2),i=o[0],s=o[1],r.weightSpecs=i,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}function hi(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:ii(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:ii(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function fi(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var s=r[i],c=e[n[s>>10]+(1023&s)]+t[s>>10];o[i]=c}return new Float32Array(a)}}var Ii=function(){function e(){(0,U.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,j.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Ci=function(e){return Ii.registerSaveRouter(e)},mi=function(e){return Ii.registerLoadRouter(e)},vi=function(e){return Ii.getSaveHandlers(e)},bi=function(e,t){return Ii.getLoadHandlers(e,t)},Ai="tensorflowjs",yi="models_store",ki="model_info_store";function Zi(){if(!tt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Si(e){var t=e.result;t.createObjectStore(yi,{keyPath:"modelPath"}),t.createObjectStore(ki,{keyPath:"modelPath"})}var wi=function(){function e(t){if((0,U.Z)(this,e),this.indexedDB=Zi(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,j.Z)(e,[{key:"save",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Ai,1);a.onupgradeneeded=function(){return Si(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(yi,"readonly"),s=i.objectStore(yi).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var c,u=hi(t),l=o.transaction(ki,"readwrite"),g=l.objectStore(ki),d=g.put({modelPath:n.modelPath,modelArtifactsInfo:u});d.onsuccess=function(){var a=(c=o.transaction(yi,"readwrite")).objectStore(yi).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:u});a.onsuccess=function(){return e({modelArtifactsInfo:u})},a.onerror=function(e){var t=(g=l.objectStore(ki)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},d.onerror=function(e){return o.close(),r(d.error)},l.oncomplete=function(){null==c?o.close():c.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();wi.URL_SCHEME="indexeddb://";var Bi=function(e){return tt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wi.URL_SCHEME)?(t=e.slice(wi.URL_SCHEME.length),new wi(t)):null;var t};Ii.registerSaveRouter(Bi),Ii.registerLoadRouter(Bi);var Gi=function(){function e(){(0,U.Z)(this,e),this.indexedDB=Zi()}return(0,j.Z)(e,[{key:"listModels",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(Ai,1);r.onupgradeneeded=function(){return Si(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(ki,"readonly"),o=a.objectStore(ki).getAll();o.onsuccess=function(){var t,n={},r=(0,P.Z)(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(i){r.e(i)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(wi.URL_SCHEME)?r.slice(wi.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(Ai,1);a.onupgradeneeded=function(){return Si(a)},a.onsuccess=function(){var n,o=a.result,i=o.transaction(ki,"readwrite"),s=i.objectStore(ki),c=s.get(t);c.onsuccess=function(){if(null==c.result)return o.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),i=function(){var a=(n=o.transaction(yi,"readwrite")).objectStore(yi).delete(t);a.onsuccess=function(){return e(c.result.modelArtifactsInfo)},a.onerror=function(e){return r(c.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(c.error)}},c.onerror=function(e){return o.close(),r(c.error)},i.oncomplete=function(){null==n?o.close():n.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xi="/",Ri="tensorflowjs_models",Wi="info",Vi="model_topology",Ni="weight_specs",Xi="weight_data",Ji="model_metadata";function Fi(e){return{info:[Ri,e,Wi].join(xi),topology:[Ri,e,Vi].join(xi),weightSpecs:[Ri,e,Ni].join(xi),weightData:[Ri,e,Xi].join(xi),modelMetadata:[Ri,e,Ji].join(xi)}}function Ei(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function Ti(e){var t=e.split(xi);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(xi)}var Yi=function(){function e(t){if((0,U.Z)(this,e),!tt().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Fi(this.modelPath)}return(0,j.Z)(e,[{key:"save",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=hi(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,si(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),Ei(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=ci(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Yi.URL_SCHEME="localstorage://";var Hi=function(e){return tt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yi.URL_SCHEME)?(t=e.slice(Yi.URL_SCHEME.length),new Yi(t)):null;var t};Ii.registerSaveRouter(Hi),Ii.registerLoadRouter(Hi);var Mi=function(){function e(){(0,U.Z)(this,e),ge(tt().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),ge("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,j.Z)(e,[{key:"listModels",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Ri+xi,r=xi+Wi,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(i=Ti(o),t[i]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(Yi.URL_SCHEME)?a.slice(Yi.URL_SCHEME.length):a,n=Fi(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),Ei(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Di="://",Ki=function(){function e(){(0,U.Z)(this,e),this.managers={}}return(0,j.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){ge(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Di)&&(t=t.slice(0,t.indexOf(Di))),ge(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();ge(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function zi(e){if(-1===e.indexOf(Di))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Ki.getSchemes().join(",")));return{scheme:e.split(Di)[0],path:e.split(Di)[1]}}function Li(e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l,g,d,p=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],ge(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),ge((a=Ii.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),ge(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),o=a[0],ge((i=Ii.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),ge(i.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=i[0],c=zi(t).scheme,u=zi(t).path,l=c===zi(t).scheme,e.next=15,o.load();case 15:if(g=e.sent,!r||!l){e.next=19;break}return e.next=19,Ki.getManager(c).removeModel(u);case 19:return e.next=21,s.save(g);case 21:if(d=e.sent,!r||l){e.next=25;break}return e.next=25,Ki.getManager(c).removeModel(u);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function _i(){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ki.getSchemes(),n={},r=(0,P.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return o=a.value,e.next=9,Ki.getManager(o).listModels();case 9:for(s in i=e.sent)n[o+Di+s]=i[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Ui(e){return ji.apply(this,arguments)}function ji(){return(ji=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zi(t),r=Ki.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Li(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(e,t){return es.apply(this,arguments)}function es(){return(es=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Li(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ts=function(){function e(){(0,U.Z)(this,e)}return(0,j.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(tt().get("IS_BROWSER")){tt().setPlatform("browser",new ts);try{Ki.registerManager(Yi.URL_SCHEME,new Mi)}catch($K){}try{Ki.registerManager(wi.URL_SCHEME,new Gi)}catch($K){}}var ns,rs=function(){return n(5410)};var as=function(){function e(){(0,U.Z)(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,j.Z)(e,[{key:"fetch",value:function(e,t){return null!=tt().global.fetch?tt().global.fetch(e,t):(null==ns&&(ns=rs()),ns(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function os(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",_e(e),new po(e,t,n)}tt().get("IS_NODE")&&!tt().get("IS_BROWSER")&&tt().setPlatform("node",new as);var is=jo({cast_:function(e,t){var n=_o(e,"x","cast");if(!Re(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return To.runKernel(xt,r,a)}});var ss=jo({clone_:function(e){var t={x:_o(e,"x","clone","string_or_numeric")};return To.runKernel(An,t)}});function cs(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}Fo(),fo={buffer:os,cast:is,clone:ss,print:cs};function us(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var ls=function(){function e(t){if((0,U.Z)(this,e),!tt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,j.Z)(e,[{key:"save",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=gi(t,r),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,i.href=o,e.next=15,us((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,us((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:hi(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ls.URL_SCHEME="downloads://";var gs=function(){function e(t){if((0,U.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,j.Z)(e,[{key:"load",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),o=a.modelTopology;if(null!=o)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var i=di(a,(function(e){return t.loadWeights(e)}));e(i)}else e({modelTopology:o});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],o=(0,P.Z)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push.apply(r,(0,_.Z)(i.weights)),a.push.apply(a,(0,_.Z)(i.paths))}}catch($K){o.e($K)}finally{o.f()}var s=this.checkManifestAndWeightFiles(e),c=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(c).then((function(e){return[r,ui(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return li(e.name)})),o={},i=(0,P.Z)(e);try{for(i.s();!(t=i.n()).done;){t.value.paths.forEach((function(e){var t=li(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));o[e]=n.weightsFiles[a.indexOf(t)]}))}}catch($K){i.e($K)}finally{i.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return o}}]),e}();function ds(e){return new gs(e)}function ps(e,t,n,r){!function(e){ge(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){ge(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),ge(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),ge(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function hs(e,t){return fs.apply(this,arguments)}function fs(){return(fs=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l,g;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?tt().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),o=0,i=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,ps(a,n.onProgress,o,i);case 13:e.t0=e.sent;case 14:if(s=e.t0,c=s.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(c);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,ps(c,n.onProgress,u,l);case 26:e.t1=e.sent;case 27:return g=e.t1,e.abrupt("return",g);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(e){return Cs.apply(this,arguments)}function Cs(){return Cs=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,o=ms((function(e){return hs(e,{requestInit:a})})),e.abrupt("return",o(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function ms(e){return function(){var t=(0,O.Z)(q().mark((function t(n){var r,a,o,i,s,c,u,l,g,d,p,h,f=arguments;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:"",a=f.length>2?f[2]:void 0,o=n.map((function(){return!1})),i={},s=null!=a?a.map((function(){return!1})):[],c=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,u=ei[r]*fe(e.shape),l=function(){o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),c.push(e.name),n+=u}))})),s.every((function(e){return e}))){t.next=10;break}throw u=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(u.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(c.join(", "),"."));case 10:return l=o.reduce((function(e,t,n){return t&&e.push(n),e}),[]),g=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;g.push(t)}))})),t.next=15,e(g);case 15:return d=t.sent,p={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[h+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),c=0,u=0;u<t;u++){var l=new Uint8Array(d[h+u]);s.set(l,c),c+=l.byteLength}i[e].forEach((function(e){var t=ri(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),h+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Ii.registerSaveRouter((function(e){return tt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ls.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new ls(e)}(e.slice(ls.URL_SCHEME.length)):null}));var vs=function(){function e(t,n){if((0,U.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(ge("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=tt().platform.fetch,ge(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&ge(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,j.Z)(e,[{key:"save",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=gi(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(o=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:hi(t),responses:[o]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,o=n.weightsManifest,null!=a||null!=o){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",di(n,(function(e){return i.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=bs(n),a=(0,ne.Z)(r,2),o=a[0],i=a[1],s=this.weightPathPrefix||o,c=[],u=(0,P.Z)(t);try{for(u.s();!(l=u.n()).done;)g=l.value,c.push.apply(c,(0,_.Z)(g.weights))}catch($K){u.e($K)}finally{u.f()}d=[],p=[],h=(0,P.Z)(t);try{for(h.s();!(f=h.n()).done;){I=f.value,C=(0,P.Z)(I.paths);try{for(C.s();!(m=C.n()).done;)v=m.value,null!=this.weightUrlConverter?p.push(this.weightUrlConverter(v)):d.push(s+v+i)}catch($K){C.e($K)}finally{C.f()}}}catch($K){h.e($K)}finally{h.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=d.push,e.t1=d,e.t2=_.Z,e.next=16,Promise.all(p);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,hs(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return b=e.sent,e.abrupt("return",[c,ui(b)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function bs(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function As(e){return null!=e.match(vs.URL_SCHEME_REGEX)}vs.URL_SCHEME_REGEX=/^https?:\/\//;var ys=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return As(e)})):As(e))?ks(e,t):null};function ks(e,t){return new vs(e,t)}function Zs(e,t){return ks(e,t)}Ii.registerSaveRouter(ys),Ii.registerLoadRouter(ys);var Ss=function(){function e(t){(0,U.Z)(this,e),this.modelArtifacts=t}return(0,j.Z)(e,[{key:"load",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ws=function(){function e(t){(0,U.Z)(this,e),this.saveHandler=t}return(0,j.Z)(e,[{key:"save",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Bs(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new Ss(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ss({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ss({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Gs(e){return new ws(e)}var xs=jo({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_o(e,"a","matMul"),o=_o(t,"b","matMul"),i=Bo(a,o),s=(0,ne.Z)(i,2),c={a:a=s[0],b:o=s[1]},u={transposeA:n,transposeB:r};return To.runKernel(Zt,c,u)}});var Rs=jo({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=_o(e,"indices","oneHot","int32"),o={indices:a},i={depth:t,onValue:n,offValue:r};return To.runKernel(or,o,i)}});var Ws=jo({transpose_:function(e,t){var n=_o(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),ge(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){ge(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return To.runKernel(na,r,a)}});var Vs,Ns=jo({confusionMatrix_:function(e,t,n){var r=_o(e,"labels","confusionMatrix"),a=_o(t,"predictions","confusionMatrix");ge(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),ge(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),ge(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),ge(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),ge(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var o=Rs(is(r,"int32"),n),i=Rs(is(a,"int32"),n),s=Ws(o),c=xs(s,i);return is(c,"int32")}});function Xs(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function Js(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function Fs(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(o)}}return n}function Es(e,t,n){if(pe(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=zo(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return qo(e,t,r,n)}function Ts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var c=2;if(a&&e.readyState<c)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var u=Ca(ca,To.backendName);if(null!=u){var l={pixels:e},g={numChannels:t};return To.runKernel(ca,l,g)}var d,p,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],f=(0,ne.Z)(h,2),I=f[0],C=f[1];if(i)d=e.getContext("2d").getImageData(0,0,I,C).data;else if(r||n)d=e.data;else if(o||a||s){if(null==Vs)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Vs=new OffscreenCanvas(1,1).getContext("2d")}else Vs=document.createElement("canvas").getContext("2d");Vs.canvas.width=I,Vs.canvas.height=C,Vs.drawImage(e,0,0,I,C),d=Vs.getImageData(0,0,I,C).data}if(4===t)p=new Int32Array(d);else{var m=I*C;p=new Int32Array(m*t);for(var v=0;v<m;v++)for(var b=0;b<t;++b)p[v*t+b]=d[4*v+b]}var A=[C,I,t];return Es(p,A,"int32")}function Ys(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function Hs(e){return Ms.apply(this,arguments)}function Ms(){return Ms=(0,O.Z)(q().mark((function e(t){var n,r,a,o=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:3,r=null,!tt().getBool("WRAP_TO_IMAGEBITMAP")||!Ys(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",Ts(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ms.apply(this,arguments)}function Ds(e,t){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_o(t,"img","toPixels"),t instanceof Io||(r=is(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(o=r.shape.slice(0,2),i=(0,ne.Z)(o,2),s=i[0],c=i[1],!((u=2===r.rank?1:r.shape[2])>4||2===u)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(u));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,g="float32"===r.dtype?255:1,d=new Uint8ClampedArray(c*s*4),p=0;case 16:if(!(p<s*c)){e.next=41;break}h=[0,0,0,255],f=0;case 19:if(!(f<u)){e.next=33;break}if(I=l[p*u+f],"float32"!==r.dtype){e.next=26;break}if(!(I<0||I>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(I,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(I<0||I>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(I,"."));case 29:1===u?(h[0]=I*g,h[1]=I*g,h[2]=I*g):h[f]=I*g;case 30:f++,e.next=19;break;case 33:d[(C=4*p)+0]=Math.round(h[0]),d[C+1]=Math.round(h[1]),d[C+2]=Math.round(h[2]),d[C+3]=Math.round(h[3]);case 38:++p,e.next=16;break;case 41:return null!=n&&(n.width=c,n.height=s,m=n.getContext("2d"),v=new ImageData(d,c,s),m.putImageData(v,0,0)),r!==t&&r.dispose(),e.abrupt("return",d);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zs=jo({fromPixels_:Ts});function Ls(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===fe(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var c=e.shape,u=a.slice();u.pop();for(var l=1,g=o;g<n;++g)l*=c[g],u.push(c[g]);var d=[].concat((0,_.Z)(Me(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[u,i,l,d]}function Ps(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != ".concat(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function _s(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Ps(n,t,e)}function Os(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var c=a<1?1:a;return{sliceRank:a,numUpdates:fe(t.shape)/c,sliceSize:i,strides:[].concat((0,_.Z)(Me(n.slice(0,a))),[1]),outputSize:fe(n)}}function Us(e,t,n){var r=e.shape.length;ge(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),ge(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){ge(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function js(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Qs(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function qs(e,t,n,r){for(var a=(0,_.Z)(e),o=a.length;o<r.length;o++)a.push(1);for(var i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function $s(e,t,n){return n<=e?n:n-(t-1)}function ec(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function tc(e,t,n,r,a,o,i,s,c){var u=e.length,l=new Array(u),g=new Array(u),d=new Array(u);if(t.length&&n>0){var p=t[0],h=n+1;l=nc(i,p,h,r,e),g=rc(s,p,h,a,e),d=qs(o,p,h,e)}else for(var f=0;f<u;f++)l[f]=oc(i,r,o,e,f,c),g[f]=ic(s,a,o,e,f,c),d[f]=ac(o,f,c);return{begin:l,end:g,strides:d}}function nc(e,t,n,r,a){for(var o=(0,_.Z)(a),i=ec(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{var c=$s(t,n,s),u=r[c];e&1<<c&&(u=0),o[s]=u}return o}function rc(e,t,n,r,a){for(var o=(0,_.Z)(a),i=ec(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{var c=$s(t,n,s),u=r[c];e&1<<c&&(u=Number.MAX_SAFE_INTEGER),o[s]=u}for(var l=0;l<o.length;l++){var g=a[l];o[l]<0&&(o[l]+=g),o[l]=oe(0,o[l],a[l])}return o}function ac(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function oc(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[a];return i<0&&(i+=c),i=oe(0,i,c-1)}function ic(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[a];return i<0&&(i+=c),i=s>0?oe(0,i,c):oe(-1,i,c-1)}function sc(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function cc(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function uc(e,t,n){var r,a,o=e.shape.length;return(r="number"===typeof t?[t].concat((0,_.Z)(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){ge(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"===typeof n?[n].concat((0,_.Z)(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(ge(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function lc(e,t,n,r,a,o,i,s,c){var u;if(null==r?(u=new Array(t.length)).fill(1):u=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,g={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:c},d=0;d<g.dims;d++)l&&0!==(1<<d&s)&&g.numAddAxisAfterEllipsis++,1<<d&i&&(l=!0);l||(g.ellipsisMask|=1<<g.dims,g.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(g,p);for(var h=!0,f=!0,I=!0,C=[],m=[],v=0;v<e.length;++v){if(0===p.strides[v])throw Error("strides[".concat(v,"] must be non-zero"));var b=!!(p.shrinkAxisMask&1<<v),A=e[v];if(-1!==A){var y=[p.beginMask&1<<v,p.endMask&1<<v],k=[p.strides[v]>0?0:-1,p.strides[v]>0?A:A-1];if(b&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");I=I&&1===p.strides[v];var Z=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(b){var S=p.begin[v]<0?A+p.begin[v]:p.begin[v];if(p.begin[v]=S,p.end[v]=p.begin[v]+1,S<0||S>=A)throw Error("slice index ".concat(p.begin[v]," of dimension ").concat(v," out of bounds."))}else p.begin[v]=gc(p.begin[v],0,p.strides[v],A,y,k),p.end[v]=gc(p.end[v],1,p.strides[v],A,y,k);var w=1===p.strides[v]&&0===p.begin[v]&&p.end[v]===A;h=h&&w,f=f&&(0===v&&1===p.strides[v]||w)}else h=h&&1===p.strides[v]&&Z,f=f&&(0===v&&1===p.strides[v]||Z);var B=void 0,G=!1;if(p.beginValid&&p.endValid?(B=p.end[v]-p.begin[v],G=!0):b?(B=1,G=!0):Z&&A>=0&&(B=p.strides[v]<0?-A:A,G=!0),G){var x=void 0;x=0===B||B<0!==p.strides[v]<0?0:Math.trunc(B/p.strides[v])+(B%p.strides[v]!==0?1:0),C.push(x)}else C.push(-1)}else C.push(b?1:-1)}for(var R=0;R<p.finalShapeGatherIndices.length;++R){var W=p.finalShapeGatherIndices[R];W>=0?m.push(C[W]):-2===W&&m.push(1)}var V=m.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:V,finalShape:m,isIdentity:h,sliceDim0:f,isSimpleSlice:I,begin:p.begin,end:p.end,strides:p.strides}}function gc(e,t,n,r,a,o){if(a[t])return n>0?o[t]:o[t+1&1];var i=e<0?r+e:e;return i<o[0]?o[0]:i>o[1]?o[1]:i}var dc=function(){function e(){(0,U.Z)(this,e)}return(0,j.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),pc=function(){function e(){(0,U.Z)(this,e),this.classNameMap={}}return(0,j.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function hc(e){ge(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),ge("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),ge(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),pc.register(e)}var fc=.1;function Ic(e,t,n){return null==n&&(n=Cc()),mc(e,t,(function(e,t){return yc(e,t,n)}))}function Cc(){return 32===To.backend.floatPrecision()?.001:fc}function mc(e,t,n){var r=!0;if((Ve(e)||Ve(t))&&(r=!1),Ve(e)&&Ve(t)&&(r=!0),r){var a=e.constructor.name,o=t.constructor.name;if(a!==o)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(o))}if(Array.isArray(e)&&Array.isArray(t)){var i=zo(e),s=zo(t);if(!Ce(i,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(i,"]. Expected: [").concat(s,"]"))}var c=Ve(e)?e:he(e),u=Ve(t)?t:he(t);if(c.length!==u.length)throw new Error("Arrays have different lengths actual: ".concat(c.length," vs ")+"expected: ".concat(u.length,".\n")+"Actual:   ".concat(c,".\n")+"Expected: ".concat(u,"."));for(var l=0;l<u.length;++l){var g=c[l],d=u[l];if(!n(g,d))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(g,", expected[").concat(l,"] = ").concat(d,".\n")+"Actual:   ".concat(c,".\n")+"Expected: ".concat(u,"."))}}function vc(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function bc(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return Je(e)||Je(e[0])||Je(t)||Je(t[0])?mc(e,n,(function(e,t){return e==t})):mc(e,t,(function(e,t){return yc(e,t,0)}))}function Ac(e,t,n){if(null==n&&(n=Cc()),!yc(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function yc(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function kc(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function Zc(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function Sc(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?Sc(n):e[t]=_a(n)}return e}var wc="3.15.0";function Bc(){tt().set("PROD",!0)}function Gc(){tt().set("DEBUG",!0)}function xc(){tt().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Rc(e){tt().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Wc(){To.disposeVariables()}function Vc(){return To}function Nc(){return To.memory()}function Xc(e){return To.profile(e)}function Jc(e,t){return To.tidy(e,t)}function Fc(e){Ro(e).forEach((function(e){return e.dispose()}))}function Ec(e){return To.keep(e)}function Tc(e){return To.time(e)}function Yc(e){return To.setBackend(e)}function Hc(){return To.ready()}function Mc(){return To.backendName}function Dc(e){To.removeBackend(e)}function Kc(e){return To.findBackend(e)}function zc(e){return To.findBackendFactory(e)}function Lc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return To.registerBackend(e,t,n)}function Pc(){return To.backend}function _c(e,t){tt().setPlatform(e,t)}var Oc=jo({add_:function(e,t){var n=_o(e,"a","add"),r=_o(t,"b","add"),a=Bo(n,r),o=(0,ne.Z)(a,2),i={a:n=o[0],b:r=o[1]};return To.runKernel(ut,i)}});var Uc=jo({floorDiv_:function(e,t){var n=_o(e,"a","floorDiv"),r=_o(t,"b","floorDiv"),a=Bo(n,r),o=(0,ne.Z)(a,2),i={a:n=o[0],b:r=o[1]};return To.runKernel(fn,i)}});var jc=jo({div_:function(e,t){var n=_o(e,"a","div"),r=_o(t,"b","div"),a=Bo(n,r),o=(0,ne.Z)(a,2);if(n=o[0],r=o[1],"int32"===n.dtype&&"int32"===r.dtype)return Uc(n,r);var i={a:n,b:r};return To.runKernel(tn,i,{})}});var Qc=jo({mul_:function(e,t){var n=_o(e,"a","mul"),r=_o(t,"b","mul"),a=Bo(n,r),o=(0,ne.Z)(a,2),i={a:n=o[0],b:r=o[1]};return To.runKernel(qn,i)}});var qc=jo({sqrt_:function(e){var t={x:_o(e,"x","sqrt","float32")};return To.runKernel(Xr,t)}});var $c=jo({square_:function(e){var t=_o(e,"x","square");return To.runKernel("Square",{x:t},{})}});var eu=jo({zerosLike_:function(e){var t={x:_o(e,"x","zerosLike")};return To.runKernel(ia,t)}});function tu(e){return ge(Ye(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=_o(t,"x","tf.grad","string_or_numeric"),a=null!=n?_o(n,"dy","tf.grad"):null;return To.tidy((function(){var t=To.gradients((function(){return e(r)}),[r],a),n=t.value,o=t.grads;return null!=a&&de(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),su(o),o[0]}))}}function nu(e){return ge(Ye(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){ge(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=Oo(t,"args","tf.grads","string_or_numeric"),a=null!=n?_o(n,"dy","tf.grads"):null;return To.tidy((function(){var t=To.gradients((function(){return e.apply(void 0,(0,_.Z)(r))}),r,a),n=t.value,o=t.grads;return null!=a&&de(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),su(o),o}))}}function ru(e){return ge(Ye(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){ge(t instanceof Io,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),ge(null==n||n instanceof Io,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=To.gradients((function(){return e(t)}),[t],n),a=r.grads,o=r.value;return su(a),{grad:a[0],value:o}}}function au(e){return ge(Ye(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){ge(Array.isArray(t)&&t.every((function(e){return e instanceof Io})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),ge(null==n||n instanceof Io,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=To.gradients((function(){return e.apply(void 0,(0,_.Z)(t))}),t,n);return null!=n&&de(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),su(r.grads),r}}function ou(e,t){ge(Ye(e),(function(){return"The f passed in variableGrads(f) must be a function"})),ge(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof ko})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],To.registeredVariables)t.push(To.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,o=t.length;t=t.filter((function(e){return e.trainable})),ge(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(o," variables is ")+"trainable."}));var i=To.gradients(e,t,null,!0),s=i.value,c=i.grads;ge(c.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),ge(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var u={};return t.forEach((function(e,t){null!=c[t]&&(u[e.name]=c[t])})),null!=a&&a.forEach((function(e){return u[e.name]=null})),{value:s,grads:u}}function iu(e){return To.customGrad(e)}function su(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function cu(e,t){if((Ve(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ve(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return qo(e,[],[],t)}var uu=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return Fc(o),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return ou(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Fc(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:cu(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(dc);Object.defineProperty(uu,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var lu=function(e){eo(n,e);var t=io(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,U.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==o&&(a.epsilon=To.backend.epsilon()),a}return(0,j.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=To.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Jc((function(){return eu(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Jc((function(){return eu(a).variable(false)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Jc((function(){var e=Oc(Qc(i,t.rho),Qc($c(o),1-t.rho)),n=Qc(jc(qc(Oc(s,t.epsilon)),qc(Oc(i,t.epsilon))),o),r=Oc(Qc(s,t.rho),Qc($c(n),1-t.rho));i.assign(e),s.assign(r);var c=Oc(Qc(n,-t.learningRate),a);a.assign(c)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Fc(this.accumulatedGrads.map((function(e){return e.variable}))),Fc(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedGrads),(0,_.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(uu);function gu(e,t,n){var r={shape:e,value:t,dtype:n};return To.runKernel(dn,{},r)}lu.className="Adadelta",hc(lu);var du=function(e){eo(n,e);var t=io(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,U.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,j.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=To.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Jc((function(){return gu(a.shape,t.initialAccumulatorValue).variable(false)}))}}var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;Jc((function(){var e=Oc(i,$c(o));i.assign(e);var n=Oc(Qc(jc(o,qc(Oc(e,To.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Fc(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(uu);du.className="Adagrad",hc(du);var pu=jo({pow_:function(e,t){var n=_o(e,"base","pow"),r=_o(t,"exp","pow"),a=Bo(n,r),o=(0,ne.Z)(a,2),i={a:n=o[0],b:r=o[1]};return To.runKernel(ur,i)}});var hu=jo({sub_:function(e,t){var n=_o(e,"a","sub"),r=_o(t,"b","sub"),a=Bo(n,r),o=(0,ne.Z)(a,2),i={a:n=o[0],b:r=o[1]};return To.runKernel(jr,i)}}),fu=function(e){eo(n,e);var t=io(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,U.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Jc((function(){o.accBeta1=cu(r).variable(),o.accBeta2=cu(a).variable()})),null==i&&(o.epsilon=To.backend.epsilon()),o}return(0,j.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Jc((function(){var r=hu(1,t.accBeta1),a=hu(1,t.accBeta2);n.forEach((function(n,o){var i=To.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:Jc((function(){return eu(i).variable(false)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:"".concat(n,"/v"),variable:Jc((function(){return eu(i).variable(false)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var c=t.accumulatedFirstMoment[o].variable,u=t.accumulatedSecondMoment[o].variable,l=Oc(Qc(c,t.beta1),Qc(s,1-t.beta1)),g=Oc(Qc(u,t.beta2),Qc($c(s),1-t.beta2)),d=jc(l,r),p=jc(g,a);c.assign(l),u.assign(g);var h=Oc(Qc(jc(d,Oc(qc(p),t.epsilon)),-t.learningRate),i);i.assign(h)}})),t.accBeta1.assign(Qc(t.accBeta1,t.beta1)),t.accBeta2.assign(Qc(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Fc(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Fc(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedFirstMoment),(0,_.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Jc((function(){r.accBeta1.assign(pu(r.beta1,r.iterations_+1)),r.accBeta2.assign(pu(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(uu);fu.className="Adam",hc(fu);var Iu=jo({abs_:function(e){var t=_o(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return To.runKernel(Nt,n)}var r={x:t};return To.runKernel(it,r)}});var Cu=jo({maximum_:function(e,t){var n=_o(e,"a","maximum"),r=_o(t,"b","maximum"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],"bool"===n.dtype&&(n=is(n,"int32"),r=is(r,"int32")),Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(Hn,i)}}),mu=function(e){eo(n,e);var t=io(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,U.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.decay=s,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],Jc((function(){o.iteration=cu(0).variable(),o.accBeta1=cu(r).variable()})),null==i&&(o.epsilon=To.backend.epsilon()),o}return(0,j.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Jc((function(){var r=hu(1,t.accBeta1),a=jc(-t.learningRate,Oc(Qc(t.iteration,t.decay),1));n.forEach((function(n,o){var i=To.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:eu(i).variable(false)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:"".concat(n,"/v"),variable:eu(i).variable(false)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var c=t.accumulatedFirstMoment[o].variable,u=t.accumulatedWeightedInfNorm[o].variable,l=Oc(Qc(c,t.beta1),Qc(s,1-t.beta1)),g=Qc(u,t.beta2),d=Iu(s),p=Cu(g,d);c.assign(l),u.assign(p);var h=Oc(Qc(jc(a,r),jc(l,Oc(p,t.epsilon))),i);i.assign(h)}})),t.iteration.assign(Oc(t.iteration,1)),t.accBeta1.assign(Qc(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Fc(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Fc(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(uu);mu.className="Adamax",hc(mu);var vu=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,j.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=To.registeredVariables[n];Jc((function(){var e=Oc(Qc(t.c,a),o);o.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Ec(cu(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(uu);vu.className="SGD",hc(vu);var bu=function(e){eo(n,e);var t=io(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,U.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=cu(a.momentum),a}return(0,j.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=To.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Jc((function(){return eu(a).variable(false)}))}}var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&Jc((function(){var e,n=Oc(Qc(t.m,o),i);e=t.useNesterov?Oc(Qc(t.c,Oc(i,Qc(n,t.m))),a):Oc(Qc(t.c,n),a),o.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Fc(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(vu);bu.className="Momentum",hc(bu);var Au=function(e){eo(n,e);var t=io(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,U.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=o,r.epsilon=i,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==i&&(r.epsilon=To.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,j.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=To.registeredVariables[n],o=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Jc((function(){return eu(a).variable(o)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Jc((function(){return eu(a).variable(o)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Jc((function(){return eu(a).variable(o)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var s=t.accumulatedMeanSquares[r].variable,c=t.accumulatedMoments[r].variable;Jc((function(){var e=Oc(Qc(s,t.decay),Qc($c(i),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,o=Oc(Qc(n,t.decay),Qc(i,1-t.decay)),u=jc(Qc(i,t.learningRate),qc(hu(e,Oc($c(o),t.epsilon)))),l=Oc(Qc(c,t.momentum),u);s.assign(e),n.assign(o),c.assign(l);var g=hu(a,l);a.assign(g)}else{var d=Oc(Qc(s,t.decay),Qc($c(i),1-t.decay)),p=Oc(Qc(c,t.momentum),jc(Qc(i,t.learningRate),qc(Oc(d,t.epsilon))));s.assign(d),c.assign(p);var h=hu(a,p);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Fc(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Fc(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Fc(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedMeanSquares),(0,_.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,_.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(uu);Au.className="RMSProp",hc(Au);var yu=function(){function e(){(0,U.Z)(this,e)}return(0,j.Z)(e,null,[{key:"sgd",value:function(e){return new vu(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new bu(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Au(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new fu(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new lu(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new mu(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new du(e,t)}}]),e}();var ku=jo({acos_:function(e){var t={x:_o(e,"x","acos")};return To.runKernel(st,t)}});var Zu=jo({acosh_:function(e){var t={x:_o(e,"x","acosh")};return To.runKernel(ct,t)}});var Su=jo({addN_:function(e){ge(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),ge(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return _o(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Ce(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return To.runKernel(lt,r)}});var wu=jo({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","all","bool"),a={x:r},o={axis:t,keepDims:n};return To.runKernel(gt,a,o)}});var Bu=jo({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","any","bool"),a={x:r},o={axis:t,keepDims:n};return To.runKernel(dt,a,o)}});var Gu=jo({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_o(e,"x","argMax"),r={x:n},a={axis:t};return To.runKernel(pt,r,a)}});var xu=jo({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_o(e,"x","argMin"),r={x:n},a={axis:t};return To.runKernel(ht,r,a)}});var Ru=jo({asin_:function(e){var t={x:_o(e,"x","asin")};return To.runKernel(ft,t)}});var Wu=jo({asinh_:function(e){var t={x:_o(e,"x","asinh")};return To.runKernel(It,t)}});var Vu=jo({atan_:function(e){var t={x:_o(e,"x","atan")};return To.runKernel(Ct,t)}});var Nu=jo({atan2_:function(e,t){var n=_o(e,"a","atan2"),r=_o(t,"b","atan2"),a=Bo(n,r),o=(0,ne.Z)(a,2),i={a:n=o[0],b:r=o[1]};return To.runKernel(vt,i)}});var Xu=jo({atanh_:function(e){var t={x:_o(e,"x","atanh")};return To.runKernel(mt,t)}});function Ju(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,i=e[3],s=[].concat((0,_.Z)(t),[i]),c=Uu(a);return Tu(e,s,n,o,r,null,null,c)}function Fu(e,t,n,r,a,o){var i,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",c=Mu(t),u=(0,ne.Z)(c,2),l=u[0],g=u[1];if("channelsLast"===s)i=[l,g,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));i=[l,g,e[1],e[1]]}return Tu(e,i,n,r,a,o,!1,s)}function Eu(e,t,n,r,a,o){var i,s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",u=Du(t),l=(0,ne.Z)(u,3),g=l[0],d=l[1],p=l[2];if("NDHWC"===c)s="channelsLast",i=[g,d,p,e[4],e[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));s="channelsFirst",i=[g,d,p,e[1],e[1]]}return Yu(e,i,n,r,a,!1,s,o)}function Tu(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,u=-1,l=-1,g=-1;if("channelsLast"===s){var d=(0,ne.Z)(e,4);c=d[0],u=d[1],l=d[2],g=d[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=(0,ne.Z)(e,4);c=p[0],g=p[1],u=p[2],l=p[3]}var h,f=(0,ne.Z)(t,4),I=f[0],C=f[1],m=f[3],v=Mu(n),b=(0,ne.Z)(v,2),A=b[0],y=b[1],k=Mu(r),Z=(0,ne.Z)(k,2),S=Z[0],w=Z[1],B=Ku(I,S),G=Ku(C,w),x=zu(a,u,l,A,y,B,G,o,s),R=x.padInfo,W=x.outHeight,V=x.outWidth,N=i?m*g:m;return"channelsFirst"===s?h=[c,N,W,V]:"channelsLast"===s&&(h=[c,W,V,N]),{batchSize:c,dataFormat:s,inHeight:u,inWidth:l,inChannels:g,outHeight:W,outWidth:V,outChannels:N,padInfo:R,strideHeight:A,strideWidth:y,filterHeight:I,filterWidth:C,effectiveFilterHeight:B,effectiveFilterWidth:G,dilationHeight:S,dilationWidth:w,inShape:e,outShape:h,filterShape:t}}function Yu(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,c=-1,u=-1,l=-1,g=-1,d=-1;if("channelsLast"===i){var p=(0,ne.Z)(e,5);c=p[0],u=p[1],l=p[2],g=p[3],d=p[4]}else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));var h=(0,ne.Z)(e,5);c=h[0],d=h[1],u=h[2],l=h[3],g=h[4]}var f,I=(0,ne.Z)(t,5),C=I[0],m=I[1],v=I[2],b=I[4],A=Du(n),y=(0,ne.Z)(A,3),k=y[0],Z=y[1],S=y[2],w=Du(r),B=(0,ne.Z)(w,3),G=B[0],x=B[1],R=B[2],W=Ku(C,G),V=Ku(m,x),N=Ku(v,R),X=Lu(a,u,l,g,k,Z,S,W,V,N,s),J=X.padInfo,F=X.outDepth,E=X.outHeight,T=X.outWidth,Y=o?b*d:b;return"channelsFirst"===i?f=[c,Y,F,E,T]:"channelsLast"===i&&(f=[c,F,E,T,Y]),{batchSize:c,dataFormat:i,inDepth:u,inHeight:l,inWidth:g,inChannels:d,outDepth:F,outHeight:E,outWidth:T,outChannels:Y,padInfo:J,strideDepth:k,strideHeight:Z,strideWidth:S,filterDepth:C,filterHeight:m,filterWidth:v,effectiveFilterDepth:W,effectiveFilterHeight:V,effectiveFilterWidth:N,dilationDepth:G,dilationHeight:x,dilationWidth:R,inShape:e,outShape:f,filterShape:t}}function Hu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Ku(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Mu(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Du(e){return"number"===typeof e?[e,e,e]:e}function Ku(e,t){return t<=1?e:e+(e-1)*(t-1)}function zu(e,t,n,r,a,o,i,s,c){var u,l,g;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=Hu(e,t,n));var o=e[0],i=e[1];return[Pu((o-t+2*r)/n+1,a),Pu((i-t+2*r)/n+1,a)]}([t,n],o,r,e,s);l=d[0],g=d[1]}else if("same"===e){l=Math.ceil(t/r),g=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(g-1)*a+i-n),f=Math.floor(p/2),I=p-f,C=Math.floor(h/2);u={top:f,bottom:I,left:C,right:h-C,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),g=Math.ceil((n-i+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var m="channelsLast"===c?e[1][0]:e[2][0],v="channelsLast"===c?e[1][1]:e[2][1],b="channelsLast"===c?e[2][0]:e[3][0],A="channelsLast"===c?e[2][1]:e[3][1];u={top:m,bottom:v,left:b,right:A,type:0===m&&0===v&&0===b&&0===A?"VALID":"EXPLICIT"},l=Pu((t-o+m+v)/r+1,s),g=Pu((n-i+b+A)/a+1,s)}return{padInfo:u,outHeight:l,outWidth:g}}function Lu(e,t,n,r,a,o,i,s,c,u,l){var g,d,p,h;if("number"===typeof e){g={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a,o){null==a&&(a=Hu(e,t,r));var i=e[0],s=e[1],c=e[2];return[Pu((i-t+2*a)/r+1,o),Pu((s-t+2*a)/r+1,o),Pu((c-t+2*a)/r+1,o),n]}([t,n,r,1],s,1,a,e,l);d=f[0],p=f[1],h=f[2]}else if("same"===e){var I=((d=Math.ceil(t/a))-1)*a+s-t,C=((p=Math.ceil(n/o))-1)*o+c-n,m=((h=Math.ceil(r/i))-1)*i+u-r,v=Math.floor(I/2),b=I-v,A=Math.floor(C/2),y=C-A,k=Math.floor(m/2);g={top:A,bottom:y,left:k,right:m-k,front:v,back:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));g={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/a),p=Math.ceil((n-c+1)/o),h=Math.ceil((r-u+1)/i)}return{padInfo:g,outDepth:d,outHeight:p,outWidth:h}}function Pu(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function _u(e){var t=Mu(e),n=(0,ne.Z)(t,3),r=n[0],a=n[1],o=n[2];return 1===r&&1===a&&1===o}function Ou(e,t){return _u(e)||_u(t)}function Uu(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function ju(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)ge(me(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){ge(me(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var Qu=jo({reshape_:function(e,t){var n={x:_o(e,"x","reshape","string_or_numeric")},r={shape:t};return To.runKernel(Ir,n,r)}});var qu=jo({avgPool_:function(e,t,n,r,a){var o=_o(e,"x","avgPool","float32");ge(Ou(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var i=o,s=!1;3===o.rank&&(s=!0,i=Qu(o,[1,o.shape[0],o.shape[1],o.shape[2]])),ge(4===i.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")})),ju("avgPool",r,a);var c={x:i},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=To.runKernel(bt,c,u);return l=is(l,o.dtype),s?Qu(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var $u=jo({avgPool3d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=_o(e,"x","avgPool3d","float32"),s=i,c=!1;4===i.rank&&(c=!0,s=Qu(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),ge(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),ge("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),ju("avgPool3d",r,a);var u={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},g=To.runKernel(yt,u,l);return g=is(g,s.dtype),c?Qu(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}});var el=jo({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Oo(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return ss(n[0]);var r=n,a={axis:t};return To.runKernel(Xt,r,a)}});var tl=jo({sigmoid_:function(e){var t={x:_o(e,"x","sigmoid","float32")};return To.runKernel(Vr,t)}});var nl=jo({slice_:function(e,t,n){var r=_o(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},o={begin:t,size:n};return To.runKernel(Gr,a,o)}});var rl=jo({tanh_:function(e){var t={x:_o(e,"x","tanh","float32")};return To.runKernel(qr,t)}});var al=jo({basicLSTMCell_:function(e,t,n,r,a,o){var i=_o(e,"forgetBias","basicLSTMCell"),s=_o(t,"lstmKernel","basicLSTMCell"),c=_o(n,"lstmBias","basicLSTMCell"),u=_o(r,"data","basicLSTMCell"),l=_o(a,"c","basicLSTMCell"),g=_o(o,"h","basicLSTMCell"),d=el([u,g],1),p=xs(d,s),h=Oc(p,c),f=h.shape[0],I=h.shape[1]/4,C=[f,I],m=nl(h,[0,0],C),v=nl(h,[0,I],C),b=nl(h,[0,2*I],C),A=nl(h,[0,3*I],C),y=Oc(Qc(tl(m),rl(v)),Qc(l,tl(Oc(i,b))));return[y,Qc(rl(y),tl(A))]}});var ol=jo({batchToSpaceND_:function(e,t,n){var r=_o(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));ge(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),ge(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),ge(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var o={x:r},i={blockShape:t,crops:n};return To.runKernel(St,o,i)}});var il=jo({batchNorm_:function(e,t,n,r,a,o){null==o&&(o=.001);var i,s,c=_o(e,"x","batchNorm"),u=_o(t,"mean","batchNorm"),l=_o(n,"variance","batchNorm");null!=a&&(i=_o(a,"scale","batchNorm")),null!=r&&(s=_o(r,"offset","batchNorm")),ge(u.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),ge(null==s||u.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),ge(null==i||u.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var g=function(e){return 0===e.rank||1===e.rank?Qu(e,[1,1,1,e.size]):2===e.rank?Qu(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Qu(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(c),d={x:g,scale:i,offset:s,mean:u,variance:l},p={varianceEpsilon:o},h=To.runKernel(In,d,p);return Qu(h,c.shape)}});var sl=jo({batchNorm2d_:function(e,t,n,r,a,o){var i,s,c=_o(e,"x","batchNorm"),u=_o(t,"mean","batchNorm"),l=_o(n,"variance","batchNorm");return null!=a&&(i=_o(a,"scale","batchNorm")),null!=r&&(s=_o(r,"offset","batchNorm")),ge(2===c.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(c.rank,".")})),ge(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(u.rank,".")})),ge(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&ge(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&ge(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),il(c,u,l,s,i,o)}});var cl=jo({batchNorm3d_:function(e,t,n,r,a,o){var i,s,c=_o(e,"x","batchNorm"),u=_o(t,"mean","batchNorm"),l=_o(n,"variance","batchNorm");return null!=a&&(i=_o(a,"scale","batchNorm")),null!=r&&(s=_o(r,"offset","batchNorm")),ge(3===c.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(c.rank,".")})),ge(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(u.rank,".")})),ge(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&ge(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&ge(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),il(c,u,l,s,i,o)}});var ul=jo({batchNorm4d_:function(e,t,n,r,a,o){var i,s,c=_o(e,"x","batchNorm"),u=_o(t,"mean","batchNorm"),l=_o(n,"variance","batchNorm");return null!=a&&(i=_o(a,"scale","batchNorm")),null!=r&&(s=_o(r,"offset","batchNorm")),ge(4===c.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(c.rank,".")})),ge(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(u.rank,".")})),ge(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&ge(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&ge(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),il(c,u,l,s,i,o)}});var ll=jo({bincount_:function(e,t,n){var r=_o(e,"x","bincount"),a=_o(t,"weights","bincount");ge("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),ge(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),ge(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var o={x:r,weights:a},i={size:n};return To.runKernel(wt,o,i)}});var gl=jo({broadcastArgs_:function(e,t){var n=_o(e,"s0","broadcastArgs","int32"),r=_o(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return To.runKernel(Gt,a)}});var dl=jo({broadcastTo_:function(e,t){var n=_o(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Qu(n,a)}for(var o=n.shape,i=Array.from(t),s=t.length-1;s>=0;s--)if(o[s]===t[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var c=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===c.length)return ss(n);var u={x:n},l={reps:i};return To.runKernel($r,u,l)}});var pl=jo({ceil_:function(e){var t={x:_o(e,"x","ceil","float32")};return To.runKernel(Rt,t)}});var hl=jo({clipByValue_:function(e,t,n){var r=_o(e,"x","clipByValue");ge(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},o={clipValueMin:t,clipValueMax:n};return To.runKernel(Wt,a,o)}});var fl=jo({concat1d_:function(e){return el(e,0)}});var Il=jo({concat2d_:function(e,t){return el(e,t)}});var Cl=jo({concat3d_:function(e,t){return el(e,t)}});var ml=jo({concat4d_:function(e,t){return el(e,t)}});var vl=jo({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=_o(e,"x","conv2d","float32"),c=_o(t,"filter","conv2d","float32"),u=s,l=!1;3===s.rank&&(l=!0,u=Qu(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ge(4===u.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(u.rank,".")})),ge(4===c.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(c.rank,".")})),ju("conv2d",r,i);var g="NHWC"===a?u.shape[3]:u.shape[1];ge(g===c.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(c.shape[2],".")})),ge(Ou(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")}));var d={x:u,filter:c},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},h=To.runKernel(Jt,d,p);return l?Qu(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var bl=jo({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0,s=_o(e,"x","conv1d"),c=_o(t,"filter","conv1d"),u=s,l=!1;2===s.rank&&(l=!0,u=Qu(s,[1,s.shape[0],s.shape[1]])),ge(3===u.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(u.rank,".")})),ge(3===c.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(c.rank,".")})),ju("conv1d",r,i),ge(u.shape[2]===c.shape[1],(function(){return"Error in conv1d: depth of input (".concat(u.shape[2],") must match ")+"input depth for filter ".concat(c.shape[1],".")})),ge(Ou(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'")})),ge("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var g=Qu(c,[1,c.shape[0],c.shape[1],c.shape[2]]),d=Qu(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=[1,n],h=[1,o],f="NHWC",I=vl(d,g,p,r,f,h,i);return Qu(I,l?[I.shape[2],I.shape[3]]:[I.shape[0],I.shape[2],I.shape[3]])}});var Al=jo({conv2DBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;ge(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,c=t,u=!1;3===t.rank&&(u=!0,c=Qu(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),ge(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),ge(4===c.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(c.rank)})),ge(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===o?s[3]:s[1],g="NHWC"===o?c.shape[3]:c.shape[1];ge(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),ge(g===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(g,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),ju("conv2dDerInput",a,i);var d={dy:c,filter:n},p={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:s},h=To.runKernel(Et,d,p);return u?Qu(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var yl=jo({conv2dTranspose_:function(e,t,n,r,a,o){var i=_o(e,"x","conv2dTranspose"),s=_o(t,"filter","conv2dTranspose");return Al(n,i,s,r,a,"NHWC",o)}});var kl=jo({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],i=_o(e,"x","conv3d"),s=_o(t,"filter","conv3d"),c=i,u=!1;4===i.rank&&(u=!0,c=Qu(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),ge(5===c.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(c.rank,".")})),ge(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),ge(c.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(c.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),ge(Ou(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),ge("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:c,filter:s},g={strides:n,pad:r,dataFormat:a,dilations:o},d=To.runKernel(Tt,l,g);return u?Qu(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Zl=jo({conv3DBackpropInput_:function(e,t,n,r,a){ge(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var o=e,i=t,s=!1;4===t.rank&&(s=!0,i=Qu(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);var c=o[4],u=i.shape[4];ge(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,".")})),ge(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank)})),ge(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),ge(c===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),ge(u===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(u,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:i,filter:n},g={pad:a,strides:r,inputShape:o},d=To.runKernel(Ht,l,g);return s?Qu(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Sl=jo({conv3dTranspose_:function(e,t,n,r,a){var o=_o(e,"x","conv3dTranspose"),i=_o(t,"filter","conv3dTranspose");return Zl(n,o,i,r,a)}});var wl=jo({cos_:function(e){var t={x:_o(e,"x","cos","float32")};return To.runKernel(Mt,t)}});var Bl=jo({cosh_:function(e){var t={x:_o(e,"x","cosh","float32")};return To.runKernel(Dt,t)}});var Gl=jo({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_o(e,"x","cumprod"),o={x:a},i={axis:t,exclusive:n,reverse:r};return To.runKernel(Kt,o,i)}});var xl=jo({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_o(e,"x","cumsum"),o={x:a},i={axis:t,exclusive:n,reverse:r};return To.runKernel(zt,o,i)}});var Rl=jo({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_o(e,"x","denseBincount"),o=_o(t,"weights","denseBincount");ge("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),ge(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),ge(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),ge(o.size===a.size||0===o.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(o.shape,".")}));var i={x:a,weights:o},s={size:n,binaryOutput:r};return To.runKernel(Pt,i,s)}});var Wl=jo({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=_o(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];ge(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),ge(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),ge(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),ge(i%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},c={blockSize:t,dataFormat:n};return To.runKernel(_t,s,c)}});var Vl=jo({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=_o(e,"x","depthwiseConv2d","float32"),c=_o(t,"filter","depthwiseConv2d","float32"),u=s,l=!1;3===s.rank&&(l=!0,u=Qu(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ge(4===u.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")})),ge(4===c.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(c.rank,".")})),ge(u.shape[3]===c.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(u.shape[3],") must match the inChannels dimension in ")+"filter ".concat(c.shape[2],".")})),ju("depthwiseConv2d",r,i);var g={x:u,filter:c},d={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},p=To.runKernel(Ot,g,d);return l?Qu(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Nl=jo({diag_:function(e){var t={x:_o(e,"x","diag")};return To.runKernel(Qt,t)}});var Xl=jo({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=_o(e,"x","dilation2d"),s=_o(t,"filter","dilation2d");ge(3===i.rank||4===i.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,".")})),ge(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),ge("NHWC"===o,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o)}));var c=i,u=!1;3===i.rank&&(c=Qu(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);var l={x:c,filter:s},g={strides:n,pad:r,dilations:a},d=To.runKernel(qt,l,g);return u?Qu(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var Jl=jo({equal_:function(e,t){var n=_o(e,"a","equal","string_or_numeric"),r=_o(t,"b","equal","string_or_numeric"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(sn,i)}});var Fl=jo({where_:function(e,t,n){var r=_o(t,"a","where"),a=_o(n,"b","where"),o=_o(e,"condition","where","bool"),i=Fs(Fs(o.shape,r.shape),a.shape),s={condition:dl(o,i),t:dl(r,i),e:dl(a,i)};return To.runKernel(wr,s)}});var El=jo({divNoNan_:function(e,t){var n=_o(e,"a","div"),r=_o(t,"b","div"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1];var i=jc(n,r),s=eu(i),c=Jl(r,s);return Fl(c,s,i)}});var Tl=jo({dot_:function(e,t){var n=_o(e,"t1","dot"),r=_o(t,"t2","dot");ge((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(ge(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(o,".")})),1===n.rank&&1===r.rank){var i=Qu(n,[1,-1]),s=Qu(r,[-1,1]),c=xs(i,s);return Qu(c,[])}if(1===n.rank&&2===r.rank){var u=Qu(n,[1,-1]),l=Qu(r,[r.shape[0],r.shape[1]]),g=xs(u,l);return Qu(g,[g.size])}if(2===n.rank&&1===r.rank){var d=Qu(r,[-1,1]),p=xs(n,d);return Qu(p,[p.size])}var h=Qu(r,[r.shape[0],r.shape[1]]);return xs(n,h)}});var Yl=jo({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return _o(e,"tensors".concat(t),"einsum")})),o={equation:e};return To.runKernel(nn,a,o)}});var Hl=jo({elu_:function(e){var t={x:_o(e,"x","elu","float32")};return To.runKernel(rn,t)}});var Ml=jo({erf_:function(e){var t=_o(e,"x","erf");ge("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=is(t,"float32"));var n={x:t};return To.runKernel(on,n)}});var Dl=jo({exp_:function(e){var t={x:_o(e,"x","exp")};return To.runKernel(cn,t)}});var Kl=jo({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_o(e,"x","expandDims","string_or_numeric");ge(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return To.runKernel(un,r,a)}});var zl=jo({expm1_:function(e){var t={x:_o(e,"x","expm1")};return To.runKernel(ln,t)}});var Ll=jo({tile_:function(e,t){var n=_o(e,"x","tile","string_or_numeric");ge(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return To.runKernel($r,r,a)}});var Pl=jo({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=os([e,t],r),o=e<=t?e:t,i=0;i<o;++i)a.set(1,i,i);var s=Qu(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Ll(Kl(s,0),[n[0],1,1]);if(2===n.length)return Ll(Kl(Kl(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ll(Kl(Kl(Kl(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var _l=jo({floor_:function(e){var t={x:_o(e,"x","floor","float32")};return To.runKernel(hn,t)}});var Ol=jo({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=_o(e,"x","gather"),o=_o(t,"indices","gather","int32"),i={x:a,indices:o},s={axis:n,batchDims:r};return To.runKernel(Cn,i,s)}});var Ul=jo({greater_:function(e,t){var n=_o(e,"a","greater","string_or_numeric"),r=_o(t,"b","greater","string_or_numeric"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(vn,i)}});var jl=jo({greaterEqual_:function(e,t){var n=_o(e,"a","greaterEqual","string_or_numeric"),r=_o(t,"b","greaterEqual","string_or_numeric"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(bn,i)}});var Ql=jo({imag_:function(e){var t={input:_o(e,"input","imag")};return To.runKernel(kn,t)}});var ql=jo({isFinite_:function(e){var t={x:_o(e,"x","isFinite")};return To.runKernel(Zn,t)}});var $l=jo({isInf_:function(e){var t={x:_o(e,"x","isInf")};return To.runKernel(Sn,t)}});var eg=jo({isNaN_:function(e){var t={x:_o(e,"x","isNaN")};return To.runKernel(wn,t)}});var tg=jo({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=_o(e,"x","leakyRelu"),r={x:n},a={alpha:t};return To.runKernel(Bn,r,a)}});var ng=jo({less_:function(e,t){var n=_o(e,"a","less","string_or_numeric"),r=_o(t,"b","less","string_or_numeric"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(Gn,i)}});var rg=jo({lessEqual_:function(e,t){var n=_o(e,"a","lessEqual","string_or_numeric"),r=_o(t,"b","lessEqual","string_or_numeric"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(xn,i)}});function ag(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return To.runKernel(Rn,{},r)}var og=jo({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=_o(e,"x","localResponseNormalization");ge(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")})),ge(me(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var i=o,s=!1;3===o.rank&&(s=!0,i=Qu(o,[1,o.shape[0],o.shape[1],o.shape[2]]));var c={x:i},u={depthRadius:t,bias:n,alpha:r,beta:a},l=To.runKernel(En,c,u);return s?Qu(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var ig=jo({log_:function(e){var t={x:_o(e,"x","log","float32")};return To.runKernel(Wn,t)}});var sg=jo({log1p_:function(e){var t={x:_o(e,"x","log1p")};return To.runKernel(Vn,t)}});var cg=jo({neg_:function(e){var t={x:_o(e,"x","neg")};return To.runKernel($n,t)}});var ug=jo({softplus_:function(e){var t={x:_o(e,"x","softplus")};return To.runKernel(Nr,t)}});var lg=jo({logSigmoid_:function(e){var t=_o(e,"x","logSigmoid"),n=iu((function(e){return{value:cg(ug(cg(e))),gradFunc:function(t){return Qc(t,tl(cg(e)))}}}));return n(t)}});var gg=jo({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","max"),a={x:r},o={reductionIndices:t,keepDims:n};return To.runKernel(Yn,a,o)}});var dg=jo({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","sum");"bool"===r.dtype&&(r=is(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return To.runKernel(Jr,a,o)}});var pg=jo({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=_o(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=iu((function(e,n){var r=gg(e,t,!0),a=hu(e,r),o=hu(is(a,"float32"),ig(dg(Dl(a),t,!0)));n([o]);return{value:o,gradFunc:function(e,n){var r=(0,ne.Z)(n,1)[0],a=Dl(r);return hu(e,Qc(dg(e,t,!0),a))}}}));return r(n)}});function hg(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function fg(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function Ig(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var o=t.map((function(t){return e[t]}));return[n,o]}function Cg(e,t){return fg(e,t.map((function(e){return 1})),t)}function mg(e,t,n){ge(hg(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function vg(e,t){if(hg(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function bg(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Ag(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var yg=jo({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","logSumExp"),a=Se(t,r.shape),o=gg(r,a,!0),i=hu(r,o),s=Dl(i),c=dg(s,a),u=ig(c),l=Oc(Qu(o,u.shape),u);if(n){var g=Cg(l.shape,a);return Qu(l,g)}return l}});var kg=jo({logicalAnd_:function(e,t){var n=_o(e,"a","logicalAnd","bool"),r=_o(t,"b","logicalAnd","bool");Fs(n.shape,r.shape);var a={a:n,b:r};return To.runKernel(Nn,a)}});var Zg=jo({logicalNot_:function(e){var t={x:_o(e,"x","logicalNot","bool")};return To.runKernel(Xn,t)}});var Sg=jo({logicalOr_:function(e,t){var n=_o(e,"a","logicalOr","bool"),r=_o(t,"b","logicalOr","bool");Fs(n.shape,r.shape);var a={a:n,b:r};return To.runKernel(Jn,a)}});var wg=jo({logicalXor_:function(e,t){var n=_o(e,"a","logicalXor","bool"),r=_o(t,"b","logicalXor","bool");return Fs(n.shape,r.shape),kg(Sg(e,t),Zg(kg(e,t)))}});var Bg=jo({maxPool_:function(e,t,n,r,a){var o=_o(e,"x","maxPool"),i=o,s=!1;3===o.rank&&(s=!0,i=Qu(o,[1,o.shape[0],o.shape[1],o.shape[2]])),ge(4===i.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")})),ge(Ou(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),ju("maxPool",r,a);var c={x:i},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=To.runKernel(Mn,c,u);return s?Qu(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Gg=jo({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=_o(e,"x","maxPool3d"),s=i,c=!1;4===i.rank&&(c=!0,s=Qu(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),ge(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),ge("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),ju("maxPool3d",r,a);var u={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},g=To.runKernel(Kn,u,l);return c?Qu(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}});var xg=jo({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=_o(e,"x","maxPoolWithArgmax"),i={x:o},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},c=To.runKernel(Ln,i,s);return{result:c[0],indexes:c[1]}}});var Rg=jo({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","mean"),a={x:r},o={axis:t,keepDims:n};return To.runKernel(Pn,a,o)}});function Wg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Wg(e,"float32"),r=Wg(e,"float32");return Qo(n,r)}var a=Le(fe(e),t);return To.makeTensor(a,e,t)}function Vg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Vg(e,"float32"),r=Wg(e,"float32");return Qo(n,r)}var a=ze(fe(e),t);return To.makeTensor(a,e,t)}function Ng(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var o=_o(e,"x","meshgrid",e instanceof Io?e.dtype:"float32");if(void 0===t)return[o];var i=_o(t,"y","meshgrid",t instanceof Io?t.dtype:"float32"),s=fe(o.shape),c=fe(i.shape);return"xy"===a?(o=Qu(o,[1,-1]),i=Qu(i,[-1,1]),[xs(Vg([c,1],o.dtype),o),xs(i,Vg([1,s],i.dtype))]):(o=Qu(o,[-1,1]),i=Qu(i,[1,-1]),[xs(o,Vg([1,c],o.dtype)),xs(Vg([s,1],i.dtype),i)])}var Xg=jo({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","min"),a={x:r},o={axis:t,keepDims:n};return To.runKernel(_n,a,o)}});var Jg=jo({minimum_:function(e,t){var n=_o(e,"a","minimum"),r=_o(t,"b","minimum"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],"bool"===n.dtype&&(n=is(n,"int32"),r=is(r,"int32")),Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(On,i)}});var Fg=jo({mirrorPad_:function(e,t,n){ge("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=_o(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ge(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,o=function(e){ge(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ge(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},i=0;i<r.rank;i++)o(i);var s={paddings:t,mode:n},c={x:r};return To.runKernel(Un,c,s)}});var Eg=jo({mod_:function(e,t){var n=_o(e,"a","mod"),r=_o(t,"b","mod"),a=Bo(n,r),o=(0,ne.Z)(a,2),i={a:n=o[0],b:r=o[1]};return To.runKernel(jn,i)}});var Tg=jo({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Se(t,(e=_o(e,"x","moments")).shape),a=Rg(e,r,n),o=a.shape;n||(o=Cg(a.shape,r));var i=$c(hu(is(e,"float32"),Qu(a,o))),s=Rg(i,r,n);return{mean:a,variance:s}}});var Yg=jo({multiRNNCell_:function(e,t,n,r){for(var a=_o(t,"data","multiRNNCell"),o=Oo(n,"c","multiRNNCell"),i=Oo(r,"h","multiRNNCell"),s=a,c=[],u=0;u<e.length;u++){var l=e[u](s,o[u],i[u]);c.push(l[0]),c.push(l[1]),s=l[1]}for(var g=[],d=[],p=0;p<c.length;p+=2)g.push(c[p]),d.push(c[p+1]);return[g,d]}});var Hg=jo({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_o(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(o,"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(i));n=n||Math.random();var s=1===i?Qu(a,[1,-1]):a,c={logits:s},u={numSamples:t,seed:n,normalized:r},l=To.runKernel(Qn,c,u);return 1===i?Qu(l,[l.size]):l}});var Mg=jo({notEqual_:function(e,t){var n=_o(e,"a","notEqual","string_or_numeric"),r=_o(t,"b","notEqual","string_or_numeric"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(er,i)}});var Dg=jo({onesLike_:function(e){var t={x:_o(e,"x","onesLike")};return To.runKernel(ar,t)}});var Kg=jo({outerProduct_:function(e,t){var n=_o(e,"v1","outerProduct"),r=_o(t,"v2","outerProduct");ge(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Qu(n,[-1,1]),o=Qu(r,[1,-1]);return xs(a,o)}});var zg=jo({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=_o(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},o={x:r};return To.runKernel(sr,o,a)}});var Lg=jo({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ge(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),zg(e,[t],n)}});var Pg=jo({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ge(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),zg(e,t,n)}});var _g=jo({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ge(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),zg(e,t,n)}});var Og=jo({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ge(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),zg(e,t,n)}});var Ug=jo({spaceToBatchND_:function(e,t,n){var r=_o(e,"x","spaceToBatchND");ge(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),ge(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),ge(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},o={blockShape:t,paddings:n};return To.runKernel(Fr,a,o)}});var jg=jo({pool_:function(e,t,n,r,a,o,i){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");var s=_o(e,"x","maxPool"),c=s,u=!1;3===s.rank&&(u=!0,c=Qu(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ge(Ou(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(a,"'")}));var l,g=Fu(c.shape,t,o,a,r),d=[g.dilationHeight,g.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([g.filterHeight,g.filterWidth],d):[[0,0],[0,0]];var p=1===d[0]&&1===d[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),s=a.map((function(e,t){return e+i[t]})),c=t.map((function(e,t){return[r[t],s[t]]})),u=t.map((function(e,t){return[0,i[t]]}));return[c,u]}([g.inHeight,g.inWidth],d,l),f=(0,ne.Z)(h,2),I=f[0],C=f[1],m=p?r:"valid",v=p?c:Ug(c,d,I),b=("avg"===n?function(){return qu(v,t,o,m,i)}:function(){return Bg(v,t,o,m,i)})(),A=p?b:ol(b,d,C);return u?Qu(A,[A.shape[1],A.shape[2],A.shape[3]]):A}});var Qg=jo({prelu_:function(e,t){var n={x:_o(e,"x","prelu"),alpha:_o(t,"alpha","prelu")};return To.runKernel(lr,n)}});var qg=jo({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_o(e,"x","prod");"bool"===r.dtype&&(r=is(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return To.runKernel(gr,a,o)}});var $g=jo({rand_:function(e,t,n){var r=fe(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return To.makeTensor(a,e,n)}}),ed=n(6699),td=function(){function e(t,n,r,a,o){(0,U.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=ed.alea(i.toString())}return(0,j.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),nd=function(){function e(t,n,r,a){(0,U.Z)(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var o=a||Math.random();this.randu=ed.alea(o.toString()),this.randn=new td(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,j.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),rd=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if((0,U.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==o&&(o=Math.random()),"number"===typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=ed.alea(o)}return(0,j.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var ad=jo({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var o=new nd(t,n,r,a),i=os(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var od=jo({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var o=new td(t,n,r,!1,a),i=os(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var id=jo({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,o=os(e,r),i=new rd(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});function sd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return To.runKernel(dr,{},a)}var cd=jo({real_:function(e){var t={input:_o(e,"input","real")};return To.runKernel(pr,t)}});var ud=jo({reciprocal_:function(e){var t={x:_o(e,"x","reciprocal")};return To.runKernel(hr,t)}});var ld=jo({relu_:function(e){var t={x:_o(e,"x","relu")};return To.runKernel(fr,t)}});var gd=jo({relu6_:function(e){var t={x:_o(e,"x","relu6")};return To.runKernel(Ar,t)}});var dd=jo({reverse_:function(e,t){var n={x:_o(e,"x","reverse")},r={dims:t};return To.runKernel(yr,n,r)}});var pd=jo({reverse1d_:function(e){var t=_o(e,"x","reverse");return ge(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),dd(t,0)}});var hd=jo({reverse2d_:function(e,t){var n=_o(e,"x","reverse");return ge(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),dd(n,t)}});var fd=jo({reverse3d_:function(e,t){var n=_o(e,"x","reverse");return ge(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),dd(n,t)}});var Id=jo({reverse4d_:function(e,t){var n=_o(e,"x","reverse");return ge(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),dd(n,t)}});var Cd=jo({round_:function(e){var t={x:_o(e,"x","round")};return To.runKernel(kr,t)}});var md=jo({rsqrt_:function(e){var t={x:_o(e,"x","rsqrt","float32")};return To.runKernel(Zr,t)}});var vd=jo({selu_:function(e){var t={x:_o(e,"x","selu")};return To.runKernel(Br,t)}});var bd=jo({separableConv2d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=_o(e,"x","separableConv2d"),c=_o(t,"depthwiseFilter","separableConv2d"),u=_o(n,"pointwiseFilter","separableConv2d"),l=s,g=!1;if(3===s.rank&&(g=!0,l=Qu(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ge(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),ge(4===c.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(c.rank,".")})),ge(4===u.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(c.rank,".")})),ge(1===u.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(u.shape[0],".")})),ge(1===u.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(u.shape[1],".")}));var d=c.shape[2],p=c.shape[3];ge(u.shape[2]===d*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*p,", ")+"but got ".concat(u.shape[2],".")}));var h=Vl(l,c,r,a,i,o),f=1,I=vl(h,u,f,"valid",i);return g?Qu(I,[I.shape[1],I.shape[2],I.shape[3]]):I}});function Ad(){return Ad=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l,g,d,p;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t,"x","setdiff1d"),a=_o(n,"y","setdiff1d"),ge(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),ge(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),ge(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return o=e.sent,e.next=10,a.data();case 10:for(i=e.sent,s=new Set(i),c=0,u=0;u<o.length;u++)s.has(o[u])||c++;for(l=new po([c],r.dtype),g=new po([c],"int32"),d=0,p=0;d<o.length;d++)s.has(o[d])||(l.values[p]=o[d],g.values[p]=d,p++);return e.abrupt("return",[l.toTensor(),g.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}var yd=function(e,t){return Ad.apply(this,arguments)};var kd=jo({sign_:function(e){var t={x:_o(e,"x","sign")};return To.runKernel(Wr,t)}});var Zd=jo({sin_:function(e){var t={x:_o(e,"x","sin","float32")};return To.runKernel(xr,t)}});var Sd=jo({sinh_:function(e){var t={x:_o(e,"x","sinh")};return To.runKernel(Rr,t)}});var wd=jo({slice1d_:function(e,t,n){var r=_o(e,"x","slice1d");return ge(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),nl(r,[t],[n])}});var Bd=jo({slice2d_:function(e,t,n){var r=_o(e,"x","slice2d");return ge(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),nl(r,t,n)}});var Gd=jo({slice3d_:function(e,t,n){var r=_o(e,"x","slice3d");return ge(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),nl(r,t,n)}});var xd=jo({slice4d_:function(e,t,n){var r=_o(e,"x","slice4d");return ge(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),nl(r,t,n)}});var Rd=jo({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=_o(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return To.runKernel(Tr,r,a)}});var Wd=jo({fft_:function(e){ge("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return To.runKernel(gn,t)}});var Vd=jo({ifft_:function(e){ge("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return To.runKernel(yn,t)}});var Nd=jo({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Qu(e,[r,n]);t=Vd(a)}else{var o=[r,2*(n-1)],i=Qu(cd(e),[r,n]),s=Qu(Ql(e),[r,n]),c=dd(nl(i,[0,1],[r,n-2]),1),u=Qc(dd(nl(s,[0,1],[r,n-2]),1),cu(-1)),l=el([i,c],1),g=el([s,u],1),d=Qu(Qo(l,g),[o[0],o[1]]);t=Vd(d)}if(t=cd(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=Qu(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}});var Xd=jo({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=_o(e,"x","split"),a={x:r},o={numOrSizeSplits:t,axis:n};return To.runKernel(Er,a,o)}});var Jd=jo({rfft_:function(e,t){ge("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=nl(e,o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=el([e,Wg(s)],e.shape.length-1),r=t}else n=e;var c=eu(n),u=Qu(Qo(n,c),[a,r]),l=Wd(u),g=Math.floor(r/2)+1,d=cd(l),p=Ql(l),h=Xd(d,[g,r-g],d.shape.length-1),f=Xd(p,[g,r-g],p.shape.length-1),I=n.shape.slice();return I[n.shape.length-1]=g,Qu(Qo(h[0],f[0]),I)}});var Fd=jo({squaredDifference_:function(e,t){var n=_o(e,"a","squaredDifference"),r=_o(t,"b","squaredDifference"),a=Bo(n,r),o=(0,ne.Z)(a,2);n=o[0],r=o[1],Fs(n.shape,r.shape);var i={a:n,b:r};return To.runKernel(zr,i,{})}});var Ed=jo({squeeze_:function(e,t){var n=_o(e,"x","squeeze");return Qu(n,we(n.shape,t).newShape)}});var Td=jo({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Oo(e,"tensors","stack","string_or_numeric");ge(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&ge(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return To.runKernel(ir,r,a)}});var Yd=jo({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_o(e,"x","step"),r={x:n},a={alpha:t};return To.runKernel(sa,r,a)}});var Hd=jo({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=_o(e,"x","stridedSlice","string_or_numeric"),l={x:u},g={begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:c};return To.runKernel(Pr,l,g)}});var Md=jo({tan_:function(e){var t={x:_o(e,"x","tan","float32")};return To.runKernel(Qr,t)}});function Dd(e,t){pe(e);var n=zo(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return qo(e,null,n,t)}function Kd(e,t,n){if(pe(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=zo(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return qo(e,t,r,n)}function zd(e,t,n){if(pe(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=zo(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return qo(e,t,r,n)}function Ld(e,t,n){if(pe(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=zo(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return qo(e,t,r,n)}function Pd(e,t,n){if(pe(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=zo(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return qo(e,t=t||r,r,n)}var _d=jo({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=_o(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var o={x:r},i={k:t,sorted:n},s=To.runKernel(ea,o,i),c=(0,ne.Z)(s,2),u=c[0],l=c[1];return{values:u,indices:l}}});var Od=jo({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new td(t,n,r,!0,a),i=os(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var Ud=jo({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_o(e,"x","unique","string_or_numeric");ge(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},o=To.runKernel(ra,r,a),i=(0,ne.Z)(o,2),s=i[0],c=i[1];return{values:s,indices:c}}});var jd=jo({unsortedSegmentSum_:function(e,t,n){var r=_o(e,"x","unsortedSegmentSum"),a=_o(t,"segmentIds","unsortedSegmentSum","int32");ge(me(n),(function(){return"numSegments must be of dtype int"}));var o={x:r,segmentIds:a},i={numSegments:n};return To.runKernel(oa,o,i)}});var Qd=jo({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_o(e,"x","unstack","string_or_numeric");ge(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return To.runKernel(aa,r,a)}});function qd(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return To.makeVariable(e,t,n,r)}function $d(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=os(e,"int32"),o=os([n.length,e.length],"int32"),i=0;i<n.length;i++){var s=a.indexToLoc(n[i]),c=i*e.length;o.values.set(s,c)}return o.toTensor()}function ep(){return(ep=(0,O.Z)(q().mark((function e(t){var n,r,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_o(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=$d(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tp=function(e){return ep.apply(this,arguments)};function np(){return np=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h,f,I;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=_o(t,"tensor","boolMask"),o=_o(n,"mask","boolMask","bool"),i=null==r?0:r,s=o.rank,c=a.shape,ge(s>0,(function(){return"mask cannot be scalar"})),de(c.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=i;l<i+s;l++)u*=c[l];return g=c.slice(0,i).concat([u],c.slice(i+s)),d=Qu(a,g),p=Qu(o,[-1]),e.next=14,tp(p);case 14:return h=e.sent,f=Ed(h,[1]),I=Ol(d,f,i),t!==a&&a.dispose(),n!==o&&o.dispose(),f.dispose(),d.dispose(),p.dispose(),h.dispose(),e.abrupt("return",I);case 24:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}var rp=function(e,t,n){return np.apply(this,arguments)};function ap(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Iu(e);if(1!==e.rank&&null===n)return ap(Qu(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return dg(Iu(e),n);if(t===1/0)return gg(Iu(e),n);if(t===-1/0)return Xg(Iu(e),n);if("euclidean"===t||2===t)return qc(dg(pu(Iu(e),cu(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return gg(dg(Iu(e),n[0]),n[1]-1);if(t===1/0)return gg(dg(Iu(e),n[1]),n[0]);if(t===-1/0)return Xg(dg(Iu(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return qc(dg($c(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var op=jo({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ap(e=_o(e,"x","norm"),t,n),o=a.shape;if(r){var i=Se(n,e.shape);o=Cg(a.shape,i)}return Qu(a,o)}});var ip=jo({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=_o(e,"v","movingAverage"),i=_o(t,"x","movingAverage"),s=_o(n,"decay","movingAverage");Go(o,i),ge(Ce(o.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var c=cu(1),u=hu(c,s),l=Qc(hu(i,o),u);if(a){ge(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var g=_o(r,"step","movingAverage");l=jc(l,hu(c,pu(s,g)))}return Oc(o,l)}});var sp=jo({scatterND_:function(e,t,n){var r=_o(e,"indices","scatterND","int32"),a=_o(t,"updates","scatterND");_s(a,r,n);var o={indices:r,updates:a},i={shape:n};return To.runKernel(Sr,o,i)}});function cp(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var up=jo({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=_o(e,"sparseIndices","sparseToDense","int32"),o=_o(t,"sparseValues","sparseToDense"),i=_o(r,"defaultValue","sparseToDense",o.dtype);cp(a,o,n,i);var s={sparseIndices:a,sparseValues:o,defaultValue:i},c={outputShape:n};return To.runKernel(Kr,s,c)}});var lp=jo({gatherND_:function(e,t){var n=_o(t,"indices","gatherND","int32"),r={params:_o(e,"x","gatherND","string_or_numeric"),indices:n};return To.runKernel(mn,r)}});var gp=jo({dropout_:function(e,t,n,r){var a=_o(e,"x","dropout");if(ge("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),ge(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Io?a.clone():a;var o=function(e,t){if(null==t)return e.shape.slice();if(Ce(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,s=jc(_l(Oc(id(o,0,1,"float32",r),i)),i);return Qc(a,s)}});function dp(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function pp(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return Dd(a,"float32")}function hp(){return hp=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l,g,d,p,h,f,I,C,m=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>2&&void 0!==m[2]?m[2]:1,a=_o(t,"predictions","inTopK"),o=_o(n,"targets","inTopK"),ge(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),ge(a.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(o.rank)})),de(a.shape.slice(0,a.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=a.shape[a.shape.length-1],ge(r>0&&r<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(i,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,o.data();case 13:c=e.sent,u=s.length/i,l=i,g=Be("bool",u),d=0;case 17:if(!(d<u)){e.next=35;break}for(p=d*l,h=s.subarray(p,p+l),f=[],I=0;I<h.length;I++)f.push({value:h[I],index:I});f.sort((function(e,t){return t.value-e.value})),g[d]=0,C=0;case 25:if(!(C<r)){e.next=32;break}if(f[C].index!==c[d]){e.next=29;break}return g[d]=1,e.abrupt("break",32);case 29:C++,e.next=25;break;case 32:d++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==o&&o.dispose(),e.abrupt("return",$o(g,o.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}var fp=function(e,t){return hp.apply(this,arguments)};var Ip=jo({conv2DBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Qu(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var c=t;3===c.rank&&(c=Qu(t,[1,t.shape[0],t.shape[1],t.shape[2]])),ge(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),ge(4===c.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(c.shape,".")})),ge(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var u="NHWC"===o?s.shape[3]:s.shape[1],l="NHWC"===o?c.shape[3]:c.shape[1];ge(u===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(u,") must ")+"match input depth in filter (".concat(n[2],".")})),ge(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),ju("conv2dDerFilter",a,i);var g={x:s,dy:c},d={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:n};return To.runKernel(Ft,g,d)}});function Cp(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Qc(e,Yd(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function mp(e,t){var n=t,r=Js(e.shape,t.shape);return r.length>0&&(n=dg(n,r)),Qu(n,e.shape)}function vp(e,t,n,r){if("linear"===t)return e;if("relu"===t)return ld(e);if("elu"===t)return Hl(e);if("relu6"===t)return gd(e);if("prelu"===t)return Qg(e,n);if("leakyrelu"===t)return tg(e,r);if("sigmoid"===t)return tl(e);throw new Error("Unknown fused activation ".concat(t,"."))}var bp=function(e,t){return!(e>0)||"linear"===t};var Ap=jo({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=void 0===o?"NHWC":o,s=e.dilations,c=void 0===s?[1,1]:s,u=e.dimRoundingMode,l=e.bias,g=e.activation,d=void 0===g?"linear":g,p=e.preluActivationWeights,h=e.leakyreluAlpha;if(d=d||"linear",!1===bp(To.state.gradientDepth,d)){var f=vl(t,n,r,a,i,c,u);return null!=l&&(f=Oc(f,l)),vp(f,d,p,h)}var I=_o(t,"x","conv2d","float32"),C=_o(n,"filter","conv2d","float32"),m=I,v=!1;3===I.rank&&(v=!0,m=Qu(I,[1,I.shape[0],I.shape[1],I.shape[2]])),ge(4===m.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(m.rank,".")})),ge(4===C.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(C.rank,".")})),ju("fused conv2d",a,u),ge(m.shape[3]===C.shape[2],(function(){return"Error in conv2d: depth of input (".concat(m.shape[3],") must match ")+"input depth for filter ".concat(C.shape[2],".")})),ge(Ou(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(c,"'")})),ge("NHWC"===i,(function(){return"Error in conv2d: got dataFormat of ".concat(i," but only NHWC is currently supported.")}));var b,A,y=Tu(m.shape,C.shape,r,c,a,u);if(null!=l){var k=Bo(b=_o(l,"bias","fused conv2d"),I);b=(0,ne.Z)(k,1)[0],Fs(y.outShape,b.shape)}null!=p&&(A=_o(p,"prelu weights","fused conv2d"));var Z=function(e,t){var n=(0,ne.Z)(t,4),o=n[0],i=n[1],s=n[2],u=n[3],l=Cp(e,s,d);ge(_u(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(c,"'")}));var g=[Al(i.shape,l,o,r,a),Ip(i,l,o.shape,r,a)];if(null!=u){var p=mp(u,l);g.push(p)}return g},S={x:m,filter:C,bias:b,preluActivationWeights:A},w={strides:r,pad:a,dataFormat:i,dilations:c,dimRoundingMode:u,activation:d,leakyreluAlpha:h};if(null==l){var B=iu((function(e,t,n){var r=To.runKernel(ga,S,w);return n([t,e,r]),v&&(r=Qu(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:Z}}));return B(m,C)}var G=iu((function(e,t,n,r){var a=To.runKernel(ga,S,w);return r([t,e,a,n]),v&&(a=Qu(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:Z}}));return G(m,C,b)}});var yp=jo({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Qu(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var c=t;3===c.rank&&(c=Qu(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var u={x:s,dy:c},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,filterShape:n};return To.runKernel(Ut,u,l)}});var kp=jo({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,c=!1;3===t.rank&&(c=!0,s=Qu(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var u={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,inputShape:e},g=To.runKernel(jt,u,l);return c?Qu(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});var Zp=jo({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=void 0===o?"NHWC":o,s=e.dilations,c=void 0===s?[1,1]:s,u=e.dimRoundingMode,l=e.bias,g=e.activation,d=void 0===g?"linear":g,p=e.preluActivationWeights,h=e.leakyreluAlpha;if(!1===bp(To.state.gradientDepth,d)){var f=Vl(t,n,r,a,i,c,u);return null!=l&&(f=Oc(f,l)),vp(f,d,p,h)}var I=_o(t,"x","depthwiseConv2d","float32"),C=_o(n,"filter","depthwiseConv2d","float32"),m=I,v=!1;3===I.rank&&(v=!0,m=Qu(I,[1,I.shape[0],I.shape[1],I.shape[2]])),ge(4===m.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(m.rank,".")})),ge(4===C.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(C.rank,".")})),ge(m.shape[3]===C.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(m.shape[3],") must match the inChannels dimension in ")+"filter ".concat(C.shape[2],".")})),null==c&&(c=[1,1]),ge(Ou(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(c,"'")})),ju("fused depthwiseConv2d",a,u);var b,A,y=Tu(m.shape,C.shape,r,c,a,u,!0);if(null!=l){var k=Bo(b=_o(l,"bias","fused conv2d"),I),Z=(0,ne.Z)(k,1);b=Z[0],Fs(y.outShape,b.shape)}null!=p&&(A=_o(p,"prelu weights","fused depthwiseConv2d"));var S=function(e,t){ge(_u(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(c,"'")}));var n=(0,ne.Z)(t,4),o=n[0],i=n[1],s=n[2],l=n[3],g=Cp(e,s,d),p=kp(i.shape,g,o,r,a,c,u),h=yp(i,g,o.shape,r,a,c,u);return null!=l?[p,h,mp(b,g)]:[p,h]},w={x:m,filter:C,bias:b,preluActivationWeights:A},B={strides:r,pad:a,dataFormat:i,dilations:c,dimRoundingMode:u,activation:d,leakyreluAlpha:h};if(null==l){var G=iu((function(e,t,n){var r=To.runKernel(da,w,B);return n([t,e,r]),v&&(r=Qu(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}));return G(m,C)}var x=iu((function(e,t,n,r){var a=To.runKernel(da,w,B);return r([t,e,a,n]),v&&(a=Qu(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:S}}));return x(m,C,b)}});var Sp=jo({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,o=e.transposeB,i=void 0!==o&&o,s=e.bias,c=e.activation,u=void 0===c?"linear":c,l=e.preluActivationWeights,g=e.leakyreluAlpha;if(!1===bp(To.state.gradientDepth,u)){var d=xs(t,n,a,i);return null!=s&&(d=Oc(d,s)),vp(d,u,l,g)}var p=_o(t,"a","fused matMul"),h=_o(n,"b","fused matMul"),f=Bo(p,h),I=(0,ne.Z)(f,2);p=I[0],h=I[1];var C=a?p.shape[p.rank-2]:p.shape[p.rank-1],m=i?h.shape[h.rank-1]:h.shape[h.rank-2],v=a?p.shape[p.rank-1]:p.shape[p.rank-2],b=i?h.shape[h.rank-2]:h.shape[h.rank-1],A=p.shape.slice(0,-2),y=h.shape.slice(0,-2),k=fe(A),Z=fe(y);ge(C===m,(function(){return"Error in fused matMul: inner shapes (".concat(C,") and (")+"".concat(m,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(h.shape," and transposeA=").concat(a)+" and transposeB=".concat(i," must match.")}));var S,w,B=Fs(p.shape.slice(0,-2),h.shape.slice(0,-2)).concat([v,b]),G=Qu(p,a?[k,C,v]:[k,v,C]),x=Qu(h,i?[Z,b,m]:[Z,m,b]);if(null!=s){var R=Bo(S=_o(s,"bias","fused matMul"),p);S=(0,ne.Z)(R,1)[0],Fs(B,S.shape)}null!=l&&(w=_o(l,"prelu weights","fused matMul"));var W=function(e,t){var n,r,o=(0,ne.Z)(t,4),c=o[0],l=o[1],g=o[2],d=o[3],p=Cp(Qu(e,g.shape),g,u);return a||i?!a&&i?(n=xs(p,l,!1,!1),r=xs(p,c,!0,!1)):a&&!i?(n=xs(l,p,!1,!0),r=xs(c,p,!1,!1)):(n=xs(l,p,!0,!0),r=xs(p,c,!0,!0)):(n=xs(p,l,!1,!0),r=xs(c,p,!0,!1)),null!=s?[n,r,mp(d,p)]:[n,r]},V={a:G,b:x,bias:S,preluActivationWeights:w},N={transposeA:a,transposeB:i,activation:u,leakyreluAlpha:g};if(null==s){var X=iu((function(e,t,n){var r=To.runKernel(la,V,N);return n([e,t,r]),{value:Qu(r,B),gradFunc:W}}));return X(G,x)}var J=iu((function(e,t,n,r){var a=To.runKernel(la,V,N);return r([e,t,a,n]),{value:Qu(a,B),gradFunc:W}}));return J(G,x,S)}});var wp=jo({hammingWindow_:function(e){return pp(e,.54,.46)}});var Bp=jo({hannWindow_:function(e){return pp(e,.5,.5)}});var Gp=jo({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0,i=[];o+t<=e.size;)i.push(nl(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,c=el([nl(e,o,t-s),gu([s],a)]);i.push(c),o+=n}return 0===i.length?Kd([],[0,t]):Qu(el(i),[i.length,t])}});var xp=jo({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bp;null==r&&(r=dp(t));var o=Gp(e,t,n),i=Qc(o,a(t));return Jd(i,r)}});var Rp=jo({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=_o(e,"image","cropAndResize"),s=_o(t,"boxes","cropAndResize","float32"),c=_o(n,"boxInd","cropAndResize","int32"),u=s.shape[0];ge(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),ge(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(u,",4] ")+"but had shape ".concat(s.shape,".")})),ge(1===c.rank&&c.shape[0]===u,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(u,"] ")+"but had shape ".concat(s.shape,".")})),ge(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),ge(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),ge("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:i,boxes:s,boxInd:c},g={method:a,extrapolationValue:o,cropSize:r},d=To.runKernel(Lt,l,g);return d}});var Wp=jo({flipLeftRight_:function(e){var t=_o(e,"image","flipLeftRight","float32");ge(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return To.runKernel(pn,n,{})}});var Vp=jo({grayscaleToRGB_:function(e){var t=_o(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];ge(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),ge(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Ll(t,a)}});var Np=jo({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=_o(e,"image","rotateWithOffset","float32");ge(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var o={image:a},i={radians:t,fillValue:n,center:r},s=To.runKernel(ua,o,i);return s}});function Xp(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),ge(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),ge(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),ge(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),ge(1===t.rank,(function(){return"scores must be a 1D tensor"})),ge(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])})),ge(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var Jp=jo({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=_o(e,"boxes","nonMaxSuppression","float32"),i=_o(t,"scores","nonMaxSuppression","float32"),s=Xp(o,i,n,r,a),c={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return To.runKernel(tr,{boxes:o,scores:i},c)}});function Fp(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,o=0,i=!1;for(;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}(e,t,n||Ep)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Ep(e,t){return e>t?1:e<t?-1:0}function Tp(e,t,n,r,a){return Mp(e,t,n,r,a,0)}function Yp(e,t,n,r,a,o){return Mp(e,t,n,r,a,0,!1,o,!0)}function Hp(e,t,n,r,a,o){return Mp(e,t,n,r,a,o,!0)}function Mp(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=[],l=0;l<t.length;l++)t[l]>a&&u.push({score:t[l],boxIndex:l,suppressBeginIndex:0});u.sort(zp);for(var g=o>0?-.5/o:0,d=[],p=[];d.length<n&&u.length>0;){var h=u.pop(),f=h.score,I=h.boxIndex,C=h.suppressBeginIndex;if(f<a)break;for(var m=!1,v=d.length-1;v>=C;--v){var b=Dp(e,I,d[v]);if(b>=r){m=!0;break}if(h.score=h.score*Kp(r,g,b),h.score<=a)break}h.suppressBeginIndex=d.length,m||(h.score===f?(d.push(I),p.push(h.score)):h.score>a&&Fp(u,h,zp))}var A=d.length,y=n-A;s&&y>0&&(d.push.apply(d,(0,_.Z)(new Array(y).fill(0))),p.push.apply(p,(0,_.Z)(new Array(y).fill(0))));var k={selectedIndices:d};return i&&(k.selectedScores=p),c&&(k.validOutputs=A),k}function Dp(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),g=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(s-o)*(c-i),h=(g-u)*(d-l);if(p<=0||h<=0)return 0;var f=Math.max(o,u),I=Math.max(i,l),C=Math.min(s,g),m=Math.min(c,d),v=Math.max(C-f,0)*Math.max(m-I,0);return v/(p+h-v)}function Kp(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function zp(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Lp(){return Lp=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,o=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,i=_o(t,"boxes","nonMaxSuppressionAsync"),s=_o(n,"scores","nonMaxSuppressionAsync"),c=Xp(i,s,r,a,o),r=c.maxOutputSize,a=c.iouThreshold,o=c.scoreThreshold,e.next=10,Promise.all([i.data(),s.data()]);case 10:return u=e.sent,l=u[0],g=u[1],d=Tp(l,g,r,a,o),p=d.selectedIndices,i!==t&&i.dispose(),s!==n&&s.dispose(),e.abrupt("return",Dd(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),Lp.apply(this,arguments)}var Pp=function(e,t,n){return Lp.apply(this,arguments)};var _p=jo({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=_o(e,"boxes","nonMaxSuppression"),s=_o(t,"scores","nonMaxSuppression"),c=Xp(i,s,n,r,a,o),u={boxes:i,scores:s},l={maxOutputSize:n=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:o=c.softNmsSigma},g=To.runKernel(rr,u,l);return{selectedIndices:g[0],selectedScores:g[1]}}});function Op(){return Op=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h,f,I=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.length>3&&void 0!==I[3]?I[3]:.5,o=I.length>4&&void 0!==I[4]?I[4]:Number.NEGATIVE_INFINITY,i=I.length>5&&void 0!==I[5]?I[5]:0,s=_o(t,"boxes","nonMaxSuppressionAsync"),c=_o(n,"scores","nonMaxSuppressionAsync"),u=Xp(s,c,r,a,o,i),r=u.maxOutputSize,a=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma,e.next=12,Promise.all([s.data(),c.data()]);case 12:return l=e.sent,g=l[0],d=l[1],p=Hp(g,d,r,a,o,i),h=p.selectedIndices,f=p.selectedScores,s!==t&&s.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Dd(h,"int32"),selectedScores:Dd(f)});case 19:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}var Up=function(e,t,n){return Op.apply(this,arguments)};var jp=jo({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=_o(e,"boxes","nonMaxSuppression"),s=_o(t,"scores","nonMaxSuppression"),c=Xp(i,s,n,r,a,null),u=c.maxOutputSize,l=c.iouThreshold,g=c.scoreThreshold,d={boxes:i,scores:s},p={maxOutputSize:u,iouThreshold:l,scoreThreshold:g,padToMaxOutputSize:o},h=To.runKernel(nr,d,p);return{selectedIndices:h[0],validOutputs:h[1]}}});function Qp(){return Qp=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.length>3&&void 0!==b[3]?b[3]:.5,o=b.length>4&&void 0!==b[4]?b[4]:Number.NEGATIVE_INFINITY,i=b.length>5&&void 0!==b[5]&&b[5],s=_o(t,"boxes","nonMaxSuppressionAsync"),c=_o(n,"scores","nonMaxSuppressionAsync"),u=Xp(s,c,r,a,o,null),l=u.maxOutputSize,g=u.iouThreshold,d=u.scoreThreshold,e.next=11,Promise.all([s.data(),c.data()]);case 11:return p=e.sent,h=(0,ne.Z)(p,2),f=h[0],I=h[1],C=Yp(f,I,l,g,d,i),m=C.selectedIndices,v=C.validOutputs,s!==t&&s.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Dd(m,"int32"),validOutputs:cu(v,"int32")});case 19:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}var qp=function(e,t,n){return Qp.apply(this,arguments)},$p=n(3878),eh=n(9199),th=n(181),nh=n(5267);function rh(e){return(0,$p.Z)(e)||(0,eh.Z)(e)||(0,th.Z)(e)||(0,nh.Z)()}var ah=jo({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_o(e,"images","resizeBilinear");ge(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),ge(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),ge(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=Qu(a,[1,a.shape[0],a.shape[1],a.shape[2]])),rh(t);var s={images:o},c={alignCorners:n,halfPixelCenters:r,size:t},u=To.runKernel(vr,s,c);return i?Qu(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var oh=jo({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_o(e,"images","resizeNearestNeighbor");ge(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),ge(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),ge("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),ge(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=Qu(a,[1,a.shape[0],a.shape[1],a.shape[2]])),rh(t);var s={images:o},c={alignCorners:n,halfPixelCenters:r,size:t},u=To.runKernel(Cr,s,c);return i?Qu(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});function ih(e,t){for(var n,r,a,o,i,s,c=Dd([-1]),u=Dd([0]),l=Dd([0]),g=0;g<e.size-1;g++){n=nl(e,0,g+1),r=nl(e,g+1),i=jc(dg(n),t),s=jc(dg(r),t);var d=dg(Qc(n,sd(0,n.size)));a=jc(d,dg(n));var p=gu(r.shape,n.size),h=Oc(sd(0,r.size),p),f=Qc(r,h);o=jc(dg(f),dg(r));var I=hu(a,o),C=hu(a,o),m=Qc(i,s);l=Qc(Qc(m,I),C);var v=Ul(l,u);u=Fl(v,l,u),c=Fl(v,Dd([g]),c)}return c}var sh=jo({threshold_:function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=_o(e,"image","threshold"),u=.2989,l=.587,g=.114,d=c.shape[0]*c.shape[1],p=Qc(Dd([s]),255);if(ge(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),ge(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),ge("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),ge("otsu"===o||"binary"===o,(function(){return"Method must be binary or otsu, but was ".concat(o)})),3===c.shape[2]){var h=Xd(c,[1,1,1],-1),f=(0,ne.Z)(h,3);t=f[0],n=f[1],r=f[2];var I=Qc(t,u),C=Qc(n,l),m=Qc(r,g);a=Oc(Oc(I,C),m)}else a=e;if("otsu"===o){var v=ll(is(Cd(a),"int32"),$o([]),256);p=ih(v,d)}var b=i?rg(a,p):Ul(a,p),A=is(Qc(b,255),"int32");return A}});var ch=jo({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,i=_o(e,"image","transform","float32"),s=_o(t,"transforms","transform","float32");ge(4===i.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),ge(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),ge(null==o||2===o.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")}));var c={image:i,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return To.runKernel(ta,c,u)}});var uh=jo({bandPart_:function(e,t,n){ge(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),ge(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=_o(e,"a","bandPart");ge(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,o=r.shape.slice(-2),i=(0,ne.Z)(o,2),s=i[0],c=i[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=c))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(c,")."));t<0&&(t=s),n<0&&(n=c);var u=Qu(sd(0,s,1,"int32"),[-1,1]),l=sd(0,c,1,"int32"),g=hu(u,l),d=kg(rg(g,cu(+t,"int32")),jl(g,cu(-n,"int32"))),p=Wg([s,c],r.dtype);return Qu(Td(Qd(Qu(r,[-1,s,c])).map((function(e){return Fl(d,e,p)}))),a)}});var lh=jo({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,ge(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){ge(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Xd(e,e.shape[0],0).map((function(e){return Ed(e,[0])}))),ge(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(To.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var o=Qc(dg(Qc(n[a],t)),n[a]);t=hu(t,o)}return jc(t,op(t,"euclidean"))})))},o=0;o<e.length;++o)a(o);return t?Td(n,0):n}});function gh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return To.tidy((function(){ge(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Pl(n),o=ss(e),i=Kd([[1]],[1,1]),s=ss(i),c=n>=r?r:n,u=function(e){var t=o,c=s,u=a,l=To.tidy((function(){var t=nl(o,[e,e],[n-e,1]),c=op(t),u=nl(o,[e,e],[1,1]),l=Fl(Ul(u,0),Kd([[-1]]),Kd([[1]])),g=hu(u,Qc(l,c)),d=jc(t,g);s=1===d.shape[0]?ss(i):el([i,nl(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var p=cg(jc(xs(l,g),c)),h=nl(o,[e,0],[n-e,r]),f=Qc(p,s),I=Ws(s);if(0===e)o=hu(h,xs(f,xs(I,h)));else{var C=hu(h,xs(f,xs(I,h)));o=el([nl(o,[0,0],[e,r]),C],0)}var m=Ws(f),v=nl(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=hu(v,xs(xs(v,s),m));else{var b=hu(v,xs(xs(v,s),m));a=el([nl(a,[0,0],[n,e]),b],1)}return[s,o,a]})),g=(0,ne.Z)(l,3);s=g[0],o=g[1],a=g[2],Fc([t,c,u])},l=0;l<c;++l)u(l);return!t&&n>r&&(a=nl(a,[0,0],[n,r]),o=nl(o,[0,0],[r,r])),[a,o]}))}var dh,ph=jo({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ge(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return gh(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Qd(Qu(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];r.forEach((function(e){var n=gh(e,t),r=(0,ne.Z)(n,2),i=r[0],s=r[1];a.push(i),o.push(s)}));var i=Qu(Td(a,0),e.shape),s=Qu(Td(o,0),e.shape);return[i,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(dh||(dh={}));var hh=jo({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dh.SUM_BY_NONZERO_WEIGHTS,r=_o(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=_o(t,"weights","computeWeightedLoss"));var o=null==a?r:Qc(r,a);if(n===dh.NONE)return o;if(n===dh.SUM)return dg(o);if(n===dh.MEAN){if(null==a)return Rg(o);var i=r.size/a.size,s=jc(dg(o),dg(a));return i>1?jc(s,cu(i)):s}if(n===dh.SUM_BY_NONZERO_WEIGHTS){if(null==a)return jc(dg(o),cu(r.size));var c=Qc(a,Vg(r.shape)),u=is(dg(Mg(c,cu(0))),"float32");return jc(dg(o),u)}throw Error("Unknown reduction: ".concat(n))}});var fh=jo({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dh.SUM_BY_NONZERO_WEIGHTS,a=_o(e,"labels","absoluteDifference"),o=_o(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=_o(n,"weights","absoluteDifference")),de(a.shape,o.shape,"Error in absoluteDifference: ");var s=Iu(hu(a,o));return hh(s,i,r)}});var Ih=jo({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dh.SUM_BY_NONZERO_WEIGHTS,o=_o(e,"labels","cosineDistance"),i=_o(t,"predictions","cosineDistance"),s=null;null!=r&&(s=_o(r,"weights","cosineDistance")),de(o.shape,i.shape,"Error in cosineDistance: ");var c=cu(1),u=hu(c,dg(Qc(o,i),n,!0));return hh(u,s,a)}});var Ch=jo({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dh.SUM_BY_NONZERO_WEIGHTS,a=_o(e,"labels","hingeLoss"),o=_o(t,"predictions","hingeLoss"),i=null;null!=n&&(i=_o(n,"weights","hingeLoss")),de(a.shape,o.shape,"Error in hingeLoss: ");var s=cu(1);a=hu(Qc(cu(2),a),s);var c=ld(hu(s,Qc(a,o)));return hh(c,i,r)}});var mh=jo({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dh.SUM_BY_NONZERO_WEIGHTS,o=_o(e,"labels","huberLoss"),i=_o(t,"predictions","huberLoss"),s=null;null!=n&&(s=_o(n,"weights","huberLoss")),de(o.shape,i.shape,"Error in huberLoss: ");var c=cu(r),u=Iu(hu(i,o)),l=Jg(u,c),g=hu(u,l),d=Oc(Qc(cu(.5),$c(l)),Qc(c,g));return hh(d,s,a)}});var vh=jo({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dh.SUM_BY_NONZERO_WEIGHTS,o=_o(e,"labels","logLoss"),i=_o(t,"predictions","logLoss"),s=null;null!=n&&(s=_o(n,"weights","logLoss")),de(o.shape,i.shape,"Error in logLoss: ");var c=cu(1),u=cu(r),l=cg(Qc(o,ig(Oc(i,u)))),g=Qc(hu(c,o),ig(Oc(hu(c,i),u))),d=hu(l,g);return hh(d,s,a)}});var bh=jo({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dh.SUM_BY_NONZERO_WEIGHTS,a=_o(e,"labels","meanSquaredError"),o=_o(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=_o(n,"weights","meanSquaredError")),de(a.shape,o.shape,"Error in meanSquaredError: ");var s=Fd(a,o);return hh(s,i,r)}});function Ah(e,t){var n=_o(e,"labels","sigmoidCrossEntropyWithLogits"),r=_o(t,"logits","sigmoidCrossEntropyWithLogits");de(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=ld(r),o=Qc(r,n),i=sg(Dl(cg(Iu(r))));return Oc(hu(a,o),i)}var yh=jo({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dh.SUM_BY_NONZERO_WEIGHTS,o=_o(e,"multiClassLabels","sigmoidCrossEntropy"),i=_o(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=_o(n,"weights","sigmoidCrossEntropy")),de(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=cu(r),u=cu(1),l=cu(.5);o=Oc(Qc(o,hu(u,c)),Qc(l,c))}var g=Ah(o,i);return hh(g,s,a)}});function kh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=iu((function(e,t,r){var a=yg(t,[n],!0),o=hu(is(t,"float32"),a);r([e,o]);var i=cg(Qc(o,e));return{value:dg(i,[n]),gradFunc:function(e,t){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=Cg(e.shape,[n]);return[Qc(Qu(e,i),hu(is(a,"float32"),Dl(o))),Qc(Qu(e,i),hu(Dl(o),is(a,"float32")))]}}}));return r(e,t)}var Zh=jo({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dh.SUM_BY_NONZERO_WEIGHTS,o=_o(e,"onehotLabels","softmaxCrossEntropy"),i=_o(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=_o(n,"weights","softmaxCrossEntropy")),de(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var c=cu(r),u=cu(1),l=cu(o.shape[1]);o=Oc(Qc(o,hu(u,c)),jc(c,l))}var g=kh(o,i);return hh(g,s,a)}});var Sh=jo({sparseFillEmptyRows_:function(e,t,n,r){var a=_o(e,"indices","sparseFillEmptyRows","int32"),o=_o(t,"values","sparseFillEmptyRows"),i=_o(n,"denseShape","sparseFillEmptyRows","int32"),s=_o(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var c={indices:a,values:o,denseShape:i,defaultValue:s},u=To.runKernel(Yr,c);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});var wh=jo({sparseReshape_:function(e,t,n){var r=_o(e,"inputIndices","sparseReshape","int32"),a=_o(t,"inputShape","sparseReshape","int32"),o=_o(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));var i={inputIndices:r,inputShape:a,newShape:o},s=To.runKernel(Hr,i);return{outputIndices:s[0],outputShape:s[1]}}});var Bh=jo({sparseSegmentMean_:function(e,t,n){var r=_o(e,"data","sparseSegmentMean"),a=_o(t,"indices","sparseSegmentMean","int32"),o=_o(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return To.runKernel(Mr,i)}});var Gh=jo({sparseSegmentSum_:function(e,t,n){var r=_o(e,"data","sparseSegmentSum"),a=_o(t,"indices","sparseSegmentSum","int32"),o=_o(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return To.runKernel(Dr,i)}});var xh=jo({stringNGrams_:function(e,t,n,r,a,o,i,s){var c=_o(e,"data","stringNGrams","string");if("string"!==c.dtype)throw new Error("Data must be of datatype string");if(1!==c.shape.length)throw new Error("Data must be a vector, saw: ".concat(c.shape));var u=_o(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:o,padWidth:i,preserveShortSequences:s},g={data:c,dataSplits:u},d=To.runKernel(_r,g,l);return{nGrams:d[0],nGramsSplits:d[1]}}});var Rh=jo({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=_o(e,"input","stringSplit","string"),a=_o(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var o={skipEmpty:n},i={input:r,delimiter:a},s=To.runKernel(Or,i,o);return{indices:s[0],values:s[1],shape:s[2]}}});var Wh=jo({stringToHashBucketFast_:function(e,t){var n=_o(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return To.runKernel(Ur,a,r)}}),Vh={fft:Wd,ifft:Vd,rfft:Jd,irfft:Nd},Nh={hammingWindow:wp,hannWindow:Bp,frame:Gp,stft:xp},Xh={flipLeftRight:Wp,grayscaleToRGB:Vp,resizeNearestNeighbor:oh,resizeBilinear:ah,rotateWithOffset:Np,cropAndResize:Rp,nonMaxSuppression:Jp,nonMaxSuppressionAsync:Pp,nonMaxSuppressionWithScore:_p,nonMaxSuppressionWithScoreAsync:Up,nonMaxSuppressionPadded:jp,nonMaxSuppressionPaddedAsync:qp,threshold:sh,transform:ch},Jh={bandPart:uh,gramSchmidt:lh,qr:ph},Fh={absoluteDifference:fh,computeWeightedLoss:hh,cosineDistance:Ih,hingeLoss:Ch,huberLoss:mh,logLoss:vh,meanSquaredError:bh,sigmoidCrossEntropy:yh,softmaxCrossEntropy:Zh},Eh={sparseFillEmptyRows:Sh,sparseReshape:wh,sparseSegmentMean:Bh,sparseSegmentSum:Gh},Th={stringNGrams:xh,stringSplit:Rh,stringToHashBucketFast:Wh},Yh={sgd:yu.sgd,momentum:yu.momentum,adadelta:yu.adadelta,adagrad:yu.adagrad,rmsprop:yu.rmsprop,adamax:yu.adamax,adam:yu.adam},Hh="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Mh(){return new Promise((function(e){return Hh((function(){return e()}))}))}function Dh(e,t){var n=e[0].length;e.forEach((function(e,t){ge(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),ge(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)ge(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Kh(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var zh=30;function Lh(e){return e<=zh?e:He(e,Math.floor(Math.sqrt(e)))}function Ph(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function _h(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function Oh(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],s=1;s<e;++s)s>=2*t+1||s%2===1?i.push(s):o.push(s);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function Uh(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function jh(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Qh(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var qh=1.7580993408473768,$h=1.0507009873554805,ef=.3275911,tf=.254829592,nf=-.284496736,rf=1.421413741,af=-1.453152027,of=1.061405429;function sf(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function cf(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function uf(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function lf(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function gf(e,t){return{real:e[2*t],imag:e[2*t+1]}}function df(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function pf(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function hf(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var ff="->",If=/->/g;function Cf(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(If,"").length)/ff.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(ff,'").'));var r=e.split(ff),a=(0,ne.Z)(r,2),o=a[0],i=a[1];ge(-1===o.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=o.split(","),c=s.length;if(t!==c)throw new Error("Expected ".concat(c," input tensors, received ").concat(t));if(c>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],l=function(e){var t=i[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===u.indexOf(t)&&u.push(t)},g=0;g<i.length;++g)l(g);for(var d=0;d<o.length;++d){var p=o[d];-1===u.indexOf(p)&&","!==p&&u.push(p)}for(var h=new Array(s.length),f=0;f<c;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error("Found duplicate axes in input component ".concat(s[f],". ")+"Support for duplicate axes in input is not implemented yet.");h[f]=[];for(var I=0;I<s[f].length;++I)h[f].push(u.indexOf(s[f][I]))}for(var C=u.length,m=[],v=i.length;v<C;++v)m.push(v);return{allDims:u,summedDims:m,idDims:h}}function mf(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function vf(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:ge(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function bf(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],s=0;s<r.length;++s){var c,u=yf(t,r[s]),l=(0,P.Z)(u);try{for(l.s();!(c=l.n()).done;){var g=c.value;-1===i.indexOf(g)&&(a[s].push(g),i.push(g))}}catch($K){l.e($K)}finally{l.f()}}return{path:r,steps:a}}function Af(e){return e.every((function(e,t){return e===t}))}function yf(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function kf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)ge(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);ge(a<=1,(function(){return"There should be only one negative value in split array."}));var o=t.indexOf(-1);if(-1!==o){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[o]=e.shape[n]-i}ge(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function Zf(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function Sf(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function wf(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Bf(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function Gf(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function xf(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Rf(e,t){var n=fe(e),r=fe(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function Wf(e,t){var n=fe(e),r=fe(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function Vf(){return"segment ids must be >= 0"}function Nf(){return"segment ids are not increasing"}function Xf(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Jf(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Ff(e,t){var n,r=!1;for(e<=zh?(n=e,r=!0):n=He(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=He(e,n+1);return n}function Ef(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function Tf(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],c=[],u=1,l=1,g=1,d=0;d<r;++d)c.push(e.shape[d]),u*=e.shape[d];for(var p=r;p<n;p++)c.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)c.push(t.shape[h]);for(var f=n+1;f<o;f++)c.push(e.shape[f]),g*=e.shape[f];return{batchSize:u,sliceSize:g,outerSize:l,dimSize:s,outputShape:c}}function Yf(e){try{return e.map((function(e){return Oa(e)}))}catch($K){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat($K))}}function Hf(e){return e.map((function(e){return _a(e)}))}var Mf={kernelName:it,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(e,Yd(is(n,"float32"),-1))}}}},Df={kernelName:st,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){var t=$c(is(n,"float32")),r=qc(hu(cu(1),t));return cg(jc(e,r))}}}},Kf={kernelName:ct,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){var t=qc(hu($c(is(n,"float32")),1));return jc(e,t)}}}},zf={kernelName:ut,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Fs(r.shape,a.shape);return{a:function(){var t=e,n=Js(r.shape,o);return n.length>0&&(t=dg(t,n)),Qu(t,r.shape)},b:function(){var t=e,n=Js(a.shape,o);return n.length>0&&(t=dg(t,n)),Qu(t,a.shape)}}}},Lf={kernelName:lt,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Pf={kernelName:pt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return eu(n)}}}},_f={kernelName:ht,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return eu(n)}}}},Of={kernelName:ft,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,qc(hu(cu(1),$c(is(n,"float32")))))}}}},Uf={kernelName:It,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){var t=qc(Oc(cu(1),$c(is(n,"float32"))));return jc(e,t)}}}},jf={kernelName:vt,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Fs(r.shape,a.shape);return{a:function(){var t=Oc($c(r),$c(a)),n=Qc(e,jc(a,t)),i=Js(r.shape,o);return i.length>0&&(n=dg(n,i)),Qu(n,r.shape)},b:function(){var t=Oc($c(r),$c(a)),n=cg(Qc(e,jc(r,t))),i=Js(a.shape,o);return i.length>0&&(n=dg(n,i)),Qu(n,a.shape)}}}},Qf={kernelName:Ct,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,Oc($c(is(n,"float32")),1))}}}},qf={kernelName:mt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,hu(cu(1),$c(is(n,"float32"))))}}}};var $f=jo({avgPool3dGrad_:function(e,t,n,r,a,o){var i=_o(e,"dy","avgPool3dGrad"),s=_o(t,"input","avgPool3dGrad"),c=i,u=s,l=!1;4===s.rank&&(l=!0,c=Qu(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=Qu(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ge(5===c.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),ge(5===u.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(u.rank,".")})),ju("avgPool3dGrad",a,o);var g={dy:c,input:u},d={filterSize:n,strides:r,pad:a,dimRoundingMode:o},p=To.runKernel(kt,g,d);return l?Qu(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),eI={kernelName:yt,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.filterSize,o=n.strides,i=n.pad,s=n.dimRoundingMode;return{x:function(){return $f(e,r,a,o,i,s)}}}};var tI=jo({avgPoolGrad_:function(e,t,n,r,a){var o=_o(e,"dy","avgPoolGrad"),i=_o(t,"input","avgPoolGrad");ge(i.rank===o.rank,(function(){return"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(o.rank,")")}));var s=i,c=o,u=!1;3===i.rank&&(u=!0,s=Qu(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=Qu(o,[1,o.shape[0],o.shape[1],o.shape[2]])),ge(4===c.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(c.rank,".")})),ge(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:c,input:s},g={filterSize:n,strides:r,pad:a},d=To.runKernel(At,l,g);return u?Qu(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),nI={kernelName:bt,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.filterSize,o=n.strides,i=n.pad;return{x:function(){return tI(e,r,a,o,i)}}}},rI={kernelName:Zt,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=n.transposeA,s=n.transposeB;return i||s?!i&&s?{a:function(){return xs(e,o,!1,!1)},b:function(){return xs(e,a,!0,!1)}}:i&&!s?{a:function(){return xs(o,e,!1,!0)},b:function(){return xs(a,e,!1,!1)}}:{a:function(){return xs(o,e,!0,!0)},b:function(){return xs(e,a,!0,!0)}}:{a:function(){return xs(e,o,!1,!0)},b:function(){return xs(a,e,!0,!1)}}}},aI={kernelName:St,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Ug(e,r,a)}}}},oI={kernelName:Bt,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,o=r.shape,i=Array.from(o),s=a.length-1;s>=0;s--)if(a[s]===o[s])i[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(o,"]."));for(var c=[],u=0;u<i.length;u++)i[u]>1&&c.push(u);return{x:function(){return dg(e,c,!0)}}}},iI={kernelName:xt,gradFunc:function(e){return{x:function(){return e.clone()}}}},sI={kernelName:Rt,gradFunc:function(e){return{x:function(){return eu(e)}}}},cI={kernelName:Wt,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.clipValueMin,o=n.clipValueMax;return{x:function(){return Fl(kg(jl(r,a),rg(r,o)),e,eu(e))}}}},uI={kernelName:Nt,inputsToSave:["x"],gradFunc:Mf.gradFunc},lI={kernelName:Xt,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=Se(n.axis,t[0].shape)[0],o=r.map((function(e){return e[a]}));return Xd(e,o,a).map((function(e){return function(){return e}}))}},gI={kernelName:Jt,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=n.dilations,s=n.strides,c=n.pad,u=n.dataFormat;return ge(_u(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'")})),{x:function(){return Al(a.shape,e,o,s,c,u)},filter:function(){return Ip(a,e,o.shape,s,c,u)}}}},dI={kernelName:Et,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=n.strides,s=n.pad,c=n.dataFormat,u=n.dimRoundingMode;return{dy:function(){return vl(e,o,i,s,c,1,u)},filter:function(){return Ip(e,a,o.shape,i,s,c,u)}}}};var pI=jo({conv3DBackpropFilter_:function(e,t,n,r,a){var o=e;4===e.rank&&(o=Qu(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var i=t;4===i.rank&&(i=Qu(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),ge(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,".")})),ge(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")})),ge(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),ge(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),ge(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:o,dy:i},c={strides:r,pad:a,filterShape:n};return To.runKernel(Yt,s,c)}}),hI={kernelName:Tt,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad;ge(_u(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var i=(0,ne.Z)(t,2),s=i[0],c=i[1];return{x:function(){return Zl(s.shape,e,c,a,o)},filter:function(){return pI(s,e,c.shape,a,o)}}}},fI={kernelName:Mt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(cg(Zd(is(n,"float32"))),e)}}}},II={kernelName:Dt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(Sd(is(n,"float32")),e)}}}},CI={kernelName:zt,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.axis,o=n.exclusive,i=n.reverse;return{x:function(){var t=vg([a],r.rank),n=xl(e,a,o,!i);return null!=t&&(n=Ws(n,t)),n}}}},mI={kernelName:Ot,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad,i=n.dimRoundingMode,s=null==r?[1,1]:r;ge(_u(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var c=(0,ne.Z)(t,2),u=c[0],l=c[1];return ge(4===u.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(u.rank,".")})),ge(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),ge(u.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(u.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),ge(Ou(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),ju("depthwiseConv2d",o,i),{x:function(){return kp(u.shape,e,l,a,o,s,i)},filter:function(){return yp(u,e,l.shape,a,o,s,i)}}}},vI={kernelName:qt,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i={x:a,filter:o,dy:e},s={x:a,filter:o,dy:e};return{x:function(){return To.runKernel($t,i,n)},filter:function(){return To.runKernel(en,s,n)}}}},bI={kernelName:rn,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,ne.Z)(t,1)[0]};return{x:function(){return To.runKernel(an,n)}}}},AI={kernelName:on,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0],r=Qc(Dl(cg($c(n))),2/Math.sqrt(Math.PI));return{x:function(){return Qc(e,r)}}}},yI={kernelName:cn,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(e,n)}}}},kI={kernelName:un,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{input:function(){return Qu(e,n.shape)}}}},ZI={kernelName:ln,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(e,Dl(n))}}}},SI={kernelName:hn,gradFunc:function(e){return{x:function(){return eu(e)}}}},wI={kernelName:fn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Fs(r.shape,a.shape);return{a:function(){var t=jc(e,is(a,"float32")),n=Js(r.shape,o);return n.length>0?Qu(dg(t,n),r.shape):t},b:function(){var t=Qc(e,is(r,"float32")),n=Js(a.shape,o);n.length>0&&(t=Qu(dg(t,n),a.shape));var i=$c(a);return cg(jc(t,is(i,"float32")))}}}},BI={kernelName:In,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,ne.Z)(t,4),o=a[0],i=a[1],s=a[2],c=a[3],u=null==c?cu(1):c,l=Js(i.shape,o.shape),g=[];if(1===i.rank){for(var d=0;d<o.shape.length-1;++d)g.push(o.shape[d]);g.push(1)}var p=hu(o,i),h=Qc(e,u),f=md(Oc(s,cu(r))),I=Qc(Qc(Qc(f,f),f),cu(-.5));return{x:function(){return 1===i.rank?Qu(Qc(Qc(e,Ll(Qu(f,[1,1,1,i.shape[0]]),g)),u),o.shape):Qu(Qc(Qc(e,f),u),o.shape)},mean:function(){var e=Qc(Qc(f,cu(-1)),h);return 1===i.rank&&(e=dg(e,l)),Qu(e,i.shape)},variance:function(){var e=Qc(Qc(I,p),h);return 1===i.rank&&(e=dg(e,l)),Qu(e,i.shape)},scale:function(){var t=Qc(p,f),n=Qc(e,t);return 1===i.rank&&(n=dg(n,l)),Qu(n,i.shape)},offset:function(){var t=e;return 1===i.rank&&(t=dg(t,l)),Qu(t,i.shape)}}}},GI={kernelName:Cn,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=n.axis,s=Se(i,a.shape)[0];return{x:function(){var t=a.shape,n=o.size,r=t.slice(0,s),c=r.length,u=t.slice(i,t.length).slice(1),l=u.length,g=xI(0,c),d=xI(c+1,c+1+l),p=RI([r,[n],u]),h=Qu(e,p),f=Qu(o,[n]),I=RI([[c],g,d]),C=Ws(h,I),m=jd(C,f,a.shape[s]),v=bg(I);return m=Ws(m,v)},indices:function(){return o}}}};function xI(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function RI(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var WI={kernelName:bn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1];return{a:function(){return eu(r)},b:function(){return eu(a)}}}},VI={kernelName:An,gradFunc:function(e){return{x:function(){return is(e,"float32")}}}},NI={kernelName:Zn,gradFunc:function(e){return{x:function(){return eu(e)}}}},XI={kernelName:Sn,gradFunc:function(e){return{x:function(){return eu(e)}}}},JI={kernelName:wn,gradFunc:function(e){return{x:function(){return eu(e)}}}},FI={kernelName:Bn,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.alpha,o=Ul(r,0);return{x:function(){return Fl(o,e,Qc(e,a))}}}},EI={kernelName:Vn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,Oc(n,1))}}}},TI={kernelName:Wn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,is(n,"float32"))}}}},YI={kernelName:Fn,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=Dl(r);return hu(e,Qc(dg(e,a,!0),t))}}}};var HI=jo({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},c={depthRadius:r,bias:a,alpha:o,beta:i};return To.runKernel(Tn,s,c)}}),MI={kernelName:En,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=n.depthRadius,s=n.bias,c=n.alpha,u=n.beta;return{x:function(){return HI(a,o,e,i,s,c,u)}}}};function DI(e,t,n,r){return t.rank<n.rank&&(t=Qu(t,Cg(t.shape,r))),e.rank<n.rank&&(e=Qu(e,Cg(e.shape,r))),{x:function(){return Qc(e,is(Jl(n,t),e.dtype))}}}var KI={kernelName:Yn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],o=DI(e,t[1],a,Se(r,a.shape));return{x:function(){return o.x()}}}},zI={kernelName:Hn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1];return{a:function(){return Qc(e,is(jl(r,a),"float32"))},b:function(){return Qc(e,is(ng(r,a),"float32"))}}}};var LI=jo({maxPool3dGrad_:function(e,t,n,r,a,o,i){var s=_o(e,"dy","maxPool3dGrad"),c=_o(t,"input","maxPool3dGrad"),u=_o(n,"output","maxPool3dGrad"),l=s,g=c,d=u,p=!1;4===c.rank&&(p=!0,l=Qu(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),g=Qu(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),d=Qu(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),ge(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),ge(5===g.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(g.rank,".")})),ge(5===d.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")})),ju("maxPool3dGrad",o,i);var h={dy:l,input:g,output:d},f={filterSize:r,strides:a,pad:o,dimRoundingMode:i},I=To.runKernel(zn,h,f);return p?Qu(I,[I.shape[1],I.shape[2],I.shape[3],I.shape[4]]):I}}),PI={kernelName:Kn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=n.filterSize,s=n.strides,c=n.pad,u=n.dimRoundingMode;return{x:function(){return LI(e,a,o,i,s,c,u)}}}};var _I=jo({maxPoolGrad_:function(e,t,n,r,a,o,i){var s=_o(e,"dy","maxPoolGrad"),c=_o(t,"input","maxPoolGrad"),u=_o(n,"output","maxPoolGrad");ge(c.rank===s.rank,(function(){return"Rank of input (".concat(c.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),ge(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),ge(4===c.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(c.rank,".")})),ju("maxPoolGrad",o,i);var l={dy:s,input:c,output:u},g={filterSize:r,strides:a,pad:o,dimRoundingMode:i};return To.runKernel(Dn,l,g)}}),OI={kernelName:Mn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,2),a=r[0],o=r[1],i=n.filterSize,s=n.strides,c=n.pad;return{x:function(){return _I(e,a,o,i,s,c)}}}},UI={kernelName:Un,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return nl(e,a,r.shape)}}}},jI={kernelName:sr,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return nl(e,a,r.shape)}}}},QI={kernelName:ur,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ne.Z)(t,3),r=n[0],a=n[1],o=n[2],i=r,s=a,c=Fs(i.shape,s.shape);return{a:function(){var t=is(s,"float32"),n=Qc(e,Qc(t,pu(i,hu(t,cu(1))))),r=Js(i.shape,c);return r.length>0&&(n=dg(n,r)),Qu(n,i.shape)},b:function(){var t=Ul(i,0),n=Fl(t,ig(i),eu(i)),r=Qc(e,Qc(o,n)),a=Js(s.shape,c);return a.length>0&&(r=dg(r,a)),Qu(r,s.shape)}}}},qI={kernelName:Br,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){var t=Ul(n,cu(0)),r=cu(qh),a=cu($h),o=Qc(e,a),i=Qc(Qc(e,r),Dl(is(n,"float32")));return Fl(t,o,i)}}}},$I={kernelName:Fr,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return ol(e,r,a)}}}},eC={kernelName:Er,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return el(e,r)}}}},tC={kernelName:$r,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.reps;return{x:function(){var t=eu(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Oc(t,nl(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var o=0;o<a[0];++o)for(var i=0;i<a[1];++i)t=Oc(t,nl(e,[o*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var c=0;c<a[1];++c)for(var u=0;u<a[2];++u)t=Oc(t,nl(e,[s*r.shape[0],c*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var g=0;g<a[1];++g)for(var d=0;d<a[2];++d)for(var p=0;p<a[3];++p)t=Oc(t,nl(e,[l*r.shape[0],g*r.shape[1],d*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}};for(var nC,rC=0,aC=[Mf,Df,Kf,zf,Lf,Pf,_f,Of,Uf,jf,Qf,qf,eI,nI,rI,aI,oI,iI,sI,cI,uI,lI,dI,gI,hI,fI,II,CI,mI,vI,{kernelName:tn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Fs(r.shape,a.shape);return{a:function(){var t=jc(e,is(a,"float32")),n=Js(r.shape,o);return n.length>0?Qu(dg(t,n),r.shape):t},b:function(){var t=Qc(e,is(r,"float32")),n=Js(a.shape,o);n.length>0&&(t=Qu(dg(t,n),a.shape));var i=$c(a);return cg(jc(t,is(i,"float32")))}}}},bI,AI,yI,kI,ZI,wI,SI,BI,GI,WI,VI,NI,XI,JI,FI,EI,TI,YI,MI,KI,KI,zI,PI,OI,{kernelName:Pn,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=Se(n.axis,r.shape),o=fe(Ig(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Qu(e,t);return jc(Qc(n,Vg(r.shape,"float32")),o)}}}},{kernelName:_n,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,ne.Z)(t,2),o=a[0],i=DI(e,a[1],o,Se(r,o.shape));return{x:function(){return i.x()}}}},{kernelName:On,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1];return{a:function(){return Qc(e,is(rg(r,a),"float32"))},b:function(){return Qc(e,is(Ul(r,a),"float32"))}}}},UI,{kernelName:jn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Fs(r.shape,a.shape);return{a:function(){var t=Js(r.shape,o);return t.length>0?Qu(dg(e,t),r.shape):e},b:function(){var t=Qc(e,cg(_l(jc(r,a)))),n=Js(a.shape,o);return n.length>0?Qu(dg(t,n),a.shape):t}}}},{kernelName:qn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Fs(r.shape,a.shape);return{a:function(){var t=Qc(e,is(a,"float32")),n=Js(r.shape,o);return n.length>0?Qu(dg(t,n),r.shape):t},b:function(){var t=Qc(e,is(r,"float32")),n=Js(a.shape,o);return n.length>0?Qu(dg(t,n),a.shape):t}}}},{kernelName:$n,gradFunc:function(e){return{x:function(){return cg(e)}}}},{kernelName:or,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Wg(n.shape,"float32")}}}},{kernelName:ar,gradFunc:function(e){return{x:function(){return eu(e)}}}},{kernelName:ir,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Qd(e,r).map((function(e){return function(){return e}}))}},jI,jI,QI,{kernelName:lr,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Ul(r,0);return{x:function(){return Fl(o,e,Qc(e,a))},alpha:function(){var t=Fl(o,eu(e),Qc(e,r)),n=Js(a.shape,e.shape);return n.length>0&&(t=dg(t,n)),Qu(t,a.shape)}}}},{kernelName:hr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,cg($c(n)))}}}},{kernelName:Ar,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0],r=Qc(rg(n,6),Yd(n));return{x:function(){return Qc(e,is(r,"float32"))}}}},{kernelName:fr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(e,is(Yd(n),"float32"))}}}},{kernelName:Ir,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qu(e,n.shape)}}}},{kernelName:vr,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,ne.Z)(t,1)[0]};return{images:function(){return To.runKernel(br,r,n)}}}},{kernelName:Cr,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,ne.Z)(t,1)[0]};return{images:function(){return To.runKernel(mr,r,n)}}}},{kernelName:yr,gradFunc:function(e,t,n){var r=Se(n.dims,e.shape);return{x:function(){return dd(e,r)}}}},{kernelName:kr,gradFunc:function(e){return{x:function(){return eu(e)}}}},{kernelName:Zr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return cg(jc(e,Qc(pu(n,1.5),2)))}}}},{kernelName:wr,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{condition:function(){return is(eu(n),"float32")},t:function(){return Qc(e,is(n,e.dtype))},e:function(){return Qc(e,is(Zg(n),e.dtype))}}}},qI,{kernelName:Vr,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(e,Qc(n,hu(cu(1),n)))}}}},{kernelName:Wr,gradFunc:function(e){return{x:function(){return eu(e)}}}},{kernelName:xr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(wl(is(n,"float32")),e)}}}},{kernelName:Rr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(Bl(is(n,"float32")),e)}}}},{kernelName:Gr,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,ne.Z)(t,1)[0],a=n.begin,o=n.size,i=r.shape,s=uc(r,a,o),c=(0,ne.Z)(s,2),u=c[0],l=c[1],g=[],d=0;d<e.rank;d++)g.push([u[d],i[d]-u[d]-l[d]]);return{x:function(){return zg(e,g)}}}},{kernelName:Tr,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=n.dim,o=Qc(e,r);return{logits:function(){return hu(o,Qc(dg(o,[a],true),r))}}}},{kernelName:Nr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(e,tl(n))}}}},$I,$I,eC,eC,{kernelName:Xr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,Qc(qc(is(n,"float32")),2))}}}},{kernelName:zr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=cu(2);return{a:function(){return Qc(e,Qc(o,hu(r,a)))},b:function(){return Qc(e,Qc(o,hu(a,r)))}}}},{kernelName:Lr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(e,Qc(is(n,"float32"),2))}}}},{kernelName:sa,gradFunc:function(e){return{x:function(){return eu(e)}}}},{kernelName:jr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ne.Z)(t,2),r=n[0],a=n[1],o=Fs(r.shape,a.shape);return{a:function(){var t=e,n=Js(r.shape,o);return n.length>0&&(t=dg(t,n)),Qu(t,r.shape)},b:function(){var t=e,n=Js(a.shape,o);return n.length>0&&(t=dg(t,n)),Qu(cg(t),a.shape)}}}},{kernelName:Jr,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ne.Z)(t,1)[0],a=r.shape.slice();Se(n.axis,r.shape).forEach((function(e){a[e]=1}));var o=Qu(e,a),i=Qc(o,Vg(r.shape,"float32"));return{x:function(){return i}}}},{kernelName:Qr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return jc(e,$c(wl(n)))}}}},{kernelName:qr,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return Qc(hu(cu(1),$c(n)),e)}}}},tC,{kernelName:na,gradFunc:function(e,t,n){var r=bg(n.perm);return{x:function(){return Ws(e,r)}}}},{kernelName:aa,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Td(e,r)}}}},{kernelName:oa,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,ne.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=Cu(t,eu(t)),r=Ol(e,n),a=jl(t,cu(0,"int32")),o=r.rank-a.rank,i=0;i<o;++i)a=Kl(a,i+1);a=kg(a,Vg(r.shape,"bool"));var s=eu(r);return Fl(a,r,s)}(e,n)}}}},{kernelName:ia,gradFunc:function(e){return{x:function(){return eu(e)}}}}];rC<aC.length;rC++){Aa(aC[rC])}function oC(){return null==nC&&(nC=Pc().epsilon()),nC}function iC(e,t,n){return iC=no()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,$a.Z)(a,n.prototype),a},iC.apply(null,arguments)}function sC(e){var t="function"===typeof Map?new Map:void 0;return sC=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return iC(e,arguments,to(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,$a.Z)(n,e)},sC(e)}Co().prototype.abs=function(){return this.throwIfDisposed(),Iu(this)},Co().prototype.acos=function(){return this.throwIfDisposed(),ku(this)},Co().prototype.acosh=function(){return this.throwIfDisposed(),Zu(this)},Co().prototype.add=function(e){return this.throwIfDisposed(),Oc(this,e)},Co().prototype.all=function(e,t){return this.throwIfDisposed(),wu(this,e,t)},Co().prototype.any=function(e,t){return this.throwIfDisposed(),Bu(this,e,t)},Co().prototype.argMax=function(e){return this.throwIfDisposed(),Gu(this,e)},Co().prototype.argMin=function(e){return this.throwIfDisposed(),xu(this,e)},Co().prototype.asScalar=function(){return this.throwIfDisposed(),ge(1===this.size,(function(){return"The array must have only 1 element."})),Qu(this,[])},Co().prototype.asType=function(e){return this.throwIfDisposed(),is(this,e)},Co().prototype.as1D=function(){return this.throwIfDisposed(),Qu(this,[this.size])},Co().prototype.as2D=function(e,t){return this.throwIfDisposed(),Qu(this,[e,t])},Co().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Qu(this,[e,t,n])},Co().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Qu(this,[e,t,n,r])},Co().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Qu(this,[e,t,n,r,a])},Co().prototype.asin=function(){return this.throwIfDisposed(),Ru(this)},Co().prototype.asinh=function(){return this.throwIfDisposed(),Wu(this)},Co().prototype.atan=function(){return this.throwIfDisposed(),Vu(this)},Co().prototype.atan2=function(e){return this.throwIfDisposed(),Nu(this,e)},Co().prototype.atanh=function(){return this.throwIfDisposed(),Xu(this)},Co().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),qu(this,e,t,n,r)},Co().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),ol(this,e,t)},Co().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),il(this,e,t,n,r,a)},Co().prototype.broadcastTo=function(e){return this.throwIfDisposed(),dl(this,e)},Co().prototype.cast=function(e){return this.throwIfDisposed(),is(this,e)},Co().prototype.ceil=function(){return this.throwIfDisposed(),pl(this)},Co().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),hl(this,e,t)},Co().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Io&&(e=[e]),el([this].concat((0,_.Z)(e)),t)},Co().prototype.conv1d=function(e,t,n,r,a,o){return this.throwIfDisposed(),bl(this,e,t,n,r,a,o)},Co().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),yl(this,e,t,n,r,a)},Co().prototype.conv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),vl(this,e,t,n,r,a,o)},Co().prototype.cos=function(){return this.throwIfDisposed(),wl(this)},Co().prototype.cosh=function(){return this.throwIfDisposed(),Bl(this)},Co().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Gl(this,e,t,n)},Co().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),xl(this,e,t,n)},Co().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Wl(this,e,t)},Co().prototype.depthwiseConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),Vl(this,e,t,n,r,a,o)},Co().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Xl(this,e,t,n,r,a)},Co().prototype.divNoNan=function(e){return this.throwIfDisposed(),El(this,e)},Co().prototype.div=function(e){return this.throwIfDisposed(),jc(this,e)},Co().prototype.dot=function(e){return this.throwIfDisposed(),Tl(this,e)},Co().prototype.elu=function(){return this.throwIfDisposed(),Hl(this)},Co().prototype.equal=function(e){return this.throwIfDisposed(),Jl(this,e)},Co().prototype.erf=function(){return this.throwIfDisposed(),Ml(this)},Co().prototype.exp=function(){return this.throwIfDisposed(),Dl(this)},Co().prototype.expandDims=function(e){return this.throwIfDisposed(),Kl(this,e)},Co().prototype.expm1=function(){return this.throwIfDisposed(),zl(this)},Co().prototype.fft=function(){return this.throwIfDisposed(),Wd(this)},Co().prototype.flatten=function(){return this.throwIfDisposed(),Qu(this,[this.size])},Co().prototype.floor=function(){return this.throwIfDisposed(),_l(this)},Co().prototype.floorDiv=function(e){return this.throwIfDisposed(),Uc(this,e)},Co().prototype.gather=function(e,t){return this.throwIfDisposed(),Ol(this,e,t)},Co().prototype.greaterEqual=function(e){return this.throwIfDisposed(),jl(this,e)},Co().prototype.greater=function(e){return this.throwIfDisposed(),Ul(this,e)},Co().prototype.ifft=function(){return this.throwIfDisposed(),Vd(this)},Co().prototype.irfft=function(){return this.throwIfDisposed(),Nd(this)},Co().prototype.isFinite=function(){return this.throwIfDisposed(),ql(this)},Co().prototype.isInf=function(){return this.throwIfDisposed(),$l(this)},Co().prototype.isNaN=function(){return this.throwIfDisposed(),eg(this)},Co().prototype.leakyRelu=function(e){return this.throwIfDisposed(),tg(this,e)},Co().prototype.lessEqual=function(e){return this.throwIfDisposed(),rg(this,e)},Co().prototype.less=function(e){return this.throwIfDisposed(),ng(this,e)},Co().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),og(this,e,t,n,r)},Co().prototype.logSigmoid=function(){return this.throwIfDisposed(),lg(this)},Co().prototype.logSoftmax=function(e){return this.throwIfDisposed(),pg(this,e)},Co().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),yg(this,e,t)},Co().prototype.log=function(){return this.throwIfDisposed(),ig(this)},Co().prototype.log1p=function(){return this.throwIfDisposed(),sg(this)},Co().prototype.logicalAnd=function(e){return this.throwIfDisposed(),kg(this,e)},Co().prototype.logicalNot=function(){return this.throwIfDisposed(),Zg(this)},Co().prototype.logicalOr=function(e){return this.throwIfDisposed(),Sg(this,e)},Co().prototype.logicalXor=function(e){return this.throwIfDisposed(),wg(this,e)},Co().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),xs(this,e,t,n)},Co().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Bg(this,e,t,n,r)},Co().prototype.max=function(e,t){return this.throwIfDisposed(),gg(this,e,t)},Co().prototype.maximum=function(e){return this.throwIfDisposed(),Cu(this,e)},Co().prototype.mean=function(e,t){return this.throwIfDisposed(),Rg(this,e,t)},Co().prototype.min=function(e,t){return this.throwIfDisposed(),Xg(this,e,t)},Co().prototype.minimum=function(e){return this.throwIfDisposed(),Jg(this,e)},Co().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Fg(this,e,t)},Co().prototype.mod=function(e){return this.throwIfDisposed(),Eg(this,e)},Co().prototype.mul=function(e){return this.throwIfDisposed(),Qc(this,e)},Co().prototype.neg=function(){return this.throwIfDisposed(),cg(this)},Co().prototype.norm=function(e,t,n){return this.throwIfDisposed(),op(this,e,t,n)},Co().prototype.notEqual=function(e){return this.throwIfDisposed(),Mg(this,e)},Co().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Rs(this,e,t,n)},Co().prototype.onesLike=function(){return this.throwIfDisposed(),Dg(this)},Co().prototype.pad=function(e,t){return this.throwIfDisposed(),zg(this,e,t)},Co().prototype.pool=function(e,t,n,r,a,o){return this.throwIfDisposed(),jg(this,e,t,n,r,a,o)},Co().prototype.pow=function(e){return this.throwIfDisposed(),pu(this,e)},Co().prototype.prelu=function(e){return this.throwIfDisposed(),Qg(this,e)},Co().prototype.prod=function(e,t){return this.throwIfDisposed(),qg(this,e,t)},Co().prototype.reciprocal=function(){return this.throwIfDisposed(),ud(this)},Co().prototype.relu=function(){return this.throwIfDisposed(),ld(this)},Co().prototype.relu6=function(){return this.throwIfDisposed(),gd(this)},Co().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Qu(this,e.shape)},Co().prototype.reshape=function(e){return this.throwIfDisposed(),Qu(this,e)},Co().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),ah(this,e,t,n)},Co().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),oh(this,e,t,n)},Co().prototype.reverse=function(e){return this.throwIfDisposed(),dd(this,e)},Co().prototype.rfft=function(){return this.throwIfDisposed(),Jd(this)},Co().prototype.round=function(){return this.throwIfDisposed(),Cd(this)},Co().prototype.rsqrt=function(){return this.throwIfDisposed(),md(this)},Co().prototype.selu=function(){return this.throwIfDisposed(),vd(this)},Co().prototype.separableConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),bd(this,e,t,n,r,a,o)},Co().prototype.sigmoid=function(){return this.throwIfDisposed(),tl(this)},Co().prototype.sign=function(){return this.throwIfDisposed(),kd(this)},Co().prototype.sin=function(){return this.throwIfDisposed(),Zd(this)},Co().prototype.sinh=function(){return this.throwIfDisposed(),Sd(this)},Co().prototype.slice=function(e,t){return this.throwIfDisposed(),nl(this,e,t)},Co().prototype.softmax=function(e){return this.throwIfDisposed(),Rd(this,e)},Co().prototype.softplus=function(){return this.throwIfDisposed(),ug(this)},Co().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Ug(this,e,t)},Co().prototype.split=function(e,t){return this.throwIfDisposed(),Xd(this,e,t)},Co().prototype.sqrt=function(){return this.throwIfDisposed(),qc(this)},Co().prototype.square=function(){return this.throwIfDisposed(),$c(this)},Co().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Fd(this,e)},Co().prototype.squeeze=function(e){return this.throwIfDisposed(),Ed(this,e)},Co().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Io?[this,e]:[this].concat((0,_.Z)(e));return Td(n,t)},Co().prototype.step=function(e){return this.throwIfDisposed(),Yd(this,e)},Co().prototype.stridedSlice=function(e,t,n,r,a,o,i,s){return this.throwIfDisposed(),Hd(this,e,t,n,r,a,o,i,s)},Co().prototype.sub=function(e){return this.throwIfDisposed(),hu(this,e)},Co().prototype.sum=function(e,t){return this.throwIfDisposed(),dg(this,e,t)},Co().prototype.tan=function(){return this.throwIfDisposed(),Md(this)},Co().prototype.tanh=function(){return this.throwIfDisposed(),rl(this)},Co().prototype.tile=function(e){return this.throwIfDisposed(),Ll(this,e)},Co().prototype.toBool=function(){return this.throwIfDisposed(),is(this,"bool")},Co().prototype.toFloat=function(){return this.throwIfDisposed(),is(this,"float32")},Co().prototype.toInt=function(){return this.throwIfDisposed(),is(this,"int32")},Co().prototype.topk=function(e,t){return this.throwIfDisposed(),_d(this,e,t)},Co().prototype.transpose=function(e){return this.throwIfDisposed(),Ws(this,e)},Co().prototype.unique=function(e){return this.throwIfDisposed(),Ud(this,e)},Co().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),jd(this,e,t)},Co().prototype.unstack=function(e){return this.throwIfDisposed(),Qd(this,e)},Co().prototype.where=function(e,t){return this.throwIfDisposed(),Fl(e,this,t)},Co().prototype.zerosLike=function(){return this.throwIfDisposed(),eu(this)};var cC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,ao.Z)(r),n.prototype),r}return(0,j.Z)(n)}(sC(Error)),uC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,ao.Z)(r),n.prototype),r}return(0,j.Z)(n)}(sC(Error)),lC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,ao.Z)(r),n.prototype),r}return(0,j.Z)(n)}(sC(Error)),gC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,ao.Z)(r),n.prototype),r}return(0,j.Z)(n)}(sC(Error)),dC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,ao.Z)(r),n.prototype),r}return(0,j.Z)(n)}(sC(Error));Error;function pC(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function hC(e,t){if(!e)throw new dC(t)}function fC(e,t){var n,r=0,a=(0,P.Z)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch($K){a.e($K)}finally{a.f()}return r}function IC(e){return 1===e.length?e[0]:e}function CC(e){return Array.isArray(e)?e:[e]}function mC(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function vC(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var bC={};function AC(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function yC(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return yC(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?yC(a):e[r]=a.value)}}function kC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var o,i=e;if(i in n)o=n[i];else if(i in bC)o=bC[i];else if(null==(o=t[i]))throw new lC("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}var s=e;if(null==s.className||null==s.config)throw new lC("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var c,u,l=s.className;if(l in n){var g=(0,ne.Z)(n[l],2);c=g[0],u=g[1]}else if(l in bC){var d=(0,ne.Z)(bC.className,2);c=d[0],u=d[1]}else if(l in t){var p=(0,ne.Z)(t[l],2);c=p[0],u=p[1]}if(null==c)throw new lC("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=u){for(var h={},f=0,I=Object.keys(bC);f<I.length;f++){var C=I[f];h[C]=bC[C]}for(var m=0,v=Object.keys(n);m<v.length;m++){var b=v[m];h[b]=n[b]}var A=s.config;A.customObjects=h;for(var y=Object.assign({},bC),k=0,Z=Object.keys(n);k<Z.length;k++){var S=Z[k];bC[S]=n[S]}yC(s.config);var w=u(c,s.config,n,a);return bC=Object.assign({},y),w}for(var B=Object.assign({},bC),G=0,x=Object.keys(n);G<x.length;G++){var R=x[G];bC[R]=n[R]}var W=new c(s.config);return bC=Object.assign({},B),W}function ZC(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function SC(e){if(null==e)return e;var t,n=[],r=(0,P.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch($K){r.e($K)}finally{r.f()}return n}function wC(e){if(null==e)throw new lC("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function BC(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new lC("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function GC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return hC(n>=0),hC(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function xC(e,t){Array.isArray(e)?(ge(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return xC(e,"element ".concat(n+1," of ").concat(t))}))):ge(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(RC(e),".")}))}function RC(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return RC(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function WC(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function VC(e,t){return Jc((function(){return qc(dg(Qc(e,e),t,!0))}))}var NC=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(dc),XC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=this;return Jc((function(){var n=VC(e,t.axis),r=hl(n,0,t.maxValue);return Qc(e,jc(r,Oc(oC(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(NC);XC.className="MaxNorm",hc(XC);var JC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=this;return Jc((function(){return jc(e,Oc(oC(),VC(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(NC);JC.className="UnitNorm",hc(JC);var FC=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return ld(e)}}]),n}(NC);FC.className="NonNeg",hc(FC);var EC=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=this;return Jc((function(){var n=VC(e,t.axis),r=Oc(Qc(t.rate,hl(n,t.minValue,t.maxValue)),Qc(1-t.rate,n));return Qc(e,jc(r,Oc(oC(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(NC);EC.className="MinMaxNorm",hc(EC);var TC={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function YC(e){return AC(e)}function HC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kC(e,pc.getMap().classNameMap,t,"constraint")}function MC(e){return null==e?null:"string"===typeof e?HC({className:e in TC?TC[e]:e,config:{}}):e instanceof NC?e:HC(e)}function DC(e){return new XC(e)}function KC(e){return new JC(e)}function zC(){return new FC}function LC(e){return new EC(e)}var PC=["channelsFirst","channelsLast"],_C=["nearest","bilinear"],OC=["valid","same","causal"],UC=["max","avg"],jC=["sum","mul","concat","ave"],QC=new Map;function qC(e){BC(PC,"DataFormat",e)}function $C(e){BC(OC,"PaddingMode",e)}function em(e){BC(UC,"PoolMode",e)}var tm=[];function nm(e,t){tm.push(e);try{var n=t();return tm.pop(),n}catch(r){throw tm.pop(),r}}function rm(e){if(!im(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===tm.length?"":tm.join("/")+"/")+e}function am(e){if(!im(e))throw new Error("Not a valid tensor name: '"+e+"'");QC.has(e)||QC.set(e,0);var t=QC.get(e);if(QC.set(e,QC.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return QC.set(n,1),n}return e}var om=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function im(e){return!!e.match(om)}function sm(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function cm(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function um(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function lm(e,t){if(t<e)throw new lC("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function gm(e,t){return is(e,t)}function dm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Qu(e,n)}function pm(e){var t=[sm(e.shape)];return Qu(e,t)}function hm(e,t,n){return Jc((function(){switch(e.rank){case 1:return wd(e,t,n);case 2:return Bd(e,[t,0],[n,e.shape[1]]);case 3:return Gd(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return xd(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return nl(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return nl(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new lC("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function fm(e,t,n){return Jc((function(){switch(e.rank){case 1:return wd(e,t,n);case 2:return Bd(e,[0,t],[e.shape[0],n]);case 3:return Gd(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return xd(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new lC("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Im(e,t,n,r){return Jc((function(){switch(e.rank){case 1:return wd(e,t,n);case 2:switch(r){case 1:return hm(e,t,n);case 2:return fm(e,t,n);default:throw new lC("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return hm(e,t,n);case 2:return Gd(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return fm(e,t,n);default:throw new lC("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return hm(e,t,n);case 2:return xd(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return xd(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return fm(e,t,n);default:throw new lC("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new lC("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Cm(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),el(e,n)}function mm(e,t){switch(e.rank){case 1:return fl([e,t]);case 2:return Il([e,t],0);case 3:return Cl([e,t],0);case 4:return ml([e,t],0);default:throw new lC("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function vm(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new lC("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return Ll(e,t)}function bm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return od(e,t,n,r,a)}function Am(e,t,n,r){if(e.rank<2||t.rank<2)throw new gC("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new gC("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return Sp({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Zm(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),o=a.pop();e=Qu(e,[-1,o]);var i=t.shape.slice(),s=i.pop(),c=i.pop(),u=[].concat((0,_.Z)(i),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Qu(Ws(t,l),[c,-1]);var g=[].concat((0,_.Z)(a),(0,_.Z)(u));return Qu(Sp({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Zm(e.rank,r,"channelsLast"):null,activation:n}),g)}function ym(e,t,n){return Jc((function(){return t=Array.isArray(t)?Dd(t,"int32"):is(t,"int32"),Ol(e,t,n)}))}function km(e){return Qc(e,e)}function Zm(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new lC("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Qu(t,[1,r[0],1,1,1]):Qu(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Qu(t,[1,1,1,1,r[0]]):Qu(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Qu(t,[1,r[0],1,1]):Qu(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Qu(t,[1,1,1,r[0]]):Qu(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Qu(t,[1,r[0],1]):Qu(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Qu(t,[1,1,r[0]]):Qu(t,[1].concat(r))}else if(e<3)return t;throw new lC("Unsupported input rank by biasAdd: ".concat(t.rank))}function Sm(e,t,n){return Jc((function(){return null==n&&(n="channelsLast"),qC(n),Oc(e,Zm(e.rank,t,n))}))}function wm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new gC("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Hl(e)}function Bm(e,t,n,r){return Jc((function(){return gp(e,t,n,r)}))}function Gm(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var xm=["fanIn","fanOut","fanAvg"],Rm=["normal","uniform","truncatedNormal"];var Wm=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(dc),Vm=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e,t){return Wg(e,t)}}]),n}(Wm);Vm.className="Zeros",hc(Vm);var Nm=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e,t){return Vg(e,t)}}]),n}(Wm);Nm.className="Ones",hc(Nm);var Xm=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),r=t.call(this),"object"!==typeof e)throw new lC("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new lC("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){var n=this;return Jc((function(){return Qc(cu(n.value),Vg(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(Wm);Xm.className="Constant",hc(Xm);var Jm=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){return id(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(Wm);Jm.className="RandomUniform",hc(Jm);var Fm=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gC("randomNormal does not support dType ".concat(t,"."));return bm(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Wm);Fm.className="RandomNormal",hc(Fm);var Em=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gC("truncatedNormal does not support dType ".concat(t,"."));return Od(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Wm);Em.className="TruncatedNormal",hc(Em);var Tm=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){var n=this;return Jc((function(){if(2!==e.length||e[0]!==e[1])throw new lC("Identity matrix initializer can only be used for 2D square matrices.");return Qc(n.gain,Pl(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(Wm);Tm.className="Identity",hc(Tm);var Ym=function(e){eo(n,e);var t=io(n);function n(e){var r,a;if((0,U.Z)(this,n),r=t.call(this),e.scale<0)throw new lC("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,BC(xm,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){BC(Rm,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(qC(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=sm(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var o=sm(e,0,e.length-2);t=e[e.length-2]*o,n=e[e.length-1]*o}}else{var i=sm(e);t=Math.sqrt(i),n=Math.sqrt(i)}return[t,n]}(e),r=n[0],a=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(r+a)/2),"normal"===this.distribution){var i=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gC("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Od(e,0,i,t,this.seed)}var s=Math.sqrt(3*o);return id(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(Wm);Ym.className="VarianceScaling",hc(Ym);var Hm=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,j.Z)(n,[{key:"getClassName",value:function(){return Ym.className}}]),n}(Ym);Hm.className="GlorotUniform",hc(Hm);var Mm=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,j.Z)(n,[{key:"getClassName",value:function(){return Ym.className}}]),n}(Ym);Mm.className="GlorotNormal",hc(Mm);var Dm=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,j.Z)(n,[{key:"getClassName",value:function(){return Ym.className}}]),n}(Ym);Dm.className="HeNormal",hc(Dm);var Km=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,j.Z)(n,[{key:"getClassName",value:function(){return Ym.className}}]),n}(Ym);Km.className="HeUniform",hc(Km);var zm=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,j.Z)(n,[{key:"getClassName",value:function(){return Ym.className}}]),n}(Ym);zm.className="LeCunNormal",hc(zm);var Lm=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,j.Z)(n,[{key:"getClassName",value:function(){return Ym.className}}]),n}(Ym);Lm.className="LeCunNormal",hc(Lm);var Pm=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new gC("Random seed is not implemented for Orthogonal Initializer yet.");return r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){var n=this;return Jc((function(){if(e.length<2)throw new gC("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=bm(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=Jh.gramSchmidt(t);return e[0]>e[1]&&(r=Ws(r)),Qc(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(Wm);Pm.className="Orthogonal",hc(Pm);var _m={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Om(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kC(e,pc.getMap().classNameMap,t,"initializer")}function Um(e){return AC(e)}function jm(e){if("string"===typeof e){var t=e in _m?_m[e]:e;if("GlorotNormal"===t)return new Mm;if("GlorotUniform"===t)return new Hm;if("HeNormal"===t)return new Dm;if("HeUniform"===t)return new Km;if("LeCunNormal"===t)return new zm;if("LeCunUniform"===t)return new Lm;var n={};return n.className=t,n.config={},Om(n)}return e instanceof Wm?e:Om(e)}function Qm(){return new Vm}function qm(){return new Nm}function $m(e){return new Xm(e)}function ev(e){return new Jm(e)}function tv(e){return new Fm(e)}function nv(e){return new Em(e)}function rv(e){return new Tm(e)}function av(e){return new Ym(e)}function ov(e){return new Hm(e)}function iv(e){return new Mm(e)}function sv(e){return new Dm(e)}function cv(e){return new Km(e)}function uv(e){return new zm(e)}function lv(e){return new Lm(e)}function gv(e){return new Pm(e)}var dv=0;function pv(){return dv++}var hv={};function fv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in hv||(hv[e]=0),hv[e]+=1,e+hv[e].toString()}function Iv(e){return Array.isArray(e)&&Array.isArray(e[0])}function Cv(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function mv(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new lC("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function vv(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new lC("Expected exactly 1 Shape; got ".concat(e.length))}return e}function bv(e){var t,n=0,r=(0,P.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch($K){r.e($K)}finally{r.f()}return n}var Av="Variable",yv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Av,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,U.Z)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=pv(),r=null==r?Av:r,this.originalName=rm(r),this.name=am(this.originalName),this.trainable_=a,this.constraint=o,this.val=qd(t,this.trainable_,this.name,this.dtype)}return(0,j.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function kv(e){return e.map((function(e){return e.read()}))}function Zv(e){e.forEach((function(e){e[0].write(e[1])}))}var Sv=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),wv=(0,j.Z)((function e(t,n,r,a,o,i,s){(0,U.Z)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=o,this.outputTensorIndex=s,this.id=pv(),null!=i&&(this.originalName=rm(i),this.name=am(this.originalName)),this.rank=n.length})),Bv=0,Gv=function(){function e(t,n){(0,U.Z)(this,e),this.callArgs=n,this.id=Bv++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=(0,P.Z)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var o=r.value;null!=o&&o.outboundNodes.push(this)}}catch($K){a.e($K)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,j.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=(0,P.Z)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch($K){n.e($K)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),xv=0,Rv=function(e){eo(n,e);var t=io(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,U.Z)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=xv++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var o=e.getClassName();a=mC(o)+"_"+fv(o)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var i;if(null!=r.batchInputShape)i=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),i=[s].concat(r.inputShape)}e.batchInputShape=i;var c=r.dtype;null==c&&(c=r.inputDType),null==c&&(c="float32"),e.dtype=c}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,j.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new uC("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new lC("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return IC(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return IC(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new cC("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new cC("Layer ".concat(this.name)+" is not connected, no input to return.");return IC(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new cC("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new cC("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return IC(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=CC(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=CC(this.inputSpec);if(e.length!==t.length)throw new lC("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var o=r.rank;if(null!=a.ndim&&o!==a.ndim)throw new lC("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(o));if(null!=a.maxNDim&&o>a.maxNDim)throw new lC("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(o));if(null!=a.minNDim&&o<a.minNDim)throw new lC("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(o,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new lC("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var i=r.shape;for(var s in a.axes){var c=Number(s),u=a.axes[s],l=c>=0?i[c]:i[i.length+c];if(null!=u&&-1===[u,null].indexOf(l))throw new lC("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(c," of input shape to ")+"have value ".concat(u," but got shape ").concat(i,"."))}}if(null!=a.shape)for(var g=0;g<a.shape.length;++g){var d=a.shape[g],p=r.shape[g];if(null!=d&&null!=p&&d!==p)throw new lC("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=CC(e),o=!0,i=(0,P.Z)(a);try{for(i.s();!(r=i.n()).done;){if(!(r.value instanceof wv)){o=!1;break}}}catch($K){i.e($K)}finally{i.f()}var s,c=!0,u=(0,P.Z)(a);try{for(u.s();!(s=u.n()).done;){if(s.value instanceof wv){c=!1;break}}}catch($K){u.e($K)}finally{u.f()}if(o===c)throw new lC("Arguments to apply() must be all SymbolicTensors or all Tensors");return nm(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,o=[],i=(0,P.Z)(CC(e));try{for(i.s();!(r=i.n()).done;){var s=r.value;o.push(s.shape)}}catch($K){i.e($K)}finally{i.f()}n.build(IC(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&c&&(n._refCount=1)}if(n.assertInputCompatibility(e),c){var u,l=n.call(e,t),g=CC(l),d=[],p=(0,P.Z)(g);try{for(p.s();!(u=p.n()).done;){var h=u.value;-1!==a.indexOf(h)&&(h=h.clone()),d.push(h)}}catch($K){p.e($K)}finally{p.f()}if(l=IC(d),null!=n.activityRegularizer)throw new gC("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var f,I=function(e){e=CC(e);var t,n=[],r=(0,P.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch($K){r.e($K)}finally{r.f()}return IC(n)}(e),C=n.computeOutputShape(I),m="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?I[0]:I),f=null!=C&&C.length>0&&Array.isArray(C[0])?C.map((function(r,a){return new wv(m,r,n,CC(e),t,n.name,a)})):new wv(m,C,n,CC(e),t,n.name),n.addInboundNode(e,f,null,null,I,C,t),n._refCount++,null!=n.activityRegularizer)throw new gC("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new cC("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=(0,P.Z)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch($K){n.e($K)}finally{n.f()}if(1===t.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new cC("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new uC("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return bv(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return kv(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Jc((function(){var n=t.weights;if(n.length!==e.length)throw new lC('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=kv(n),o=0;o<a.length;++o){var i=a[o],s=n[o],c=e[o];if(!Ce(i.shape,c.shape))throw new lC("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(c.shape));r.push([s,c])}Zv(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,o,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new lC("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():jm("zeros"));var c=r.apply(t,n),u=new yv(c,n,e,o,i);return c.dispose(),null!=a&&this.addLoss((function(){return a.apply(u.read())})),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=CC(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,_.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=CC(e);t=CC(t),n=CC(n),r=CC(r),a=Cv(a),o=Cv(o);var c,u=[],l=[],g=[],d=(0,P.Z)(s);try{for(d.s();!(c=d.n()).done;){var p=c.value;u.push(p.sourceLayer),l.push(p.nodeIndex),g.push(p.tensorIndex)}}catch($K){d.e($K)}finally{d.f()}new Gv({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:g,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:o},i);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(dc);function Wv(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],o=0;o<r.inboundLayers.length;o++){var i,s=Wv(r.inputTensors[o],r.inboundLayers[o],r.nodeIndices[o]),c=(0,P.Z)(s);try{for(c.s();!(i=c.n()).done;){var u=i.value;-1===a.indexOf(u)&&a.push(u)}}catch($K){c.e($K)}finally{c.f()}}return a}var Vv,Nv=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:fv("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new lC("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new lC("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new lC("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var o=e.dtype||"float32";r.batchInputShape=a,r.dtype=o,r.inputSpec=[{shape:a}];var i=new wv(r.dtype,r.batchInputShape,(0,ao.Z)(r),[],{},r.name);return i.nodeIndex=0,i.tensorIndex=0,new Gv({outboundLayer:(0,ao.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,j.Z)(n,[{key:"apply",value:function(e,t){throw new lC("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(Rv);function Xv(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new lC("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new Nv({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function Jv(e){return Fv.apply(this,arguments)}function Fv(){return(Fv=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i,s,c,u;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(o in n=[],r=[],a=[],t)"number"!==typeof(i=t[o])&&(s=i,n.push(s.data()),r.push(o),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(c=e.sent,u=0;u<c.length;++u)t[r[u]]=c[u][0];Fc(a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ev(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}Nv.className="InputLayer",hc(Nv),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Vv||(Vv={}));var Tv=function(){function e(){(0,U.Z)(this,e),this.validationData=null}return(0,j.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),Yv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,U.Z)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,j.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=(0,P.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch($K){n.e($K)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=(0,P.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch($K){n.e($K)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,P.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,P.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,P.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,P.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,P.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,P.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Hv=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.call(this)}return(0,j.Z)(n,[{key:"onEpochBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)i.totals.hasOwnProperty(e)||(i.totals[e]=0),i.totals[e]=i.totals[e]+t*r;else{var a;e in i.totals?a=i.totals[e]:i.totals[e]=0;var o=Jc((function(){return Oc(i.totals[e],Qc(t,r))}));i.totals[e]=o,null!=a&&a.dispose()}},n)a(o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=(0,P.Z)(this.params.metrics),e.prev=2,o=function(){var e=a.value;if(null==i.totals[e])return"continue";"number"===typeof i.totals[e]?n[e]=i.totals[e]/i.seen:Jc((function(){var t=Qc(jc(1,i.seen),i.totals[e]);n[e]=t,i.totals[e].dispose(),Ec(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==o()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Tv),Mv=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onTrainBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s,c,u;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(o=this.history[a],i=0;i<o.length;++i)"number"!==typeof o[i]&&(s=o[i],t.push(s.data()),n.push(a),r.push(i));return e.next=6,Promise.all(t);case 6:for(c=e.sent,u=0;u<c.length;++u)this.history[n[u]][r[u]].dispose(),this.history[n[u]][r[u]]=c[u][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Tv),Dv=function(e){eo(n,e);var t=io(n);function n(e,r){var a;if((0,U.Z)(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||Mh,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return Ee(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():La();return function(){var o=null!=n?n():La();return o-a<t?r:(a=o,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,ao.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,j.Z)(n,[{key:"maybeWait",value:function(){var e=(0,O.Z)(q().mark((function e(t,n,r){var a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,Jv(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,Jv(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,Jv(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,Jv(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,Jv(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):Ee(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,Jv(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,Jv(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Tv);function Kv(e,t){return null==e&&(e={}),e instanceof Tv?[e]:Array.isArray(e)&&e[0]instanceof Tv?e:CC(e).map((function(e){return new Dv(e,t)}))}var zv=function(){function e(){(0,U.Z)(this,e)}return(0,j.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){ge(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new lC("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,_.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function Lv(e,t,n,r,a,o,i,s,c){var u=new Mv,l=[new Hv].concat((0,_.Z)(zv.createCallbacks(t)));null!=e&&l.push.apply(l,(0,_.Z)(e)),l.push(u);var g=new Yv(l);return g.setParams({epochs:n,initialEpoch:r,samples:a,steps:o,batchSize:i,verbose:t,doValidation:s,metrics:c}),{callbackList:g,history:u}}function Pv(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=to(e)););return e}function _v(){return _v="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Pv(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},_v.apply(this,arguments)}function Ov(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return kC(e,pc.getMap().classNameMap,t,"layer",n)}function Uv(e,t){return Jc((function(){"float32"!==e.dtype&&(e=is(e,"float32"));var n=dg(km(e),t,!0),r=gu(n.shape,oC()),a=qc(Cu(n,r));return jc(e,a)}))}function jv(e,t){return Jc((function(){return Rg(km(hu(t,e)),-1)}))}function Qv(e,t){return Jc((function(){return Rg(Iu(hu(t,e)),-1)}))}function qv(e,t){return Jc((function(){var n=hu(e,t),r=hl(Iu(e),oC(),Number.MAX_VALUE),a=Iu(jc(n,r));return Qc(100,Rg(a,-1))}))}function $v(e,t){return Jc((function(){var n=hl(t,oC(),Number.MAX_VALUE),r=ig(Oc(1,n)),a=hl(e,oC(),Number.MAX_VALUE),o=ig(Oc(1,a));return Rg(km(hu(r,o)),-1)}))}function eb(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Jc((function(){if(n)t=Rd(t);else{var r=dg(t,t.shape.length-1,!0);t=jc(t,r)}return t=hl(t,oC(),1-oC()),cg(dg(Qc(is(e,"float32"),ig(t)),t.shape.length-1))}))}function tb(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Jc((function(){var r=is(_l(pm(e)),"int32"),a=(t=hl(t,oC(),1-oC())).shape;return eb(Qu(Rs(r,a[a.length-1]),a),t,n)}))}function nb(e,t){return Jc((function(){var n;return n=hl(t,oC(),1-oC()),n=ig(jc(n,hu(1,n))),Rg(function(e,t){if(!Ce(e.shape,t.shape))throw new lC("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Jc((function(){var n=ld(t),r=cg(Iu(t));return Oc(hu(n,Qc(t,e)),sg(Dl(r)))}))}(e,n),-1)}))}function rb(e,t){return Jc((function(){var n=hl(e,oC(),1),r=hl(t,oC(),1);return dg(Qc(e,ig(jc(n,r))),-1)}))}function ab(e,t){return Jc((function(){var n=Uv(e,-1),r=Uv(t,-1),a=Qc(n,r);return cg(dg(a,-1))}))}zv.constructors={};var ob={meanSquaredError:jv,meanAbsoluteError:Qv,meanAbsolutePercentageError:qv,meanSquaredLogarithmicError:$v,squaredHinge:function(e,t){return Jc((function(){var n=Cu(0,hu(1,Qc(e,t)));return Rg(km(n),-1)}))},hinge:function(e,t){return Jc((function(){var n=Cu(0,hu(1,Qc(e,t)));return Rg(n,-1)}))},categoricalHinge:function(e,t){return Jc((function(){var n=dg(Qc(e,t),-1),r=gg(Qc(hu(1,e),t),-1);return Cu(0,Oc(1,hu(r,n)))}))},logcosh:function(e,t){return Jc((function(){var n=Math.log(2),r=hu(t,e),a=hu(Oc(r,ug(Qc(-2,r))),n);return Rg(a,-1)}))},categoricalCrossentropy:eb,sparseCategoricalCrossentropy:tb,binaryCrossentropy:nb,kullbackLeiblerDivergence:rb,poisson:function(e,t){return Jc((function(){var n=ig(Oc(oC(),t));return Rg(hu(t,Qc(e,n)),-1)}))},cosineProximity:ab};function ib(e){if("string"===typeof e){if(e in ob)return ob[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new lC(t)}return e}function sb(e,t){return Jc((function(){var n=Qc(.5,Dg(t)),r=gm(Ul(t,n),e.dtype);return Rg(Jl(e,r),-1)}))}function cb(e,t){return Jc((function(){return gm(Jl(Gu(e,-1),Gu(t,-1)),"float32")}))}function ub(e,t){return Jc((function(){return is(dg(kg(Jl(e,1),Jl(t,1))),"float32")}))}function lb(e,t){return Jc((function(){var n=ub(e,t),r=function(e,t){return Jc((function(){return is(dg(kg(Jl(e,0),Jl(t,1))),"float32")}))}(e,t),a=Oc(n,r);return is(Fl(Ul(a,0),jc(n,a),0),"float32")}))}function gb(e,t){return Jc((function(){var n=ub(e,t),r=function(e,t){return Jc((function(){return is(dg(kg(Jl(e,1),Jl(t,0))),"float32")}))}(e,t),a=Oc(n,r);return is(Fl(Ul(a,0),jc(n,a),0),"float32")}))}function db(e,t){return nb(e,t)}function pb(e,t){return e.rank===t.rank&&(e=Ed(e,[e.rank-1])),(t=Gu(t,-1)).dtype!==e.dtype&&(t=is(t,e.dtype)),is(Jl(e,t),"float32")}var hb=eb,fb=tb,Ib={binaryAccuracy:sb,categoricalAccuracy:cb,precision:lb,categoricalCrossentropy:hb,sparseCategoricalCrossentropy:fb,mse:jv,MSE:jv,mae:Qv,MAE:Qv,mape:qv,MAPE:qv,cosine:ab};function Cb(e){if("string"===typeof e&&e in Ib)return Ib[e];if("string"!==typeof e&&null!=e)return e;throw new lC("Unknown metric ".concat(e))}function mb(e){if(hC(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(ob);n<r.length;n++){var a=r[n];if(ob[a]===e){t=a;break}}if(void 0!==t)return t;for(var o=0,i=Object.keys(Ib);o<i.length;o++){var s=i[o];if(Ib[s]===e){t=s;break}}return void 0!==t?t:e.name}var vb=1048576;function bb(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Ab(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>vb&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(vb,"."))}}function Ab(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!Ab(e[r]))return!1}return!0}if(Array.isArray(e)){var a,o=(0,P.Z)(e);try{for(o.s();!(a=o.n()).done;){if(!Ab(a.value))return!1}}catch($K){o.e($K)}finally{o.f()}return!0}return!1}var i=typeof e;return"string"===i||"number"===i||"boolean"===i}function yb(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,o=Zb(e),i=["Layer (type)","Input Shape","Output shape","Param #"];if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!o)for(var s in i.push("Receives inputs"),r=[],e.nodesByDepth){var c;(c=r).push.apply(c,(0,_.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),Sb(i,n,a),a("=".repeat(t));for(var u=e.layers,l=0;l<u.length;++l)o?wb(u[l],n,a):Bb(u[l],n,r,a),a((l===u.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var g=kb(e),d=bv(e.nonTrainableWeights);a("Total params: ".concat(g+d)),a("Trainable params: ".concat(g)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function kb(e){return null!=e.collectedTrainableWeights?bv(e.collectedTrainableWeights):bv(e.trainableWeights)}function Zb(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var o=0,i=n;o<i.length;o++){var s=i[o];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,_.Z)(s))}if(t){var c,u=(0,P.Z)(e.layers);try{for(u.s();!(c=u.n()).done;){var l,g=c.value,d=!1,p=(0,P.Z)(g.inboundNodes);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(-1!==r.indexOf(h)){if(d){t=!1;break}d=!0}}}catch($K){p.e($K)}finally{p.f()}if(!t)break}}catch($K){u.e($K)}finally{u.f()}}return t}function Sb(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function wb(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch($K){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch($K){r="multiple"}var o=e.name,i=e.getClassName();Sb(["".concat(o," (").concat(i,")"),a,r,e.countParams().toString()],t,n)}function Bb(e,t,n,r){var a,o;try{o=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch($K){o="multiple"}try{a=JSON.stringify(e.outputShape)}catch($K){a="multiple"}var i,s=[],c=(0,P.Z)(e.inboundNodes);try{for(c.s();!(i=c.n()).done;){var u=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l){var g=u.inboundLayers[l].name,d=u.nodeIndices[l],p=u.tensorIndices[l];s.push("".concat(g,"[").concat(d,"][").concat(p,"]"))}}}catch($K){c.e($K)}finally{c.f()}var h=e.name,f=e.getClassName(),I=0===s.length?"":s[0];Sb(["".concat(h," (").concat(f,")"),o,a,e.countParams().toString(),I],t,r);for(var C=1;C<s.length;++C)Sb(["","","","",s[C]],t,r)}function Gb(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function xb(e,t){if(null===e)return null;if("string"===typeof e)return vC(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];Gb(t,a,o)?n.push(o):n.push(xb(o,t))}return n}for(var i={},s=0,c=Object.keys(e);s<c.length;s++){var u=c[s],l=e[u];if("name"===u&&"string"===typeof l)i[u]=l;else{var g=vC(u);i[g]=xb(l,g)}}return i}function Rb(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return mC(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];Gb(t,a,o)?n.push(o):n.push(Rb(o,t))}return n}for(var i={},s=0,c=Object.keys(e);s<c.length;s++){var u=c[s],l=e[u],g=mC(u);i[g]="name"!==u&&"className"!==u||"string"!==typeof l?Rb(l,u):l}return i}var Wb="3.15.0";var Vb=function(){function e(t){if((0,U.Z)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=(0,P.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.add(o.key,o.value)}}catch($K){a.e($K)}finally{a.f()}}}return(0,j.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new lC("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return is(t,e.dtype)}catch($K){throw new lC("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof wv){if(null==this.id2Value[e.id])throw new lC("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new lC("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof wv){if(null==this.id2Value[e.id])throw new lC("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new lC("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Fc(this.id2Mask)}}]),e}(),Nb={},Xb={};function Jb(e,t,n,r){var a,o=null!=n&&n.training,i=Array.isArray(e),s=i?e:[e],c=s.map((function(e){return e.name})),u=[],l=t.names(),g=(0,P.Z)(c);try{for(g.s();!(a=g.n()).done;){var d=a.value;-1!==l.indexOf(d)?u.push(t.getValue(d)):u.push(null)}}catch($K){g.e($K)}finally{g.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,h,f=c.join(",")+"|"+t.names().join(",");if(null==Nb[f]){var I=function(e,t){ge(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=Eb(e[0],t);n=a.sorted,r=a.recipientMap}else{var o,i=new Set,s=(0,P.Z)(e);try{for(s.s();!(o=s.n()).done;){var c,u=Eb(o.value,t),l=u.sorted,g=u.recipientMap,d=(0,P.Z)(l);try{for(d.s();!(c=d.n()).done;){var p=c.value;i.has(p.name)||(n.push(p),i.add(p.name))}}catch($K){d.e($K)}finally{d.f()}var h=function(e){null==r[e]&&(r[e]=new Set),g[e].forEach((function(t){return r[e].add(t)}))};for(var f in g)h(f)}}catch($K){s.e($K)}finally{s.f()}}return{sorted:n,recipientCounts:Fb(r)}}(s,t);p=I.sorted,h=I.recipientCounts,Nb[f]=p,Xb[f]=h}p=Nb[f],h={},o||Object.assign(h,Xb[f]);for(var C=new Vb(t),m=0;m<p.length;++m){if(null!=r){var v=Nc().numTensors;v>r.maxNumTensors&&(r.maxNumTensors=v),v<r.minNumTensors&&(r.minNumTensors=v)}var b=p[m],A=b.sourceLayer;if(!(A instanceof Nv)){var y,k=[],Z=[],S=[],w=!1,B=(0,P.Z)(b.inputs);try{for(B.s();!(y=B.n()).done;){var G=y.value,x=C.getValue(G),R=C.getMask(G);k.push(x),Z.push(R),null!=R&&(w=!0),o||(h[G.name]--,0!==h[G.name]||t.hasKey(G)||-1!==c.indexOf(G.name)||x.isDisposed||!0===G.sourceLayer.stateful||S.push(x))}}catch($K){B.e($K)}finally{B.f()}w&&((n=n||{}).mask=Z[0]);var W=CC(A.apply(k,n)),V=null;A.supportsMasking&&(V=A.computeMask(k,Z));for(var N=Tb(b),X=Array.isArray(N)?N:[N],J=0;J<X.length;++J){C.hasKey(X[J])||C.add(X[J],W[J],Array.isArray(V)?V[0]:V);var F=c.indexOf(X[J].name);-1!==F&&(u[F]=W[J])}o||Fc(S)}}return C.disposeMasks(),i?u:u[0]}function Fb(e){var t={};for(var n in e)t[n]=e[n].size;return t}function Eb(e,t){var n,r=new Set,a=[],o={},i=(0,P.Z)(t.names());try{for(i.s();!(n=i.n()).done;){var s=n.value;r.add(s)}}catch($K){i.e($K)}finally{i.f()}var c=[],u=[];for(c.push(e);c.length>0;){var l=c[c.length-1];if(r.has(l.name))c.pop();else{var g=u[u.length-1]===c.length-1;if(0===l.inputs.length||g)c.pop(),a.push(l),r.add(l.name),g&&u.pop();else{u.push(c.length-1);var d,p=(0,P.Z)(l.inputs);try{for(p.s();!(d=p.n()).done;){var h=d.value;null==o[h.name]&&(o[h.name]=new Set),o[h.name].add(l.name),r.has(h.name)||c.push(h)}}catch($K){p.e($K)}finally{p.f()}}}}return{sorted:a,recipientMap:o}}function Tb(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,o=(0,P.Z)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(o.s();!(a=o.n()).done;){if(a.value.id===e.id){n=r;break}}}catch($K){o.e($K)}finally{o.f()}}t=e.sourceLayer.getOutputAt(n)}return t}var Yb=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=fv(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],SC(r.inputs).length!==r.inputs.length)throw new lC("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));SC(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var o,i=(0,P.Z)(r.outputs);try{for(i.s();!(o=i.n()).done;){var s=o.value,c=s.sourceLayer,u=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(c),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}}catch($K){i.e($K)}finally{i.f()}var g,d=(0,P.Z)(r.inputs);try{for(d.s();!(g=d.n()).done;){var p=g.value,h=p.sourceLayer,f=p.nodeIndex,I=p.tensorIndex;hC(0===f,"input layer has >1 nodes"),hC(0===I,"input layer has >1 tensors"),r.inputLayers.push(h),r.inputLayersNodeIndices.push(f),r.inputLayersTensorIndices.push(I)}}catch($K){d.e($K)}finally{d.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var C=0;C<r.inputLayers.length;C++){var m=r.inputLayers[C];if(!(m instanceof Nv))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(C," (0-based) originates ")+"from layer type ".concat(m.getClassName(),"."));r.inputNames.push(m.name),r.feedInputShapes.push(m.batchInputShape),r.feedInputNames.push(m.name)}var v,b=(0,P.Z)(r.outputLayers);try{for(b.s();!(v=b.n()).done;){var A=v.value;r.outputNames.push(A.name)}}catch($K){b.e($K)}finally{b.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var y,k={},Z={},S={},w={},B={},G=[],x=function e(t,a,o,i,s,c){null!=i&&null!=s&&null!=c||(i=t.sourceLayer,s=t.nodeIndex,c=t.tensorIndex);var u=i.inboundNodes[s];if(-1!==o.indexOf(u))throw new uC("The tensor ".concat(t.name,' at layer "').concat(i.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(u)){r.containerNodes.add(n.nodeKey(i,s)),i.id in B||(B[i.id]=Object.keys(B).length),-1===o.indexOf(u)&&o.push(u);for(var l=u.inboundLayers.length,g=0;g<l;g++){e(u.inputTensors[g],a,o,u.inboundLayers[g],u.nodeIndices[g],u.tensorIndices[g])}for(a.push(u);o.indexOf(u)>=0;)o.splice(o.indexOf(u),1);G.push(u)}},R=[],W=[],V=(0,P.Z)(r.outputs);try{for(V.s();!(y=V.n()).done;){x(y.value,R,W)}}catch($K){V.e($K)}finally{V.f()}var N,X=G.slice().reverse(),J=(0,P.Z)(X);try{for(J.s();!(N=J.n()).done;){var F=N.value;Z[F.id]=F,F.id in k||(k[F.id]=0);var E=k[F.id],T=null==S[F.outboundLayer.id]?0:S[F.outboundLayer.id];E=Math.max(E,T),S[F.outboundLayer.id]=E,w[F.outboundLayer.id]=F.outboundLayer,k[F.id]=E;for(var Y=0;Y<F.inboundLayers.length;Y++){var H=F.inboundLayers[Y],M=F.nodeIndices[Y],D=H.inboundNodes[M],K=null==k[D.id]?0:k[D.id];k[D.id]=Math.max(E+1,K),Z[D.id]=D}}}catch($K){J.e($K)}finally{J.f()}var z={};for(var L in k){var _=k[L];_ in z||(z[_]=[]),z[_].push(Z[L])}var O={};for(var j in S){var Q=S[j];Q in O||(O[Q]=[]),O[Q].push(w[j])}var q=Object.keys(O).map((function(e){return parseInt(e,10)})).sort(ZC);r.layers=[];var $,ee=(0,P.Z)(q);try{for(ee.s();!($=ee.n()).done;){var te=O[$.value];te.sort((function(e,t){var n=B[e.id],r=B[t.id];return n<r?-1:n>r?1:0}));var ne,re=(0,P.Z)(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch($K){re.e($K)}finally{re.f()}}}catch($K){ee.e($K)}finally{ee.f()}r.layersByDepth=O,q=Object.keys(z).map((function(e){return parseInt(e,10)})).sort(ZC);var oe,ie=r.inputs.slice(),se=[],ce=(0,P.Z)(q);try{for(ce.s();!(oe=ce.n()).done;){var ue,le=oe.value,ge=(0,P.Z)(z[le]);try{for(ge.s();!(ue=ge.n()).done;){var de=ue.value,pe=de.outboundLayer;if(null!=pe){var he,fe=(0,P.Z)(de.inputTensors);try{for(fe.s();!(he=fe.n()).done;){var Ie=he.value;if(-1===ie.indexOf(Ie))throw new uC("Graph disconnected: cannot obtain value for tensor ".concat(Ie)+' at layer "'.concat(pe.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(se))}}catch($K){fe.e($K)}finally{fe.f()}var Ce,me=(0,P.Z)(de.outputTensors);try{for(me.s();!(Ce=me.n()).done;){var ve=Ce.value;ie.push(ve)}}catch($K){me.e($K)}finally{me.f()}se.push(pe.name)}}}catch($K){ge.e($K)}finally{ge.f()}}}catch($K){ce.e($K)}finally{ce.f()}r.nodesByDepth=z;var be,Ae=r.layers.map((function(e){return e.name})),ye=(0,P.Z)(Ae);try{var ke=function(){var e=be.value,t=Ae.filter((function(t){return t===e})).length;if(1!==t)throw new uC('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(Ae))};for(ye.s();!(be=ye.n()).done;)ke()}catch($K){ye.e($K)}finally{ye.f()}return r.outboundNodes=[],r.inboundNodes=[],new Gv({outboundLayer:(0,ao.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,j.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=(0,P.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch($K){n.e($K)}finally{n.f()}var a,o=(0,P.Z)(this.internalContainerRefs);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.numDisposedVariables+=i.dispose().numDisposedVariables}}catch($K){o.e($K)}finally{o.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new lC("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=(0,P.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch($K){n.e($K)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,P.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.nonTrainableWeights))}}catch($K){n.e($K)}finally{n.f()}if(!this.trainable){var a,o=[],i=(0,P.Z)(this.layers);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push.apply(o,(0,_.Z)(s.trainableWeights))}}catch($K){i.e($K)}finally{i.f()}return o.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,o=(0,P.Z)(this.layers);try{for(o.s();!(t=o.n()).done;){var i,s=t.value,c=(0,P.Z)(s.weights);try{for(c.s();!(i=c.n()).done;){var u=i.value;if(null!=r[u.originalName])throw new lC("Duplicate weight name: ".concat(u.originalName));r[u.originalName]=u,a++}}catch($K){c.e($K)}finally{c.f()}}}catch($K){o.e($K)}finally{o.f()}var l=[];for(var g in e){var d=g;if(null==r[g]){var p=g.split("/"),h=p.slice(0,-2).concat([p[p.length-1]]);d=h.join("/")}if(null!=r[d])l.push([r[d],e[g]]);else if(n)throw new lC("Provided weight data has no target variable: ".concat(g));delete r[d]}if(n){var f=[];for(var I in r)f.push(I);if(f.length>0)throw new lC("".concat(f.length," of ").concat(a," weights are not set: ")+"".concat(f))}Zv(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(Wb),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Rb(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Jc((function(){e=CC(e);for(var r=new Vb,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return Jb(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Jc((function(){var r;return e=CC(e),r=null==t?pC(null,e.length):CC(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Cv(e);if(t.length!==this.inputLayers.length)throw new lC("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],o=t[r];n[a.name+"_0_0"]=o}var i=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(ZC);if(i.length>1){var s,c=(0,P.Z)(i);try{for(c.s();!(s=c.n()).done;){var u,l=s.value,g=this.nodesByDepth[l],d=(0,P.Z)(g);try{for(d.s();!(u=d.n()).done;){var p=u.value,h=p.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var f=[],I=0;I<p.inboundLayers.length;I++){var C=p.inboundLayers[I],m=p.nodeIndices[I],v=p.tensorIndices[I],b=n["".concat(C.name,"_").concat(m,"_").concat(v)];f.push(b)}for(var A=Cv(h.computeOutputShape(IC(f))),y=h.inboundNodes.indexOf(p),k=0;k<A.length;k++){n["".concat(h.name,"_").concat(y,"_").concat(k)]=A[k]}}}}catch($K){d.e($K)}finally{d.f()}}}catch($K){c.e($K)}finally{c.f()}}for(var Z=[],S=[],w=0;w<this.outputLayers.length;w++){var B=this.outputLayers[w],G=this.outputLayersNodeIndices[w],x=this.outputLayersTensorIndices[w],R="".concat(B.name,"_").concat(G,"_").concat(x);S.push(R)}for(var W=0;W<S.length;W++){var V=S[W];hC(V in n),Z.push(n[V])}return IC(Z)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=pC(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],o=e[r],i=t[r];n[a.id]=[o,i]}var s,c=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(ZC),u=(0,P.Z)(c);try{for(u.s();!(s=u.n()).done;){var l,g=s.value,d=this.nodesByDepth[g],p=(0,P.Z)(d);try{for(p.s();!(l=p.n()).done;){var h,f=l.value,I=f.outboundLayer,C=f.inputTensors,m=f.outputTensors,v=new Array,b=(0,P.Z)(C);try{for(b.s();!(h=b.n()).done;){var A=h.value;A.id in n&&v.push(n[A.id])}}catch($K){b.e($K)}finally{b.f()}if(v.length===C.length){var y={},k=void 0,Z=void 0,S=void 0,w=void 0;if(null!=f.callArgs&&(y=f.callArgs),1===v.length){var B=(0,ne.Z)(v[0],2),G=B[0],x=B[1];null==y.mask&&(y.mask=x),S=CC(I.call(G,y)),w=CC(I.computeMask(G,x)),k=[G],Z=[x]}else k=v.map((function(e){return e[0]})),Z=v.map((function(e){return e[1]})),null==y.mask&&(y.mask=Z),S=CC(I.call(k,y)),w=CC(I.computeMask(k,Z));if(I.activityRegularizer)throw new gC("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var R=0;R<m.length;++R){var W=m[R],V=S[R],N=w[R];n[W.id]=[V,N]}}}}catch($K){p.e($K)}finally{p.f()}}}catch($K){u.e($K)}finally{u.f()}var X,J=[],F=[],E=[],T=(0,P.Z)(this.outputs);try{for(T.s();!(X=T.n()).done;){var Y=X.value;hC(Y.id in n,"Could not compute output ".concat(Y.name," : ").concat(Y.id));var H=(0,ne.Z)(n[Y.id],2),M=H[0],D=H[1];E.push(M.shape),J.push(M),F.push(D)}}catch($K){T.e($K)}finally{T.f()}return[J,F,E]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},o=(0,P.Z)(this.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t=i instanceof n?1:0;for(var s=0;s<i.inboundNodes.length;s++){var c=n.nodeKey(i,s);this.containerNodes.has(c)&&(a[c]=t,t+=1)}}}catch($K){o.e($K)}finally{o.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new lC("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new lC("Provide either a layer name or layer index");var n,r=(0,P.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch($K){r.e($K)}finally{r.f()}throw new lC("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Jc((function(){var t,r=[],a=(0,P.Z)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var o=t.value,i=0;i<o.inboundNodes.length;++i){var s=n.nodeKey(o,i);e.containerNodes.has(s)&&r.push.apply(r,(0,_.Z)(o.calculateLosses()))}}catch($K){a.e($K)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],o=(0,P.Z)(this.layers);try{for(o.s();!(e=o.n()).done;){for(var i=e.value,s=i.getClassName(),c=i.getConfig(),u=[],l=0;l<i.inboundNodes.length;l++){var g=i.inboundNodes[l],d=n.nodeKey(i,l),p={};if(this.containerNodes.has(d)){if(g.callArgs)try{JSON.stringify(g.callArgs),p=g.callArgs}catch($K){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(g.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(g.inboundLayers.length>0){for(var h=[],f=0;f<g.inboundLayers.length;f++){var I=g.inboundLayers[f],C=g.nodeIndices[f],m=g.tensorIndices[f],v=r[n.nodeKey(I,C)];null==v&&(v=0),h.push([I.name,v,m,p])}u.push(h)}}}var b={};b.name=i.name,b.className=s,b.config=c,b.inboundNodes=u,a.push(b)}}catch($K){o.e($K)}finally{o.f()}t.layers=a;for(var A=[],y=0;y<this.inputLayers.length;y++){var k=this.inputLayers[y],Z=this.inputLayersNodeIndices[y],S=n.nodeKey(k,Z);if(this.containerNodes.has(S)){var w=r[S];null!==w&&void 0!==w||(w=0);var B=this.inputLayersTensorIndices[y];A.push([k.name,w,B])}}t.inputLayers=A;for(var G=[],x=0;x<this.outputLayers.length;x++){var R=this.outputLayers[x],W=this.outputLayersNodeIndices[x],V=n.nodeKey(R,W);if(this.containerNodes.has(V)){var N=r[V];null!==N&&void 0!==N||(N=0);var X=this.outputLayersTensorIndices[x];G.push([R.name,N,X])}}return t.outputLayers=G,t}},{key:"stateful",get:function(){if(this._stateful)throw new lC("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=(0,P.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch($K){t.e($K)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Jc((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function i(e,t){var n,a,i=[],s=(0,P.Z)(t);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=c[0],l=c[1],g=c[2];if(n=null==c[3]?{}:c[3],!(u in r))return void o(e,t);var d=r[u];if(d.inboundNodes.length<=l)return void o(e,t);var p=d.inboundNodes[l];i.push(p.outputTensors[g])}}catch($K){s.e($K)}finally{s.f()}i.length>0&&e.apply(IC(i),n)}function s(e){var a=e.name,i=Ov(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[a]=i,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new lC("Corrupted configuration, expected array for nodeData: ".concat(e));o(i,e)}))}var c,u=t.name,l=t.layers,g=(0,P.Z)(l);try{for(g.s();!(c=g.n()).done;){var d=c.value;s(d)}}catch($K){g.e($K)}finally{g.f()}for(;!wC(a);){var p,h=(0,P.Z)(l);try{for(h.s();!(p=h.n()).done;){var f=p.value,I=r[f.name];if(I.name in a){var C=a[I.name];delete a[I.name];var m,v=(0,P.Z)(C);try{for(v.s();!(m=v.n()).done;){var b=m.value;i(I,b)}}catch($K){v.e($K)}finally{v.f()}}}}catch($K){h.e($K)}finally{h.f()}}var A,y=[],k=[],Z=t.inputLayers,S=(0,P.Z)(Z);try{for(S.s();!(A=S.n()).done;){var w=A.value,B=w[0],G=w[1],x=w[2];hC(B in r);var R=r[B],W=R.inboundNodes[G].outputTensors;y.push(W[x])}}catch($K){S.e($K)}finally{S.f()}var V,N=t.outputLayers,X=(0,P.Z)(N);try{for(X.s();!(V=X.n()).done;){var J=V.value,F=J[0],E=J[1],T=J[2];hC(F in r);var Y=r[F],H=Y.inboundNodes[E].outputTensors;k.push(H[T])}}catch($K){X.e($K)}finally{X.f()}return new e({inputs:y,outputs:k,name:u})}}]),n}(Rv);function Hb(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function Mb(e,t){return Hb(e,t,"classWeight")}function Db(e,t,n,r){return Kb.apply(this,arguments)}function Kb(){return(Kb=(0,O.Z)(q().mark((function e(t,n,r,a){var o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return o=Jc((function(){if(1===t.shape.length)return ss(t);if(2===t.shape.length){if(t.shape[1]>1){return Gu(t,1)}if(1===t.shape[1])return Qu(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,o.data();case 7:return e.t1=e.sent,i=e.t0.from.call(e.t0,e.t1),Fc(o),s=[],i.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",Dd(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zb(e,t){return Qc(e,t)}function Lb(e,t){var n,r,a=t;n=a.xs,r=a.ys,ge(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var o=Pb("input",e.inputNames,n),i=Pb("output",e.outputNames,r),s=o[0].shape[0];ge(o.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),ge(i.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var c=function(t){ge(o[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},u=0;u<o.length;u++)c(u);for(var l=function(t){ge(i[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},g=0;g<i.length;g++)l(g);return{xs:o,ys:i}}function Pb(e,t,n){if(n instanceof Io)return[n];if(Array.isArray(n))return ge(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],o=(0,P.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(null==n[i])throw new lC("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(i,"'."));a.push(n[i])}}catch($K){o.e($K)}finally{o.f()}return a}function _b(e){if(3===e.length)throw new gC("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function Ob(e,t,n){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b,A,y,k,Z,S,w,B,G,x,R,W,V,N,X,J,F;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,ge(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),ge(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),ge(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),ge(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),ge(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(o=null!=r.validationData)&&(Qb(r.validationData)?ge(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(c=_b(r.validationData),i=c.xs,s=c.ys)),u=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),g=o?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),d=Kv(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,h=Lv(d,p,r.epochs,null,null,jb(n,r),null,o,g),f=h.callbackList,I=h.history,f.setModel(t),t.history=I,e.next=22,f.onTrainBegin();case 22:return t.stopTraining_=!1,C=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:m=e.sent;case 27:if(!(C<r.epochs)){e.next=98;break}return v={},e.next=31,f.onEpochBegin(C);case 31:if(b=0,A=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:m=e.sent;case 37:if(a&&!(b<r.batchesPerEpoch)){e.next=91;break}return e.next=40,m.next();case 40:if(y=e.sent,!a||!y.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(b," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==y.value){e.next=73;break}return k=Lb(t,y.value),Z=k.xs,S=k.ys,(w={}).batch=A,w.size=Z[0].shape[0],e.next=51,f.onBatchBegin(A,w);case 51:if(B=[],null==r.classWeight){e.next=64;break}G=Mb(r.classWeight,t.outputNames),x=0;case 55:if(!(x<G.length)){e.next=64;break}return e.t0=B,e.next=59,Db(S[x],null,G[x]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++x,e.next=55;break;case 64:for(R=Z.concat(S).concat(B),W=u(R),Fc(R),V=0;V<l.length;++V)N=l[V],X=W[V],w[N]=X,Ec(X);return e.next=70,f.onBatchEnd(A,w);case 70:Ev(w),A++,b++;case 73:if(!(a?b>=r.batchesPerEpoch:y.done)){e.next=87;break}if(!o){e.next=86;break}if(J=void 0,!Qb(r.validationData)){e.next=84;break}return e.t2=CC,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,J=(0,e.t2)(e.t3),e.next=85;break;case 84:J=CC(t.evaluate(i,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(F=0;F<t.metricsNames.length;++F)v["val_".concat(t.metricsNames[F])]=J[F];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,f.onEpochEnd(C,v);case 93:if(C++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,f.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),Ub.apply(this,arguments)}function jb(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function Qb(e){return"function"===typeof e.iterator}function qb(e){return"function"===typeof e.next}function $b(e,t,n){return eA.apply(this,arguments)}function eA(){return eA=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,o=t.testFunction,i=[],!(r.verbose>0)){e.next=6;break}throw new gC("Verbose mode is not implemented yet.");case 6:if(ge(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!qb(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,c=0,u=0,l=q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,i=Jc((function(){return n.value&&function(){var e=Lb(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=Jc((function(){return o(s)}));if(Fc(s),0===u)for(var g=0;g<l.length;++g)i.push(cu(0));for(var d=s[0].shape[0],p=function(e){var t=l[e],n=i[e];i[e]=Jc((function(){return Oc(i[e],Qc(d,t))})),u>0&&Fc(n)},h=0;h<l.length;++h)p(h);Fc(l),c+=d,++u}(),i})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(u<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(g=0;g<i.length;++g)d=i[g],i[g]=jc(i[g],c),Fc(d);return e.abrupt("return",IC(i));case 27:case"end":return e.stop()}}),e)}))),eA.apply(this,arguments)}function tA(e){ge(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function nA(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return hm(e,t,n-t)})):hm(e,t,n-t)}function rA(e,t){return Jc((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return rA(e,t)})):ym(e,"int32"===t.dtype?t:is(t,"int32"))}))}function aA(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function oA(e,t,n,r,a,o,i,s,c,u,l,g,d,p,h){return iA.apply(this,arguments)}function iA(){return iA=(0,O.Z)(q().mark((function e(t,n,r,a,o,i,s,c,u,l,g,d,p,h,f){var I,C,m,v,b,A,y,k;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==o&&(o=32),null==i&&(i=1),null==g&&(g=!0),null==p&&(p=0),I=!1,null!=u&&null!=l&&(I=!0),null==f){e.next=10;break}if(I=!0,null!=h){e.next=10;break}throw new lC("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(C=t.checkNumSamples(r,o,h,"steps_per_epoch"))&&(m=lm(0,C)),null==s&&(s=1),v=Lv(c,s,i,p,C,h,o,I,d),b=v.callbackList,A=v.history,b.setModel(t),t.history=A,e.next=18,b.onTrainBegin();case 18:t.stopTraining_=!1,y=q().mark((function e(i){var s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onEpochBegin(i);case 2:if(s={},null==h){e.next=7;break}throw new gC("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(q().mark((function e(){var i,c,d,p;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==g){e.next=4;break}throw new gC("batch shuffling is not implemneted yet");case 4:g&&re(m);case 5:i=Dd(m),c=aA(C,o),d=q().mark((function e(g){var d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,b.onBatchBegin(g,d);case 3:return Jc((function(){var e=c[g][0],p=c[g][1],h=hm(i,e,p-e);d.batch=g,d.size=p-e;for(var f=rA(r,h),C=n(f),m=0;m<a.length;++m){var v=a[m],b=C[m];d[v]=b,Ec(b)}if(g===c.length-1&&I)for(var A=t.testLoop(u,l,o),y=0;y<a.length;++y){var k=a[y],Z=A[y];Ec(Z),s["val_"+k]=Z}})),e.next=6,b.onBatchEnd(g,d);case 6:if(Ev(d),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 9:if(!(p<c.length)){e.next=17;break}return e.delegateYield(d(p),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++p,e.next=9;break;case 17:i.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,b.onEpochEnd(i,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),k=p;case 21:if(!(k<i)){e.next=29;break}return e.delegateYield(y(k),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++k,e.next=21;break;case 29:return e.next=31,b.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),iA.apply(this,arguments)}function sA(e,t,n){return cA.apply(this,arguments)}function cA(){return cA=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b,A,y,k,Z,S,w,B,G,x,R=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R.length>3&&void 0!==R[3]?R[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,tA(h=null==a.batchSize?32:a.batchSize),f=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,f,h);case 10:if(I=e.sent,o=I[0],i=I[1],p=I[2],C=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(C=!0,2!==a.validationData.length){e.next=22;break}u=a.validationData[0],l=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new gC("validationData including sample weights is not supported yet.");case 26:throw new lC("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return v=!0,e.next=30,t.standardizeUserData(u,l,null,null,v,h);case 30:b=e.sent,g=b[0],d=b[1],m=g.concat(d),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(C=!0,A=Math.floor(o[0].shape[0]*(1-a.validationSplit)),y=o[0].shape[0],g=nA(o,A,y),s=o,o=nA(o,0,A),d=nA(i,A,y),c=i,i=nA(i,0,A),m=g.concat(d)):null!=a.validationSteps&&(C=!0);case 37:return k=o.concat(i).concat(p),t.checkTrainableWeightsConsistency(),Z=t.makeTrainFunction(),S=t.getDedupedMetricsNames(),C?(t.makeTestFunction(),w=t.testFunction,B=S.slice().concat(S.map((function(e){return"val_"+e})))):(w=null,m=[],B=S.slice()),G=Kv(a.callbacks,a.yieldEvery),e.next=45,oA(t,Z,k,S,h,a.epochs,a.verbose,G,w,m,a.shuffle,B,a.initialEpoch,null,null);case 45:return x=e.sent,e.abrupt("return",x);case 47:return e.prev=47,t.isTraining=!1,lA(o,n),lA(i,r),lA(s,n),lA(c,r),lA(g,u),lA(d,l),null!=p&&Fc(p),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),cA.apply(this,arguments)}function uA(e){var t=[];e instanceof Io&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(dm(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function lA(e,t){if(null!=e){var n=[];if(t instanceof Io)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var o=[];if(e instanceof Io)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var i in e){var s=e[i];-1===n.indexOf(s.id)&&o.push(s)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function gA(e){return Array.isArray(e)}function dA(e){return!function(e){return e instanceof Io}(e)&&!gA(e)}function pA(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var i=!1;if(gA(e)&&e.length>0)i=!0;else if(dA(e)){for(var s in e)if(e.hasOwnProperty(s)){i=!0;break}}else i=!0;if(i)throw new lC("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(dA(e)){e=e,r=[];var c,u=(0,P.Z)(t);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(null==e[l])throw new lC('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch($K){u.e($K)}finally{u.f()}}else if(gA(e)){if((e=e).length!==t.length)throw new lC("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new lC("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=uA(r),null!=n)for(var g=0;g<t.length;++g)if(null!=n[g]){var d=r[g];if(d.shape.length!==n[g].length)throw new lC("Error when checking ".concat(o,": expected ").concat(t[g]," ")+"to have ".concat(n[g].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var p=0;p<n[g].length;++p)if(0!==p||a){var h=d.shape[p],f=n[g][p];if(null!=f&&f>=0&&h!==f)throw new lC("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[g].slice(1,n[g].length),"] ")+"(i.e.,tensor shape [*,".concat(n[g].slice(1,n[g].length),"])")+" but the ".concat(o," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return r}function hA(e,t,n){var r=SC(e.map((function(e){return e.shape[0]})));r.sort();var a=SC(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new lC("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new lC("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Ce(r,a))throw new lC("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function fA(e,t,n){for(var r=[jv,nb,eb],a=0;a<e.length;++a){var o=e[a],i=t[a],s=n[a];if(null!=i){if(i===eb&&1===o.shape[o.shape.length-1])throw new lC("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i))for(var c=o.shape.slice(1),u=s.slice(1),l=0;l<c.length;++l){var g=c[l],d=u[l];if(null!=d&&g!==d)throw new lC("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function IA(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new lC("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new lC("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var i=0;i<t.length;++i)if(null!=n[i]){var s=r[i];if(s.shape.length!==n[i].length)throw new lC("Error when checking ".concat(o,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var c=0;c<n[i].length;++c)if(0!==c||a){var u=s.shape[c],l=n[i][c];if(null!=l&&l!==u)throw new lC("Error when checking ".concat(o,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var CA=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).isTraining=!1,r}return(0,j.Z)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new lC("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");yb(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return Yh.adagrad(.01)},Adadelta:function(){return Yh.adadelta(1,.95,oC())},Adam:function(){return Yh.adam(.001,.9,.999,oC())},Adamax:function(){return Yh.adamax(.002,.9,.999,oC(),0)},RMSProp:function(){return Yh.rmsprop(.001,.9,0,oC())},SGD:function(){return Yh.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new lC("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof uu))throw new lC("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new lC("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return ib(e)}))}else{var a=ib(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new lC('Unknown entry in loss dictionary: "'.concat(o,'". ')+"Only expected the following keys: ".concat(this.outputNames));var i,s=(0,P.Z)(this.outputNames);try{for(s.s();!(i=s.n()).done;){var c=i.value;null==e.loss[c]&&console.warn('Output "'.concat(c,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(c," during training")),n.push(ib(e.loss[c]))}}catch($K){s.e($K)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var l=this.internalOutputShapes[u],g=this.outputNames[u];this.feedOutputNames.push(g),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[u])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nm("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],o=(0,P.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch($K){o.e($K)}finally{o.f()}return a}(e.metrics,this.outputNames),h=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};nm("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,o,i,s=(0,P.Z)(n);try{for(s.s();!(i=s.n()).done;){var c=i.value;if("string"===typeof c&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(c)){var u=t.internalOutputShapes[e];1===u[u.length-1]||t.lossFunctions[e]===nb?-1!==["accuracy","acc"].indexOf(c)?a=sb:-1!==["crossentropy","ce"].indexOf(c)&&(a=db):t.lossFunctions[e]===tb?-1!==["accuracy","acc"].indexOf(c)?a=pb:-1!==["crossentropy","ce"].indexOf(c)&&(a=fb):-1!==["accuracy","acc"].indexOf(c)?a=cb:-1!==["crossentropy","ce"].indexOf(c)&&(a=hb);var l=void 0;-1!==["accuracy","acc"].indexOf(c)?l="acc":-1!==["crossentropy","ce"].indexOf(c)&&(l="ce"),o=a,r=""+l}else{var g=Cb(c);o=g,r=""+mb(c)}var d=void 0;nm(r,(function(){d=o})),h(e,r,d)}}catch($K){s.e($K)}finally{s.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;tA(r);var a=!0,o=this.standardizeUserDataXY(e,t,a,r);try{var i=o[0].concat(o[1]);this.makeTestFunction();var s=this.testFunction,c=this.testLoop(s,i,r,n.verbose,n.steps);return IC(c)}finally{lA(o[0],e),lA(o[1],t)}}},{key:"evaluateDataset",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",$b(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new lC("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new lC("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new lC("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),o=new Vb;if(e instanceof Io&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new lC("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],e[i])}else{var s,c=(0,P.Z)(this.inputs);try{for(c.s();!(s=c.n()).done;){var u=s.value,l=e[u.name];if(null==l)throw new lC("No value is provided for the model's input ".concat(u.name));o.add(u,l)}}catch($K){c.e($K)}finally{c.f()}}var g=Jb(a,o);return n?g:g[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=pC(null,e.length),r=e.length,a=(0,P.Z)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var o=t.value,i=Array.isArray(o.output)?o.output:[o.output],s=i.map((function(e){return e.name})),c=0;c<e.length;++c){var u=s.indexOf(e[c]);if(-1!==u&&(n[c]=i[u],r--),0===r)break}if(0===r)break}}catch($K){a.e($K)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new lC("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Jc((function(){var a=t.checkNumSamples(e);if(r)throw new gC("Verbose predictLoop() is not implemented yet.");for(var o=aA(a,n),i=t.outputs.map((function(e){return[]})),s=function(n){Jc((function(){var r=o[n][0],a=o[n][1],i=nA(e,r,a),s=[];if(Array.isArray(i))for(var c=0;c<i.length;++c)s.push({key:t.inputs[c],value:i[c]});else s.push({key:t.inputs[0],value:i});var u=new Vb(s);return Jb(t.outputs,u)})).forEach((function(e,t){return i[t].push(e)}))},c=0;c<o.length;++c)s(c);return IC(i.map((function(e){return el(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=uA(e);IA(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return tA(r),this.predictLoop(n,r)}finally{lA(n,e)}}},{key:"predictOnBatch",value:function(e){IA(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new uC("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var o=this.feedOutputShapes[a],i=this.feedLossFns[a];i===tb?r.push(o.slice(0,o.length-1).concat([1])):r.push(o)}if(hA(e=pA(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=pA(t,this.feedOutputNames,r,!1,"target")),fA(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new lC("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=(0,O.Z)(q().mark((function e(t,n,r,a){var o,i,s,c,u,l,g,d,p,h=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(h.length>4&&void 0!==h[4])||h[4],i=h.length>5?h[5]:void 0,s=this.standardizeUserDataXY(t,n,o,i),c=(0,ne.Z)(s,2),u=c[0],l=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(g=null,null==a){e.next=19;break}d=Mb(a,this.outputNames),g=[],p=0;case 10:if(!(p<d.length)){e.next=19;break}return e.t0=g,e.next=14,Db(l[p],null,d[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[u,l,g]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return Jc((function(){var i=r.checkNumSamples(t,n,o,"steps"),s=[];if(a>0)throw new gC("Verbose mode is not implemented yet.");if(null!=o)throw new gC("steps mode in testLoop() is not implemented yet");for(var c=aA(i,n),u=Dd(lm(0,i)),l=0;l<c.length;++l){var g=c[l][0],d=c[l][1],p=hm(u,g,d-g),h=rA(t,p),f=e(h);if(0===l)for(var I=0;I<f.length;++I)s.push(cu(0));for(var C=0;C<f.length;++C){var m=f[C];s[C]=Oc(s[C],Qc(d-g,m))}}for(var v=0;v<s.length;++v)s[v]=jc(s[v],i);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(fC(e,r)>1){var o=fC(e.slice(0,n),r);a+="_".concat(o)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),i=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var c,u=new Vb(t),l=Jb(e.outputs,u,{training:!0}),g=0;g<e.lossFunctions.length;++g){var d=(0,e.lossFunctions[g])(a[g],l[g]);null!=o[g]&&(d=zb(d,o[g]));var p=Rg(d);n.push(p),c=0===g?d:Oc(c,d)}for(var h=0;h<e.metricsTensors.length;++h){var f=void 0;if(e.outputs.length>1&&h<e.outputs.length)f=n[h];else{var I=e.metricsTensors[h][0],C=e.metricsTensors[h][1];f=Rg(I(a[C],l[C]))}Ec(f),i.push(f)}return c=Rg(c),e.calculateLosses().forEach((function(e){c=Oc(c,e)})),c}),!0,s)].concat(i)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return Jc((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=[],s=0;s<e.inputs.length;++s)i.push({key:e.inputs[s],value:a[s]});for(var c=new Vb(i),u=Jb(e.outputs,c),l=0;l<e.lossFunctions.length;++l){var g=e.lossFunctions[l],d=Rg(g(o[l],u[l]));n=0===l?d:Oc(n,d),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var h=e.metricsTensors[p][0],f=e.metricsTensors[p][1],I=Rg(h(o[f],u[f]));r.push(I)}return r}))}}},{key:"fit",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",sA(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ob(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l,g,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],o=r[1],i=this.makeTrainFunction(),s=i(a.concat(o)),c=[],u=(0,P.Z)(s),e.prev=9,u.s();case 11:if((l=u.n()).done){e.next=19;break}return g=l.value,e.next=15,g.data();case 15:d=e.sent,c.push(d[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),u.e(e.t0);case 24:return e.prev=24,u.f(),e.finish(24);case 27:return Fc(s),lA(r[0],t),lA(r[1],n),e.abrupt("return",IC(c));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:a[o]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=_v(to(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=Nc().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Nc().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=mC(this.loss);else if(Array.isArray(this.loss)){var t,n=(0,P.Z)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch($K){n.e($K)}finally{n.f()}e=this.loss.map((function(e){return mC(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,o=0,i=r;o<i.length;o++){var s=i[o];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=mC(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[mC(mb(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return mC(mb(e))}));var e={};for(var t in this.metrics)e[t]=mC(mb(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=Ov(xb(e.optimizer_config));if("string"===typeof e.loss)t=vC(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return vC(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=vC(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return vC(e)}));else if(null!=e.metrics)for(var o in n={},e.metrics)n[o]=vC(e.metrics[o]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o,s,c,u,l,g,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=vi(t)).length){e.next=6;break}throw new lC("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new lC("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new lC("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,ti(this.getNamedWeights(n));case 13:if(a=e.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(Wb),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return s.trainingConfig=this.getTrainingConfig(),u="optimizer",e.t0=i,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=u,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:l=e.sent,g=l.data,d=l.specs,(c=a.specs).push.apply(c,(0,_.Z)(d)),a.data=ui([a.data,g]);case 34:return null!=this.userDefinedMetadata&&(!0,bb(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=a.data,s.weightSpecs=a.specs,e.abrupt("return",t.save(s));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){bb(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(Yb);CA.className="Model",hc(CA);var mA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(CA);function vA(e,t){return bA.apply(this,arguments)}function bA(){return bA=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=(t=t).modelTopology).model_config&&(r=r.model_config),a=xb(r),o=Ov(a,n),null==t.weightsManifest){e.next=15;break}return e.next=9,Is(t.weightsManifest,t.pathPrefix,o.weights.map((function(e){return e.originalName})));case 9:i=e.sent,s={},c=(0,P.Z)(o.weights);try{for(c.s();!(u=c.n()).done;)l=u.value,s[l.originalName]=i[l.originalName]}catch($K){c.e($K)}finally{c.f()}o.loadWeights(s),Fc(i);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),bA.apply(this,arguments)}function AA(){return(AA=(0,O.Z)(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(r=bi(t,n)).length){e.next=7;break}r.push(Zs(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new lC("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",yA(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yA(e,t,n){return kA.apply(this,arguments)}function kA(){return kA=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new lC("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(o=a.modelTopology).model_config&&(o=o.model_config),i=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&i,c=Ov(xb(o),n,s),null!=(u=a.trainingConfig)&&c.loadTrainingConfig(u),null!=a.userDefinedMetadata&&c.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new lC("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(l=ZA(a.weightData,a.weightSpecs),g=l.modelWeights,d=l.optimizerWeights,c.loadWeights(g,i),!(null!=c.optimizer&&d.length>0)){e.next=22;break}return e.next=22,c.optimizer.setWeights(d);case 22:Fc(g),Fc(d.map((function(e){return e.tensor})));case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)}))),kA.apply(this,arguments)}function ZA(e,t){var n=ri(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}mA.className="Functional",hc(mA);var SA=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:fv("sequential_"),null!=e.layers){var a,o=(0,P.Z)(e.layers);try{for(o.s();!(a=o.n()).done;){var i=a.value;r.add(i)}}catch($K){o.e($K)}finally{o.f()}}return r}return(0,j.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new lC("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof CA;if(r){if(1!==(t=e).outputs.length)throw new lC("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new lC("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new lC("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=Xv({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new lC("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new lC("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Wv(this.outputs[0])}this.inboundNodes=[],new Gv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pC(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(vv(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new CA({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),_v(to(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),_v(to(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new uC("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new uC("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new uC("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new uC("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new lC("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new lC("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=(0,P.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch($K){n.e($K)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new lC("Legacy serialization format not supported yet.");r=t}else ge(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,o=t;var i=new e(o);if(!(i instanceof n))throw new gC("Sequential.fromConfig called on non-Sequential input: ".concat(i));var s,c=(0,P.Z)(r);try{for(c.s();!(s=c.n()).done;){var u=s.value,l=void 0,g=Ov(u,l,a);a&&g.setFastWeightInitDuringBuild(!0),i.add(g)}}catch($K){c.e($K)}finally{c.f()}return i}}]),n}(CA);function wA(e){return new CA(e)}function BA(e){return new SA(e)}function GA(e,t){return null==t&&(t={}),function(e,t){return AA.apply(this,arguments)}(e,t)}function xA(e){return Xv(e)}function RA(e,t){zv.registerCallbackConstructor(e,t)}SA.className="Sequential",hc(SA);var WA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(dc),VA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return wm(e,t)}}]),n}(WA);VA.className="elu",hc(VA);var NA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return vd(e)}}]),n}(WA);NA.className="selu",hc(NA);var XA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return ld(e)}}]),n}(WA);XA.className="relu",hc(XA);var JA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return Jc((function(){return Jg(6,ld(e))}))}}]),n}(WA);JA.className="relu6",hc(JA);var FA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(WA);FA.className="linear",hc(FA);var EA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return tl(e)}}]),n}(WA);EA.className="sigmoid",hc(EA);var TA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return function(e){return Jc((function(){var t=Oc(.5,Qc(.2,e));return hl(t,0,1)}))}(e)}}]),n}(WA);TA.className="hardSigmoid",hc(TA);var YA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return ug(e)}}]),n}(WA);YA.className="softplus",hc(YA);var HA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return function(e){return Jc((function(){return jc(e,Oc(Iu(e),1))}))}(e)}}]),n}(WA);HA.className="softsign",hc(HA);var MA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return rl(e)}}]),n}(WA);MA.className="tanh",hc(MA);var DA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Rd(e,t)}}]),n}(WA);DA.className="softmax",hc(DA);var KA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return pg(e,t)}}]),n}(WA);KA.className="logSoftmax",hc(KA);var zA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Jc((function(){return Qc(tl(Qc(e,t)),e)}))}}]),n}(WA);zA.className="swish",hc(zA);var LA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e){return Jc((function(){return Qc(e,rl(ug(e)))}))}}]),n}(WA);function PA(e){return e.getClassName()}function _A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kC(e,pc.getMap().classNameMap,t,"activation")}function OA(e){if(null==e){var t={className:"linear",config:{}};return _A(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},_A(n)}return e instanceof WA?e:_A(e)}function UA(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}LA.className="mish",hc(LA);var jA=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(dc),QA=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this),UA(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,j.Z)(n,[{key:"apply",value:function(e){var t=this;return Jc((function(){var n=Wg([1]);return t.hasL1&&(n=Oc(n,dg(Qc(t.l1,Iu(e))))),t.hasL2&&(n=Oc(n,dg(Qc(t.l2,km(e))))),Qu(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(jA);QA.className="L1L2",hc(QA);var qA={l1l2:"L1L2"};function $A(e){return AC(e)}function ey(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kC(e,pc.getMap().classNameMap,t,"regularizer")}function ty(e){return null==e?null:"string"===typeof e?ey({className:e in qA?qA[e]:e,config:{}}):e instanceof jA?e:ey(e)}var ny=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,j.Z)(n,[{key:"call",value:function(e,t){e=mv(e);var n=ld(e);return null!=this.maxValue&&(n=hl(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);ny.className="ReLU",hc(ny);var ry=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,j.Z)(n,[{key:"call",value:function(e,t){var n=mv(e);return tg(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);ry.className="LeakyReLU",hc(ry);var ay=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=jm(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=ty(e.alphaRegularizer),r.alphaConstraint=MC(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new lC("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,j.Z)(n,[{key:"build",value:function(e){var t=(e=vv(e)).slice(1);if(null!=this.sharedAxes){var n,r=(0,P.Z)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch($K){r.e($K)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var o=1;o<e.length;++o)a[o]=e[o];this.inputSpec=[new Sv({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=mv(e),Qg(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Um(this.alphaInitializer),alphaRegularizer:$A(this.alphaRegularizer),alphaConstraint:YC(this.alphaConstraint),sharedAxes:this.sharedAxes},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);ay.className="PReLU",hc(ay);var oy=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new gC("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,j.Z)(n,[{key:"call",value:function(e,t){var n=mv(e);return Hl(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);oy.className="ELU",hc(oy);var iy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,j.Z)(n,[{key:"call",value:function(e,t){var n=mv(e);return Qc(n,is(Ul(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);iy.className="ThresholdedReLU",hc(iy);var sy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new DA).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,j.Z)(n,[{key:"call",value:function(e,t){var n=mv(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);sy.className="Softmax",hc(sy);var cy=n(4942);function uy(e,t,n){if("number"===typeof e)return pC(e,t);if(e.length!==t)throw new lC("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((o=a)!==parseInt(o.toString(),10))throw new lC("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var o}function ly(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var o,i=t+(t-1)*(a-1);return o="same"===n?e:e-i+1,Math.floor((o+r-1)/r)}function gy(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+um([n-t,0]);else{if("same"!==r)throw new lC("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function dy(e,t){return Jc((function(){return qC(t),"channelsFirst"===t?Ws(e,[0,2,3,1]):e}))}function py(e,t){return Jc((function(){return qC(t),"channelsFirst"===t?Ws(e,[0,2,3,4,1]):e}))}function hy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Jc((function(){if(null==o&&(o="channelsLast"),qC(o),3!==e.shape.length)throw new lC("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new lC("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new lC("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=Ws(e,[0,2,1])),"causal"===a)throw new gC("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=bl(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(s=Sm(s,n)),s}))}function fy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Jc((function(){if(null==o&&(o="channelsLast"),qC(o),3!==e.rank&&4!==e.rank)throw new lC("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new lC("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var c=dy(e,o);if("causal"===a)throw new gC("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=Ap({x:c,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(c=Ws(c,[0,3,1,2])),c}))}function Iy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return Jc((function(){if(null==o&&(o="channelsLast"),qC(o),4!==e.rank&&5!==e.rank)throw new lC("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new lC("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=py(e,o);if("causal"===a)throw new gC("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=kl(s,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(s=Sm(s,n)),"channelsFirst"===o&&(s=Ws(s,[0,4,1,2,3])),s}))}var Cy=function(e){eo(n,e);var t=io(n);function n(e,r){var a;if((0,U.Z)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,xC(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new gC("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=uy(r.kernelSize,e,"kernelSize"),a.strides=uy(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,$C(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,qC(a.dataFormat),a.activation=OA(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=jm(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=MC(r.biasConstraint),a.biasRegularizer=ty(r.biasRegularizer),a.activityRegularizer=ty(r.activityRegularizer),a.dilationRate=uy(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new lC("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new lC("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new lC("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,j.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:PA(this.activation),useBias:this.useBias,biasInitializer:Um(this.biasInitializer),biasRegularizer:$A(this.biasRegularizer),activityRegularizer:$A(this.activityRegularizer),biasConstraint:YC(this.biasConstraint)},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(hC("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!GC(e.kernelSize,"number",1,3))throw new lC("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Rv),my=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,xC(a.filters,"filters"),a.kernelInitializer=jm(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=MC(r.kernelConstraint),a.kernelRegularizer=ty(r.kernelRegularizer),a}return(0,j.Z)(n,[{key:"build",value:function(e){e=vv(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new lC("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,cy.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var t;e=mv(e);var r=null==n.bias?null:n.bias.read(),a=WC(n.activation.getClassName());if(null!=a&&2===n.rank)t=fy(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=hy(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=fy(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new gC("convolutions greater than 3D are not implemented yet.");t=Iy(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=vv(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=ly(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var o=[e[0]];return"channelsLast"===this.dataFormat?(o=o.concat(t)).push(this.filters):(o.push(this.filters),o=o.concat(t)),o}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Um(this.kernelInitializer),kernelRegularizer:$A(this.kernelRegularizer),kernelConstraint:YC(this.kernelConstraint)},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new lC("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(Cy),vy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,j.Z)(n,[{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!GC(e.kernelSize,"number",1,2))throw new lC("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(my);vy.className="Conv2D",hc(vy);var by=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,j.Z)(n,[{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new lC("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(my);by.className="Conv3D",hc(by);var Ay=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,e)).inputSpec=[new Sv({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new lC("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,j.Z)(n,[{key:"build",value:function(e){if(4!==(e=vv(e)).length)throw new lC("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new lC("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Sv({ndim:4,axes:(0,cy.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var t=mv(e);if(4!==t.shape.length)throw new lC("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o=t.shape,i=o[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=o[r],c=o[a],u=n.kernelSize[0],l=n.kernelSize[1],g=n.strides[0],d=n.strides[1],p=[i,gy(s,g,u,n.padding),gy(c,d,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ws(t,[0,2,3,1]));var h=yl(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(h=Ws(h,[0,3,1,2])),null!=n.bias&&(h=Sm(h,n.bias.read(),n.dataFormat)),null!=n.activation&&(h=n.activation.apply(h)),h}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=vv(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var o=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],c=this.strides[1];return a[t]=this.filters,a[n]=gy(a[n],s,o,this.padding),a[r]=gy(a[r],c,i,this.padding),a}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(vy);Ay.className="Conv2DTranspose",hc(Ay);var yy=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,e)).inputSpec=[new Sv({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new lC("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,j.Z)(n,[{key:"build",value:function(e){if(5!==(e=vv(e)).length)throw new lC("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new lC("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Sv({ndim:5,axes:(0,cy.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var t=mv(e);if(5!==t.shape.length)throw new lC("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o,i=t.shape,s=i[0];"channelsFirst"===n.dataFormat?(o=2,r=3,a=4):(o=1,r=2,a=3);var c=i[o],u=i[r],l=i[a],g=n.kernelSize[0],d=n.kernelSize[1],p=n.kernelSize[2],h=n.strides[0],f=n.strides[1],I=n.strides[2],C=[s,gy(c,h,g,n.padding),gy(u,f,d,n.padding),gy(l,I,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ws(t,[0,2,3,4,1]));var m=Sl(t,n.kernel.read(),C,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(m=Ws(m,[0,4,1,2,3])),null!==n.bias&&(m=Sm(m,n.bias.read(),n.dataFormat)),null!==n.activation&&(m=n.activation.apply(m)),m}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,o=(e=vv(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var i=this.kernelSize[0],s=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],l=this.strides[1],g=this.strides[2];return o[t]=this.filters,o[n]=gy(o[n],u,i,this.padding),o[r]=gy(o[r],l,s,this.padding),o[a]=gy(o[a],g,c,this.padding),o}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(by);yy.className="Conv3DTranspose",hc(yy);var ky=function(e){eo(n,e);var t=io(n);function n(e,r){var a;if((0,U.Z)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new lC("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new lC("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new lC("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=jm(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=ty(r.depthwiseRegularizer),a.depthwiseConstraint=MC(r.depthwiseConstraint),a.pointwiseInitializer=jm(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=ty(r.pointwiseRegularizer),a.pointwiseConstraint=MC(r.pointwiseConstraint),a}return(0,j.Z)(n,[{key:"build",value:function(e){if((e=vv(e)).length<this.rank+2)throw new lC("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new lC("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(n*this.depthMultiplier,this.filters);var i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Sv({ndim:this.rank+2,axes:(0,cy.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var t;if(e=mv(e),1===n.rank)throw new gC("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=Ws(e,[0,2,3,1])),t=bd(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Sm(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=Ws(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Um(this.depthwiseInitializer),e.pointwiseInitializer=Um(this.pointwiseInitializer),e.depthwiseRegularizer=$A(this.depthwiseRegularizer),e.pointwiseRegularizer=$A(this.pointwiseRegularizer),e.depthwiseConstraint=YC(this.depthwiseConstraint),e.pointwiseConstraint=YC(this.pointwiseConstraint),e}}]),n}(my);ky.className="SeparableConv";var Zy=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,2,e)}return(0,j.Z)(n)}(ky);Zy.className="SeparableConv2D",hc(Zy);var Sy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,j.Z)(n,[{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!GC(e.kernelSize,"number",1,1))throw new lC("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(my);Sy.className="Conv1D",hc(Sy);var wy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Jc((function(){if(e=mv(e),"channelsLast"===n.dataFormat){var t=Im(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Im(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Im(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Im(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);wy.className="Cropping2D",hc(wy);var By=function(e){eo(n,e);var t=io(n);function n(e){var r,a;return(0,U.Z)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qC(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,BC(_C,"InterpolationFormat",a),r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var t=mv(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=Ws(t,[0,2,3,1]);var a=n.size[0]*r[2],o=n.size[1]*r[3],i="nearest"===n.interpolation?Xh.resizeNearestNeighbor(t,[a,o]):Xh.resizeBilinear(t,[a,o]);return Ws(i,[0,3,1,2])}var s=n.size[0]*r[1],c=n.size[1]*r[2];return"nearest"===n.interpolation?Xh.resizeNearestNeighbor(t,[s,c]):Xh.resizeBilinear(t,[s,c])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);By.className="UpSampling2D",hc(By);var Gy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=jm(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=MC(e.depthwiseConstraint),r.depthwiseRegularizer=ty(e.depthwiseRegularizer),r}return(0,j.Z)(n,[{key:"build",value:function(e){if((e=vv(e)).length<4)throw new lC("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new lC("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return Jc((function(){null==a&&(a="channelsLast"),qC(a);var i=dy(e,a);if(4!==e.rank)throw new lC("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new lC("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=Vl(i,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===a&&(i=Ws(i,[0,3,1,2])),i}))}(e=mv(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Sm(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=vv(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=ly(t,this.kernelSize[0],this.padding,this.strides[0]),o=ly(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,o]:[e[0],a,o,r]}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Um(this.depthwiseInitializer),e.depthwiseRegularizer=$A(this.depthwiseRegularizer),e.depthwiseConstraint=YC(this.depthwiseRegularizer),e}}]),n}(Cy);function xy(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new lC("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function Ry(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Jc((function(){var c=t.shape.length;if(c<3)throw new lC("Input should be at least 3D, but is ".concat(c,"D."));var u=[1,0].concat(lm(2,c));if(t=Ws(t,u),null!=o)throw new gC("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=is(is(a,"bool"),"float32")).rank===c-1&&(a=Kl(a,-1)),a=Ws(a,u)),r&&(t=dd(t,0),null!=a&&(a=dd(a,0)));var l,g,d=[],p=n,h=t.shape[0],f=Qd(t);null!=a&&(g=Qd(a));for(var I,C=function(t){var n=f[t],r=Jc((function(){return e(n,p)}));if(null==a)l=r[0],p=r[1];else{var o=Jc((function(){var e=g[t],n=hu(Dg(e),e);return{output:Oc(Qc(r[0],e),Qc(p[0],n)),newStates:p.map((function(t,a){return Oc(Qc(r[1][a],e),Qc(t,n))}))}}));l=o.output,p=o.newStates}s&&d.push(l)},m=0;m<h;++m)C(m);if(s){I=Td(d,1)}return[l,I,p]}))}Gy.className="DepthwiseConv2D",hc(Gy);var Wy=function(e){eo(n,e);var t=io(n);function n(e){var r,a;if((0,U.Z)(this,n),r=t.call(this,e),null==e.cell)throw new lC("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new Yy({cells:e.cell}):e.cell).stateSize)throw new lC("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Sv({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,j.Z)(n,[{key:"getStates",value:function(){return null==this.states_?lm(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Iv(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,o=[],i=(0,P.Z)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push([e[0],s])}}catch($K){i.e($K)}finally{i.f()}return[n].concat(o)}return n}},{key:"computeMask",value:function(e,t){var n=this;return Jc((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new gC("Constants support is not implemented in RNN yet.");Iv(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Sv({shape:[t,null].concat((0,_.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Ce(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new lC("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new Sv({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jc((function(){if(!t.stateful)throw new cC("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new lC("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Wg([r,e])})):t.states_=[Wg([r,t.cell.stateSize])];else if(null==e)Fc(t.states_),null!=t.keptStates&&(Fc(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Wg([r,e])})):t.states_[0]=Wg([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new lC("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):Fc(t.states_);for(var a=0;a<t.states_.length;++a){var o=e[a],i=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,i];if(!Ce(o.shape,s))throw new lC("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(o.shape));t.states_[a]=o}}t.states_=t.states_.map((function(e){return Ec(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=xy(e,r,a,this.numConstants);e=o.inputs,r=o.initialState,a=o.constants;var i=[],s=[];if(null!=r){t.initialState=r,i=i.concat(r),this.stateSpec=[];var c,u=(0,P.Z)(r);try{for(u.s();!(c=u.n()).done;){var l=c.value;this.stateSpec.push(new Sv({shape:l.shape}))}}catch($K){u.e($K)}finally{u.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,i=i.concat(a),this.numConstants=a.length),i[0]instanceof wv){var g=[e].concat(i),d=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=d;var h=_v(to(n.prototype),"apply",this).call(this,g,t);return this.inputSpec=p,h}return _v(to(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,o=null==t?null:t.initialState;e=mv(e),null==o&&(o=n.stateful?n.states_:n.getInitialState(e));var i=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(o.length!==i)throw new lC("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(o.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},c=Ry((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,o,n.goBackwards,r,null,n.unroll,n.returnSequences),u=c[0],l=c[1],g=c[2];n.stateful&&n.resetStates(g,a);var d=n.returnSequences?l:u;return n.returnState?[d].concat(g):d}))}},{key:"getInitialState",value:function(e){var t=this;return Jc((function(){var n=Wg(e.shape);return n=dm(n=dg(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?vm(n,[1,e]):n})):t.cell.stateSize>1?[vm(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){_v(to(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=Ov(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(Rv);Wy.className="RNN",hc(Wy);var Vy=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(Rv),Ny=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,xC(r.units,"units"),r.activation=OA(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=jm(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=jm(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=jm(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=ty(e.kernelRegularizer),r.recurrentRegularizer=ty(e.recurrentRegularizer),r.biasRegularizer=ty(e.biasRegularizer),r.kernelConstraint=MC(e.kernelConstraint),r.recurrentConstraint=MC(e.recurrentConstraint),r.biasConstraint=MC(e.biasConstraint),r.dropout=cm([1,um([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=cm([1,um([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,j.Z)(n,[{key:"build",value:function(e){e=vv(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){if(2!==(e=e).length)throw new lC("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Hy({ones:function(){return Dg(e)},rate:n.dropout,training:o,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Hy({ones:function(){return Dg(r)},rate:n.recurrentDropout,training:o,dropoutFunc:n.dropoutFunc}));var i=n.dropoutMask,s=n.recurrentDropoutMask;a=Am(null!=i?Qc(e,i):e,n.kernel.read()),null!=n.bias&&(a=Sm(a,n.bias.read())),null!=s&&(r=Qc(r,s));var c=Oc(a,Am(r,n.recurrentKernel.read()));return null!=n.activation&&(c=n.activation.apply(c)),[c,c]}))}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:PA(this.activation),useBias:this.useBias,kernelInitializer:Um(this.kernelInitializer),recurrentInitializer:Um(this.recurrentInitializer),biasInitializer:Um(this.biasInitializer),kernelRegularizer:$A(this.kernelRegularizer),recurrentRegularizer:$A(this.recurrentRegularizer),biasRegularizer:$A(this.biasRegularizer),activityRegularizer:$A(this.activityRegularizer),kernelConstraint:YC(this.kernelConstraint),recurrentConstraint:YC(this.recurrentConstraint),biasConstraint:YC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(Vy);Ny.className="SimpleRNNCell",hc(Ny);var Xy=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),e.cell=new Ny(e),t.call(this,e)}return(0,j.Z)(n,[{key:"call",value:function(e,t){var r=this;return Jc((function(){null!=r.cell.dropoutMask&&(Fc(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Fc(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return _v(to(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Wy);Xy.className="SimpleRNN",hc(Xy);var Jy=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new lC("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,xC(r.units,"units"),r.activation=OA(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=OA(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=jm(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=jm(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=jm(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=ty(e.kernelRegularizer),r.recurrentRegularizer=ty(e.recurrentRegularizer),r.biasRegularizer=ty(e.biasRegularizer),r.kernelConstraint=MC(e.kernelConstraint),r.recurrentConstraint=MC(e.recurrentConstraint),r.biasConstraint=MC(e.biasConstraint),r.dropout=cm([1,um([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=cm([1,um([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,j.Z)(n,[{key:"build",value:function(e){var t=(e=vv(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){if(2!==(e=e).length)throw new lC("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Hy({ones:function(){return Dg(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Hy({ones:function(){return Dg(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var o,i,s,c=n.dropoutMask,u=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Qc(e,c[0]));var l=Am(e,n.kernel.read());n.useBias&&(l=Sm(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Qc(a,u[0]));var g=n.recurrentKernel.read(),d=Xd(g,[2*n.units,n.units],g.rank-1),p=(0,ne.Z)(d,2),h=p[0],f=p[1],I=Am(a,h),C=Xd(l,3,l.rank-1),m=(0,ne.Z)(C,3),v=m[0],b=m[1],A=m[2],y=Xd(I,2,I.rank-1),k=(0,ne.Z)(y,2),Z=k[0],S=k[1];o=n.recurrentActivation.apply(Oc(v,Z)),i=n.recurrentActivation.apply(Oc(b,S));var w=Am(Qc(i,a),f);s=n.activation.apply(Oc(A,w));var B=Oc(Qc(o,a),Qc(Oc(1,cg(o)),s));return[B,B]}))}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:PA(this.activation),recurrentActivation:PA(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Um(this.kernelInitializer),recurrentInitializer:Um(this.recurrentInitializer),biasInitializer:Um(this.biasInitializer),kernelRegularizer:$A(this.kernelRegularizer),recurrentRegularizer:$A(this.recurrentRegularizer),biasRegularizer:$A(this.biasRegularizer),activityRegularizer:$A(this.activityRegularizer),kernelConstraint:YC(this.kernelConstraint),recurrentConstraint:YC(this.recurrentConstraint),biasConstraint:YC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(Vy);Jy.className="GRUCell",hc(Jy);var Fy=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Jy(e),t.call(this,e)}return(0,j.Z)(n,[{key:"call",value:function(e,t){var r=this;return Jc((function(){null!=r.cell.dropoutMask&&(Fc(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Fc(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return _v(to(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Wy);Fy.className="GRU",hc(Fy);var Ey=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,xC(r.units,"units"),r.activation=OA(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=OA(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=jm(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=jm(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=jm(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=ty(e.kernelRegularizer),r.recurrentRegularizer=ty(e.recurrentRegularizer),r.biasRegularizer=ty(e.biasRegularizer),r.kernelConstraint=MC(e.kernelConstraint),r.recurrentConstraint=MC(e.recurrentConstraint),r.biasConstraint=MC(e.biasConstraint),r.dropout=cm([1,um([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=cm([1,um([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,j.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=vv(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,o=this.units;n=new(t=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([o]),r=(new Nm).apply([o]),i=a.apply([2*o]);return mm(mm(n,r),i)}}]),n}(Wm),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new lC("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],o=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Hy({ones:function(){return Dg(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Hy({ones:function(){return Dg(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var i,s,c,u,l=n.dropoutMask,g=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Qc(e,l[0]));var d=Am(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Qc(a,g[0])),d=Oc(d,Am(a,n.recurrentKernel.read())),n.useBias&&(d=Sm(d,n.bias.read()));var p=Xd(d,4,d.rank-1),h=(0,ne.Z)(p,4),f=h[0],I=h[1],C=h[2],m=h[3];i=n.recurrentActivation.apply(f),s=n.recurrentActivation.apply(I),c=Oc(Qc(s,o),Qc(i,n.activation.apply(C))),u=n.recurrentActivation.apply(m);var v=Qc(u,n.activation.apply(c));return[v,v,c]}))}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:PA(this.activation),recurrentActivation:PA(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Um(this.kernelInitializer),recurrentInitializer:Um(this.recurrentInitializer),biasInitializer:Um(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$A(this.kernelRegularizer),recurrentRegularizer:$A(this.recurrentRegularizer),biasRegularizer:$A(this.biasRegularizer),activityRegularizer:$A(this.activityRegularizer),kernelConstraint:YC(this.kernelConstraint),recurrentConstraint:YC(this.recurrentConstraint),biasConstraint:YC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(Vy);Ey.className="LSTMCell",hc(Ey);var Ty=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Ey(e),t.call(this,e)}return(0,j.Z)(n,[{key:"call",value:function(e,t){var r=this;return Jc((function(){null!=r.cell.dropoutMask&&(Fc(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Fc(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return _v(to(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Wy);Ty.className="LSTM",hc(Ty);var Yy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,j.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=(0,P.Z)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,_.Z)(r.stateSize)):t.push(r.stateSize)}}catch($K){n.e($K)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var r,a=(e=e).slice(1),o=[],i=(0,P.Z)(n.cells.slice().reverse());try{for(i.s();!(r=i.n()).done;){var s=r.value;Array.isArray(s.stateSize)?o.push(a.splice(0,s.stateSize.length)):o.push(a.splice(0,1))}}catch($K){i.e($K)}finally{i.f()}o.reverse();for(var c,u=[],l=0;l<n.cells.length;++l){var g=n.cells[l];a=o[l],c=0===l?[e[0]].concat(a):[c[0]].concat(a),c=g.call(c,t),u.push(c.slice(1))}a=[];var d,p=(0,P.Z)(u.slice().reverse());try{for(p.s();!(d=p.n()).done;){var h,f=d.value;(h=a).push.apply(h,(0,_.Z)(f))}}catch($K){p.e($K)}finally{p.f()}return[c[0]].concat(a)}))}},{key:"build",value:function(e){var t;Iv(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){nm("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=(0,P.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.trainableWeights))}}catch($K){n.e($K)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,P.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.nonTrainableWeights))}}catch($K){n.e($K)}finally{n.f()}if(!this.trainable){var a,o=[],i=(0,P.Z)(this.cells);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push.apply(o,(0,_.Z)(s.trainableWeights))}}catch($K){i.e($K)}finally{i.f()}return o.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=(0,P.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.weights))}}catch($K){n.e($K)}finally{n.f()}return kv(t)}},{key:"setWeights",value:function(e){var t,n=[],r=(0,P.Z)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,o=a.weights.length,i=e.splice(o),s=0;s<a.weights.length;++s)n.push([a.weights[s],i[s]])}catch($K){r.e($K)}finally{r.f()}Zv(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=(0,P.Z)(t.cells);try{for(o.s();!(n=o.n()).done;){var i=n.value;a.push(Ov(i,r))}}catch($K){o.e($K)}finally{o.f()}return new e({cells:a})}}]),n}(Vy);function Hy(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,o=e.count,i=void 0===o?1:o,s=e.dropoutFunc,c=function(){return null!=s?s(t(),n):Bm(t(),n)},u=function(){return Gm(c,t,a)};return!i||i<=1?Ec(u().clone()):Array(i).fill(void 0).map(u).map((function(e){return Ec(e.clone())}))}Yy.className="StackedRNNCells",hc(Yy);var My=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Dy=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),e.unroll)throw new gC("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new gC("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new Sv({ndim:5})],r}return(0,j.Z)(n,[{key:"call",value:function(e,t){var r=this;return Jc((function(){if(null!=r.cell.dropoutMask&&(Fc(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Fc(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new lC("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return _v(to(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,_.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,_.Z)(Array(2).fill([e[0]].concat((0,_.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return Jc((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),o=Wg([a[0]].concat((0,_.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(o):[o]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jc((function(){if(!t.stateful)throw new cC("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),o=[a[0]].concat((0,_.Z)(a.slice(2)));if(null==r[0])throw new lC("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Wg(o)})):t.states_=[Wg(o)];else if(null==e)Fc(t.states_),null!=t.keptStates&&(Fc(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Wg(o)})):t.states_[0]=Wg(o);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new lC("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):Fc(t.states_);for(var i=0;i<t.states_.length;++i){var s=e[i],c=o;if(!Ce(s.shape,c))throw new lC("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(c,", received shape=").concat(s.shape));t.states_[i]=s}}t.states_=t.states_.map((function(e){return Ec(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,o=t.padding,i=t.strides,s=t.dilationRate,c="channelsFirst"===n,u=e[c?3:2],l=e[c?4:3],g=ly(u,a[0],o,i[0],s[0]),d=ly(l,a[1],o,i[1],s[1]);return[].concat((0,_.Z)(e.slice(0,2)),(0,_.Z)(c?[r,g,d]:[g,d,r]))}}]),n}(Wy);Dy.className="ConvRNN2D";var Ky=function(e){eo(n,e);var t=io(n);function n(e){var r;(0,U.Z)(this,n);var a=e.filters,o=e.kernelSize,i=e.strides,s=e.padding,c=e.dataFormat,u=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,xC(r.filters,"filters"),r.kernelSize=uy(o,2,"kernelSize"),r.kernelSize.forEach((function(e){return xC(e,"kernelSize")})),r.strides=uy(i||1,2,"strides"),r.strides.forEach((function(e){return xC(e,"strides")})),r.padding=s||"valid",$C(r.padding),r.dataFormat=c||"channelsLast",qC(r.dataFormat),r.dilationRate=uy(u||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return xC(e,"dilationRate")})),r}return(0,j.Z)(n,[{key:"build",value:function(e){var t;e=vv(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new lC("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var i;if(this.unitForgetBias){var s=this.biasInitializer,c=this.filters;i=new(t=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"apply",value:function(e,t){return Cm([s.apply([c]),Vg([c]),s.apply([2*c])])}}]),n}(Wm),t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,i,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){if(3!==e.length)throw new lC("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],o=e[1],i=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Hy({ones:function(){return Dg(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,c=function(e,t,n){return t&&t[n]?Qc(t[n],e):e},u=c(a,s,0),l=c(a,s,1),g=c(a,s,2),d=c(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Hy({ones:function(){return Dg(o)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var p=n.recurrentDropoutMask,h=c(o,p,0),f=c(o,p,1),I=c(o,p,2),C=c(o,p,3),m=Xd(n.kernel.read(),4,3),v=(0,ne.Z)(m,4),b=v[0],A=v[1],y=v[2],k=v[3],Z=n.useBias?Xd(n.bias.read(),4):[null,null,null,null],S=(0,ne.Z)(Z,4),w=S[0],B=S[1],G=S[2],x=S[3];u=n.inputConv(u,b,w,n.padding),l=n.inputConv(l,A,B,n.padding),g=n.inputConv(g,y,G,n.padding),d=n.inputConv(d,k,x,n.padding);var R=Xd(n.recurrentKernel.read(),4,3),W=(0,ne.Z)(R,4),V=W[0],N=W[1],X=W[2],J=W[3];h=n.recurrentConv(h,V),f=n.recurrentConv(f,N),I=n.recurrentConv(I,X),C=n.recurrentConv(C,J);var F=n.recurrentActivation.apply(Oc(u,h)),E=n.recurrentActivation.apply(Oc(l,f)),T=Oc(Qc(E,i),Qc(F,n.activation.apply(Oc(g,I)))),Y=Qc(n.recurrentActivation.apply(Oc(d,C)),n.activation.apply(T));return[Y,Y,T]}))}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t=(e.units,My(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=vl(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Sm(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return vl(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(Ey);Ky.className="ConvLSTM2DCell",hc(Ky);var zy=function(e){eo(n,e);var t=io(n);function n(e){(0,U.Z)(this,n);var r=new Ky(e);return t.call(this,Object.assign({},e,{cell:r}))}return(0,j.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Dy);zy.className="ConvLSTM2D",hc(zy);var Ly=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,j.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,o=n.getNoiseShape(r);return Gm((function(){return Bm(r,n.rate,o,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return _v(to(n.prototype),"dispose",this).call(this)}}]),n}(Rv);Ly.className="Dropout",hc(Ly);var Py=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,j.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Ly);Py.className="SpatialDropout1D",hc(Py);var _y=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,xC(r.units,"units"),r.activation=OA(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=jm(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=jm(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=MC(e.kernelConstraint),r.biasConstraint=MC(e.biasConstraint),r.kernelRegularizer=ty(e.kernelRegularizer),r.biasRegularizer=ty(e.biasRegularizer),r.activityRegularizer=ty(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,j.Z)(n,[{key:"build",value:function(e){var t=(e=vv(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,cy.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=vv(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r,a=mv(e),o=WC(n.activation.getClassName());return null!=o?r=Am(a,n.kernel.read(),o,n.bias?n.bias.read():null):(r=Am(a,n.kernel.read()),null!=n.bias&&(r=Sm(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:PA(this.activation),useBias:this.useBias,kernelInitializer:Um(this.kernelInitializer),biasInitializer:Um(this.biasInitializer),kernelRegularizer:$A(this.kernelRegularizer),biasRegularizer:$A(this.biasRegularizer),activityRegularizer:$A(this.activityRegularizer),kernelConstraint:YC(this.kernelConstraint),biasConstraint:YC(this.biasConstraint)},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);_y.className="Dense",hc(_y);var Oy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){e=vv(e);var t,n=(0,P.Z)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new lC('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch($K){n.e($K)}finally{n.f()}return[e[0],sm(e,1)]}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],o=2;o<r.rank;++o)a.push(o);a.push(1),r=Ws(r,a)}return function(e){if(e.rank<=1)throw new lC("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],sm(e.shape,1)];return Qu(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);Oy.className="Flatten",hc(Oy);var Uy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=OA(e.activation),r}return(0,j.Z)(n,[{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:PA(this.activation)},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);Uy.className="Activation",hc(Uy);var jy=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Jc((function(){return e=mv(e),t=e,r=n.n,Jc((function(){if(2!==t.shape.length)throw new lC("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return vm(dm(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);jy.className="RepeatVector",hc(jy);var Qy=function(e){eo(n,e);var t=io(n);function n(e){var r;(0,U.Z)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,j.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,o=null,i=0;i<r.length;++i){var s=r[i];if(this.isUnknown(s)){if(null!==o)throw new lC("Can only specifiy one unknown dimension.");o=i}else a*=s}var c=sm(e);if(null!==o){if(0===a||c%a!==0)throw new lC(n);r[o]=c/a}else if(c!==a)throw new lC(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e),a=r.shape,o=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Qu(r,o)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);Qy.className="Reshape",hc(Qy);var qy=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=lm(1,e.dims.length+1);if(!Ce(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Sv({ndim:r.dims.length+1})],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=vv(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return Ws(mv(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);qy.className="Permute",hc(qy);var $y=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=mv(e);return Bu(Mg(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e),a=Bu(Mg(r,n.maskValue),-1,!0);return Qc(r,is(a,r.dtype))}))}}]),n}(Rv);$y.className="Masking",hc($y);var ek=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(CC(e.inputLength))}return r.inputDim=e.inputDim,xC(r.inputDim,"inputDim"),r.outputDim=e.outputDim,xC(r.outputDim,"outputDim"),r.embeddingsInitializer=jm(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=ty(e.embeddingsRegularizer),r.activityRegularizer=ty(e.activityRegularizer),r.embeddingsConstraint=MC(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,j.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Jc((function(){return n.maskZero?(e=mv(e),Mg(e,eu(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=vv(e),null==this.inputLength)return[].concat((0,_.Z)(e),[this.outputDim]);var t=CC(this.inputLength);if(t.length!==e.length-1)throw new lC('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],o=e[r+1];if(null!=a&&null!=o&&a!==o)throw new lC('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=o),n++}return[e[0]].concat((0,_.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e);"int32"!==r.dtype&&(r=gm(r,"int32"));var a=ym(n.embeddings.read(),Qu(r,[r.size]));return Qu(a,vv(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Um(this.embeddingsInitializer),embeddingsRegularizer:$A(this.embeddingsRegularizer),activityRegularizer:$A(this.activityRegularizer),embeddingsConstraint:YC(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);ek.className="Embedding",hc(ek);var tk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,j.Z)(n,[{key:"mergeFunction",value:function(e){throw new gC}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],o=t[r];if(null==a||null==o||a<0||o<0)n.push(null);else if(1===a)n.push(o);else if(1===o)n.push(a);else{if(a!==o)throw new lC("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[vv(e)]),(e=e).length<2)throw new lC("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=(0,P.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch($K){r.e($K)}finally{r.f()}if((n=SC(n)).length>1)throw new lC("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var o=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var s=null==e[i]?null:e[i].slice(1);o=this.computeElementwiseOpOutputShape(o,s)}var c=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===SC(c).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,o=um(r),i=(0,P.Z)(e);try{for(i.s();!(a=i.n()).done;){for(var s=a.value,c=s.rank,u=0;u<o-c;++u)s=dm(s,1);t.push(s)}}catch($K){i.e($K)}finally{i.f()}return n.mergeFunction(t)}var l,g=!1,d=(0,P.Z)(e);try{for(d.s();!(l=d.n()).done;){var p=l.value,h=p.rank;if(null==h){var f=p.shape,I=f[0],C=f.slice(1).concat([I]),m=Qu(p,[I].concat(sm(f.slice(1))));m=Ws(m,[1,0]),m=Qu(m,C),t.push(m),g=!0}else if(h>1){var v=lm(1,h).concat([0]);t.push(Ws(p,v)),g=!0}else t.push(p)}}catch($K){d.e($K)}finally{d.f()}var b=n.mergeFunction(t),A=b.rank;if(g)if(null==A){var y=b.shape,k=y[y.length-1],Z=[k].concat(y.slice(0,y.length-1));b=Qu(Ws(Qu(b,[-1,k]),[1,0]),Z)}else if(A>1){var S=[A-1].concat(lm(0,A-1));b=Ws(b,S)}return b}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,o=[],i=(0,P.Z)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;null!=s&&null!==s[0]&&o.push(s[0])}}catch($K){i.e($K)}finally{i.f()}return t=1===(o=SC(o)).length?o.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return Jc((function(){if(null==t)return null;if(!Array.isArray(t))throw new lC("`mask` should be an Array");if(!Array.isArray(e))throw new lC("`inputs` should be an Array");if(t.length!==e.length)throw new lC("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Kl(e,0)})))[0],r=1;r<t.length-1;++r)n=kg(n,t[r]);return n}))}}]),n}(Rv),nk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"mergeFunction",value:function(e){return Jc((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Oc(t,e[n]);return t}))}}]),n}(tk);nk.className="Add",hc(nk);var rk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"mergeFunction",value:function(e){return Jc((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Qc(t,e[n]);return t}))}}]),n}(tk);rk.className="Multiply",hc(rk);var ak=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"mergeFunction",value:function(e){return Jc((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Oc(t,e[n]);return Qc(1/e.length,t)}))}}]),n}(tk);ak.className="Average",hc(ak);var ok=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"mergeFunction",value:function(e){return Jc((function(){for(var t=e[0],n=1;n<e.length;++n)t=Cu(t,e[n]);return t}))}}]),n}(tk);ok.className="Maximum",hc(ok);var ik=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"mergeFunction",value:function(e){return Jc((function(){for(var t=e[0],n=1;n<e.length;++n)t=Jg(t,e[n]);return t}))}}]),n}(tk);ik.className="Minimum",hc(ik);var sk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,j.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new lC("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;var t,n=!0,r=(0,P.Z)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch($K){r.e($K)}finally{r.f()}if(!n){for(var a=[],o=0;o<e.length;++o){var i=e[o].slice();i.splice(this.axis,1);var s,c=!1,u=(0,P.Z)(a);try{for(u.s();!(s=u.n()).done;){if(Ce(s.value,i)){c=!0;break}}}catch($K){u.e($K)}finally{u.f()}c||a.push(i)}if(a.length>1)throw new lC("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Jc((function(){return Cm(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new lC("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,o=(0,P.Z)(n.slice(1));try{for(o.s();!(t=o.n()).done;){var i=t.value;if(null==r[a]||null==i[a]){r[a]=null;break}r[a]+=i[a]}}catch($K){o.e($K)}finally{o.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new lC("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new lC("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new lC("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return Jc((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],o=0;o<e.length;++o)null==t[o]?a.push(is(Dg(e[o]),"bool")):t[o].rank<e[o].rank?a.push(Kl(t[o],-1)):a.push(t[o]);var i=el(a,n.axis);return wu(i,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(tk);function ck(e,t){for(;e<0;)e+=t;return e}sk.className="Concatenate",hc(sk);var uk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,j.Z)(n,[{key:"build",value:function(e){ge(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new gC("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new lC("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new lC("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return ck(t,e[n].shape.length)})):[ck(this.axes,n.shape.length),ck(this.axes,r.shape.length)],this.normalize&&(n=Uv(n,t[0]),r=Uv(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new gC("batchDot is not implemented for tensors of 4D or higher rank yet");if(ge(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),ge(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new gC("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var o=n;return Jc((function(){var n,i;if(r>a){n=r-a;for(var s=[],c=0;c<n;++c)s.push(1);t=Qu(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var u=[],l=0;l<n;++l)u.push(1);e=Qu(e,e.shape.concat(u))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=o[0]===o[1]?dg(Qc(e,t),o[0]):dg(Qc(Ws(e,[1,0]),t),o[1]);else{var g=o[0]!==e.shape.length-1,d=o[1]===t.shape.length-1;i=xs(e,t,g,d)}if(n>0){for(var p,h=[],f=p=r>a?r+a-3:r-1;f<p+n;++f)h.push(f);i=Ed(i,h)}return 1===i.shape.length&&(i=Kl(i,1)),i}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[ck(this.axes,e.length),ck(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){ge(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new gC("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(tk);uk.className="Dot",hc(uk);var lk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e);return Gm((function(){return Oc(bm(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(Rv);lk.className="GaussianNoise",hc(lk);var gk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t);var r=mv(e);if(n.rate>0&&n.rate<1){return Gm((function(){var e=Math.sqrt(n.rate/(1-n.rate));return Qc(r,bm(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(Rv);gk.className="GaussianDropout",hc(gk);var dk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,j.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||mv(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_v(to(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Jc((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return Gm((function(){var t=mv(e),a=-1.7580993408473766,o=jl(id(r),n.rate);o=gm(o,"float32");var i=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-i*a*n.rate,c=Oc(Qc(t,o),Qc(Oc(o,-1),a));return Oc(Qc(c,i),s)}),(function(){return mv(e)}),t.training||!1)}return e}))}}]),n}(Rv);function pk(e,t,n,r,a){var o,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=sl(e,t,n,r,a,i);else if(3===e.rank)o=cl(e,t,n,r,a,i);else{if(4!==e.rank)throw new gC("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=ul(e,t,n,r,a,i)}return o}function hk(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Jc((function(){var o=Tg(e,r),i=o.mean,s=o.variance;return[pk(e,i,s,n,t,a),i,s]}))}function fk(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Jc((function(){var o,i=Tg(e,r),s=i.mean,c=i.variance,u=[],l=(0,P.Z)(lm(0,e.rank));try{for(l.s();!(o=l.n()).done;){var g=o.value;-1!==r.indexOf(g)?u.push(1):u.push(e.shape[g])}}catch($K){l.e($K)}finally{l.f()}var d=Qu(s,u),p=Qu(c,u),h=null==t?null:Qu(t,u),f=null==n?null:Qu(n,u);return[pk(e,d,p,f,h,a),s,c]}))}dk.className="AlphaDropout",hc(dk);var Ik=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=jm(e.betaInitializer||"zeros"),r.gammaInitializer=jm(e.gammaInitializer||"ones"),r.movingMeanInitializer=jm(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=jm(e.movingVarianceInitializer||"ones"),r.betaConstraint=MC(e.betaConstraint),r.gammaConstraint=MC(e.gammaConstraint),r.betaRegularizer=ty(e.betaRegularizer),r.gammaRegularizer=ty(e.gammaRegularizer),r}return(0,j.Z)(n,[{key:"build",value:function(e){e=vv(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new lC("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new Sv({ndim:e.length,axes:(0,cy.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var r=null!=t.training&&t.training,a=mv(e),o=a.shape,i=o.length,s=lm(0,i),c=n.axis>=0?n.axis:n.axis+i;s.splice(c,1);var u=pC(1,i);u[c]=o[c];var l=s.slice();l.sort();var g=!Ce(l,lm(0,i).slice(0,i-1));if(!r)return function(){if(g){var e=Qu(n.movingMean.read(),u),t=Qu(n.movingVariance.read(),u),r=n.center?Qu(n.beta.read(),u):null,o=n.scale?Qu(n.gamma.read(),u):null;return pk(a,e,t,r,o,n.epsilon)}return pk(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Ce(r.slice().sort(),lm(0,e.rank-1))?hk(e,t,n,r,a):fk(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),p=(0,ne.Z)(d,3),h=p[0],f=p[1],I=p[2],C=function(e,t,n){Jc((function(){var r=1-n,a=e.read(),o=Qc(hu(a,t),r);e.write(hu(a,o))}))};return C(n.movingMean,f,n.momentum),C(n.movingVariance,I,n.momentum),h}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Um(this.betaInitializer),gammaInitializer:Um(this.gammaInitializer),movingMeanInitializer:Um(this.movingMeanInitializer),movingVarianceInitializer:Um(this.movingVarianceInitializer),betaRegularizer:$A(this.betaRegularizer),gammaRegularizer:$A(this.gammaRegularizer),betaConstraint:YC(this.betaConstraint),gammaConstraint:YC(this.gammaConstraint)},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);Ik.className="BatchNormalization",hc(Ik);var Ck=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,o=(0,P.Z)(r.axis);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch($K){o.e($K)}finally{o.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=jm(e.betaInitializer||"zeros"),r.gammaInitializer=jm(e.gammaInitializer||"ones"),r.betaRegularizer=ty(e.betaRegularizer),r.gammaRegularizer=ty(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,j.Z)(n,[{key:"build",value:function(e){var t=(e=vv(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=(0,P.Z)(this.axis);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o<0||o>=t)throw new Error("Invalid axis: ".concat(o))}}catch($K){a.e($K)}finally{a.f()}if(this.axis.length!==SC(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var i=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=mv(e),a=r.shape,o=a.length;return Jc((function(){var e,t=Tg(r,n.axis,!0),i=t.mean,s=t.variance,c=pC(1,o),u=(0,P.Z)(n.axis);try{for(u.s();!(e=u.n()).done;){var l=e.value;c[l]=a[l]}}catch($K){u.e($K)}finally{u.f()}for(var g=function(e){return null!=e&&e.shape.length!==o?Qu(e,c):e},d=g(n.gamma.read()),p=g(n.beta.read()),h=[],f=[],I=0;I<o;++I)-1!==n.axis.indexOf(I)?(h.push(a[I]),f.push(1)):(h.push(1),f.push(a[I]));return i=Ll(i,h),s=Ll(s,h),d=Ll(d,f),p=Ll(p,f),pk(r,i,s,p,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Um(this.betaInitializer),gammaInitializer:Um(this.gammaInitializer),betaRegularizer:$A(this.betaRegularizer),gammaRegularizer:$A(this.gammaRegularizer)},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);Ck.className="LayerNormalization",hc(Ck);var mk=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new lC("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,o;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new lC("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new lC("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));o=e.padding[1]}r.padding=[a,o]}return r.inputSpec=[new Sv({ndim:4})],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=vv(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Jc((function(){return t=mv(e),r=n.padding,a=n.dataFormat,Jc((function(){if(4!==t.rank)throw new lC("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new lC("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new lC("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],zg(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv);function vk(e,t,n,r,a,o){return Jc((function(){var i;qC(a),em(o),$C(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=dy(e,a);var s="same"===r?"same":"valid";return i="max"===o?Bg(e,t,n,s):qu(e,t,n,s),"channelsFirst"===a&&(i=Ws(i,[0,3,1,2])),i}))}function bk(e,t,n,r,a,o){return Jc((function(){var i;qC(a),em(o),$C(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=py(e,a);var s="same"===r?"same":"valid";return i="max"===o?Gg(e,t,n,s):$u(e,t,n,s),"channelsFirst"===a&&(i=Ws(i,[0,4,1,2,3])),i}))}mk.className="ZeroPadding2D",hc(mk);var Ak=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new lC("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(xC(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new lC("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return xC(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,$C(r.padding),r.inputSpec=[new Sv({ndim:3})],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){var t=ly((e=vv(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Jc((function(){n.invokeCallHook(e,t),e=dm(mv(e),2);var r=n.poolingFunction(mv(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Ed(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv),yk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return qC(a),$C(r),vk(e,t,n,r,a,"max")}}]),n}(Ak);yk.className="MaxPooling1D",hc(yk);var kk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return qC(a),$C(r),vk(e,t,n,r,a,"avg")}}]),n}(Ak);kk.className="AveragePooling1D",hc(kk);var Zk=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new lC("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return xC(r.poolSize,"poolSize"),xC(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qC(r.dataFormat),$C(r.padding),r.inputSpec=[new Sv({ndim:4})],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){e=vv(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=ly(t,this.poolSize[0],this.padding,this.strides[0]),n=ly(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Jc((function(){return n.invokeCallHook(e,t),n.poolingFunction(mv(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv),Sk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return qC(a),$C(r),vk(e,t,n,r,a,"max")}}]),n}(Zk);Sk.className="MaxPooling2D",hc(Sk);var wk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return qC(a),$C(r),vk(e,t,n,r,a,"avg")}}]),n}(Zk);wk.className="AveragePooling2D",hc(wk);var Bk=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new lC("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return xC(r.poolSize,"poolSize"),xC(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qC(r.dataFormat),$C(r.padding),r.inputSpec=[new Sv({ndim:5})],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){e=vv(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=ly(t,this.poolSize[0],this.padding,this.strides[0]),n=ly(n,this.poolSize[1],this.padding,this.strides[1]),r=ly(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Jc((function(){return n.invokeCallHook(e,t),n.poolingFunction(mv(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv),Gk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return qC(a),$C(r),bk(e,t,n,r,a,"max")}}]),n}(Bk);Gk.className="MaxPooling3D",hc(Gk);var xk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e)}return(0,j.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return qC(a),$C(r),bk(e,t,n,r,a,"avg")}}]),n}(Bk);xk.className="AveragePooling3D",hc(xk);var Rk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).inputSpec=[new Sv({ndim:3})],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new gC}}]),n}(Rv),Wk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e||{})}return(0,j.Z)(n,[{key:"call",value:function(e,t){return Jc((function(){var t=mv(e);return Rg(t,1)}))}}]),n}(Rk);Wk.className="GlobalAveragePooling1D",hc(Wk);var Vk=function(e){eo(n,e);var t=io(n);function n(e){return(0,U.Z)(this,n),t.call(this,e||{})}return(0,j.Z)(n,[{key:"call",value:function(e,t){return Jc((function(){var t=mv(e);return gg(t,1)}))}}]),n}(Rk);Vk.className="GlobalMaxPooling1D",hc(Vk);var Nk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qC(r.dataFormat),r.inputSpec=[new Sv({ndim:4})],r}return(0,j.Z)(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new gC}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Rv),Xk=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"call",value:function(e,t){var n=this;return Jc((function(){var t=mv(e);return"channelsLast"===n.dataFormat?Rg(t,[1,2]):Rg(t,[2,3])}))}}]),n}(Nk);Xk.className="GlobalAveragePooling2D",hc(Xk);var Jk=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"call",value:function(e,t){var n=this;return Jc((function(){var t=mv(e);return"channelsLast"===n.dataFormat?gg(t,[1,2]):gg(t,[2,3])}))}}]),n}(Nk);Jk.className="GlobalMaxPooling2D",hc(Jk);var Fk=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,j.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){_v(to(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=Ov(r,n);delete t.layer;var o={layer:a};return Object.assign(o,t),new e(o)}}]),n}(Rv),Ek=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,j.Z)(n,[{key:"build",value:function(e){if((e=vv(e)).length<3)throw new lC("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),_v(to(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=vv(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Jc((function(){return Ry((function(e,r){return[mv(n.layer.call(e,t)),[]]}),e=mv(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Fk);Ek.className="TimeDistributed",hc(Ek);var Tk=function(e){eo(n,e);var t=io(n);function n(e){var r;(0,U.Z)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=a,r.forwardLayer=Ov(o),a.goBackwards=!0!==a.goBackwards;var i,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=Ov(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,i=r.mergeMode,BC(jC,"BidirectionalMergeMode",i),e.weights)throw new gC("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,j.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):IC(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=xy(e,r,a,this.numConstants);if(e=o.inputs,r=o.initialState,a=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return _v(to(n.prototype),"apply",this).call(this,e,t);var i=[],s=[];if(null!=r){var c=r.length;if(c%2>0)throw new lC("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,i.push.apply(i,(0,_.Z)(r));var u=r.map((function(e){return new Sv({shape:e.shape})}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),s.push.apply(s,(0,_.Z)(u))}if(null!=a)throw new gC("Support for constants in Bidirectional layers is not implemented yet.");for(var l=i[0]instanceof wv,g=0,d=i;g<d.length;g++){if(d[g]instanceof wv!==l)throw new lC("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var p=[e].concat(i),h=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=h;var I=_v(to(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=f,I}return _v(to(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Jc((function(){var r,a,o,i,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var c=s.slice(0,s.length/2),u=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:c})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:u}))}return n.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=dd(a,1)),"concat"===n.mergeMode?i=Cm([r,a]):"sum"===n.mergeMode?i=Oc(r,a):"ave"===n.mergeMode?i=Qc(.5,Oc(r,a)):"mul"===n.mergeMode?i=Qc(r,a):null==n.mergeMode&&(i=[r,a]),n.returnState?null==n.mergeMode?i.concat(o):[i].concat(o):i}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;nm(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),nm(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){_v(to(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=_v(to(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=Ov(t.layer);if(delete t.layer,null!=t.numConstants)throw new gC("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(Fk);function Yk(e){return new Nv(e)}function Hk(e){return new oy(e)}function Mk(e){return new ny(e)}function Dk(e){return new ry(e)}function Kk(e){return new ay(e)}function zk(e){return new sy(e)}function Lk(e){return new iy(e)}function Pk(e){return new Sy(e)}function _k(e){return new vy(e)}function Ok(e){return new Ay(e)}function Uk(e){return new by(e)}function jk(e){return new yy(e)}function Qk(e){return new Zy(e)}function qk(e){return new wy(e)}function $k(e){return new By(e)}function eZ(e){return new Gy(e)}function tZ(e){return new Uy(e)}function nZ(e){return new _y(e)}function rZ(e){return new Ly(e)}function aZ(e){return new Py(e)}function oZ(e){return new Oy(e)}function iZ(e){return new jy(e)}function sZ(e){return new Qy(e)}function cZ(e){return new qy(e)}function uZ(e){return new ek(e)}function lZ(e){return new nk(e)}function gZ(e){return new ak(e)}function dZ(e){return new sk(e)}function pZ(e){return new ok(e)}function hZ(e){return new ik(e)}function fZ(e){return new rk(e)}function IZ(e){return new uk(e)}function CZ(e){return new Ik(e)}function mZ(e){return new Ck(e)}function vZ(e){return new mk(e)}function bZ(e){return new kk(e)}function AZ(e){return bZ(e)}function yZ(e){return bZ(e)}function kZ(e){return new wk(e)}function ZZ(e){return kZ(e)}function SZ(e){return kZ(e)}function wZ(e){return new xk(e)}function BZ(e){return wZ(e)}function GZ(e){return wZ(e)}function xZ(e){return new Wk(e)}function RZ(e){return new Xk(e)}function WZ(e){return new Vk(e)}function VZ(e){return new Jk(e)}function NZ(e){return new yk(e)}function XZ(e){return new Sk(e)}function JZ(e){return new Gk(e)}function FZ(e){return new Fy(e)}function EZ(e){return new Jy(e)}function TZ(e){return new Ty(e)}function YZ(e){return new Ey(e)}function HZ(e){return new Xy(e)}function MZ(e){return new Ny(e)}function DZ(e){return new zy(e)}function KZ(e){return new Ky(e)}function zZ(e){return new Wy(e)}function LZ(e){return new Yy(e)}function PZ(e){return new Tk(e)}function _Z(e){return new Ek(e)}Tk.className="Bidirectional",hc(Tk);var OZ=WZ,UZ=VZ,jZ=NZ,QZ=XZ;function qZ(e){return new lk(e)}function $Z(e){return new gk(e)}function eS(e){return new dk(e)}function tS(e){return new $y(e)}function nS(e,t){return sb(e,t)}function rS(e,t){return db(e,t)}function aS(e,t){return pb(e,t)}function oS(e,t){return cb(e,t)}function iS(e,t){return hb(e,t)}function sS(e,t){return lb(e,t)}function cS(e,t){return gb(e,t)}function uS(e,t){return ab(e,t)}function lS(e,t){return Qv(e,t)}function gS(e,t){return qv(e,t)}function dS(e,t){return qv(e,t)}function pS(e,t){return qv(e,t)}function hS(e,t){return jv(e,t)}function fS(e,t){return jv(e,t)}function IS(e,t){return jv(e,t)}function CS(e){return new QA(e)}function mS(e){return UA(t=e),new QA({l1:null!=t?t.l1:null,l2:0});var t}function vS(e){return UA(t=e),new QA({l2:null!=t?t.l2:null,l1:0});var t}var bS=function(e){eo(n,e);var t=io(n);function n(){var e;return(0,U.Z)(this,n),(e=t.apply(this,arguments)).model=null,e}return(0,j.Z)(n,[{key:"setModel",value:function(e){if(!(e instanceof CA))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(Tv);function AS(e,t){return e<t}function yS(e,t){return e>t}var kS=function(e){eo(n,e);var t=io(n);function n(e){var r;if((0,U.Z)(this,n),r=t.call(this),null==e&&(e={}),e.restoreBestWeights)throw new gC("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,-1===["auto","min","max"].indexOf(r.mode)&&(console.warn("EarlyStopping mode '".concat(r.mode,"' is invalid. ")+"Falling back to mode 'auto'."),r.mode="auto"),"min"===r.mode?r.monitorFunc=AS:"max"===r.mode||-1!==r.monitor.indexOf("acc")?r.monitorFunc=yS:r.monitorFunc=AS,r.monitorFunc===AS&&(r.minDelta*=-1),r}return(0,j.Z)(n,[{key:"onTrainBegin",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===AS?1/0:-1/0;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jv(n);case 2:if(null!=(r=this.getMonitorValue(n))){e.next=5;break}return e.abrupt("return");case 5:this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. ")+"Available metrics are: ".concat(Object.keys(e))),t}}]),n}(bS);var ZS,SS,wS={earlyStopping:function(e){return new kS(e)}};tt().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(ZS||(ZS={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(SS||(SS={}));var BS={};function GS(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};BS[e]=n}function xS(e){return BS[e]}function RS(e){delete BS[e]}function WS(e,t,n,r,a){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var i=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?i+1:o.inputIndexEnd;if("tensor"===o.type)return VS(t.inputNames[o.inputIndexStart],n,r,a);if("tensors"===o.type)return t.inputNames.slice(i,s).map((function(e){return VS(e,n,r,a)}));var c=VS(t.inputNames.slice(i)[0],n,r,a),u=c.dataSync();return"number"===o.type?u[0]:Ke(c.shape,u)}var l=t.attrParams[e];return l&&l.value}function VS(e,t,n,r){var a=JS(e),o=(0,ne.Z)(a,2),i=o[0],s=o[1];if(null!=r){var c=r.getHashTableHandleByName(i);if(null!=c)return c}var u=n.currentContextIds.find((function(e){return!!t[XS(i,e)]}));return void 0!==u?t[XS(i,u)][s]:void 0}function NS(e,t){var n=JS(e),r=(0,ne.Z)(n,3),a=r[0],o=r[1],i=r[2];return[XS(a,t&&t.currentContextId),o,i]}function XS(e,t){return t?"".concat(e,"-").concat(t):e}function JS(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function FS(e,t,n){var r=WS("pad",e,t,n);if("explicit"===r){r=WS("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function ES(e){return e.kept?e:ss(e)}var TS=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],YS=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],HS=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],MS=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],DS=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],KS=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zS=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],LS=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],PS=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],_S=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],OS=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],US=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],jS=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],QS=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],qS=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],$S=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ew=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],tw=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],nw=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],rw=function(){function e(){var t;(0,U.Z)(this,e);var n=[S,w,B,G,x,R,W,V,N,X,J,F,E,T,Y,H,M,D,K],r=(t=[]).concat.apply(t,(0,_.Z)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,j.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],o=[],i=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||i.push(e[n.name]),e}),{}),c=[],u=[],l={},g={};null!=n&&(l=this.mapSignatureEntries(n.inputs),g=this.mapSignatureEntries(n.outputs));var d=Object.keys(s);d.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=NS(e),a=(0,ne.Z)(r,3),o=a[0],i=a[2],c=s[o];if(null!=c.outputs){var u=c.outputs.indexOf(i);if(-1!==u){var l="".concat(o,":").concat(u);t.inputNames[n]=l}}t.inputs.push(c),c.children.push(t)}))})),0===Object.keys(g).length?d.forEach((function(e){var t=s[e];0===t.children.length&&u.push(t)})):Object.keys(g).forEach((function(e){var t=NS(e),n=(0,ne.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=g[e],u.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=NS(e),n=(0,ne.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],c.push(r))})):c=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:c,outputs:u,weights:o,placeholders:a,signature:n,functions:p};return i.length>0&&(h.initNodes=i),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=xS(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=ow(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ow(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=fw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=fw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=sw(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=sw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=hw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=hw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=iw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=iw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=Cw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Cw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=pw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=pw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=Iw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Iw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=lw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=lw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=gw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=gw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=uw(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=uw(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var o=[],i=[];e.signature.inputArg.forEach((function(e){var t=NS(e.name),n=(0,ne.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:cw(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,o.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=NS(e),o=(0,ne.Z)(r,3),i=o[0],s=o[2],c=a[i];if(null!=c.outputs){var u=c.outputs.indexOf(s);if(-1!==u){var l="".concat(i,":").concat(u);t.inputNames[n]=l}}t.inputs.push(c),c.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=NS(s[e.name]),n=(0,ne.Z)(t,2),r=n[0],o=n[1],c=a[r];null!=c&&(c.defaultOutput=o,i.push(c))}));var c=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:i,weights:r,placeholders:[],signature:c}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function aw(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=tt().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function ow(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?aw(a.s,r):n}function iw(e,t,n){var r=e[t];return r?r.b:n}function sw(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function cw(e){switch("string"===typeof e&&(e=ZS[e]),e){case ZS.DT_FLOAT:case ZS.DT_HALF:return"float32";case ZS.DT_INT32:case ZS.DT_INT64:case ZS.DT_INT8:case ZS.DT_UINT8:return"int32";case ZS.DT_BOOL:return"bool";case ZS.DT_DOUBLE:return"float32";case ZS.DT_STRING:return"string";default:return null}}function uw(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function lw(e,t,n){var r=e[t];return r&&r.type?cw(r.type):n}function gw(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return cw(e)})):n}function dw(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function pw(e,t,n){var r=e[t];return r&&r.shape?dw(r.shape):n}function hw(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function fw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return aw(e,r)})):n}function Iw(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return dw(e)})):n}function Cw(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var mw=function(){function e(t,n,r){var a=this;(0,U.Z)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,j.Z)(e,[{key:"getInput",value:function(e){return VS(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return VS(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return sw(this.node.rawAttrs,e,t);if(null!=n.s)return ow(this.node.rawAttrs,e,t);if(null!=n.b)return iw(this.node.rawAttrs,e,t);if(null!=n.shape)return pw(this.node.rawAttrs,e,t);if(null!=n.type)return lw(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return hw(this.node.rawAttrs,e,t);if(null!=n.list.s)return fw(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Iw(this.node.rawAttrs,e,t);if(null!=n.list.b)return Cw(this.node.rawAttrs,e,t);if(null!=n.list.type)return gw(this.node.rawAttrs,e,t)}return t}}]),e}();function vw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){ge(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],o=t[r];ge(a<0||o<0||a===o,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function bw(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function Aw(e,t,n){var r=yw(e,n),a=!bw(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=yw(e.shape,r)})),!bw(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function yw(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],o=t[r];if(a>=0&&o>=0&&a!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:o}return n}var kw=function(){function e(t,n,r,a,o,i,s){(0,U.Z)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=cu(0),Ec(this.idTensor)}return(0,j.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),vw(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Ec(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return $o([],[0].concat(this.elementShape));var r=this.readMany(e);return vw(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Td(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return $o([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return vw(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),el(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,_.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Qd(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var o=0===r?0:t.size/r,i=[];Jc((function(){t=Qu(t,[1,r,o]);for(var s=0;s<e.length;++s){var c=[0,0===s?0:a[s-1],0],u=[1,e[s],o];i[s]=Qu(nl(t,c,u),n.elementShape)}return i}));for(var s=[],c=0;c<e.length;c++)s[c]=c;this.writeMany(s,i)}}]),e}(),Zw=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;(0,U.Z)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));vw(n,e.shape,"TensorList shape mismatch: "),Ec(e)})),this.idTensor=cu(0),this.maxNumElements=a,Ec(this.idTensor)}return(0,j.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,_.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));vw(e,this.elementShape,"TensorList shape mismatch: ");var a=Aw(this.elementShape,this.tensors,e);return Jc((function(){var e=n.tensors.map((function(e){return Qu(e,a)}));return Td(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=Aw(this.elementShape,this.tensors,e),r=this.tensors.pop();return vw(r.shape,e,"TensorList shape mismatch: "),Qu(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(vw(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ec(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));vw(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=Aw(this.elementShape,this.tensors,t);return Qu(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));vw(this.elementShape,t.shape,"TensorList shape mismatch: "),Ec(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));vw(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=Aw(this.elementShape,this.tensors,n);return 0===e.length?$o([],[0].concat(a)):Jc((function(){var t=e.map((function(e){return Qu(r.tensors[e],a)}));return Td(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));vw(this.elementShape,t,"TensorList shape mismatch: ");var r=Aw(this.elementShape,this.tensors,t);return 0===this.size()?$o([],[0].concat(r)):Jc((function(){var e=n.tensors.map((function(e){return Qu(e,r)}));return el(e,0)}))}}]),e}();function Sw(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));vw(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=Qd(e);return new Zw(a,t,r)}function ww(e,t,n){return new Zw([],e,t,n)}function Bw(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,_.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var o=new Zw([],n,e.dtype,r),i=Qd(e,0);return t.forEach((function(e,t){o.setItem(e,i[t])})),o}function Gw(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var o=yw(e.shape.slice(1),n),i=0===r?0:e.size/r,s=Jc((function(){var n=[];e=Qu(e,[1,r,i]);for(var s=0;s<t.length;++s){var c=[0,0===s?0:a[s-1],0],u=[1,t[s],i];n[s]=Qu(nl(e,c,u),o)}return e.dispose(),n})),c=new Zw([],n,e.dtype,t.length),u=0;u<s.length;u++)c.setItem(u,s[u]);return c}var xw=function(){var e=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b,A,y,k,Z,S,w,B,G,x,R,W,V,N,X,J,F,E,T,Y,H,M,D,K,z,L,P,_,O,U,j,Q,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,le,ge,de,pe,he,fe,Ie,Ce,me,ve,be,Ae,ye,ke,Ze,Se,we,Be,Ge,xe,Re,We,Ve,Ne,Xe,Je,Fe,Ee,Te,Ye,He,Me,De,Ke,ze,Le,Pe;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?121:"TensorListStack"===e.t0?127:"TensorListFromTensor"===e.t0?133:"TensorListConcat"===e.t0?139:"TensorListPushBack"===e.t0?144:"TensorListPopBack"===e.t0?149:"TensorListSplit"===e.t0?154:160;break;case 3:return a=WS("thenBranch",t,n,r),o=WS("elseBranch",t,n,r),i=WS("cond",t,n,r),s=WS("args",t,n,r),e.next=9,i.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[o].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(q().mark((function e(){var a,o,i,s,c,u,l,g;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=WS("body",t,n,r),o=WS("cond",t,n,r),i=WS("args",t,n,r),e.next=5,r.functionMap[o].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,c=i.map((function(e){return e.id})),e.next=9,s[0].data();case 9:u=e.sent,s.forEach((function(e){e.kept||-1!==c.indexOf(e.id)||e.dispose()})),l=i,g=q().mark((function e(){var t,n,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==c.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[o].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return i=e.sent,e.next=11,i[0].data();case 11:u=e.sent,i.forEach((function(e){e.kept||-1!==c.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!u[0]){e.next=17;break}return e.delegateYield(g(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(c=e.t1)){e.next=19;break}return e.abrupt("return",c.v);case 19:return u=WS("pred",t,n,r),e.abrupt("return",[ES(u)]);case 21:return l=WS("pred",t,n,r),(g=WS("data",t,n,r)).kept||(g=ES(g)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,g],e.next=31;break;case 30:e.t2=[g,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(d=t.inputNames.find((function(e){return void 0!==VS(e,n,r)})),!d){e.next=36;break}return p=VS(d,n,r),e.abrupt("return",[ES(p)]);case 36:return e.abrupt("return",void 0);case 37:return h=WS("frameName",t,n,r),f=WS("tensor",t,n,r),r.enterFrame(h),e.abrupt("return",[ES(f)]);case 41:return I=WS("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[ES(I)]);case 44:return C=WS("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[ES(C)]);case 47:return m=WS("size",t,n,r),v=WS("dtype",t,n,r),b=WS("elementShape",t,n,r),A=WS("dynamicSize",t,n,r),y=WS("clearAfterRead",t,n,r),k=WS("identicalElementShapes",t,n,r),Z=WS("name",t,n,r),S=new kw(Z,v,m,b,k,A,y),r.addTensorArray(S),e.abrupt("return",[S.idTensor,cu(1)]);case 57:return w=WS("tensorArrayId",t,n,r),B=WS("index",t,n,r),G=WS("tensor",t,n,r),(x=r.getTensorArray(w.id)).write(B,G),e.abrupt("return",[x.idTensor]);case 63:return R=WS("tensorArrayId",t,n,r),W=WS("index",t,n,r),V=r.getTensorArray(R.id),e.abrupt("return",[V.read(W)]);case 67:return N=WS("tensorArrayId",t,n,r),X=WS("indices",t,n,r),J=WS("dtype",t,n,r),F=r.getTensorArray(N.id),e.abrupt("return",[F.gather(X,J)]);case 72:return E=WS("tensorArrayId",t,n,r),T=WS("indices",t,n,r),Y=WS("tensor",t,n,r),(H=r.getTensorArray(E.id)).scatter(T,Y),e.abrupt("return",[H.idTensor]);case 78:return M=WS("tensorArrayId",t,n,r),D=r.getTensorArray(M.id),K=WS("dtype",t,n,r),e.abrupt("return",[D.concat(K)]);case 82:return z=WS("tensorArrayId",t,n,r),L=WS("tensor",t,n,r),P=WS("lengths",t,n,r),(_=r.getTensorArray(z.id)).split(P,L),e.abrupt("return",[_.idTensor]);case 88:return O=WS("tensorArrayId",t,n,r),U=r.getTensorArray(O.id),e.abrupt("return",[cu(U.size(),"int32")]);case 91:return j=WS("tensorArrayId",t,n,r),(Q=r.getTensorArray(j.id)).clearAndClose(),e.abrupt("return",[Q.idTensor]);case 95:return $=WS("tensorListId",t,n,r),ee=WS("index",t,n,r),te=WS("tensor",t,n,r),(ne=r.getTensorList($.id)).setItem(ee,te),e.abrupt("return",[ne.idTensor]);case 101:return re=WS("tensorListId",t,n,r),ae=WS("index",t,n,r),oe=WS("elementShape",t,n,r),ie=WS("elementDType",t,n,r),se=r.getTensorList(re.id),e.abrupt("return",[se.getItem(ae,oe,ie)]);case 107:return ce=WS("indices",t,n,r),ue=WS("tensor",t,n,r),le=WS("elementShape",t,n,r),ge=WS("numElements",t,n,r),de=Bw(ue,ce,le,ge),r.addTensorList(de),e.abrupt("return",[de.idTensor]);case 114:return pe=WS("elementShape",t,n,r),he=WS("elementDType",t,n,r),fe="TensorListReserve"===t.op?"numElements":"maxNumElements",Ie=WS(fe,t,n,r),Ce=ww(pe,he,Ie),r.addTensorList(Ce),e.abrupt("return",[Ce.idTensor]);case 121:return me=WS("tensorListId",t,n,r),ve=WS("indices",t,n,r),be=WS("elementShape",t,n,r),Ae=WS("elementDType",t,n,r),ye=r.getTensorList(me.id),e.abrupt("return",[ye.gather(ve,Ae,be)]);case 127:return ke=WS("tensorListId",t,n,r),Ze=WS("elementShape",t,n,r),Se=WS("elementDType",t,n,r),we=WS("numElements",t,n,r),Be=r.getTensorList(ke.id),e.abrupt("return",[Be.stack(Ze,Se,we)]);case 133:return Ge=WS("tensor",t,n,r),xe=WS("elementShape",t,n,r),Re=WS("elementDType",t,n,r),We=Sw(Ge,xe,Re),r.addTensorList(We),e.abrupt("return",[We.idTensor]);case 139:return Ve=WS("tensorListId",t,n,r),Ne=r.getTensorList(Ve.id),Xe=WS("dtype",t,n,r),Je=WS("elementShape",t,n,r),e.abrupt("return",[Ne.concat(Xe,Je)]);case 144:return Fe=WS("tensorListId",t,n,r),Ee=WS("tensor",t,n,r),(Te=r.getTensorList(Fe.id)).pushBack(Ee),e.abrupt("return",[Te.idTensor]);case 149:return Ye=WS("tensorListId",t,n,r),He=WS("elementShape",t,n,r),Me=WS("elementDType",t,n,r),De=r.getTensorList(Ye.id),e.abrupt("return",[De.popBack(He,Me)]);case 154:return Ke=WS("tensor",t,n,r),ze=WS("elementShape",t,n,r),Le=WS("lengths",t,n,r),Pe=Gw(Ke,Le,ze),r.addTensorList(Pe),e.abrupt("return",[Pe.idTensor]);case 160:throw TypeError("Node type ".concat(t.op," is not implemented"));case 161:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Rw(e,t,n){var r=WS("fusedOps",e,t,n),a=(0,ne.Z)(r,2),o=a[0],i=a[1],s="biasadd"===o,c=!s,u="prelu"===i,l="fusedbatchnorm"===o,g=WS("numArgs",e,t,n);if(s){if(u&&2!==g)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&s&&1!==g)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var d=WS("strides",e,t,n),p=FS(e,t,n),h=WS("dataFormat",e,t,n).toUpperCase(),f=WS("dilations",e,t,n),I=WS("args",e,t,n),C=(0,ne.Z)(I,2),m=C[0],v=C[1];return c&&(v=m,m=void 0),{stride:d,pad:p,dataFormat:h,dilations:f,biasArg:m,preluArg:v,activationFunc:i,leakyreluAlpha:WS("leakyreluAlpha",e,t,n)}}function Ww(e,t,n){return{boxes:WS("boxes",e,t,n),scores:WS("scores",e,t,n),maxOutputSize:WS("maxOutputSize",e,t,n),iouThreshold:WS("iouThreshold",e,t,n),scoreThreshold:WS("scoreThreshold",e,t,n),softNmsSigma:WS("softNmsSigma",e,t,n)}}var Vw=function(){var e=(0,O.Z)(q().mark((function e(t,n,r){var a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b,A,y,k,Z,S,w,B;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=Ww(t,n,r),o=a.boxes,i=a.scores,s=a.maxOutputSize,c=a.iouThreshold,u=a.scoreThreshold,l=a.softNmsSigma,e.next=6,Xh.nonMaxSuppressionWithScoreAsync(o,i,s,c,u,l);case 6:return g=e.sent,e.abrupt("return",[g.selectedIndices,g.selectedScores]);case 8:return d=Ww(t,n,r),p=d.boxes,h=d.scores,f=d.maxOutputSize,I=d.iouThreshold,C=d.scoreThreshold,m=WS("padToMaxOutputSize",t,n,r),e.next=12,Xh.nonMaxSuppressionPaddedAsync(p,h,f,I,C,m);case 12:return v=e.sent,e.abrupt("return",[v.selectedIndices,v.validOutputs]);case 14:return b=Ww(t,n,r),A=b.boxes,y=b.scores,k=b.maxOutputSize,Z=b.iouThreshold,S=b.scoreThreshold,e.next=17,Xh.nonMaxSuppressionAsync(A,y,k,Z,S);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return w=is(WS("condition",t,n,r),"bool"),e.next=22,tp(w);case 22:return e.t2=e.sent,B=[e.t2],w.dispose(),e.abrupt("return",B);case 26:return e.abrupt("return",yd(WS("x",t,n,r),WS("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Nw=function(){function e(t,n){(0,U.Z)(this,e),this.keyDType=t,this.valueDType=n,this.handle=cu(0),this.tensorMap=new Map,Ec(this.handle)}return(0,j.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return cu(this.size(),"int32")}},{key:"import",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",Jc((function(){var e=Qd(n),t=r.length,o=e.length;ge(t===o,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(o," ")+"elements."}));for(var i=0;i<t;i++){var s=r[i],c=e[i];Ec(c),a.tensorMap.set(s,c)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",Jc((function(){for(var e=[],t=0;t<r.length;t++){var o=r[t],i=a.findWithDefault(o,n);e.push(i)}return Td(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),Xw=function(){var e=(0,O.Z)(q().mark((function e(t,n,r,a){var o,i,s,c,u,l,g,d,p,h,f,I,C;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return o=WS("keyDType",t,n,r),i=WS("valueDType",t,n,r),s=new Nw(o,i),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return c=WS("tableHandle",t,n,r,a),u=WS("keys",t,n,r),l=WS("values",t,n,r),g=a.getHashTableById(c.id),e.next=14,g.import(u,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return d=WS("tableHandle",t,n,r,a),p=WS("keys",t,n,r),h=WS("defaultValue",t,n,r),f=a.getHashTableById(d.id),e.next=22,f.find(p,h);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return I=WS("tableHandle",t,n,r,a),C=a.getHashTableById(I.id),e.abrupt("return",[C.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function Jw(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return Jc((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Oc(WS("a",e,t,n),WS("b",e,t,n))];case"AddN":return[Su(WS("tensors",e,t,n))];case"FloorMod":case"Mod":return[Eg(WS("a",e,t,n),WS("b",e,t,n))];case"Mul":return[Qc(WS("a",e,t,n),WS("b",e,t,n))];case"RealDiv":case"Div":return[jc(WS("a",e,t,n),WS("b",e,t,n))];case"DivNoNan":return[El(WS("a",e,t,n),WS("b",e,t,n))];case"FloorDiv":return[Uc(WS("a",e,t,n),WS("b",e,t,n))];case"Sub":return[hu(WS("a",e,t,n),WS("b",e,t,n))];case"Minimum":return[Jg(WS("a",e,t,n),WS("b",e,t,n))];case"Maximum":return[Cu(WS("a",e,t,n),WS("b",e,t,n))];case"Pow":return[pu(WS("a",e,t,n),WS("b",e,t,n))];case"SquaredDifference":return[Fd(WS("a",e,t,n),WS("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return Jc((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Iu(WS("x",e,t,n))];case"Acos":return[ku(WS("x",e,t,n))];case"Acosh":return[Zu(WS("x",e,t,n))];case"Asin":return[Ru(WS("x",e,t,n))];case"Asinh":return[Wu(WS("x",e,t,n))];case"Atan":return[Vu(WS("x",e,t,n))];case"Atan2":return[Nu(WS("x",e,t,n),WS("y",e,t,n))];case"Atanh":return[Xu(WS("x",e,t,n))];case"Ceil":return[pl(WS("x",e,t,n))];case"Complex":return[Qo(WS("real",e,t,n),WS("imag",e,t,n))];case"Cos":return[wl(WS("x",e,t,n))];case"Cosh":return[Bl(WS("x",e,t,n))];case"Elu":return[Hl(WS("x",e,t,n))];case"Erf":return[Ml(WS("x",e,t,n))];case"Exp":return[Dl(WS("x",e,t,n))];case"Expm1":return[zl(WS("x",e,t,n))];case"Floor":return[_l(WS("x",e,t,n))];case"Log":return[ig(WS("x",e,t,n))];case"Log1p":return[sg(WS("x",e,t,n))];case"Imag":return[Ql(WS("x",e,t,n))];case"Neg":return[cg(WS("x",e,t,n))];case"Reciprocal":return[ud(WS("x",e,t,n))];case"Real":return[cd(WS("x",e,t,n))];case"Relu":return[ld(WS("x",e,t,n))];case"Round":return[Cd(WS("x",e,t,n))];case"Selu":return[vd(WS("x",e,t,n))];case"Sigmoid":return[tl(WS("x",e,t,n))];case"Sin":return[Zd(WS("x",e,t,n))];case"Sign":return[kd(WS("x",e,t,n))];case"Sinh":return[Sd(WS("x",e,t,n))];case"Softplus":return[ug(WS("x",e,t,n))];case"Sqrt":return[qc(WS("x",e,t,n))];case"Square":return[$c(WS("x",e,t,n))];case"Tanh":return[rl(WS("x",e,t,n))];case"Tan":return[Md(WS("x",e,t,n))];case"ClipByValue":return[hl(WS("x",e,t,n),WS("clipValueMin",e,t,n),WS("clipValueMax",e,t,n))];case"Relu6":return[gd(WS("x",e,t,n))];case"Rsqrt":return[md(VS(e.inputNames[0],t,n))];case"Prod":return[qg(WS("x",e,t,n),WS("axes",e,t,n))];case"LeakyRelu":return[tg(WS("x",e,t,n),WS("alpha",e,t,n))];case"Prelu":return[Qg(WS("x",e,t,n),WS("alpha",e,t,n))];case"IsNan":return[eg(VS(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return xw(e,t,n);case"convolution":return Jc((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=WS("stride",e,t,n),a=WS("pad",e,t,n),o=WS("dataFormat",e,t,n).toUpperCase(),i=WS("dilation",e,t,n);return[bl(WS("x",e,t,n),WS("filter",e,t,n),r,a,o,i)];case"Conv2D":var s=WS("strides",e,t,n),c=FS(e,t,n),u=WS("dataFormat",e,t,n).toUpperCase(),l=WS("dilations",e,t,n);return[vl(WS("x",e,t,n),WS("filter",e,t,n),[s[1],s[2]],c,u,[l[1],l[2]])];case"_FusedConv2D":var g=Rw(e,t,n),d=g.stride,p=g.pad,h=g.dataFormat,f=g.dilations,I=g.biasArg,C=g.preluArg,m=g.activationFunc,v=g.leakyreluAlpha;return[Ap({x:WS("x",e,t,n),filter:WS("filter",e,t,n),strides:[d[1],d[2]],pad:p,dataFormat:h,dilations:[f[1],f[2]],bias:I,activation:m,preluActivationWeights:C,leakyreluAlpha:v})];case"FusedDepthwiseConv2dNative":var b=Rw(e,t,n),A=b.stride,y=b.pad,k=b.dataFormat,Z=b.dilations,S=b.biasArg,w=b.preluArg,B=b.activationFunc,G=b.leakyreluAlpha;return[Zp({x:WS("x",e,t,n),filter:WS("filter",e,t,n),strides:[A[1],A[2]],pad:y,dataFormat:k,dilations:[Z[1],Z[2]],bias:S,activation:B,preluActivationWeights:w,leakyreluAlpha:G})];case"Conv2DBackpropInput":case"Conv2dTranspose":var x=WS("outputShape",e,t,n),R=WS("strides",e,t,n),W=FS(e,t,n);return[yl(WS("x",e,t,n),WS("filter",e,t,n),x,[R[1],R[2]],W)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var V=WS("strides",e,t,n),N=FS(e,t,n),X=WS("dilations",e,t,n),J=WS("dataFormat",e,t,n).toUpperCase();return[Vl(WS("input",e,t,n),WS("filter",e,t,n),[V[1],V[2]],N,J,[X[1],X[2]])];case"Conv3D":var F=WS("strides",e,t,n),E=WS("pad",e,t,n),T=WS("dataFormat",e,t,n).toUpperCase(),Y=WS("dilations",e,t,n);return[kl(WS("x",e,t,n),WS("filter",e,t,n),[F[1],F[2],F[3]],E,T,[Y[1],Y[2],Y[3]])];case"AvgPool":var H=WS("strides",e,t,n),M=WS("pad",e,t,n),D=WS("kernelSize",e,t,n);return[qu(WS("x",e,t,n),[D[1],D[2]],[H[1],H[2]],M)];case"MaxPool":var K=WS("strides",e,t,n),z=WS("pad",e,t,n),L=WS("kernelSize",e,t,n);return[Bg(WS("x",e,t,n),[L[1],L[2]],[K[1],K[2]],z)];case"MaxPoolWithArgmax":var P=WS("strides",e,t,n),_=WS("pad",e,t,n),O=WS("kernelSize",e,t,n),U=WS("includeBatchInIndex",e,t,n),j=xg(WS("x",e,t,n),[O[1],O[2]],[P[1],P[2]],_,U);return[j.result,j.indexes];case"AvgPool3D":var Q=WS("strides",e,t,n),q=WS("pad",e,t,n),$=WS("kernelSize",e,t,n);return[$u(WS("x",e,t,n),[$[1],$[2],$[3]],[Q[1],Q[2],Q[3]],q)];case"MaxPool3D":var ee=WS("strides",e,t,n),te=WS("pad",e,t,n),ne=WS("kernelSize",e,t,n);return[Gg(WS("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=WS("strides",e,t,n),ae=WS("pad",e,t,n),oe=WS("dilations",e,t,n),ie=re[1],se=re[2],ce=oe[1],ue=oe[2];return[Xl(WS("x",e,t,n),WS("filter",e,t,n),[ie,se],ae,[ce,ue],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return Jc((function(){return function(e,t,n){switch(e.op){case"Fill":var r=WS("shape",e,t,n),a=WS("dtype",e,t,n);return[gu(r,WS("value",e,t,n),a)];case"LinSpace":return[ag(WS("start",e,t,n),WS("stop",e,t,n),WS("num",e,t,n))];case"Multinomial":var o=WS("logits",e,t,n),i=WS("numSamples",e,t,n),s=WS("seed",e,t,n);return[Hg(o,i,s)];case"OneHot":var c=WS("indices",e,t,n),u=WS("depth",e,t,n),l=WS("onValue",e,t,n),g=WS("offValue",e,t,n);return[Rs(c,u,l,g)];case"Ones":return[Vg(WS("shape",e,t,n),WS("dtype",e,t,n))];case"OnesLike":return[Dg(WS("x",e,t,n))];case"RandomUniform":return[id(WS("shape",e,t,n),WS("minval",e,t,n),WS("maxval",e,t,n),WS("dtype",e,t,n))];case"Range":return[sd(WS("start",e,t,n),WS("stop",e,t,n),WS("step",e,t,n),WS("dtype",e,t,n))];case"TruncatedNormal":var d=WS("shape",e,t,n),p=WS("mean",e,t,n),h=WS("stdDev",e,t,n),f=WS("seed",e,t,n);return[Od(d,p,h,WS("dtype",e,t,n),f)];case"Zeros":return[Wg(WS("shape",e,t,n),WS("dtype",e,t,n))];case"ZerosLike":return[eu(WS("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return Vw(e,t,n);case"evaluation":return Jc((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=WS("x",e,t,n),a=WS("k",e,t,n),o=WS("sorted",e,t,n),i=_d(r,a,o);return[i.values,i.indices];case"Unique":var s=WS("x",e,t,n),c=Ud(s);return[c.values,c.indices];case"UniqueV2":var u=WS("x",e,t,n),l=WS("axis",e,t,n),g=Ud(u,l);return[g.values,g.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return Jc((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=WS("images",e,t,n),a=WS("size",e,t,n),o=WS("alignCorners",e,t,n),i=WS("halfPixelCenters",e,t,n);return[Xh.resizeBilinear(r,[a[0],a[1]],o,i)];case"ResizeNearestNeighbor":var s=WS("images",e,t,n),c=WS("size",e,t,n),u=WS("alignCorners",e,t,n),l=WS("halfPixelCenters",e,t,n);return[Xh.resizeNearestNeighbor(s,[c[0],c[1]],u,l)];case"CropAndResize":var g=WS("image",e,t,n),d=WS("boxes",e,t,n),p=WS("boxInd",e,t,n),h=WS("cropSize",e,t,n),f=WS("method",e,t,n),I=WS("extrapolationValue",e,t,n);return[Xh.cropAndResize(g,d,p,h,f,I)];case"ImageProjectiveTransformV3":var C=WS("images",e,t,n),m=WS("transforms",e,t,n),v=WS("outputShape",e,t,n),b=WS("fillValue",e,t,n),A=WS("interpolation",e,t,n),y=WS("fillMode",e,t,n);return[Xh.transform(C,m,A.toLowerCase(),y.toLowerCase(),b,v)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return Jc((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=WS("default",e,t,n);return[VS(e.name,t,n)||r];case"Placeholder":return[VS(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[ES(WS("x",e,t,n))];case"IdentityN":return WS("x",e,t,n).map((function(e){return ES(e)}));case"Shape":return[Dd(WS("x",e,t,n).shape,"int32")];case"ShapeN":return WS("x",e,t,n).map((function(e){return Dd(e.shape)}));case"Size":return[cu(WS("x",e,t,n).size,"int32")];case"Rank":return[cu(WS("x",e,t,n).rank,"int32")];case"NoOp":return[cu(1)];case"Print":var a=WS("x",e,t,n),o=WS("data",e,t,n),i=WS("message",e,t,n),s=WS("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(var c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return Jc((function(){return function(e,t,n){switch(e.op){case"Equal":return[Jl(WS("a",e,t,n),WS("b",e,t,n))];case"NotEqual":return[Mg(WS("a",e,t,n),WS("b",e,t,n))];case"Greater":return[Ul(WS("a",e,t,n),WS("b",e,t,n))];case"GreaterEqual":return[jl(WS("a",e,t,n),WS("b",e,t,n))];case"Less":return[ng(WS("a",e,t,n),WS("b",e,t,n))];case"LessEqual":return[rg(WS("a",e,t,n),WS("b",e,t,n))];case"LogicalAnd":return[kg(WS("a",e,t,n),WS("b",e,t,n))];case"LogicalNot":return[Zg(WS("a",e,t,n))];case"LogicalOr":return[Sg(WS("a",e,t,n),WS("b",e,t,n))];case"Select":case"SelectV2":return[Fl(WS("condition",e,t,n),WS("a",e,t,n),WS("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return Jc((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[xs(WS("a",e,t,n),WS("b",e,t,n),WS("transposeA",e,t,n),WS("transposeB",e,t,n))];case"Einsum":return[Yl.apply(z,[WS("equation",e,t,n)].concat((0,_.Z)(WS("tensors",e,t,n))))];case"Transpose":return[Ws(WS("x",e,t,n),WS("perm",e,t,n))];case"_FusedMatMul":var r=WS("fusedOps",e,t,n),a=(0,ne.Z)(r,2),o=a[0],i=a[1],s="biasadd"===o,c="prelu"===i,u=WS("numArgs",e,t,n),l=WS("leakyreluAlpha",e,t,n);if(s){if(c&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var g=WS("args",e,t,n),d=(0,ne.Z)(g,2),p=d[0],h=d[1];return[Sp({a:WS("a",e,t,n),b:WS("b",e,t,n),transposeA:WS("transposeA",e,t,n),transposeB:WS("transposeB",e,t,n),bias:p,activation:i,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return Jc((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[il(WS("x",e,t,n),WS("mean",e,t,n),WS("variance",e,t,n),WS("offset",e,t,n),WS("scale",e,t,n),WS("epsilon",e,t,n))];case"LRN":return[og(WS("x",e,t,n),WS("radius",e,t,n),WS("bias",e,t,n),WS("alpha",e,t,n),WS("beta",e,t,n))];case"Softmax":return[Rd(WS("x",e,t,n))];case"LogSoftmax":return[pg(WS("x",e,t,n))];case"SparseToDense":return[up(WS("sparseIndices",e,t,n),WS("outputShape",e,t,n),WS("sparseValues",e,t,n),WS("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return Jc((function(){return function(e,t,n){switch(e.op){case"Max":var r=WS("axis",e,t,n),a=WS("keepDims",e,t,n);return[gg(WS("x",e,t,n),r,a)];case"Mean":var o=WS("axis",e,t,n),i=WS("keepDims",e,t,n);return[Rg(WS("x",e,t,n),o,i)];case"Min":var s=WS("axis",e,t,n),c=WS("keepDims",e,t,n);return[Xg(WS("x",e,t,n),s,c)];case"Sum":var u=WS("axis",e,t,n),l=WS("keepDims",e,t,n);return[dg(WS("x",e,t,n),u,l)];case"All":var g=WS("axis",e,t,n),d=WS("keepDims",e,t,n);return[wu(WS("x",e,t,n),g,d)];case"Any":var p=WS("axis",e,t,n),h=WS("keepDims",e,t,n);return[Bu(WS("x",e,t,n),p,h)];case"ArgMax":var f=WS("axis",e,t,n);return[Gu(WS("x",e,t,n),f)];case"ArgMin":var I=WS("axis",e,t,n);return[xu(WS("x",e,t,n),I)];case"Prod":var C=WS("axis",e,t,n),m=WS("keepDims",e,t,n);return[qg(WS("x",e,t,n),C,m)];case"Cumprod":var v=WS("axis",e,t,n),b=WS("exclusive",e,t,n),A=WS("reverse",e,t,n);return[Gl(WS("x",e,t,n),v,b,A)];case"Cumsum":var y=WS("axis",e,t,n),k=WS("exclusive",e,t,n),Z=WS("reverse",e,t,n);return[xl(WS("x",e,t,n),y,k,Z)];case"Bincount":var S=WS("x",e,t,n),w=WS("weights",e,t,n),B=WS("size",e,t,n);return[ll(S,w,B)];case"DenseBincount":var G=WS("x",e,t,n),x=WS("weights",e,t,n),R=WS("size",e,t,n),W=WS("binaryOutput",e,t,n);return[Rl(G,x,R,W)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return Jc((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=WS("n",e,t,n),a=WS("axis",e,t,n),o=WS("tensors",e,t,n);return o=o.slice(0,r),[el(o,a)];case"Gather":var i=WS("x",e,t,n),s=WS("indices",e,t,n);return[Ol(i,is(s,"int32"),0)];case"GatherV2":var c=WS("axis",e,t,n),u=WS("batchDims",e,t,n),l=WS("x",e,t,n),g=WS("indices",e,t,n);return[Ol(l,is(g,"int32"),c,u)];case"Reverse":for(var d=WS("dims",e,t,n),p=[],h=0;h<d.length;h++)d[h]&&p.push(h);var f=WS("x",e,t,n);return[dd(f,p)];case"ReverseV2":var I=WS("axis",e,t,n),C=WS("x",e,t,n);return[dd(C,I)];case"Slice":var m=WS("begin",e,t,n),v=WS("size",e,t,n);return[nl(WS("x",e,t,n),m,v)];case"StridedSlice":var b=WS("begin",e,t,n),A=WS("end",e,t,n),y=WS("strides",e,t,n),k=WS("beginMask",e,t,n),Z=WS("endMask",e,t,n),S=WS("ellipsisMask",e,t,n),w=WS("newAxisMask",e,t,n),B=WS("shrinkAxisMask",e,t,n),G=WS("x",e,t,n);return[Hd(G,b,A,y,k,Z,S,w,B)];case"Pack":return Jc((function(){var r=WS("axis",e,t,n),a=WS("tensors",e,t,n),o=a[0].shape,i=Ed(a[0]).shape,s=a.map((function(e){var t=Ce(e.shape,o);if(!t&&!Ce(Ed(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:Qu(e,o)}));return[Td(s,r)]}));case"Unpack":var x=WS("axis",e,t,n),R=WS("tensor",e,t,n);return Qd(R,x);case"Tile":var W=WS("reps",e,t,n);return[Ll(WS("x",e,t,n),W)];case"Split":case"SplitV":var V=WS("axis",e,t,n),N=WS("numOrSizeSplits",e,t,n),X=WS("x",e,t,n);return Xd(X,N,V);case"ScatterNd":var J=WS("indices",e,t,n),F=WS("values",e,t,n),E=WS("shape",e,t,n);return[sp(J,F,E)];case"GatherNd":var T=WS("x",e,t,n),Y=WS("indices",e,t,n);return[lp(T,Y)];case"SparseToDense":var H=WS("sparseIndices",e,t,n),M=WS("outputShape",e,t,n),D=WS("sparseValues",e,t,n),K=WS("defaultValue",e,t,n);return[up(H,D,M,D.dtype===K.dtype?K:is(K,D.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return Jc((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=Eh.sparseFillEmptyRows(WS("indices",e,t,n),WS("values",e,t,n),WS("denseShape",e,t,n),WS("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=Eh.sparseReshape(WS("inputIndices",e,t,n),WS("inputShape",e,t,n),WS("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[Eh.sparseSegmentMean(WS("data",e,t,n),WS("indices",e,t,n),WS("segmentIds",e,t,n))];case"SparseSegmentSum":return[Eh.sparseSegmentSum(WS("data",e,t,n),WS("indices",e,t,n),WS("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return Jc((function(){return function(e,t,n){switch(e.op){case"FFT":return[Wd(WS("x",e,t,n))];case"IFFT":return[Vd(WS("x",e,t,n))];case"RFFT":return[Jd(WS("x",e,t,n))];case"IRFFT":return[Nd(WS("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return Jc((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=Th.stringNGrams(WS("data",e,t,n),WS("dataSplits",e,t,n),WS("separator",e,t,n),WS("nGramWidths",e,t,n),WS("leftPad",e,t,n),WS("rightPad",e,t,n),WS("padWidth",e,t,n),WS("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=Th.stringSplit(WS("input",e,t,n),WS("delimiter",e,t,n),WS("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[Th.stringToHashBucketFast(WS("input",e,t,n),WS("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return Jc((function(){return function(e,t,n){switch(e.op){case"Cast":return[is(WS("x",e,t,n),WS("dtype",e,t,n))];case"ExpandDims":var r=WS("axis",e,t,n);return[Kl(WS("x",e,t,n),r)];case"Squeeze":var a=WS("axis",e,t,n);return[Ed(WS("x",e,t,n),a)];case"Reshape":return[Qu(WS("x",e,t,n),WS("shape",e,t,n))];case"MirrorPad":return[Fg(WS("x",e,t,n),WS("padding",e,t,n),WS("mode",e,t,n))];case"PadV2":case"Pad":return[zg(WS("x",e,t,n),WS("padding",e,t,n),WS("constantValue",e,t,n))];case"SpaceToBatchND":var o=WS("blockShape",e,t,n),i=WS("paddings",e,t,n);return[Ug(WS("x",e,t,n),o,i)];case"BatchToSpaceND":var s=WS("blockShape",e,t,n),c=WS("crops",e,t,n);return[ol(WS("x",e,t,n),s,c)];case"DepthToSpace":var u=WS("blockSize",e,t,n),l=WS("dataFormat",e,t,n).toUpperCase();return[Wl(WS("x",e,t,n),u,l)];case"BroadcastTo":return[dl(WS("x",e,t,n),WS("shape",e,t,n))];case"BroadcastArgs":return[gl(WS("s0",e,t,n),WS("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return Xw(e,t,n,r);case"custom":var a=xS(e.op);if(a&&a.customExecutor)return a.customExecutor(new mw(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return je(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var Fw=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,U.Z)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,j.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function Ew(e,t,n,r){var a=new Set,o=[],i=null,s=null,c=new Set,u=Object.keys(e).map((function(e){return JS(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return JS(e.name)[0]})));for(var g=(0,_.Z)(t);g.length>0;){var d=g.pop();(Mw(d)||Dw(d)||Kw(d))&&null==i&&(s=(i=d).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(d.name),null==n[d.name]&&(-1===u.indexOf(d.name)&&-1===l.indexOf(d.name)&&(0!==d.inputs.length?d.inputs.forEach((function(e){c.has(e.name)||(c.add(e.name),g.push(e))})):o.push(d.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:i,syncInputs:s}}var Tw=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Yw=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],Hw=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function Mw(e){return Tw.indexOf(e.op)>=0}function Dw(e){return Yw.indexOf(e.op)>=0}function Kw(e){return Hw.indexOf(e.op)>=0}var zw=function(){function e(t,n){var r=this;(0,U.Z)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,j.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,_.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=Ew(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,o=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(r.length>0){var i=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(i,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,o=[],i=Object.keys(a).map((function(e){return JS(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;i.forEach((function(e){r.has(e.name)&&o.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&o.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&o.push(e)}));for(var c=new Set,u=[];o.length>0;){var l=o.pop();c.add(l.name),t[l.name]||u.push(l),l.children.forEach((function(e){!c.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return c.has(e.name)}))&&o.push(e)}))}return u}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[JS(e)[0]]})),o=t.map((function(e){return JS(e)[0]})),i=o.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===i.length&&(i=this._outputs);var s=this.getCompilationKey(a,i),c=this.compiledMap.get(s);null==c&&(c=this.compile(e,i),this.compiledMap.set(s,c));var u={},l={};return Jc((function(){var r=new Fw(n.weightMap,u,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=JS(t),r=(0,ne.Z)(n,2),o=r[0],i=[];i[r[1]]=e[t],a[o]=i}));for(var i=n.getFrozenTensorIds(a),s={},g=0;g<c.length;g++){var d=c[g];if(!a[d.name]){var p=Jw(d,a,r,n._resourceManager);if(je(p))throw new Error("The execution of the op '".concat(d.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[d.name]=p,n.checkTensorForDisposal(d.name,d,a,r,i,o,s)}}return null==n.parent&&r.dispose(i),t.map((function(e){return VS(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,o,i){var s=this;"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var o=function(e,t,n){return t[XS(e,n.currentContextId)]}(e.name,n,r);null!=o&&o.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=i[e.id];if(1===n){if(s.keepTensorForDebug){var o=NS(t.name,r),c=(0,ne.Z)(o,2),u=c[0],l=c[1];s.intermediateTensors[u]||(s.intermediateTensors[u]=[]),s.intermediateTensors[u][l]=e}else e.dispose();delete i[e.id]}else null!=n&&i[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u,l=this,g=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=g.length>2&&void 0!==g[2]&&g[2],a=g.length>3&&void 0!==g[3]?g[3]:{},o=g.length>4&&void 0!==g[4]?g[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=tt().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){console.warn(d.message)}return this.resetIntermediateTensors(),i=new Fw(this.weightMap,a,o,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,i,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return VS(e,l.tensorsMap,i)})),c=s.map((function(e){return e.id})),u=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,_.Z)(c),(0,_.Z)(u),(0,_.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&i.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=(0,O.Z)(q().mark((function e(t,n,r){var a,o=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[o.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=(0,O.Z)(q().mark((function e(t,n,r,a){var o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b,A,y=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object.keys(t),i=o.map((function(e){return y.graph.nodes[JS(e)[0]]})),s=r.map((function(e){return JS(e)[0]})),0===(c=s.map((function(e){return y.graph.nodes[e]}))).length&&(c=this._outputs),u=Ew(t,c,this.weightMap,this._initNodes),l=u.usedNodes,g=u.missingInputs,d=u.dynamicNode,p=u.syncInputs,h=[].concat((0,_.Z)(i),(0,_.Z)(this.graph.weights),(0,_.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),f=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=JS(e),r=(0,ne.Z)(n,2),a=r[0],o=[];o[r[1]]=t[e],f[a]=o})),I={},C=this.getFrozenTensorIds(f),m={};case 12:if(!(h.length>0)){e.next=18;break}return v=this.processStack(i,h,n,f,m,C,s,I,l),e.next=16,Promise.all(v);case 16:e.next=12;break;case 18:if(null!=d||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((b=c.filter((function(e){return!Mw(e)&&!VS(e.name,f,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw A="",null!=d&&(A="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(b,"] from the provided ")+"inputs [".concat(o,"]. Consider providing the following inputs: ")+"[".concat(g,"]. ").concat(A));case 24:return e.abrupt("return",f);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,o,i,s,c){for(var u=this,l=[],g=function(){var e=t.pop();n.currentContext=e.contexts;var g="";if("Enter"===e.node.op&&WS("isConstant",e.node,r,n)){var d=NS(e.node.name,n),p=(0,ne.Z)(d,1);g=p[0]}if(null==r[e.node.name]){var h=Jw(e.node,r,n,u._resourceManager);if(!g){var f=NS(e.node.name,n),I=(0,ne.Z)(f,1);g=I[0]}var C=n.currentContext;je(h)?l.push(h.then((function(l){return r[g]=l,n.currentContext=C,u.checkTensorForDisposal(g,e.node,r,n,o,i,s),u.processChildNodes(e.node,t,n,r,a,c),l}))):(r[g]=h,u.checkTensorForDisposal(g,e.node,r,n,o,i,s),u.processChildNodes(e.node,t,n,r,a,c))}else u.processChildNodes(e.node,t,n,r,a,c)};t.length>0;)g();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,o){e.children.forEach((function(e){var i=NS(e.name,n),s=(0,ne.Z)(i,1)[0];!a[s]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!VS(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!VS(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=JS(n),o=(0,ne.Z)(a,1)[0],i=t.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){var s=i.attrParams.shape.value;ge(s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e})),(function(){return"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&ge(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=JS(e),r=(0,ne.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=JS(e),r=(0,ne.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),Lw=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,U.Z)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,j.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),Pw="?tfjs-format=file",_w="model.json",Ow=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,U.Z)(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new Lw}return(0,j.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=Zs(e,this.loadOptions);else{var t=bi(e,this.loadOptions);if(0===t.length)t.push(Zs(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=ri(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new zw(rw.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=rw.Instance.transformGraph(e.modelInitializer);this.initializer=new zw(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=vi(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof Io)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=(0,O.Z)(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function Uw(e){return jw.apply(this,arguments)}function jw(){return jw=(0,O.Z)(q().mark((function e(t){var n,r,a=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(_w).concat(Pw)),r=new Ow(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}var Qw="3.15.0";function qw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(aB(e)){var o=Array.isArray(e)?[]:{};for(var i in r.add(e),e){var s=e[i],c=qw(s,t,n,r);o[i]=c}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function $w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tB;return eB(e,t)}function eB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(aB(r)){var o=Array.isArray(r)?[]:{};n.add(r);var i=function(r){var a=eB(e.map((function(e){return e[r]})),t,n);o[r]=a};for(var s in r)i(s);return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function tB(e){return null===e?null:aB(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function nB(e,t){return rB.apply(this,arguments)}function rB(){return rB=(0,O.Z)(q().mark((function e(t,n){var r,a,o,i,s,c,u;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,qw(t,n,r),a=0,o=Array.from(r.keys());case 3:if(!(a<o.length)){e.next=14;break}if(i=o[a],!je(s=r.get(i))){e.next=11;break}return e.next=9,s;case 9:c=e.sent,r.set(i,c);case 11:a++,e.next=3;break;case 14:return u=qw(t,n,r),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e)}))),rB.apply(this,arguments)}function aB(e){var t=!1;tt().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Io)&&!(e instanceof Promise)&&!t)}function oB(e){return function(e,t){return qw(e,t)}(e,iB)}function iB(e){return e instanceof Io?{value:e.clone(),recurse:!1}:aB(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var sB=function(){function e(t){if((0,U.Z)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,j.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=(0,P.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch($K){n.e($K)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),cB=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,j.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){_v(to(n.prototype),"isFull",this).call(this)&&this.expand(),_v(to(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){_v(to(n.prototype),"isFull",this).call(this)&&this.expand(),_v(to(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(sB);function uB(e){return new fB(e)}function lB(e){return new IB(e)}function gB(e,t){return new BB(e,t)}function dB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pB.FAIL;return new GB(e,t)}cB.INITIAL_CAPACITY=32;var pB,hB=function(){function e(){(0,U.Z)(this,e)}return(0,j.Z)(e,[{key:"toArray",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new kB(this,e)}},{key:"filter",value:function(e){return new AB(this,e)}},{key:"map",value:function(e){return new yB(this,e)}},{key:"mapAsync",value:function(e){return new ZB(this,e)}},{key:"serialMapAsync",value:function(e){return new ZB(this,e).serial()}},{key:"flatmap",value:function(e){return new wB(this,e)}},{key:"forEachAsync",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new bB(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tB,r=this.rowMajorBatch(e,t);return r.map((function(e){return $w(e,n)}))}},{key:"concatenate",value:function(e,t){return new BB(uB([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new vB(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new mB(this,e)}},{key:"prefetch",value:function(e){return new xB(this,e)}},{key:"shuffle",value:function(e,t){return new RB(this,e,t)}},{key:"serial",value:function(){return new CB(this)}}]),e}(),fB=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,j.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:oB(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),IB=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).nextFn=e,r}return(0,j.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),CB=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),mB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Fc(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),vB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),bB=function(e){eo(n,e);var t=io(n);function n(e,r){var a,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=o,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),AB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:Fc(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),yB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=Ro(t.value),r=this.transform(t.value),a=Ro(r),o=(0,P.Z)(n);try{for(o.s();!(i=o.n()).done;)xo(s=i.value,a)||s.dispose()}catch($K){o.e($K)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),kB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),ZB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=Ro(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=Ro(r),o=(0,P.Z)(n);try{for(o.s();!(i=o.n()).done;)xo(s=i.value,a)||s.dispose()}catch($K){o.e($K)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),SB=function(e){eo(n,e);var t=io(n);function n(){var e;return(0,U.Z)(this,n),(e=t.call(this)).outputQueue=new cB,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,j.Z)(n,[{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),wB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=Ro(t.value),r=this.transform(t.value),a=Ro(r),this.outputQueue.pushAll(r),o=(0,P.Z)(n);try{for(o.s();!(i=o.n()).done;)xo(s=i.value,a)||s.dispose()}catch($K){o.e($K)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(SB),BB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(hB);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(pB||(pB={}));var GB=function(e){eo(n,e);var t=io(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pB.FAIL;return(0,U.Z)(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return(0,j.Z)(n,[{key:"summary",value:function(){return"{".concat("TODO: fill in upstream of zip summaries","} -> Zip")}},{key:"nextState",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof hB?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,nB(this.iterators,a);case 7:if(o=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===pB.FAIL?14:e.t0===pB.SHORTEST?15:(e.t0,pB.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:o,done:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),xB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new sB(r),a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(hB),RB=function(e){eo(n,e);var t=io(n);function n(e,r,a){var o;return(0,U.Z)(this,n),(o=t.call(this,e,r)).upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=ed.alea(a||La().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return(0,j.Z)(n,[{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xB),WB=function(){function e(){(0,U.Z)(this,e),this.size=null}return(0,j.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return ge(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),VB((0,O.Z)(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,JB));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,VB((0,O.Z)(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,VB((0,O.Z)(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return Jc((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return VB((0,O.Z)(q().mark((function n(){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return Jc((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return VB((0,O.Z)(q().mark((function n(){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return VB((0,O.Z)(q().mark((function n(){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,VB((0,O.Z)(q().mark((function t(){var r;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=lB((0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",gB(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,VB((0,O.Z)(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=ed.alea(t||La().toString());return VB((0,O.Z)(q().mark((function t(){var o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.int32(),n&&(o+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,o.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,VB((0,O.Z)(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function VB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){eo(a,n);var r=io(a);function a(){var e;return(0,U.Z)(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,j.Z)(a,[{key:"iterator",value:function(){var t=(0,O.Z)(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(WB))}function NB(e){return VB((0,O.Z)(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",uB(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function XB(e){if(!aB(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return VB((0,O.Z)(q().mark((function t(){var n;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nB(e,(function(e){if(e instanceof WB)return{value:e.iterator(),recurse:!1};if(aB(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",dB(n,pB.SHORTEST));case 4:case"end":return t.stop()}}),t)}))),t)}function JB(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof Io||Ve(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Io?Td(e):$o(e)}(e),recurse:!1}:{value:null,recurse:!0}}WB.MAX_BUFFER_SIZE=1e4;var FB=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).input=e,r}return(0,j.Z)(n,[{key:"iterator",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return t=e.sent,n=t.decodeUTF8(),r=n.split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(WB),EB='"',TB=Symbol("out"),YB=Symbol("field"),HB=Symbol("quote"),MB=Symbol("quoteafterquote"),DB=Symbol("quoteinquote"),KB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).input=e,a.hasHeader=!0,a.fullColumnNames=null,a.columnNamesValidated=!1,a.columnConfigs=null,a.configuredColumnsOnly=!1,a.delimiter=",",a.delimWhitespace=!1,a.base=new FB(e),r||(r={}),a.hasHeader=!1!==r.hasHeader,a.fullColumnNames=r.columnNames,a.columnConfigs=r.columnConfigs,a.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(ge(null==r.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),a.delimWhitespace=!0,a.delimiter=" "):a.delimiter=r.delimiter?r.delimiter:",",a}return(0,j.Z)(n,[{key:"columnNames",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setColumnNames",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=7;break}throw new Error("Column names must be provided if there is no header line.");case 7:this.fullColumnNames&&t&&ge(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}));case 8:if(this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),ge(0===(r=Object.keys(n).filter((function(e){return n[e]>1}))).length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=22;break}a=0,o=Object.keys(this.columnConfigs);case 14:if(!(a<o.length)){e.next=22;break}if(i=o[a],-1!==this.fullColumnNames.indexOf(i)){e.next=19;break}throw new Error('The key "'+i+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 19:a++,e.next=14;break;case 22:this.columnNamesValidated=!0;case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maybeReadHeaderLine",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=14;break}return e.next=3,this.base.iterator();case 3:return t=e.sent,e.next=6,t.next();case 6:if(!(n=e.sent).done){e.next=9;break}throw new Error("No data was found for CSV parsing.");case 9:return r=n.value,a=this.parseRow(r,!1),e.abrupt("return",a);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iterator",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.next=5,this.base.iterator();case 5:return t=e.sent,this.hasHeader&&(t=t.skip(1)),e.abrupt("return",t.map((function(e){return n.makeDataElement(e)})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var o=this.fullColumnNames[a],i=this.columnConfigs?this.columnConfigs[o]:null;if(!this.configuredColumnsOnly||i){var s=t[a],c=null;if(""===s)if(i&&void 0!==i.default)c=i.default;else{if(i&&(i.required||i.isLabel))throw new Error("Required column ".concat(o," is empty in this line: ").concat(e));c=void 0}else{var u=Number(s);if(isNaN(u))c=i&&"bool"===i.dtype?this.getBoolean(s):s;else if(i&&i.dtype)switch(i.dtype){case"float32":default:c=u;break;case"int32":c=Math.floor(u);break;case"bool":c=this.getBoolean(s)}else c=u}i&&i.isLabel?r[o]=c:n[o]=c}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,o=TB,i=0;i<a;i++)switch(o){case TB:switch(e.charAt(i)){case EB:r=i+1,o=HB;break;case this.delimiter:if(r=i+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),o=TB;break;default:o=YB,r=i}break;case YB:if(e.charAt(i)===this.delimiter)n.push(e.substring(r,i)),o=TB,r=i+1;break;case HB:if(e.charAt(i)===EB)o=MB;break;case MB:switch(e.charAt(i)){case this.delimiter:n.push(e.substring(r,i-1)),o=TB,r=i+1;break;case EB:o=HB;break;default:o=DB}break;case DB:if(e.charAt(i)===EB)o=HB}if(o===MB?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),n}(WB),zB=function(e){eo(n,e);var t=io(n);function n(e){var r;(0,U.Z)(this,n),(r=t.call(this)).microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var a=Math.log2(r.fftSize);if(r.fftSize<0||a<4||a>14||!Number.isInteger(a))throw new Error("Invalid fftSize: it must be a power of 2 between "+"2 to 4 and 2 to 14, but got ".concat(r.fftSize));if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=!1!==e.includeSpectrogram,r.includeWaveform=!0===e.includeWaveform,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return(0,j.Z)(n,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=17;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=19;break;case 17:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=19;break}throw new Error("Mismatch in sampling rate: "+"Expected: ".concat(this.sampleRateHz,"; ")+"Actual: ".concat(this.audioContext.sampleRate));case 19:return n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),e.abrupt("return");case 27:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(o=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioData",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var o=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(o),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(fe(t));return n.set(e,n.length-e.length),$o(n,t)}}],[{key:"create",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,r,a=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},tt().get("IS_BROWSER")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return r=new n(t),e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(hB),LB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;if((0,U.Z)(this,n),(a=t.call(this)).webcamVideoElement=e,a.webcamConfig=r,a.isClosed=!0,a.resize=!1,a.needToResize())if(a.resize=!0,a.cropSize=[a.webcamConfig.resizeHeight,a.webcamConfig.resizeWidth],a.cropBoxInd=Dd([0],"int32"),a.webcamConfig.centerCrop){var o=1*a.webcamConfig.resizeWidth/a.webcamVideoElement.width,i=1*a.webcamConfig.resizeHeight/a.webcamVideoElement.height,s=(1-o)/2,c=(1-i)/2,u=s+o,l=i+c;a.cropBox=Kd([c,s,l,u],[1,4])}else a.cropBox=Kd([0,0,1,1],[1,4]);return a}return(0,j.Z)(n,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:function(){var e=(0,O.Z)(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&ge("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". ")+"Please provide 'user' or 'environment'"})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 11:if(this.stream){e.next=13;break}throw new Error("Could not obtain video from webcam.");case 13:try{this.webcamVideoElement.srcObject=this.stream}catch(n){console.log(n),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,e.abrupt("return",new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}})));case 17:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=zs(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return Jc((function(){var n,r=Kl(is(e,"float32"),0),a=(n=Xh.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return Qu(n,a.slice(1))}))}},{key:"capture",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:function(){var e=(0,O.Z)(q().mark((function e(t){var r,a,o=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},tt().get("IS_BROWSER")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=9;break}if(t=document.createElement("video"),r.resizeWidth&&r.resizeHeight){e.next=7;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 7:t.width=r.resizeWidth,t.height=r.resizeHeight;case 9:return a=new n(t,r),e.next=12,a.start();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(hB),PB=(0,j.Z)((function e(){(0,U.Z)(this,e)})),_B=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"split",value:function(e){return new OB(this,e)}}]),n}(hB),OB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.impl=new UB(e,r),a}return(0,j.Z)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_B),UB=function(e){eo(n,e);var t=io(n);function n(e,r){var a;return(0,U.Z)(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return(0,j.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=9;break}if(""!==this.carryover){e.next=6;break}return e.abrupt("return",!1);case 6:return this.outputQueue.push(this.carryover),this.carryover="",e.abrupt("return",!0);case 9:(n=t.value.split(this.separator))[0]=this.carryover+n[0],r=(0,P.Z)(n.slice(0,-1));try{for(r.s();!(a=r.n()).done;)o=a.value,this.outputQueue.push(o)}catch($K){r.e($K)}finally{r.f()}return this.carryover=n[n.length-1],e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(SB),jB=function(e){eo(n,e);var t=io(n);function n(){return(0,U.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"decodeUTF8",value:function(){return new QB(this)}}]),n}(hB),QB=function(e){eo(n,e);var t=io(n);function n(e){var r;return(0,U.Z)(this,n),(r=t.call(this)).upstream=e,r.impl=new qB(e),r}return(0,j.Z)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_B),qB=function(e){eo(r,e);var t=io(r);function r(e){var a;if((0,U.Z)(this,r),(a=t.call(this)).upstream=e,tt().get("IS_BROWSER"))a.decoder=new TextDecoder("utf-8");else{var o=n(1601).StringDecoder;a.decoder=new o("utf8")}return a}return(0,j.Z)(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=7;break}return e.abrupt("return",!1);case 7:n=t.value;case 8:return r=tt().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(SB),$B=function(e){eo(n,e);var t=io(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,U.Z)(this,n),(r=t.call(this)).file=e,r.options=a,ge(e instanceof Uint8Array||!!tt().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=a.offset||0,r.chunkSize=a.chunkSize||1048576,r}return(0,j.Z)(n,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=new Promise((function(e,t){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)e(new Uint8Array(n.file.slice(n.offset,r)));else{var a=new FileReader;a.onload=function(n){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return t(new Error("Aborted"))},a.onerror=function(e){return t(new Error(e.type))};var o=n.file.slice(n.offset,r);a.readAsArrayBuffer(o)}n.offset=r})),e.next=5,t;case 5:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(jB);function eG(e){return tG.apply(this,arguments)}function tG(){return tG=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i,s,c=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=c.length>2?c[2]:void 0,"string"===typeof t?a=t:(a=t.url,o=nG(t)),e.next=5,(r||Pa)(a,o);case 5:if(!(i=e.sent).ok){e.next=15;break}return e.t0=Uint8Array,e.next=10,i.arrayBuffer();case 10:return e.t1=e.sent,s=new e.t0(e.t1),e.abrupt("return",new $B(s,n));case 15:throw new Error(i.statusText);case 16:case"end":return e.stop()}}),e)}))),tG.apply(this,arguments)}var nG=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function rG(e){return"string"===typeof e&&"file://"===e.substr(0,7)}var aG=function(e){eo(r,e);var t=io(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,U.Z)(this,r),(n=t.call(this)).input=e,n.options=a,n}return(0,j.Z)(r,[{key:"iterator",value:function(){var e=(0,O.Z)(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rG(this.input)&&tt().get("IS_NODE")&&(t=n(7792),this.input=t.readFileSync(this.input.substr(7))),e.abrupt("return",new $B(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(PB),oG=function(e){eo(n,e);var t=io(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,U.Z)(this,n),(r=t.call(this)).url=e,r.fileOptions=a,r}return(0,j.Z)(n,[{key:"iterator",value:function(){var e=(0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rG(this.url)){e.next=4;break}return e.abrupt("return",new aG(this.url,this.fileOptions).iterator());case 4:return e.abrupt("return",eG(this.url,this.fileOptions));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(PB);function iG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new KB(new oG(e),t)}function sG(e){var t=lB(e);return VB((0,O.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))}function cG(e){return VB((0,O.Z)(q().mark((function t(){var n;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",lB((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))}function uG(e,t){return lG.apply(this,arguments)}function lG(){return(lG=(0,O.Z)(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LB.create(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gG(e){return dG.apply(this,arguments)}function dG(){return(dG=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zB.create(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pG="3.15.0";function hG(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&ge("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var fG=$d,IG=function(e){eo(n,e);var t=io(n);function n(){var e;return(0,U.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new $((0,ao.Z)(e),Vc()),e}return(0,j.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,tt().get("IS_NODE")&&pa("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Je(n[0])){var a=n.map((function(e){return _a(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?sf(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Oa(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return os(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return Vc().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=La(),t(),r=La()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){hG([e],"where");var t=this.readSync(e.dataId);return fG(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return _v(to(n.prototype),"epsilon",this).call(this)}}]),n}(ee);IG.nextDataId=0;function CG(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(hG(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var c=i,u=c.data.get(s.dataId).values,l=fe(s.shape),g=n||s.dtype,d=Ge(g,l),p=0;p<l;++p)d[p]=t(u[p],o);return c.makeTensorInfo(s.shape,g,d)}}function mG(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(hG(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var c=i,u=c.data.get(s.dataId).values,l=n||s.dtype,g=t(u,l,o);return c.makeTensorInfo(s.shape,l,g)}}Lc("cpu",(function(){return new IG}),1);var vG=CG(rn,(function(e){return e>=0?e:Math.exp(e)-1})),bG={kernelName:rn,backendName:"cpu",kernelFunc:vG};function AG(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var yG={kernelName:An,backendName:"cpu",kernelFunc:AG};function kG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;hG([a],"leakyRelu");for(var i=fe(a.shape),s=n.data.get(a.dataId).values,c=Be("float32",i),u=0;u<s.length;u++)c[u]=s[u]<0?o*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",c)}var ZG={kernelName:Bn,backendName:"cpu",kernelFunc:kG};function SG(e){return function(t,n,r,a,o){var i=Fs(t,n),s=i.length,c=Me(i),u=Be(o,fe(i)),l=t.length,g=n.length,d=Me(t),p=Me(n),h=Xs(t,i),f=Xs(n,i);if(h.length+f.length===0)for(var I=0;I<u.length;++I)u[I]=e(r[I%r.length],a[I%a.length]);else for(var C=function(t){var n=Ue(t,s,c),o=n.slice(-l);h.forEach((function(e){return o[e]=0}));var i=Oe(o,l,d),I=n.slice(-g);f.forEach((function(e){return I[e]=0}));var C=Oe(I,g,p);u[t]=e(r[i],a[C])},m=0;m<u.length;++m)C(m);return[u,i]}}var wG=SG((function(e,t){return e<0?t*e:e}));function BG(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;hG([r,a],"prelu");var o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=wG(r.shape,a.shape,o,i,"float32"),c=(0,ne.Z)(s,2),u=c[0],l=c[1];return n.makeTensorInfo(l,"float32",u)}var GG={kernelName:lr,backendName:"cpu",kernelFunc:BG},xG=CG(fr,(function(e){return Math.max(0,e)})),RG={kernelName:fr,backendName:"cpu",kernelFunc:xG},WG=CG(Ar,(function(e){return Math.min(Math.max(0,e),6)})),VG={kernelName:Ar,backendName:"cpu",kernelFunc:WG};function NG(e){return function(t,n,r){for(var a=Be(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}var XG=NG((function(e){return 1/(1+Math.exp(-e))})),JG=CG(Vr,(function(e){return 1/(1+Math.exp(-e))})),FG={kernelName:Vr,backendName:"cpu",kernelFunc:JG};function EG(e,t,n,r,a){if("linear"===n)return AG({inputs:{x:t},backend:e});if("relu"===n)return xG({inputs:{x:t},backend:e});if("elu"===n)return vG({inputs:{x:t},backend:e});if("relu6"===n)return WG({inputs:{x:t},backend:e});if("prelu"===n)return BG({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return kG({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return JG({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function TG(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var YG={kernelName:Vt,backendName:"cpu",kernelFunc:TG};function HG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=HG(e,t,"float32"),a=HG(e,t,"float32");return TG({inputs:{real:r,imag:a},backend:e})}var o=Le(fe(t),n);return e.makeTensorInfo(t,n,o)}function MG(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var DG={kernelName:pr,backendName:"cpu",kernelFunc:MG};function KG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return AG({inputs:{x:a},backend:n});var i=HG(n,a.shape,a.dtype),s=KG({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),c=TG({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}if("complex64"===a.dtype){var u=MG({inputs:{input:a},backend:n}),l=KG({inputs:{x:u},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(u),l}if(!We(a.dtype,o)){var g=AG({inputs:{x:a},backend:n});return{dataId:g.dataId,shape:g.shape,dtype:o}}if("int32"===o){var d=n.data.get(a.dataId).values,p=Int32Array.from(d);return n.makeTensorInfo(a.shape,"int32",p)}if("bool"===o){var h=n.data.get(a.dataId).values,f=za([0],a.dtype),I=SG((function(e,t){return e!==t?1:0}))(a.shape,[],h,f,"bool"),C=(0,ne.Z)(I,2),m=C[0],v=C[1];return n.makeTensorInfo(v,"bool",m)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(o))}var zG={kernelName:xt,backendName:"cpu",kernelFunc:KG};function LG(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,i=a.a,s=a.b,c=o;hG([i,s],e);var u=c.data.get(i.dataId).values,l=c.data.get(s.dataId).values,g="string"===i.dtype?Yf(u):u,d="string"===i.dtype?Yf(l):l,p=r||i.dtype,h=t(i.shape,s.shape,g,d,p),f=(0,ne.Z)(h,2),I=f[0],C=f[1];return c.makeTensorInfo(C,p,I)}:function(e){var a=e.inputs,o=e.backend,i=a.a,s=a.b,c=o;if("complex64"===i.dtype||"complex64"===s.dtype){var u=KG({inputs:{x:i},backend:c,attrs:{dtype:"complex64"}}),l=c.data.get(u.dataId),g=l.complexTensorInfos.real,d=l.complexTensorInfos.imag,p=c.data.get(g.dataId).values,h=c.data.get(d.dataId).values,f=KG({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),I=c.data.get(f.dataId),C=I.complexTensorInfos.real,m=I.complexTensorInfos.imag,v=c.data.get(C.dataId).values,b=c.data.get(m.dataId).values,A=n(i.shape,s.shape,p,h,v,b),y=(0,ne.Z)(A,3),k=y[0],Z=y[1],S=y[2],w=c.makeTensorInfo(S,"float32",k),B=c.makeTensorInfo(S,"float32",Z),G=TG({inputs:{real:w,imag:B},backend:c});return c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(f),c.disposeIntermediateTensorInfo(w),c.disposeIntermediateTensorInfo(B),G}var x=c.data.get(i.dataId).values,R=c.data.get(s.dataId).values,W=r||i.dtype,V=t(i.shape,s.shape,x,R,W),N=(0,ne.Z)(V,2),X=N[0],J=N[1];return c.makeTensorInfo(J,W,X)}}function PG(e){return function(t,n,r,a,o,i){var s=Fs(t,n),c=fe(s),u=s.length,l=Me(s),g=Be("float32",c),d=Be("float32",c),p=Xs(t,s),h=Xs(n,s),f=sf(r,a),I=sf(o,i),C=t.length,m=Me(t),v=n.length,b=Me(n);if(p.length+h.length===0)for(var A=0;A<g.length;A++){var y=A%f.length,k=A%I.length,Z=e(f[2*y],f[2*y+1],I[2*k],I[2*k+1]);g[A]=Z.real,d[A]=Z.imag}else for(var S=function(t){var n=Ue(t,u,l),r=n.slice(-C);p.forEach((function(e){return r[e]=0}));var a=Oe(r,C,m),o=n.slice(-v);h.forEach((function(e){return o[e]=0}));var i=Oe(o,v,b),s=e(f[2*a],f[2*a+1],I[2*i],I[2*i+1]);g[t]=s.real,d[t]=s.imag},w=0;w<g.length;w++)S(w);return[g,d,s]}}var _G=SG((function(e,t){return e+t})),OG=PG((function(e,t,n,r){return{real:e+n,imag:t+r}})),UG=LG(ut,_G,OG),jG={kernelName:ut,backendName:"cpu",kernelFunc:UG};function QG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=fe(a.shape),s=Ze(o,i),c=fe(s);ge(i===c,(function(){return"The new shape (".concat(s,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var u=n.data.get(a.dataId);if(null!=u.complexTensorInfos){var l=u.complexTensorInfos.real,g=u.complexTensorInfos.imag;l.shape=s,g.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var qG={kernelName:Ir,backendName:"cpu",kernelFunc:QG};function $G(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;hG([a,o],"matMul");var c=a.shape.length,u=o.shape.length,l=i?a.shape[c-2]:a.shape[c-1],g=s?o.shape[u-1]:o.shape[u-2],d=i?a.shape[c-1]:a.shape[c-2],p=s?o.shape[u-2]:o.shape[u-1],h=a.shape.slice(0,-2),f=o.shape.slice(0,-2),I=fe(h),C=fe(f),m=Fs(a.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,p]);ge(l===g,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(g,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(o.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")}));for(var v=s?[C,p,g]:[C,g,p],b=QG({inputs:{x:a},backend:n,attrs:{shape:i?[I,l,d]:[I,d,l]}}),A=QG({inputs:{x:o},backend:n,attrs:{shape:v}}),y=i?b.shape[1]:b.shape[2],k=i?b.shape[2]:b.shape[1],Z=s?A.shape[1]:A.shape[2],S=Math.max(I,C),w=n.data.get(b.dataId).values,B=n.data.get(A.dataId).values,G=Me(b.shape),x=Me(A.shape),R=i?[G[0],1,G[1]]:[G[0],G[1],1],W=(0,ne.Z)(R,3),V=W[0],N=W[1],X=W[2],J=s?[1,x[1],x[0]]:[x[1],1,x[0]],F=(0,ne.Z)(J,3),E=F[0],T=F[1],Y=F[2],H=k*Z,M=os([S,k,Z],b.dtype),D=M.values,K=n.blockSize,z=0;z<S;z++)for(var L=0;L<k;L+=K)for(var P=0;P<Z;P+=K)for(var _=0;_<y;_+=K)for(var O=Math.min(L+K,k),U=Math.min(P+K,Z),j=Math.min(_+K,y),Q=L;Q<O;Q++)for(var q=P;q<U;q++){for(var $=0,ee=_;ee<j;ee++){var te=Math.min(z,I-1)*V,re=Math.min(z,C-1)*Y;$+=w[te+Q*N+ee*X]*B[ee*E+q*T+re]}D[z*H+(Q*Z+q)]+=$}return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(A),n.makeTensorInfo(m,M.dtype,M.values)}var ex={kernelName:Zt,backendName:"cpu",kernelFunc:$G};var tx={kernelName:la,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,c=a.b,u=a.bias,l=a.preluActivationWeights,g=i.transposeA,d=i.transposeB,p=i.activation,h=i.leakyreluAlpha,f=[];t=$G({inputs:{a:s,b:c},attrs:{transposeA:g,transposeB:d},backend:o}),u&&(n=UG({inputs:{a:t,b:u},backend:o}),f.push(t),t=n),p&&(r=EG(o,t,p,l,h),f.push(t),t=r);for(var I=0,C=f;I<C.length;I++){var m=C[I];o.disposeIntermediateTensorInfo(m)}return t}};function nx(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var rx={kernelName:it,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;hG(t,"abs");var r=new Float32Array(fe(t.shape));return r=nx(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},ax=CG(st,(function(e){return Math.acos(e)})),ox={kernelName:st,backendName:"cpu",kernelFunc:ax},ix=CG(ct,(function(e){return Math.acosh(e)})),sx={kernelName:ct,backendName:"cpu",kernelFunc:ix};var cx={kernelName:lt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;hG(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=os(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var c=a[s],u=0;u<i.length;u++)i[u]+=c[u];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function ux(e,t,n,r,a){for(var o=t.length,i=fe(t),s=Me(t),c=Me(a),u=Be(n,fe(a)),l=0;l<i;++l){for(var g=Ue(l,o,s),d=new Array(g.length),p=0;p<d.length;p++)d[p]=g[r[p]];u[Oe(d,o,c)]=e[l]}return u}function lx(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;hG(a,"transpose");for(var i=a.shape.length,s=new Array(i),c=0;c<s.length;c++)s[c]=a.shape[o[c]];var u=ux(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}var gx={kernelName:na,backendName:"cpu",kernelFunc:lx};var dx={kernelName:gt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;hG(a,"all");var s=Se(o,a.shape),c=s,u=vg(c,a.shape.length),l=a;null!=u&&(l=lx({inputs:{x:a},backend:n,attrs:{perm:u}}),c=Ag(c.length,a.shape.length)),mg("all",c,l.shape.length);for(var g=Ig(l.shape,c),d=(0,ne.Z)(g,2),p=d[0],h=fe(d[1]),f=Le(fe(p),l.dtype),I=n.data.get(l.dataId).values,C=0;C<f.length;++C){for(var m=C*h,v=I[m],b=0;b<h;++b){var A=I[m+b];v=v&&A}f[C]=v}null!=u&&n.disposeIntermediateTensorInfo(l);var y=n.makeTensorInfo(p,l.dtype,f);if(i){var k=QG({inputs:{x:y},backend:n,attrs:{shape:Cg(p,s)}});return n.disposeIntermediateTensorInfo(y),k}return y}};var px={kernelName:dt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;hG(a,"any");var s=Se(o,a.shape),c=s,u=vg(c,a.shape.length),l=a;null!=u&&(l=lx({inputs:{x:a},backend:n,attrs:{perm:u}}),c=Ag(c.length,a.shape.length)),mg("any",c,l.shape.length);for(var g=Ig(l.shape,c),d=(0,ne.Z)(g,2),p=d[0],h=fe(d[1]),f=Le(fe(p),l.dtype),I=n.data.get(l.dataId).values,C=0;C<f.length;++C){for(var m=C*h,v=I[m],b=0;b<h;++b){var A=I[m+b];v=v||A}f[C]=v}null!=u&&n.disposeIntermediateTensorInfo(l);var y=n.makeTensorInfo(p,l.dtype,f);if(i){var k=QG({inputs:{x:y},backend:n,attrs:{shape:Cg(p,s)}});return n.disposeIntermediateTensorInfo(y),k}return y}};var hx={kernelName:pt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;hG(a,"argMax");var i=Se(o,a.shape),s=vg(i,a.shape.length),c=a,u=[];null!=s&&(c=lx({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(c),i=Ag(i.length,c.shape.length)),mg("argMax",i=[i[0]],c.shape.length);for(var l=Ig(c.shape,i),g=(0,ne.Z)(l,2),d=g[0],p=g[1],h=Le(fe(d),"int32"),f=fe(p),I=n.data.get(c.dataId).values,C=0;C<h.length;++C){for(var m=C*f,v=I[m],b=0,A=0;A<f;++A){var y=I[m+A];y>v&&(v=y,b=A)}h[C]=b}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",h)}};var fx={kernelName:ht,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;hG(a,"argMin");var i=Se(o,a.shape),s=vg(i,a.shape.length),c=a,u=[];null!=s&&(c=lx({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(c),i=Ag(i.length,c.shape.length)),mg("argMin",i=[i[0]],c.shape.length);for(var l=Ig(c.shape,i),g=(0,ne.Z)(l,2),d=g[0],p=g[1],h=Le(fe(d),"int32"),f=fe(p),I=n.data.get(c.dataId).values,C=0;C<h.length;++C){for(var m=C*f,v=I[m],b=0,A=0;A<f;++A){var y=I[m+A];y<v&&(v=y,b=A)}h[C]=b}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",h)}},Ix=CG(ft,(function(e){return Math.asin(e)})),Cx={kernelName:ft,backendName:"cpu",kernelFunc:Ix},mx=CG(It,(function(e){return Math.asinh(e)})),vx={kernelName:It,backendName:"cpu",kernelFunc:mx},bx=CG(Ct,(function(e){return Math.atan(e)})),Ax={kernelName:Ct,backendName:"cpu",kernelFunc:bx},yx=SG((function(e,t){return Math.atan2(e,t)})),kx=LG(vt,yx),Zx={kernelName:vt,backendName:"cpu",kernelFunc:kx},Sx=CG(mt,(function(e){return Math.atanh(e)})),wx={kernelName:mt,backendName:"cpu",kernelFunc:Sx};function Bx(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,c=a.dilationHeight,u=a.dilationWidth,l=a.effectiveFilterHeight,g=a.effectiveFilterWidth,d=a.padInfo.top,p=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=os(a.outShape,n),I=f.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3],m=a.outShape[2]*a.outShape[3],v=a.outShape[3],b=0;b<a.batchSize;++b)for(var A=b*C,y=b*r[0],k=0;k<a.inChannels;++k)for(var Z=0;Z<a.outHeight;++Z)for(var S=Z*i-d,w=Math.max(0,S),B=Math.min(a.inHeight,l+S),G=A+Z*m,x=0;x<a.outWidth;++x){for(var R=x*s-p,W=Math.max(0,R),V=Math.min(a.inWidth,g+R),N=h,X=0,J=0,F=w;F<B;F+=c){for(var E=y+F*r[1],T=W;T<V;T+=u){var Y=e[E+T*r[2]+k];"max"===o&&Y>N?N=Y:"avg"===o&&(X+=Y,J++)}if(isNaN(N))break}I[G+x*v+k]="avg"===o?X/J:N}return f}function Gx(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=os(r.outShape,"int32"),s=r.strideHeight,c=r.strideWidth,u=r.dilationHeight,l=r.dilationWidth,g=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,f=os(t,n,e),I=0;I<r.batchSize;++I)for(var C=0;C<r.inChannels;++C)for(var m=0;m<r.outHeight;++m){for(var v=m*s-p,b=v;b<0;)b+=u;for(var A=Math.min(r.inHeight,g+v),y=0;y<r.outWidth;++y){for(var k=y*c-h,Z=k;Z<0;)Z+=l;for(var S=Math.min(r.inWidth,d+k),w=Number.NEGATIVE_INFINITY,B=-1,G=b;G<A;G+=u)for(var x=G-v,R=Z;R<S;R+=l){var W=R-k,V=f.get(I,G,R,C);V>w&&(w=V,B=a?o?((I*r.inHeight+G)*r.inWidth+R)*r.inChannels+C:(G*r.inWidth+R)*r.inChannels+C:x*d+W)}i.set(B,I,m,y,C)}}return i}function xx(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,c=a.strideWidth,u=a.dilationDepth,l=a.dilationHeight,g=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,f=a.padInfo.front,I=a.padInfo.top,C=a.padInfo.left,m="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=os(a.outShape,n),b=v.values,A=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],y=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],Z=a.outShape[4],S=0;S<a.batchSize;++S)for(var w=S*A,B=S*r[0],G=0;G<a.inChannels;++G)for(var x=0;x<a.outDepth;++x){for(var R=x*i-f,W=R;W<0;)W+=u;for(var V=Math.min(a.inDepth,d+R),N=w+x*y,X=0;X<a.outHeight;++X){for(var J=X*s-I,F=J;F<0;)F+=l;for(var E=Math.min(a.inHeight,p+J),T=N+X*k,Y=0;Y<a.outWidth;++Y){for(var H=Y*c-C,M=H;M<0;)M+=g;for(var D=Math.min(a.inWidth,h+H),K=T+Y*Z,z=m,L=0,P=0,_=W;_<V;_+=u){for(var O=B+_*r[1],U=F;U<E;U+=l){for(var j=O+U*r[2],Q=M;Q<D;Q+=g){var q=e[j+Q*r[3]+G];if("max"===o&&q>z?z=q:"avg"===o&&(L+=q,P++),isNaN(z))break}if(isNaN(z))break}if(isNaN(z))break}b[K+G]="avg"===o?L/P:z}}}return v}var Rx={kernelName:bt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;hG(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,c=r.dimRoundingMode;ge(Ou(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var u,l=Fu(a.shape,o,i,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&Ce(l.inShape,l.outShape))u=AG({inputs:{x:a},backend:n});else{var g=n.data.get(a.dataId).values,d=Me(a.shape),p=Bx(g,a.shape,a.dtype,d,l,"avg");u=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return u}};var Wx={kernelName:yt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,c=r.dimRoundingMode,u=r.dataFormat;hG(a,"avgPool3d");var l=Eu(a.shape,o,i,1,s,c,u),g=xx(n.data.get(a.dataId).values,a.shape,a.dtype,Me(a.shape),l,"avg");return n.makeTensorInfo(g.shape,"float32",g.values)}};var Vx={kernelName:kt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,c=r.pad,u=r.dimRoundingMode;hG([a,o],"avgPool3DGrad");for(var l=Eu(o.shape,i,s,1,c,u),g=l.strideDepth,d=l.strideHeight,p=l.strideWidth,h=l.filterDepth,f=l.filterHeight,I=l.filterWidth,C=l.dilationDepth,m=l.dilationHeight,v=l.dilationWidth,b=l.effectiveFilterDepth,A=l.effectiveFilterHeight,y=l.effectiveFilterWidth,k=b-1-l.padInfo.front,Z=y-1-l.padInfo.left,S=A-1-l.padInfo.top,w=os(o.shape,"float32"),B=1/(h*f*I),G=n.bufferSync(a),x=0;x<l.batchSize;++x)for(var R=0;R<l.inChannels;++R)for(var W=0;W<l.inDepth;++W)for(var V=0;V<l.inHeight;++V)for(var N=0;N<l.inWidth;++N){for(var X=W-k,J=V-S,F=N-Z,E=0,T=0;T<b;T+=C){var Y=(X+T)/g;if(!(Y<0||Y>=l.outDepth||Math.floor(Y)!==Y))for(var H=0;H<A;H+=m){var M=(J+H)/d;if(!(M<0||M>=l.outHeight||Math.floor(M)!==M))for(var D=0;D<y;D+=v){var K=(F+D)/p;if(!(K<0||K>=l.outWidth||Math.floor(K)!==K))E+=G.get(x,Y,M,K,R)}}}w.set(E*B,x,W,V,N,R)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Nx={kernelName:At,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;hG([a,o],"avgPoolGrad");for(var s=r.filterSize,c=r.strides,u=r.pad,l=Fu(i.shape,s,c,1,u),g=l.strideHeight,d=l.strideWidth,p=l.filterHeight,h=l.filterWidth,f=l.dilationHeight,I=l.dilationWidth,C=l.effectiveFilterHeight,m=l.effectiveFilterWidth,v=m-1-l.padInfo.left,b=C-1-l.padInfo.top,A=os(i.shape,"float32"),y=1/(p*h),k=n.data.get(a.dataId).values,Z=os(a.shape,"float32",k),S=0;S<l.batchSize;++S)for(var w=0;w<l.inChannels;++w)for(var B=0;B<l.inHeight;++B)for(var G=0;G<l.inWidth;++G){for(var x=B-b,R=G-v,W=0,V=0;V<C;V+=f){var N=(x+V)/g;if(!(N<0||N>=l.outHeight||Math.floor(N)!==N))for(var X=0;X<m;X+=I){var J=(R+X)/d;if(!(J<0||J>=l.outWidth||Math.floor(J)!==J))W+=Z.get(S,N,J,w)}}A.set(W*y,S,B,G,w)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};var Xx={kernelName:In,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,c=t.variance;ge(s.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),ge(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),ge(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),hG([a,s,c,o,i],"batchNorm");var u=r.varianceEpsilon;null==u&&(u=.001);for(var l=n.data.get(a.dataId).values,g=n.data.get(s.dataId).values,d=n.data.get(c.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),f=new Float32Array(l.length),I=h.length,C=p.length,m=d.length,v=g.length,b=0,A=0,y=0,k=0,Z=0;Z<l.length;++Z)f[Z]=h[b++]+(l[Z]-g[A++])*p[y++]/Math.sqrt(d[k++]+u),b>=I&&(b=0),A>=v&&(A=0),y>=C&&(y=0),k>=m&&(k=0);return n.makeTensorInfo(a.shape,a.dtype,f)}};function Jx(e,t,n,r,a){var o=sc(r,t,n),i=fe(n),s=Me(r);if(o){var c=cc(t,s);return"string"===a?e.slice(c,c+i):e.subarray(c,c+i)}for(var u=os(r,a,"string"===a?Yf(e):e),l=os(n,a),g=0;g<l.size;++g){var d=l.indexToLoc(g),p=d.map((function(e,n){return e+t[n]}));l.set.apply(l,[u.get.apply(u,(0,_.Z)(p))].concat((0,_.Z)(d)))}return"string"===a?Hf(l.values):l.values}function Fx(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.size;hG(a,"slice");var s=uc(a,o,i),c=(0,ne.Z)(s,2),u=c[0],l=c[1];Us(a,u,l);var g=Jx(n.data.get(a.dataId).values,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,g)}var Ex={kernelName:Gr,backendName:"cpu",kernelFunc:Fx};var Tx={kernelName:St,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;hG([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),c=_h(a.shape,o,s),u=Oh(c.length,o.length),l=Uh(a.shape,o,s),g=jh(i,o.length),d=Qh(l,i,o.length),p=QG({inputs:{x:a},backend:n,attrs:{shape:c}}),h=lx({inputs:{x:p},backend:n,attrs:{perm:u}}),f=QG({inputs:{x:h},backend:n,attrs:{shape:l}}),I=Fx({inputs:{x:f},backend:n,attrs:{begin:g,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),I}};function Yx(e,t,n,r,a){for(var o=fe(r),i=Le(a,n),s=0;s<e.length;s++){var c=e[s];if(c<0)throw new Error("Input x must be non-negative!");c>=a||(i[c]+=o>0?t[s]:1)}return i}function Hx(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=os([a,n],t.dtype),s=0;s<a;s++)for(var c=0;c<o;c++){var u=e.get(s,c);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?i.set(1,s,u):t.size>0?i.set(i.get(s,u)+t.get(s,c),s,u):i.set(i.get(s,u)+1,s,u))}return i}var Mx={kernelName:wt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=Yx(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}};var Dx={kernelName:Gt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=Fs(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Kx=NG((function(e){return Math.ceil(e)})),zx=mG(Rt,Kx),Lx={kernelName:Rt,backendName:"cpu",kernelFunc:zx},Px=CG(Wt,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),_x={kernelName:Wt,backendName:"cpu",kernelFunc:Px},Ox={kernelName:Nt,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(fe(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,u=0;u<s.length;u++){var l=s[u],g=c[u];r[u]=Math.hypot(l,g)}return n.makeOutput(r,t.shape,"float32")}};function Ux(e,t,n,r){var a=Ge(n,fe(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=fe(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?Yf(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var c=s*t[1]+i,u=0;u<e.shape[1];++u)a[c+u]=r[o++];i+=e.shape[1]}))}return a}function jx(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var Qx={kernelName:kn,backendName:"cpu",kernelFunc:jx};function qx(e){var t=e.inputs,n=e.backend,r=Se(e.attrs.axis,t[0].shape)[0],a=Kh(t.map((function(e){return e.shape})),r);if(0===fe(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return fe(e.shape)>0}));if(1===o.length)return AG({inputs:{x:o[0]},backend:n});if(Dh(o.map((function(e){return e.shape})),r),"complex64"===o[0].dtype){var i=o.map((function(e){return MG({inputs:{input:e},backend:n})})),s=o.map((function(e){return jx({inputs:{input:e},backend:n})})),c=qx({inputs:i,backend:n,attrs:{axis:r}}),u=qx({inputs:s,backend:n,attrs:{axis:r}}),l=TG({inputs:{real:c,imag:u},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),l}var g=o.map((function(e){var t=fe(e.shape.slice(r));return QG({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),d=g.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=Kh(g.map((function(e){return e.shape})),1);var p=1===g[0].shape[0],h=Ux(d,a,t[0].dtype,p),f=Kh(o.map((function(e){return e.shape})),r),I=n.makeTensorInfo(f,t[0].dtype,h);return g.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}var $x={kernelName:Xt,backendName:"cpu",kernelFunc:qx};function eR(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,c=r.dataFormat,u=r.dilations,l=r.dimRoundingMode;hG([a,o],"conv2d");for(var g=Uu(c),d=Tu(a.shape,o.shape,i,u,s,l,!1,g),p=d.filterHeight,h=d.filterWidth,f=d.dilationHeight,I=d.dilationWidth,C=d.padInfo.left,m=d.padInfo.top,v="channelsLast"===d.dataFormat,b=new po(d.outShape,a.dtype),A=Me(a.shape),y=Me(o.shape),k=A[0],Z=v?A[1]:A[2],S=v?A[2]:1,w=v?1:A[1],B=b.strides[0],G=v?b.strides[1]:b.strides[2],x=v?b.strides[2]:1,R=v?1:b.strides[1],W=n.data.get(a.dataId).values,V=n.data.get(o.dataId).values,N=b.values,X=0;X<d.batchSize;++X)for(var J=X*k,F=X*B,E=0;E<d.outHeight;++E)for(var T=F+E*G,Y=E*d.strideHeight-m,H=0;H<p;++H){var M=Y+H*f;if(!(M<0||M>=d.inHeight))for(var D=H*y[0],K=J+M*Z,z=0;z<d.outWidth;++z)for(var L=T+z*x,P=z*d.strideWidth-C,_=0;_<h;++_){var O=P+_*I;if(!(O<0||O>=d.inWidth))for(var U=K+O*S,j=D+_*y[1],Q=0;Q<d.inChannels;++Q){for(var q=W[U+Q*w],$=0;$<d.outChannels;++$)N[L+$*R]+=q*V[j+$];j+=d.outChannels}}}return n.makeTensorInfo(b.shape,b.dtype,N)}var tR={kernelName:Jt,backendName:"cpu",kernelFunc:eR};var nR={kernelName:Ft,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,c=r.dataFormat,u=r.dimRoundingMode,l=r.filterShape;hG([a,o],"conv2dBackpropFilter");for(var g=Uu(c),d=Tu(a.shape,l,i,1,s,u,!1,g),p=d.strideHeight,h=d.strideWidth,f=d.filterHeight,I=d.filterWidth,C="channelsLast"===d.dataFormat,m=new po(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,A=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,k=new po(a.shape,a.dtype,A),Z=new po(o.shape,o.dtype,y),S=0;S<f;++S)for(var w=Math.max(0,Math.ceil((b-S)/p)),B=Math.min(d.outHeight,(d.inHeight+b-S)/p),G=0;G<I;++G)for(var x=Math.max(0,Math.ceil((v-G)/h)),R=Math.min(d.outWidth,(d.inWidth+v-G)/h),W=0;W<d.inChannels;++W)for(var V=0;V<d.outChannels;++V){for(var N=0,X=0;X<d.batchSize;++X)for(var J=w;J<B;++J)for(var F=S+J*p-b,E=x;E<R;++E){var T=G+E*h-v;N+=C?k.get(X,F,T,W)*Z.get(X,J,E,V):k.get(X,W,F,T)*Z.get(X,V,J,E)}m.set(N,S,G,W,V)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var rR={kernelName:Et,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,c=r.pad,u=r.dataFormat,l=r.dimRoundingMode;hG([a,o],"conv2dBackpropInput");var g=Me(o.shape),d=Me(a.shape),p=Uu(u),h=Tu(i,o.shape,s,1,c,l,!1,p),f=new po(h.inShape,"float32"),I=f.values,C=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,v=(0,ne.Z)(g,3),b=v[0],A=v[1],y=v[2],k=h.batchSize,Z=h.filterHeight,S=h.filterWidth,w=h.inChannels,B=h.inHeight,G=h.inWidth,x=h.outChannels,R=h.outHeight,W=h.outWidth,V=h.strideHeight,N=h.strideWidth;p=h.dataFormat;for(var X=Z-1-h.padInfo.top,J=S-1-h.padInfo.left,F="channelsLast"===p,E=f.strides[0],T=F?f.strides[1]:f.strides[2],Y=F?f.strides[2]:1,H=F?1:f.strides[1],M=d[0],D=F?d[1]:d[2],K=F?d[2]:1,z=F?1:d[1],L=0;L<k;++L)for(var P=0;P<w;++P)for(var _=0;_<B;++_)for(var O=_-X,U=Math.max(0,Math.ceil(O/V)),j=Math.min(R,(Z+O)/V),Q=0;Q<G;++Q){for(var q=Q-J,$=Math.max(0,Math.ceil(q/N)),ee=Math.min(W,(S+q)/N),te=0,re=U;re<j;++re)for(var ae=re*V-O,oe=$;oe<ee;++oe)for(var ie=M*L+D*re+K*oe,se=b*(Z-1-ae)+A*(S-1-(oe*N-q))+y*P,ce=0;ce<x;++ce){te+=C[ie+z*ce]*m[se+ce]}I[E*L+T*_+Y*Q+H*P]=te}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};var aR={kernelName:Tt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,c=r.dilations;hG([a,o],"conv3d");for(var u=Yu(a.shape,o.shape,i,c,s),l=u.filterDepth,g=u.filterHeight,d=u.filterWidth,p=u.dilationDepth,h=u.dilationHeight,f=u.dilationWidth,I=u.padInfo,C=I.front,m=I.left,v=I.top,b=new po(u.outShape,a.dtype),A=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,k=b.values,Z=Me(a.shape),S=Me(o.shape),w=0;w<u.batchSize;++w)for(var B=w*Z[0],G=w*b.strides[0],x=0;x<u.outDepth;++x)for(var R=G+x*b.strides[1],W=x*u.strideDepth-C,V=0;V<l;++V){var N=W+V*p;if(!(N<0||N>=u.inDepth))for(var X=V*S[0],J=B+N*Z[1],F=0;F<u.outHeight;++F)for(var E=R+F*b.strides[2],T=F*u.strideHeight-v,Y=0;Y<g;++Y){var H=T+Y*h;if(!(H<0||H>=u.inHeight))for(var M=X+Y*S[1],D=J+H*Z[2],K=0;K<u.outWidth;++K)for(var z=E+K*u.outChannels,L=K*u.strideWidth-m,P=0;P<d;++P){var _=L+P*f;if(!(_<0||_>=u.inWidth))for(var O=M+P*S[2],U=D+_*u.inChannels,j=O,Q=0;Q<u.inChannels;++Q){for(var q=A[U+Q],$=0;$<u.outChannels;++$)k[z+$]+=q*y[j+$];j+=u.outChannels}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var oR={kernelName:Yt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,c=r.filterShape;hG([a,o],"conv3dBackpropFilterV2");for(var u=Me(a.shape),l=Me(o.shape),g=Yu(a.shape,c,i,1,s),d=g.strideDepth,p=g.strideHeight,h=g.strideWidth,f=g.filterDepth,I=g.filterHeight,C=g.filterWidth,m=new po(g.filterShape,"float32"),v=m.values,b=(0,ne.Z)(m.strides,4),A=b[0],y=b[1],k=b[2],Z=b[3],S=n.data.get(o.dataId).values,w=(0,ne.Z)(l,4),B=w[0],G=w[1],x=w[2],R=w[3],W=n.data.get(a.dataId).values,V=(0,ne.Z)(u,4),N=V[0],X=V[1],J=V[2],F=V[3],E=g.padInfo.front,T=g.padInfo.left,Y=g.padInfo.top,H=0;H<f;++H)for(var M=Math.max(0,Math.ceil((E-H)/d)),D=Math.min(g.outDepth,(g.inDepth+E-H)/d),K=H*A,z=0;z<I;++z)for(var L=Math.max(0,Math.ceil((Y-z)/p)),P=Math.min(g.outHeight,(g.inHeight+Y-z)/p),_=z*y+K,O=0;O<C;++O)for(var U=Math.max(0,Math.ceil((T-O)/h)),j=Math.min(g.outWidth,(g.inWidth+T-O)/h),Q=O*k+_,q=0;q<g.inChannels;++q)for(var $=q*Z+Q,ee=0;ee<g.outChannels;++ee){for(var te=0,re=0;re<g.batchSize;++re)for(var ae=re*N,oe=re*B,ie=M;ie<D;++ie)for(var se=(H+ie*d-E)*X+ae,ce=ie*G+oe,ue=L;ue<P;++ue)for(var le=(z+ue*p-Y)*J+se,ge=ue*x+ce,de=U;de<j;++de){var pe=de*R+ge;te+=W[(O+de*h-T)*F+le+q]*S[pe+ee]}v[$+ee]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var iR={kernelName:Ht,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,c=r.inputShape;hG([a],"conv3dBackpropInputV2");for(var u=Me(a.shape),l=Me(o.shape),g=Yu(c,o.shape,s,1,i),d=new po(g.inShape,"float32"),p=d.values,h=(0,ne.Z)(d.strides,4),f=h[0],I=h[1],C=h[2],m=h[3],v=n.data.get(a.dataId).values,b=(0,ne.Z)(u,4),A=b[0],y=b[1],k=b[2],Z=b[3],S=n.data.get(o.dataId).values,w=(0,ne.Z)(l,4),B=w[0],G=w[1],x=w[2],R=w[3],W=g.batchSize,V=g.filterDepth,N=g.filterHeight,X=g.filterWidth,J=g.inChannels,F=g.inDepth,E=g.inHeight,T=g.inWidth,Y=g.outChannels,H=g.outDepth,M=g.outHeight,D=g.outWidth,K=g.strideDepth,z=g.strideHeight,L=g.strideWidth,P=V-1-g.padInfo.front,_=N-1-g.padInfo.top,O=X-1-g.padInfo.left,U=0;U<W;++U)for(var j=0;j<J;++j)for(var Q=0;Q<F;++Q)for(var q=Q-P,$=Math.max(0,Math.ceil(q/K)),ee=Math.min(H,(V+q)/K),te=0;te<E;++te)for(var re=te-_,ae=Math.max(0,Math.ceil(re/z)),oe=Math.min(M,(N+re)/z),ie=0;ie<T;++ie){for(var se=ie-O,ce=Math.max(0,Math.ceil(se/L)),ue=Math.min(D,(X+se)/L),le=0,ge=$;ge<ee;++ge)for(var de=ge*K-q,pe=ae;pe<oe;++pe)for(var he=pe*z-re,fe=ce;fe<ue;++fe)for(var Ie=A*U+y*ge+k*pe+Z*fe,Ce=B*(V-1-de)+G*(N-1-he)+x*(X-1-(fe*L-se))+R*j,me=0;me<Y;++me){le+=v[Ie+me]*S[Ce+me]}p[f*U+I*Q+C*te+m*ie+j]=le}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},sR=CG(Mt,(function(e){return Math.cos(e)})),cR={kernelName:Mt,backendName:"cpu",kernelFunc:sR},uR=CG(Dt,(function(e){return Math.cosh(e)})),lR={kernelName:Dt,backendName:"cpu",kernelFunc:uR};var gR={kernelName:Lt,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,c=r.method,u=r.extrapolationValue,l=(0,ne.Z)(a.shape,4),g=l[0],d=l[1],p=l[2],h=l[3],f=o.shape[0],I=(0,ne.Z)(s,2),C=I[0],m=I[1],v=os([f,C,m,h],"float32"),b=n.data.get(o.dataId).values,A=n.data.get(i.dataId).values,y=n.data.get(a.dataId).values,k=Me(a.shape),Z=Me(v.shape),S=0;S<f;S++){var w=4*S,B=b[w],G=b[w+1],x=b[w+2],R=b[w+3],W=A[S];if(!(W>=g))for(var V=C>1?(x-B)*(d-1)/(C-1):0,N=m>1?(R-G)*(p-1)/(m-1):0,X=0;X<C;X++){var J=C>1?B*(d-1)+X*V:.5*(B+x)*(d-1);if(J<0||J>d-1)for(var F=0;F<m;F++)for(var E=0;E<h;E++){var T=E+F*Z[2]+X*Z[1]+S*Z[0];v.values[T]=u}else if("bilinear"===c)for(var Y=Math.floor(J),H=Math.ceil(J),M=J-Y,D=0;D<m;D++){var K=m>1?G*(p-1)+D*N:.5*(G+R)*(p-1);if(K<0||K>p-1)for(var z=0;z<h;z++){var L=z+D*Z[2]+X*Z[1]+S*Z[0];v.values[L]=u}else for(var P=Math.floor(K),_=Math.ceil(K),O=K-P,U=0;U<h;U++){var j=U+P*k[2]+Y*k[1]+W*k[0],Q=y[j],q=y[j=U+_*k[2]+Y*k[1]+W*k[0]],$=y[j=U+P*k[2]+H*k[1]+W*k[0]],ee=Q+(q-Q)*O,te=$+(y[j=U+_*k[2]+H*k[1]+W*k[0]]-$)*O;j=U+D*Z[2]+X*Z[1]+S*Z[0],v.values[j]=ee+(te-ee)*M}}else for(var re=0;re<m;++re){var ae=m>1?G*(p-1)+re*N:.5*(G+R)*(p-1);if(ae<0||ae>p-1)for(var oe=0;oe<h;oe++){var ie=oe+re*Z[2]+X*Z[1]+S*Z[0];v.values[ie]=u}else for(var se=Math.round(ae),ce=Math.round(J),ue=0;ue<h;ue++){var le=ue+se*k[2]+ce*k[1]+W*k[0],ge=ue+re*Z[2]+X*Z[1]+S*Z[0];v.values[ge]=y[le]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var dR={kernelName:Kt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;hG(a,"cumprod");var c=vg([o],a.shape.length),u=a;null!=c&&(u=lx({inputs:{x:a},backend:n,attrs:{perm:c}}));var l=Ag(1,a.shape.length)[0];if(l!==u.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(u.shape.length-1," but got axis=").concat(l));for(var g=So(u.dtype,"int32"),d=ze(fe(u.shape),g),p=n.data.get(u.dataId).values,h=u.shape[u.shape.length-1],f=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},I=0;I<p.length;I+=h)for(var C=0;C<h;C++){var m=f(I,C);if(0===C)d[m]=i?1:p[m];else{var v=f(I,C-1);d[m]=i?p[v]*d[v]:p[m]*d[v]}}var b=n.makeTensorInfo(u.shape,g,d);if(null!=c){var A=lx({inputs:{x:b},backend:n,attrs:{perm:bg(c)}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),A}return b}};var pR={kernelName:zt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;hG(a,"cumsum");var c=vg([o],a.shape.length),u=a;null!=c&&(u=lx({inputs:{x:a},backend:n,attrs:{perm:c}}));var l=Ag(1,a.shape.length)[0];if(l!==u.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(u.shape.length-1," but got axis=").concat(l));for(var g=So(u.dtype,"int32"),d=Le(fe(u.shape),g),p=n.data.get(u.dataId).values,h=u.shape[u.shape.length-1],f=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},I=0;I<p.length;I+=h)for(var C=0;C<h;C++){var m=f(I,C);if(0===C)d[m]=i?0:p[m];else{var v=f(I,C-1);d[m]=i?p[v]+d[v]:p[m]+d[v]}}var b=n.makeTensorInfo(u.shape,g,d);if(null!=c){var A=lx({inputs:{x:b},backend:n,attrs:{perm:bg(c)}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),A}return b}};var hR={kernelName:Pt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var c=Yx(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}if(2===a.shape.length){var u=Hx(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var fR={kernelName:_t,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;ge("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)}));for(var s=a.shape[0],c=a.shape[1],u=a.shape[2],l=a.shape[3],g=c*o,d=u*o,p=l/(o*o),h=n.data.get(a.dataId).values,f=new Float32Array(s*g*d*p),I=0,C=0;C<s;++C)for(var m=0;m<g;++m)for(var v=Math.floor(m/o),b=m%o,A=0;A<d;++A)for(var y=Math.floor(A/o),k=(b*o+A%o)*p,Z=0;Z<p;++Z){var S=Z+k+l*(y+u*(v+c*C));f[I++]=h[S]}return n.makeTensorInfo([s,g,d,p],a.dtype,f)}};function IR(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,c=r.dilations,u=r.dimRoundingMode;hG([a,o],"depthwiseConv2DNative");var l=Me(a.shape),g=Me(o.shape),d=c;null==d&&(d=[1,1]),ge(Ou(i,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(d,"'")}));for(var p=Tu(a.shape,o.shape,i,d,s,u,!0),h=p.filterHeight,f=p.filterWidth,I=p.dilationHeight,C=p.dilationWidth,m=p.padInfo,v=m.left,b=m.top,A=p.outChannels/p.inChannels,y=new po(p.outShape,a.dtype),k=n.data.get(a.dataId).values,Z=n.data.get(o.dataId).values,S=y.values,w=0;w<p.batchSize;++w)for(var B=w*l[0],G=w*y.strides[0],x=0;x<p.outHeight;++x)for(var R=G+x*y.strides[1],W=x*p.strideHeight-b,V=0;V<h;++V){var N=W+V*I;if(!(N<0||N>=p.inHeight))for(var X=V*g[0],J=B+N*l[1],F=0;F<p.outWidth;++F)for(var E=R+F*y.strides[2],T=F*p.strideWidth-v,Y=0;Y<f;++Y){var H=T+Y*C;if(!(H<0||H>=p.inWidth))for(var M=X+Y*g[1],D=J+H*p.inChannels,K=E,z=M,L=0;L<p.inChannels;++L){for(var P=k[D+L],_=0;_<A;++_)S[K+_]+=P*Z[z+_];K+=A,z+=A}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var CR={kernelName:Ot,backendName:"cpu",kernelFunc:IR};var mR={kernelName:Ut,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=r.filterShape;hG([a,o],"depthwiseConv2dNativeBackpropFilter");for(var g=Tu(a.shape,l,i,s,c,u,!0),d=g.strideHeight,p=g.strideWidth,h=g.filterHeight,f=g.filterWidth,I=new po(g.filterShape,"float32"),C=g.padInfo.left,m=g.padInfo.top,v=g.outChannels/g.inChannels,b=n.data.get(a.dataId).values,A=new po(a.shape,a.dtype,b),y=n.data.get(o.dataId).values,k=new po(o.shape,o.dtype,y),Z=0;Z<h;++Z)for(var S=Math.max(0,Math.ceil((m-Z)/d)),w=Math.min(g.outHeight,(g.inHeight+m-Z)/d),B=0;B<f;++B)for(var G=Math.max(0,Math.ceil((C-B)/p)),x=Math.min(g.outWidth,(g.inWidth+C-B)/p),R=0;R<g.outChannels;++R){for(var W=Math.trunc(R/v),V=R%v,N=0,X=0;X<g.batchSize;++X)for(var J=S;J<w;++J)for(var F=Z+J*d-m,E=G;E<x;++E){var T=B+E*p-C;N+=A.get(X,F,T,W)*k.get(X,J,E,R)}I.set(N,Z,B,W,V)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};var vR={kernelName:jt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=r.inputShape;hG([a,o],"depthwiseConv2DNativeBackpropInput");for(var g=Me(a.shape),d=Me(o.shape),p=Tu(l,o.shape,i,s,c,u,!0),h=new po(p.inShape,"float32"),f=h.values,I=(0,ne.Z)(h.strides,3),C=I[0],m=I[1],v=I[2],b=n.data.get(a.dataId).values,A=(0,ne.Z)(g,3),y=A[0],k=A[1],Z=A[2],S=n.data.get(o.dataId).values,w=(0,ne.Z)(d,3),B=w[0],G=w[1],x=w[2],R=p.batchSize,W=p.filterHeight,V=p.filterWidth,N=p.inChannels,X=p.inHeight,J=p.inWidth,F=p.outChannels,E=p.outHeight,T=p.outWidth,Y=p.strideHeight,H=p.strideWidth,M=W-1-p.padInfo.top,D=V-1-p.padInfo.left,K=F/N,z=0;z<R;++z)for(var L=0;L<N;++L)for(var P=0;P<X;++P)for(var _=P-M,O=Math.max(0,Math.ceil(_/Y)),U=Math.min(E,(W+_)/Y),j=0;j<J;++j){for(var Q=j-D,q=Math.max(0,Math.ceil(Q/H)),$=Math.min(T,(V+Q)/H),ee=0,te=O;te<U;++te)for(var re=te*Y-_,ae=q;ae<$;++ae)for(var oe=y*z+k*te+Z*ae,ie=B*(W-1-re)+G*(V-1-(ae*H-Q))+x*L,se=0;se<K;++se){ee+=b[oe+(L*K+se)]*S[ie+se]}f[C*z+m*P+v*j+L]=ee}return n.makeTensorInfo(h.shape,h.dtype,h.values)}};var bR={kernelName:Qt,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=fe(r.shape),o=n.data.get(r.dataId).values,i=os([a,a],r.dtype),s=i.values,c=0;c<o.length;c++)s[c*a+c]=o[c];var u=[].concat((0,_.Z)(r.shape),(0,_.Z)(r.shape));return n.makeTensorInfo(u,i.dtype,i.values)}},AR={kernelName:qt,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,c=r.dilations,u=n,l=u.data.get(a.dataId).values,g=a.shape.length,d=u.data.get(o.dataId).values,p=o.shape.length,h=Ju(a.shape,o.shape,i,s,"NHWC",c),f=h.batchSize,I=h.inHeight,C=h.inWidth,m=h.inChannels,v=h.outHeight,b=h.outWidth,A=h.padInfo,y=h.strideHeight,k=h.strideWidth,Z=h.filterHeight,S=h.filterWidth,w=h.dilationHeight,B=h.dilationWidth,G=h.outShape,x=fe(G),R=G.length,W=Ge(a.dtype,x),V=0;V<f;++V)for(var N=0;N<v;++N)for(var X=N*y-A.top,J=0;J<b;++J)for(var F=J*k-A.left,E=0;E<m;++E){for(var T=Number.MIN_SAFE_INTEGER,Y=0;Y<Z;++Y){var H=X+Y*w;if(H>=0&&H<I)for(var M=0;M<S;++M){var D=F+M*B;if(D>=0&&D<C){var K=Oe([V,H,D,E],g,Me(a.shape)),z=Oe([Y,M,E],p,Me(o.shape)),L=l[K]+d[z];L>T&&(T=L)}}}W[Oe([V,N,J,E],R,Me(G))]=T}return{dataId:u.write(za(W,a.dtype),G,a.dtype),shape:G,dtype:a.dtype}}},yR={kernelName:en,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,c=r.pad,u=r.dilations,l=n,g=Ke(a.shape,l.data.get(a.dataId).values),d=Ke(o.shape,l.data.get(o.dataId).values),p=Ju(a.shape,o.shape,s,c,"NHWC",u),h=p.batchSize,f=p.inHeight,I=p.inWidth,C=p.inChannels,m=p.outHeight,v=p.outWidth,b=p.padInfo,A=p.strideHeight,y=p.strideWidth,k=p.filterHeight,Z=p.filterWidth,S=p.dilationHeight,w=p.dilationWidth,B=p.outShape;ge(i.rank===B.length,(function(){return"Error in ".concat(en,", dy ")+"must have the same rank as output ".concat(B.length,", but got ")+"".concat(i.rank)}));for(var G=Ke(B,l.data.get(i.dataId).values),x=Pe(o.shape,o.dtype),R=0;R<h;++R)for(var W=0;W<m;++W)for(var V=W*A-b.top,N=0;N<v;++N)for(var X=N*y-b.left,J=0;J<C;++J){for(var F=Number.MIN_SAFE_INTEGER,E=0,T=0,Y=0;Y<k;++Y){var H=V+Y*S;if(H>=0&&H<f)for(var M=0;M<Z;++M){var D=X+M*w;if(D>=0&&D<I){var K=g[R][H][D][J]+d[Y][M][J];K>F&&(F=K,E=Y,T=M)}}}x[E][T][J]+=G[R][W][N][J]}return{dataId:l.write(za(x,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},kR={kernelName:$t,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,c=r.pad,u=r.dilations,l=n,g=Ke(a.shape,l.data.get(a.dataId).values),d=Ke(o.shape,l.data.get(o.dataId).values),p=Ju(a.shape,o.shape,s,c,"NHWC",u),h=p.batchSize,f=p.inHeight,I=p.inWidth,C=p.inChannels,m=p.outHeight,v=p.outWidth,b=p.padInfo,A=p.strideHeight,y=p.strideWidth,k=p.filterHeight,Z=p.filterWidth,S=p.dilationHeight,w=p.dilationWidth,B=p.outShape;ge(i.rank===B.length,(function(){return"Error in ".concat($t,", dy ")+"must have the same rank as output ".concat(B.length,", but got ")+"".concat(i.rank)}));for(var G=Ke(B,l.data.get(i.dataId).values),x=Pe(a.shape,a.dtype),R=0;R<h;++R)for(var W=0;W<m;++W)for(var V=W*A-b.top,N=0;N<v;++N)for(var X=N*y-b.left,J=0;J<C;++J){for(var F=Number.MIN_SAFE_INTEGER,E=V<0?0:V,T=X<0?0:X,Y=0;Y<k;++Y){var H=V+Y*S;if(H>=0&&H<f)for(var M=0;M<Z;++M){var D=X+M*w;if(D>=0&&D<I){var K=g[R][H][D][J]+d[Y][M][J];K>F&&(F=K,E=H,T=D)}}}x[R][E][T][J]+=G[R][W][N][J]}return{dataId:l.write(za(x,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},ZR=SG((function(e,t){return e*t})),SR=PG((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),wR=LG(qn,ZR,SR),BR={kernelName:qn,backendName:"cpu",kernelFunc:wR};function GR(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims;hG(o,"sum");var c=(t="bool"===o.dtype?KG({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):AG({inputs:{x:o},backend:r})).shape.length,u=Se(i,t.shape),l=vg(u,c),g=u,d=t;null!=l&&(d=lx({inputs:{x:t},backend:r,attrs:{perm:l}}),g=Ag(g.length,c)),mg("sum",g,d.shape.length);for(var p=Ig(d.shape,g),h=(0,ne.Z)(p,2),f=h[0],I=h[1],C=HG(r,f,So(d.dtype,"int32")),m=fe(I),v=r.data.get(C.dataId).values,b=r.data.get(d.dataId).values,A=0;A<v.length;++A){for(var y=A*m,k=0,Z=0;Z<m;++Z)k+=b[y+Z];v[A]=k}if(s){var S=C;C=QG({inputs:{x:C},backend:r,attrs:{shape:Cg(C.shape,u)}}),r.disposeIntermediateTensorInfo(S)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(d),C}var xR={kernelName:Jr,backendName:"cpu",kernelFunc:GR};var RR={kernelName:nn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=Cf(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;vf(o.length,s,r);for(var c=bf(i,s),u=c.path,l=c.steps,g=l.length,d=null,p=o.length,h=[],f=0;f<g;++f){var I,C=(0,P.Z)(l[f]);try{for(C.s();!(I=C.n()).done;){var m=I.value,v=mf(p,s[m]),b=v.permutationIndices,A=v.expandDims,y=void 0;Af(b)?y=r[m]:(y=lx({inputs:{x:r[m]},backend:n,attrs:{perm:b}}),h.push(y));for(var k=y.shape.slice(),Z=0;Z<A.length;++Z)k.splice(A[Z],0,1);Ce(y.shape,k)||(y=QG({inputs:{x:y},backend:n,attrs:{shape:k}}),h.push(y)),null===d?d=y:(d=wR({inputs:{a:y,b:d},backend:n}),h.push(d))}}catch($K){C.e($K)}finally{C.f()}f<g-1&&(u[f]>=0&&(d=GR({inputs:{x:d},backend:n,attrs:{axis:u[f]-(o.length-p),keepDims:!1}}),h.push(d)),p--)}for(var S=0,w=h;S<w.length;S++){var B=w[S];B!==d&&n.disposeIntermediateTensorInfo(B)}return d}};var WR={kernelName:an,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;hG([r,a],"eluGrad");for(var o=new Float32Array(fe(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,c=0;c<i.length;++c){var u=i[c];o[c]=u>=1?s[c]:s[c]*(u+1)}return n.makeTensorInfo(a.shape,"float32",o)}},VR=SG((function(e,t){return e===t?1:0})),NR=LG(sn,VR,null,"bool"),XR={kernelName:sn,backendName:"cpu",kernelFunc:NR},JR=ef,FR=tf,ER=nf,TR=rf,YR=af,HR=of,MR=CG(on,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+JR*n);return t*(1-((((HR*r+YR)*r+TR)*r+ER)*r+FR)*r*Math.exp(-n*n))})),DR={kernelName:on,backendName:"cpu",kernelFunc:MR},KR=NG((function(e){return Math.exp(e)})),zR=mG(cn,KR,"float32"),LR={kernelName:cn,backendName:"cpu",kernelFunc:zR};function PR(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),c=o;return o<0&&(ge(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),c=i+o+1),s.splice(c,0,1),QG({inputs:{x:a},backend:n,attrs:{shape:s}})}var _R={kernelName:un,backendName:"cpu",kernelFunc:PR},OR=NG((function(e){return Math.expm1(e)})),UR=mG(ln,OR),jR={kernelName:ln,backendName:"cpu",kernelFunc:UR},QR=SG((function(e,t){return e/t})),qR=LG(tn,QR),$R={kernelName:tn,backendName:"cpu",kernelFunc:qR},eW=SG((function(e,t){return e-t})),tW=PG((function(e,t,n,r){return{real:e-n,imag:t-r}})),nW=LG(jr,eW,tW),rW={kernelName:jr,backendName:"cpu",kernelFunc:nW};function aW(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,c=i.complexTensorInfos.imag,u=[a,o],l=fe(u),g=Be("float32",l),d=Be("float32",l),p=0;p<a;p++){for(var h=Fx({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,o]}}),f=Fx({inputs:{x:c},backend:n,attrs:{begin:[p,0],size:[1,o]}}),I=TG({inputs:{real:h,imag:f},backend:n}),C=oW(I,t,n),m=sf(C.real,C.imag),v=0;v<o;v++){var b=gf(m,v);g[p*o+v]=b.real,d[p*o+v]=b.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(I)}var A=n.makeTensorInfo(u,"float32",g),y=n.makeTensorInfo(u,"float32",d),k=TG({inputs:{real:A,imag:y},backend:n});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(y),k}function oW(e,t,n){var r=fe(e.shape),a=n.data.get(e.dataId),o=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((C=r)&C-1)){var s=iW(o,i,r,t,n),c=[e.shape[0],e.shape[1]];if(t){var u=n.makeTensorInfo(c,"float32",s.real),l=n.makeTensorInfo(c,"float32",s.imag),g=n.makeTensorInfo([],"float32",Ka(r,"float32")),d=AG({inputs:{x:g},backend:n}),p=$R.kernelFunc({inputs:{a:u,b:g},backend:n}),h=$R.kernelFunc({inputs:{a:l,b:d},backend:n}),f=n.data.get(p.dataId).values,I=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:f,imag:I}}return s}var C,m=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var c=hf(a*s,t,n),u=gf(e,s);o+=u.real*c.real-u.imag*c.imag,i+=u.real*c.imag+u.imag*c.real}n&&(o/=t,i/=t),df(r,o,i,a)}return r}(sf(o,i),r,t);return cf(m)}function iW(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=sf(e,t),i=n/2,s=uf(o),c=s.real,u=s.imag,l=[c.length],g=a.makeTensorInfo(l,"float32",c),d=a.makeTensorInfo(l,"float32",u),p=TG({inputs:{real:g,imag:d},backend:a}),h=lf(o),f=h.real,I=h.imag,C=[f.length],m=a.makeTensorInfo(C,"float32",f),v=a.makeTensorInfo(C,"float32",I),b=TG({inputs:{real:m,imag:v},backend:a}),A=iW(c,u,i,r,a),y=A.real,k=A.imag,Z=[y.length],S=a.makeTensorInfo(Z,"float32",y),w=a.makeTensorInfo(Z,"float32",k),B=TG({inputs:{real:S,imag:w},backend:a}),G=iW(f,I,i,r,a),x=G.real,R=G.imag,W=[x.length],V=a.makeTensorInfo(W,"float32",x),N=a.makeTensorInfo(W,"float32",R),X=TG({inputs:{real:V,imag:N},backend:a}),J=pf(n,r),F=[J.real.length],E=a.makeTensorInfo(F,"float32",J.real),T=a.makeTensorInfo(F,"float32",J.imag),Y=TG({inputs:{real:E,imag:T},backend:a}),H=wR({inputs:{a:Y,b:X},backend:a}),M=UG({inputs:{a:B,b:H},backend:a}),D=nW({inputs:{a:B,b:H},backend:a}),K=MG({inputs:{input:M},backend:a}),z=MG({inputs:{input:D},backend:a}),L=jx({inputs:{input:M},backend:a}),P=jx({inputs:{input:D},backend:a}),_=qx({inputs:[K,z],backend:a,attrs:{axis:0}}),O=qx({inputs:[L,P],backend:a,attrs:{axis:0}}),U=a.data.get(_.dataId).values,j=a.data.get(O.dataId).values;return a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(Y),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(O),{real:U,imag:j}}var sW={kernelName:gn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=fe(r.shape),o=r.shape[r.shape.length-1],i=QG({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=aW(i,!1,n),c=QG({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}};function cW(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||Te(a),i=Ge(o,fe(r));return function(e,t,n){e.fill(t)}(i,a),t.makeTensorInfo(r,o,i)}var uW={kernelName:dn,backendName:"cpu",kernelFunc:cW};var lW={kernelName:pn,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=Be(r.dtype,fe(r.shape)),i=(0,ne.Z)(r.shape,4),s=i[0],c=i[1],u=i[2],l=i[3],g=a.data.get(r.dataId).values,d=0;d<s;d++)for(var p=d*u*c*l,h=0;h<c;h++)for(var f=h*(u*l),I=0;I<u;I++)for(var C=I*l,m=0;m<l;m++){var v=Math.round(u-I-1),b=p+f+C+m,A=g[b];if(v>=0&&v<u)A=g[p+f+v*l+m];o[b]=A}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},gW=NG((function(e){return Math.floor(e)})),dW=mG(hn,gW),pW={kernelName:hn,backendName:"cpu",kernelFunc:dW},hW=SG((function(e,t){return Math.floor(e/t)})),fW=LG(fn,hW,null,"int32"),IW={kernelName:fn,backendName:"cpu",kernelFunc:fW};var CW={kernelName:ga,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,c=r.strides,u=r.pad,l=r.dataFormat,g=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,f=eR({inputs:{x:a,filter:o},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:g,dimRoundingMode:d}});if(i){var I=f;f=UG({inputs:{a:f,b:i},backend:n}),n.disposeIntermediateTensorInfo(I)}if(p){var C=f;f=EG(n,f,p,s,h),n.disposeIntermediateTensorInfo(C)}return f}};var mW={kernelName:da,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,c=r.strides,u=r.pad,l=r.dataFormat,g=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,f=IR({inputs:{x:a,filter:o},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:g,dimRoundingMode:d}});if(i){var I=f;f=UG({inputs:{a:f,b:i},backend:n}),n.disposeIntermediateTensorInfo(I)}if(p){var C=f;f=EG(n,f,p,s,h),n.disposeIntermediateTensorInfo(C)}return f}};function vW(e,t,n,r,a,o,i,s,c){for(var u=os([r,o],n),l=0;l<r;l++){for(var g=[],d=0,p=0;p<a;p++){var h=e[l*a+p];d+=h*i[p],g.push(h)}if(d<0||d>=c/o)throw new Error("Invalid indices: ".concat(g," does not index into ").concat(s));for(var f=0;f<o;f++)u.values[l*o+f]=t.get.apply(t,(0,_.Z)(t.indexToLoc(d*o+f)))}return u}var bW={kernelName:mn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=fe(r.shape),i=a.shape,s=i[i.length-1],c=Ls(r,a),u=(0,ne.Z)(c,4),l=u[0],g=u[1],d=u[2],p=u[3];if(0===g)return n.makeTensorInfo(l,r.dtype,[]);var h=vW(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,g,s,d,p,r.shape,o);return n.makeTensorInfo(l,r.dtype,h.values)}};function AW(e,t,n){for(var r=os(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],c=t.locToIndex([i,s]);o[2]=t.values[c];var u=e.locToIndex(o);0<=u&&u<e.values.length&&(r.values[a]=e.values[u])}return r}var yW={kernelName:Cn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;hG([a,o],"gatherV2");for(var c=Se(i,a.shape)[0],u=n.data.get(o.dataId).values,l=a.shape[c],g=function(e){var t=u[e];ge(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},d=0;d<u.length;++d)g(d);var p=s;null==s&&(p=0);var h=fe(o.shape),f=Tf(a,o,c,p),I=QG({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),C=QG({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),m=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],v=n.bufferSync(C),b=AW(n.bufferSync(I),v,m);return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(f.outputShape,b.dtype,b.values)}},kW=SG((function(e,t){return e>t?1:0})),ZW=LG(vn,kW,null,"bool"),SW={kernelName:vn,backendName:"cpu",kernelFunc:ZW},wW=SG((function(e,t){return e>=t?1:0})),BW=LG(bn,wW,null,"bool"),GW={kernelName:bn,backendName:"cpu",kernelFunc:BW};var xW={kernelName:yn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=fe(r.shape),o=r.shape[r.shape.length-1],i=QG({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=aW(i,!0,n),c=QG({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}},RW=CG(Zn,(function(e){return Number.isFinite(e)?1:0}),"bool"),WW={kernelName:Zn,backendName:"cpu",kernelFunc:RW},VW=CG(Sn,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),NW={kernelName:Sn,backendName:"cpu",kernelFunc:VW},XW=CG(wn,(function(e){return Number.isNaN(e)?1:0}),"bool"),JW={kernelName:wn,backendName:"cpu",kernelFunc:XW},FW=SG((function(e,t){return e<t?1:0})),EW=LG(Gn,FW,null,"bool"),TW={kernelName:Gn,backendName:"cpu",kernelFunc:EW},YW=SG((function(e,t){return e<=t?1:0})),HW=LG(xn,YW,null,"bool"),MW={kernelName:xn,backendName:"cpu",kernelFunc:HW};function DW(e,t,n){var r=(t-e)/(n-1),a=Le(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}var KW={kernelName:Rn,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=DW(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},zW=NG((function(e){return Math.log(e)})),LW=mG(Wn,zW),PW={kernelName:Wn,backendName:"cpu",kernelFunc:LW},_W=CG(Vn,(function(e){return Math.log1p(e)})),OW={kernelName:Vn,backendName:"cpu",kernelFunc:_W},UW=SG((function(e,t){return e&&t})),jW=LG(Nn,UW,null,"bool"),QW={kernelName:Nn,backendName:"cpu",kernelFunc:jW},qW=CG(Xn,(function(e){return e?0:1}),"bool"),$W={kernelName:Xn,backendName:"cpu",kernelFunc:qW},eV=SG((function(e,t){return e||t})),tV=LG(Jn,eV,null,"bool"),nV={kernelName:Jn,backendName:"cpu",kernelFunc:tV};var rV={kernelName:En,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,c=r.beta;hG(a,"LRN");var u=a.shape[3],l=u-1,g=n.data.get(a.dataId).values,d=fe(a.shape),p=new Float32Array(d);function h(e){for(var t=e%u,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=g[n];a+=i*i}return a}for(var f=0;f<d;f++){var I=h(f),C=g[f]*Math.pow(i+s*I,-c);p[f]=C}return n.makeTensorInfo(a.shape,a.dtype,p)}};var aV={kernelName:Tn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,c=r.bias,u=r.alpha,l=r.beta;hG(i,"LRNGrad");for(var g=fe(i.shape),d=i.shape[3],p=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,I=new Float32Array(g),C=g,m=0;m<C;m++){for(var v=m%d,b=m-v+Math.max(0,v-s),A=m-v+Math.min(d,v+s+1),y=0,k=b;k<A;k++)y+=Math.pow(h[k],2);y=u*y+c;for(var Z=b;Z<A;Z++){var S=-2*u*l*h[Z]*f[m]/y;m===Z&&(S+=Math.pow(y,-l)),S*=p[m],I[Z]+=S}}return n.makeTensorInfo(i.shape,a.dtype,I)}};function oV(e,t,n,r){for(var a=Be(r,fe(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],c=0;c<t;++c){var u=e[i+c];(Number.isNaN(u)||u>s)&&(s=u)}a[o]=s}return a}function iV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=n,c=a.shape,u=c.length,l=Se(o,c),g=l,d=vg(g,u),p=s.data.get(a.dataId).values;if(null!=d){for(var h=new Array(u),f=0;f<h.length;f++)h[f]=c[d[f]];p=ux(p,c,a.dtype,d,h),g=Ag(g.length,u),c=h}hG(a,"max"),mg("max",g,u);var I=Ig(c,g),C=(0,ne.Z)(I,2),m=C[0],v=oV(p,fe(C[1]),m,a.dtype),b=s.write(v,m,a.dtype),A=m;i&&(A=Cg(m,l));return{dataId:b,shape:A,dtype:a.dtype}}var sV={kernelName:Yn,backendName:"cpu",kernelFunc:iV},cV=SG((function(e,t){return Math.max(e,t)})),uV=LG(Hn,cV),lV={kernelName:Hn,backendName:"cpu",kernelFunc:uV};var gV={kernelName:Mn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;hG(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,c=r.dimRoundingMode;ge(Ou(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var u,l=Fu(a.shape,o,i,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&Ce(l.inShape,l.outShape))u=AG({inputs:{x:a},backend:n});else{var g=n.data.get(a.dataId).values,d=Me(a.shape),p=Bx(g,a.shape,a.dtype,d,l,"max");u=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return u}};var dV={kernelName:Kn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,c=r.dimRoundingMode,u=r.dataFormat;hG(a,"maxPool3d");var l=Eu(a.shape,o,i,1,s,c,u),g=xx(n.data.get(a.dataId).values,a.shape,a.dtype,Me(a.shape),l,"max");return n.makeTensorInfo(g.shape,"float32",g.values)}};var pV={kernelName:zn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,c=r.pad,u=r.dimRoundingMode;hG([a,o],"maxPool3DGrad");for(var l=Eu(o.shape,i,s,1,c,u),g=function(e,t){for(var n=os(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,g=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,f=0;f<t.batchSize;++f)for(var I=0;I<t.inChannels;++I)for(var C=0;C<t.outDepth;++C){for(var m=C*r-d,v=m;v<0;)v+=i;for(var b=Math.min(t.inDepth,u+m),A=0;A<t.outHeight;++A){for(var y=A*a-p,k=y;k<0;)k+=s;for(var Z=Math.min(t.inHeight,l+y),S=0;S<t.outWidth;++S){for(var w=S*o-h,B=w;B<0;)B+=c;for(var G=Math.min(t.inWidth,g+w),x=Number.NEGATIVE_INFINITY,R=-1,W=v;W<b;W+=i)for(var V=W-m,N=k;N<Z;N+=s)for(var X=N-y,J=B;J<G;J+=c){var F=J-w,E=e.get(f,W,N,J,I);E>=x&&(x=E,R=V*l*g+X*l+F)}n.set(R,f,C,A,S,I)}}}return n}(n.bufferSync(o),l),d=l.strideDepth,p=l.strideHeight,h=l.strideWidth,f=l.dilationDepth,I=l.dilationHeight,C=l.dilationWidth,m=l.effectiveFilterDepth,v=l.effectiveFilterHeight,b=l.effectiveFilterWidth,A=m-1-l.padInfo.front,y=b-1-l.padInfo.left,k=v-1-l.padInfo.top,Z=os(o.shape,"float32"),S=n.bufferSync(a),w=0;w<l.batchSize;++w)for(var B=0;B<l.inChannels;++B)for(var G=0;G<l.inDepth;++G)for(var x=0;x<l.inHeight;++x)for(var R=0;R<l.inWidth;++R){for(var W=G-A,V=x-k,N=R-y,X=0,J=0;J<m;J+=f){var F=(W+J)/d;if(!(F<0||F>=l.outDepth||Math.floor(F)!==F))for(var E=0;E<v;E+=I){var T=(V+E)/p;if(!(T<0||T>=l.outHeight||Math.floor(T)!==T))for(var Y=0;Y<b;Y+=C){var H=(N+Y)/h;if(!(H<0||H>=l.outWidth||Math.floor(H)!==H)){var M=m*v*b-1-g.get(w,F,T,H,B)===J*v*b+E*b+Y?1:0;if(0!==M)X+=S.get(w,F,T,H,B)*M}}}}Z.set(X,w,G,x,R,B)}return n.makeTensorInfo(Z.shape,Z.dtype,Z.values)}};var hV={kernelName:Dn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;hG([o,t.output],"maxPoolGrad");for(var s=r.filterSize,c=r.strides,u=r.pad,l=r.dimRoundingMode,g=Fu(i.shape,s,c,1,u,l),d=n.data.get(i.dataId).values,p=os(g.outShape,i.dtype,Gx(d,i.shape,i.dtype,g).values),h=g.strideHeight,f=g.strideWidth,I=g.dilationHeight,C=g.dilationWidth,m=g.effectiveFilterHeight,v=g.effectiveFilterWidth,b=v-1-g.padInfo.left,A=m-1-g.padInfo.top,y=os(i.shape,"float32"),k=n.data.get(a.dataId).values,Z=os(a.shape,"float32",k),S=0;S<g.batchSize;++S)for(var w=0;w<g.inChannels;++w)for(var B=0;B<g.inHeight;++B)for(var G=0;G<g.inWidth;++G){for(var x=B-A,R=G-b,W=0,V=0;V<m;V+=I){var N=(x+V)/h;if(!(N<0||N>=g.outHeight||Math.floor(N)!==N))for(var X=0;X<v;X+=C){var J=(R+X)/f;if(!(J<0||J>=g.outWidth||Math.floor(J)!==J)){var F=m*v-1-p.get(S,N,J,w)===V*v+X?1:0;if(0!==F)W+=Z.get(S,N,J,w)*F}}}y.set(W,S,B,G,w)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var fV={kernelName:Ln,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,c=n.includeBatchInIndex,u=r;hG(a,"MaxPoolWithArgmax");var l=u.data.get(a.dataId).values,g=Fu(a.shape,o,i,[1,1],s),d=function(e,t,n,r,a){var o=Bx(e,0,n,Me(t),a,"max"),i=Gx(e,t,n,a,!0,r);return[o.values,i.values]}(l,a.shape,a.dtype,c,g),p=(0,ne.Z)(d,2),h=p[0],f=p[1],I=u.write(h,g.outShape,a.dtype),C=u.write(f,g.outShape,a.dtype);return[{dataId:I,shape:g.outShape,dtype:a.dtype},{dataId:C,shape:g.outShape,dtype:"int32"}]}};var IV={kernelName:Pn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=Se(o,a.shape),c=fe(Ig(a.shape,s)[1]),u=[],l=n.makeTensorInfo([],"float32",new Float32Array([c]));u.push(l);var g=KG({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});u.push(g);var d=qR({inputs:{a:g,b:l},backend:n});u.push(d);var p=GR({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:i}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}};var CV={kernelName:_n,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;hG(a,"min");var s=Se(o,a.shape),c=s,u=vg(c,a.shape.length),l=a;null!=u&&(l=lx({inputs:{x:a},backend:n,attrs:{perm:u}}),c=Ag(c.length,a.shape.length)),mg("min",c,l.shape.length);for(var g=Ig(l.shape,c),d=(0,ne.Z)(g,2),p=d[0],h=fe(d[1]),f=Le(fe(p),l.dtype),I=n.data.get(l.dataId).values,C=0;C<f.length;++C){for(var m=C*h,v=I[m],b=0;b<h;++b){var A=I[m+b];(Number.isNaN(A)||A<v)&&(v=A)}f[C]=v}null!=u&&n.disposeIntermediateTensorInfo(l);var y=n.makeTensorInfo(p,l.dtype,f);if(i){var k=QG({inputs:{x:y},backend:n,attrs:{shape:Cg(p,s)}});return n.disposeIntermediateTensorInfo(y),k}return y}},mV=SG((function(e,t){return Math.min(e,t)})),vV=LG(On,mV),bV={kernelName:On,backendName:"cpu",kernelFunc:vV};var AV={kernelName:Un,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;hG(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),u=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,g=n.data.get(a.dataId).values,d=a.shape.length,p=Me(a.shape),h=fe(s),f=s.length,I=Me(s),C=Be(a.dtype,h),m=0;m<h;m++){for(var v=Ue(m,f,I),b=0;b<f;b++)v[b]<c[b]?v[b]=2*c[b]-v[b]-l:v[b]>=u[b]&&(v[b]=2*(u[b]-1)-v[b]+l);v=v.map((function(e,t){return e-c[t]}));var A=Oe(v,d,p);C[m]=g[A]}return{dataId:n.write(C,s,a.dtype),shape:s,dtype:a.dtype}}},yV=SG((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),kV=LG(jn,yV),ZV={kernelName:jn,backendName:"cpu",kernelFunc:kV};function SV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));var c=Se([s],a.shape),u=iV({inputs:{x:a},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),l=Cg(u.shape,c),g=QG({inputs:{x:u},backend:n,attrs:{shape:l}}),d=nW({inputs:{a:a,b:g},backend:n}),p=zR({inputs:{x:d},backend:n}),h=GR({inputs:{x:p},backend:n,attrs:{axis:c,keepDims:!1}}),f=QG({inputs:{x:h},backend:n,attrs:{shape:l}}),I=qR({inputs:{a:p,b:f},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),I}var wV={kernelName:Tr,backendName:"cpu",kernelFunc:SV};var BV={kernelName:Qn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;hG(a,"multinomial");for(var c=s?a:SV({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=c.shape[0],l=c.shape[1],g=n.data.get(c.dataId).values,d=[u,o],p=Le(fe(d),"int32"),h=0;h<u;++h){var f=h*l,I=new Float32Array(l-1);I[0]=g[f];for(var C=1;C<I.length;++C)I[C]=I[C-1]+g[f+C];for(var m=ed.alea(i.toString()),v=h*o,b=0;b<o;++b){var A=m();p[v+b]=I.length;for(var y=0;y<I.length;y++)if(A<I[y]){p[v+b]=y;break}}}return s||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(d,"int32",p)}};function GV(e,t,n){var r=Ka(-1,n);return ZR([],t,r,e,n)}var xV={kernelName:$n,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;hG(r,"neg");var a=GV(n.data.get(r.dataId).values,r.shape,r.dtype),o=(0,ne.Z)(a,2),i=o[0],s=o[1];return n.makeTensorInfo(s,r.dtype,i)}},RV=Tp;var WV={kernelName:tr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold;hG(a,"NonMaxSuppression");var u=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,g=RV(u,l,i,s,c).selectedIndices;return n.makeTensorInfo([g.length],"int32",new Int32Array(g))}},VV=Yp;var NV={kernelName:nr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.padToMaxOutputSize;hG(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,g=n.data.get(o.dataId).values,d=VV(l,g,i,s,c,u),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},XV=Hp;var JV={kernelName:rr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.softNmsSigma;hG(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,g=n.data.get(o.dataId).values,d=XV(l,g,i,s,c,u),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},FV=SG((function(e,t){return e!==t?1:0})),EV=LG(er,FV,null,"bool"),TV={kernelName:er,backendName:"cpu",kernelFunc:EV};var YV={kernelName:or,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue;hG(a,"oneHot");var c=fe(a.shape),u=new Float32Array(c*o);u.fill(s);for(var l=n.data.get(a.dataId).values,g=0;g<c;++g)l[g]>=0&&l[g]<o&&(u[g*o+l[g]]=i);return n.makeTensorInfo([].concat((0,_.Z)(a.shape),[o]),"int32",u)}};function HV(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=MG({inputs:{input:r},backend:n}),o=HV({inputs:{x:a},backend:n}),i=jx({inputs:{input:r},backend:n}),s=HV({inputs:{x:i},backend:n}),c=TG({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}return cW({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var MV={kernelName:ia,backendName:"cpu",kernelFunc:HV};var DV={kernelName:ar,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=MG({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=jx({inputs:{input:a},backend:r}),c=HV({inputs:{x:s},backend:r}),u=TG({inputs:{real:i,imag:c},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(c),u}return cW({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function KV(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return PR({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){de(a,e.shape,"All tensors passed to stack must have matching shapes"),ge(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=qx({inputs:t.map((function(e){var t=PR({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var zV={kernelName:ir,backendName:"cpu",kernelFunc:KV};var LV={kernelName:sr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;hG(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),u=n.data.get(a.dataId).values,l=fe(a.shape),g=a.shape.length,d=Me(a.shape),p=fe(s),h=s.length,f=Me(s),I=Be(a.dtype,p);0!==i&&I.fill(i);for(var C=0;C<l;C++){I[Oe(Ue(C,g,d).map((function(e,t){return e+c[t]})),h,f)]=u[C]}return{dataId:n.write(I,s,a.dtype),shape:s,dtype:a.dtype}}},PV=SG((function(e,t){return Math.pow(e,t)})),_V=LG(ur,PV),OV={kernelName:ur,backendName:"cpu",kernelFunc:_V};function UV(e,t,n,r){for(var a=Ig(e,r),o=(0,ne.Z)(a,2),i=o[0],s=o[1],c=So(t,"int32"),u=Le(fe(i),c),l=fe(s),g=0;g<u.length;++g){for(var d=g*l,p=1,h=0;h<l;++h)p*=n[d+h];u[g]=p}return{outVals:u,outShape:i,outDtype:c}}var jV={kernelName:gr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;hG(a,"prod");var s=a.shape.length,c=Se(o,a.shape),u=vg(c,s),l=c,g=a,d=[];null!=u&&(g=lx({inputs:{x:a},backend:n,attrs:{perm:u}}),d.push(g),l=Ag(l.length,s));var p=n.data.get(g.dataId).values,h=UV(g.shape,g.dtype,p,l),f=h.outVals,I=h.outShape,C=h.outDtype,m=I;return i&&(m=Cg(I,c)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(m,C,f)}};function QV(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Le(0,r);var a=Le(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}var qV={kernelName:dr,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=QV(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},$V=CG(hr,(function(e){return 1/e})),eN={kernelName:hr,backendName:"cpu",kernelFunc:$V};var tN={kernelName:vr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;hG(a,"resizeBilinear");for(var c=Me(a.shape),u=(0,ne.Z)(s,2),l=u[0],g=u[1],d=(0,ne.Z)(a.shape,4),p=d[0],h=d[1],f=d[2],I=d[3],C=n.data.get(a.dataId).values,m=new Float32Array(fe([p,l,g,I])),v=[o&&l>1?h-1:h,o&&g>1?f-1:f],b=[o&&l>1?l-1:l,o&&g>1?g-1:g],A=0,y=v[0]/b[0],k=v[1]/b[1],Z=0;Z<p;Z++)for(var S=0;S<l;S++){var w=void 0;w=i?y*(S+.5)-.5:y*S;for(var B=Math.max(0,Math.floor(w)),G=w-B,x=Math.min(h-1,Math.ceil(w)),R=Z*c[0]+B*c[1],W=Z*c[0]+x*c[1],V=0;V<g;V++){var N=void 0;N=i?k*(V+.5)-.5:k*V;for(var X=Math.max(0,Math.floor(N)),J=N-X,F=Math.min(f-1,Math.ceil(N)),E=R+X*c[2],T=W+X*c[2],Y=R+F*c[2],H=W+F*c[2],M=0;M<I;M++){var D=C[E+M],K=C[T+M],z=D+(C[Y+M]-D)*J,L=z+(K+(C[H+M]-K)*J-z)*G;m[A++]=L}}}return n.makeTensorInfo([p,l,g,I],"float32",m)}};var nN={kernelName:br,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;hG([o,a],"resizeBilinearGrad");for(var s=Me(a.shape),c=(0,ne.Z)(a.shape,4),u=c[0],l=c[1],g=c[2],d=c[3],p=(0,ne.Z)(o.shape,3),h=p[1],f=p[2],I=new Float32Array(u*l*g*d),C=[i&&h>1?l-1:l,i&&f>1?g-1:g],m=[i&&h>1?h-1:h,i&&f>1?f-1:f],v=C[0]/m[0],b=C[1]/m[1],A=n.data.get(o.dataId).values,y=0,k=0;k<u;k++)for(var Z=k*s[0],S=0;S<h;S++)for(var w=S*v,B=Math.floor(w),G=Math.min(Math.ceil(w),l-1),x=Z+B*s[1],R=Z+G*s[1],W=w-B,V=1-W,N=0;N<f;N++)for(var X=N*b,J=Math.floor(X),F=Math.min(Math.ceil(X),g-1),E=X-J,T=1-E,Y=x+J*s[2],H=x+F*s[2],M=R+J*s[2],D=R+F*s[2],K=V*T,z=V*E,L=W*T,P=W*E,_=0;_<d;_++){var O=A[y++];I[Y+_]+=O*K,I[H+_]+=O*z,I[M+_]+=O*L,I[D+_]+=O*P}return n.makeTensorInfo([u,g,l,d],"float32",I)}};var rN={kernelName:Cr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;hG(a,"resizeNearestNeighbor");for(var c=Me(a.shape),u=(0,ne.Z)(s,2),l=u[0],g=u[1],d=(0,ne.Z)(a.shape,4),p=d[0],h=d[1],f=d[2],I=d[3],C=n.data.get(a.dataId).values,m=new Float32Array(p*l*g*I),v=[o&&l>1?h-1:h,o&&g>1?f-1:f],b=[o&&l>1?l-1:l,o&&g>1?g-1:g],A=v[0]/b[0],y=v[1]/b[1],k=0,Z=0;Z<p;Z++)for(var S=Z*c[0],w=0;w<l;w++){var B=i?A*(w+.5):A*w,G=Math.min(h-1,o?Math.round(B):Math.floor(B));i&&(G=Math.max(0,G));for(var x=S+G*c[1],R=0;R<g;R++){var W=i?y*(R+.5):y*R,V=Math.min(f-1,o?Math.round(W):Math.floor(W));i&&(V=Math.max(0,V));for(var N=x+V*c[2],X=0;X<I;X++){var J=C[N+X];m[k++]=J}}}return n.makeTensorInfo([p,l,g,I],a.dtype,m)}};var aN={kernelName:mr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;hG([o,a],"resizeNearestNeighborGrad");for(var s=Me(a.shape),c=Me(o.shape),u=(0,ne.Z)(a.shape,4),l=u[0],g=u[1],d=u[2],p=u[3],h=(0,ne.Z)(o.shape,3),f=h[1],I=h[2],C=new Float32Array(l*g*d*p),m=n.data.get(o.dataId).values,v=[i&&f>1?g-1:g,i&&I>1?d-1:d],b=[i&&f>1?f-1:f,i&&I>1?I-1:I],A=v[0]/b[0],y=v[1]/b[1],k=1/A,Z=1/y,S=2*Math.ceil(k)+2,w=2*Math.ceil(Z)+2,B=0;B<l;B++)for(var G=B*s[0],x=0;x<g;x++)for(var R=G+x*s[1],W=Math.floor(x*k),V=Math.floor(W-S/2),N=0;N<d;N++)for(var X=R+N*s[2],J=Math.floor(N*Z),F=Math.floor(J-w/2),E=0;E<p;E++){for(var T=0,Y=0;Y<S;Y++){var H=Y+V;if(!(H<0||H>=f)){var M=G+H*c[1],D=H*A;if(x===Math.min(g-1,i?Math.round(D):Math.floor(D)))for(var K=0;K<w;K++){var z=K+F;if(!(z<0||z>=I)){var L=M+z*c[2],P=z*y;N===Math.min(d-1,i?Math.round(P):Math.floor(P))&&(T+=m[L+E])}}}}C[X+E]=T}return n.makeTensorInfo(a.shape,a.dtype,C)}};var oN={kernelName:yr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;hG(a,"reverse");var i=a.shape.length,s=Se(o,a.shape);if(0===i)return AG({inputs:{x:a},backend:n});for(var c=new po(a.shape,a.dtype),u=n.bufferSync(a),l=function(e){var t=c.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),c.set.apply(c,[u.get.apply(u,(0,_.Z)(n))].concat((0,_.Z)(t)))},g=0;g<c.size;g++)l(g);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},iN={kernelName:ua,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,c=r,u=Be(a.dtype,fe(a.shape)),l=(0,ne.Z)(a.shape,4),g=l[0],d=l[1],p=l[2],h=l[3],f=Ph(s,d,p),I=(0,ne.Z)(f,2),C=I[0],m=I[1],v=Math.sin(o),b=Math.cos(o),A=c.data.get(a.dataId).values,y=0;y<g;y++)for(var k=y*p*d*h,Z=0;Z<d;Z++)for(var S=Z*(p*h),w=0;w<p;w++)for(var B=w*h,G=0;G<h;G++){var x=[g,Z,w,G],R=x[2],W=x[1],V=(R-C)*b-(W-m)*v,N=(R-C)*v+(W-m)*b;V=Math.round(V+C),N=Math.round(N+m);var X=i;if("number"!==typeof i&&(X=3===G?255:i[G]),V>=0&&V<p&&N>=0&&N<d)X=A[k+N*(p*h)+V*h+G];u[k+S+B+G]=X}return{dataId:c.write(u,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},sN=CG(kr,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),cN={kernelName:kr,backendName:"cpu",kernelFunc:sN},uN=NG((function(e){return 1/Math.sqrt(e)})),lN=mG(Zr,uN),gN={kernelName:Zr,backendName:"cpu",kernelFunc:lN};function dN(e,t,n,r,a,o,i,s,c,u){var l=[r/a,a],g=e.values,d=t.values;if(0===r)return os(n,t.dtype);var p=os(l,t.dtype);p.values.fill(c);for(var h=0;h<o;h++){for(var f=[],I=0,C=0;C<i;C++){var m=g[h*i+C];f.push(m),I+=m*s[C]}if(I<0||I>=r/a)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(n));for(var v=0;v<a;v++)u?p.values[I*a+v]+=d[h*a+v]:p.values[I*a+v]=0===t.rank?d[0]:d[h*a+v]}return p}var pN={kernelName:Sr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=Os(0,a,i),c=s.sliceRank,u=s.numUpdates,l=s.sliceSize,g=s.strides,d=s.outputSize,p=dN(n.bufferSync(a),n.bufferSync(o),i,d,l,u,c,g,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}};var hN={kernelName:wr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;hG([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,l=So(a.dtype,o.dtype),g=Le(fe(a.shape),l),d=0,p=0===i||i>1||1===a.shape.length?1:fe(a.shape.slice(1)),h=0;h<s.length;h++)for(var f=0;f<p;f++)1===s[h]?g[d++]=c[h]:g[d++]=u[h];return n.makeTensorInfo(a.shape,l,g)}},fN=qh,IN=$h,CN=CG(Br,(function(e){return e>=0?IN*e:fN*(Math.exp(e)-1)})),mN={kernelName:Br,backendName:"cpu",kernelFunc:CN},vN=CG(Wr,(function(e){return e<0?-1:e>0?1:0})),bN={kernelName:Wr,backendName:"cpu",kernelFunc:vN},AN=CG(xr,(function(e){return Math.sin(e)})),yN={kernelName:xr,backendName:"cpu",kernelFunc:AN},kN=CG(Rr,(function(e){return Math.sinh(e)})),ZN={kernelName:Rr,backendName:"cpu",kernelFunc:kN},SN=Math.log(1.1920928955078125e-7)+2,wN=CG(Nr,(function(e){var t=e>-SN,n=e<SN,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),BN={kernelName:Nr,backendName:"cpu",kernelFunc:wN};var GN={kernelName:Fr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;hG([a],"spaceToBatchND");var s=fe(o),c=[[0,0]];c.push.apply(c,(0,_.Z)(i));for(var u=1+o.length;u<a.shape.length;++u)c.push([0,0]);var l=LV.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),g=_h(l.shape,o,s,!1),d=Oh(g.length,o.length,!1),p=Uh(l.shape,o,s,!1),h=QG({inputs:{x:l},backend:n,attrs:{shape:g}}),f=lx({inputs:{x:h},backend:n,attrs:{perm:d}}),I=QG({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),I}};function xN(e,t,n,r,a,o,i){var s=t[0],c=o[0],u=new Array(c),l=new Array(s),g=t[1];if(0===c){if(0!==s)throw new Error(Zf(s));return[Ge(n,0),[0,g],Ge(a,0),u,l]}for(var d=!0,p=0,h=new Array(c).fill(0),f=0;f<s;++f){var I=e[f*g];if(I<0)throw new Error(Sf(f,I));if(I>=c)throw new Error(wf(f,I,c));++h[I],d=d&&I>=p,p=I}for(var C=!0,m=0;m<c;++m){var v=0===h[m];u[m]=v,C=C&&!v,h[m]=Math.max(h[m],1),m>0&&(h[m]+=h[m-1])}if(C&&d){for(var b=e,A=r,y=0;y<s;++y)l[y]=y;return[b,[s,g],A,u,l]}for(var k=h[c-1],Z=Ge(n,k*g),S=Ge(a,k),w=new Array(c).fill(0),B=0;B<s;++B){var G=e[B*g],x=w[G],R=(0===G?0:h[G-1])+x;w[G]++;for(var W=0;W<g;++W)Z[R*g+W]=e[B*g+W];S[R]=r[B],l[B]=R}for(var V=0;V<c;++V){if(0===w[V]){var N=0===V?0:h[V-1];Z[N*g+0]=V;for(var X=1;X<g;++X)Z[N*g+X]=0;S[N]=i}}return[Z,[k,g],S,u,l]}var RN={kernelName:Yr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values[0],g=xN(s,r.shape,r.dtype,c,a.dtype,u,l),d=(0,ne.Z)(g,5),p=d[0],h=d[1],f=d[2],I=d[3],C=d[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,f),n.makeTensorInfo([I.length],"bool",new Uint8Array(I.map((function(e){return Number(e)})))),n.makeTensorInfo([C.length],r.dtype,new Int32Array(C))]}};function WN(e,t,n,r,a){for(var o=fe(r),i=t[0],s=a.length,c=[],u=1,l=-1,g=0;g<s;++g){var d=a[g];if(-1===d){if(-1!==l)throw new Error(Bf(l,g));l=g,c.push(1)}else{if(d<0)throw new Error(Gf(g,d));u*=d,c.push(d)}}if(-1!==l){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var p=Math.trunc(o/u);if(u*p!==o)throw new Error(Rf(r,c));c[l]=p}if(fe(c)!==o)throw new Error(Wf(r,c));var h=r.length,f=[];if(h>0){f[h-1]=1;for(var I=h-2;I>=0;--I)f[I]=f[I+1]*r[I+1]}var C=[];if(s>0){C[s-1]=1;for(var m=s-2;m>=0;--m)C[m]=C[m+1]*c[m+1]}for(var v=Ge(n,i*s),b=0;b<i;++b){for(var A=0,y=0;y<h;++y)A+=e[b*h+y]*f[y];for(var k=0;k<s;++k)v[b*s+k]=Math.trunc(A/C[k]),A%=C[k]}return[v,[i,s],c]}var VN={kernelName:Hr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,c=Array.from(n.data.get(o.dataId).values),u=WN(s,r.shape,r.dtype,i,c),l=(0,ne.Z)(u,3),g=l[0],d=l[1],p=l[2];return[n.makeTensorInfo(d,r.dtype,g),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};function NN(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,c=[t[0],e.length/t[0]],u=c[1],l=s>0?a[s-1]+1:0,g=l;if(g<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=g;var p=d.reduce((function(e,t){return e*t}),1),h=Ge(n,p);if(0===s)return g>0&&h.fill(i),[h,d];if(g<=0)throw new Error("segment ids must be >= 0");for(var f=0,I=1,C=0,m=a[f];;){var v=0;if(I<s){if(m===(v=a[I])){++I;continue}if(m>=v)throw new Error("segment ids are not increasing")}if(m<0||m>=g)throw new Error(Xf(m,g));m>C&&h.fill(i,C*u,m*u);for(var b=f;b<I;++b){var A=r[b];if(A<0||A>=c[0])throw new Error(Jf(b,r[b],c[0]));for(var y=0;y<u;y++)h[m*u+y]+=e[A*u+y]}if(o)for(var k=0;k<u;k++)h[m*u+k]/=I-f;if(f=I,C=m+1,m=v,++I>s)break}return C<g&&h.fill(i,C*u,g*u),[h,d]}var XN={kernelName:Mr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,u=NN(i,r.shape,r.dtype,s,c,!0),l=(0,ne.Z)(u,2),g=l[0],d=l[1];return n.makeTensorInfo(d,r.dtype,g)}};var JN={kernelName:Dr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,u=NN(i,r.shape,r.dtype,s,c),l=(0,ne.Z)(u,2),g=l[0],d=l[1];return n.makeTensorInfo(d,r.dtype,g)}};var FN={kernelName:Kr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,c=Os(0,a,s),u=c.sliceRank,l=c.numUpdates,g=c.sliceSize,d=c.strides,p=c.outputSize,h=dN(n.bufferSync(a),n.bufferSync(o),s,p,g,l,u,d,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}};var EN={kernelName:Er,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=Se(r.axis,a.shape)[0],s=kf(a,o,i),c=new Array(a.shape.length).fill(0),u=a.shape.slice();return s.map((function(e){var t=(0,_.Z)(u);t[i]=e;var r=Fx({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,r}))}},TN=NG((function(e){return Math.sqrt(e)})),YN=CG(Xr,(function(e){return Math.sqrt(e)})),HN={kernelName:Xr,backendName:"cpu",kernelFunc:YN},MN={kernelName:Lr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;hG(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var c=o[s];i[s]=c*c}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},DN=SG((function(e,t){var n=e-t;return n*n})),KN=LG(zr,DN),zN={kernelName:zr,backendName:"cpu",kernelFunc:KN},LN=CG(sa,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),PN={kernelName:sa,backendName:"cpu",kernelFunc:LN};function _N(e,t,n,r){for(var a=os(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),c=0;c<s.length;c++)s[c]=i[c]*n[c]+r[c];a.set.apply(a,[t.get.apply(t,s)].concat((0,_.Z)(i)))}return a}var ON={kernelName:Pr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,c=r.beginMask,u=r.endMask,l=r.ellipsisMask,g=r.newAxisMask,d=r.shrinkAxisMask;hG(a,"stridedSlice");var p,h=lc(a.shape,o,i,s,c,u,l,g,d),f=h.finalShapeSparse,I=h.finalShape,C=h.isIdentity,m=h.sliceDim0,v=h.isSimpleSlice,b=h.begin,A=h.end,y=h.strides;if(C)p=QG({inputs:{x:a},backend:n,attrs:{shape:I}});else if(m||v){ge(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var k=Qs(b,A,y),Z=Fx({inputs:{x:a},backend:n,attrs:{begin:b,size:k}});p=QG({inputs:{x:Z},backend:n,attrs:{shape:I}}),n.disposeIntermediateTensorInfo(Z)}else{var S=_N(f,n.bufferSync(a),y,b);p=n.makeTensorInfo(I,S.dtype,S.values)}return p}},UN=function(){function e(t,n,r,a,o,i){(0,U.Z)(this,e),this.separator=_a(t),this.nGramWidths=n,this.leftPad=_a(r),this.rightPad=_a(a),this.padWidth=o,this.preserveShort=i}return(0,j.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,s=function(s){var c=i.getPadWidth(o),u=Math.max(0,c-s),l=Math.max(0,c-(a-(s+1))),g=o-(u+l),d=t+(u>0?0:s-c),p=0;p+=u*i.leftPad.length;for(var h=0;h<g;++h)p+=e[d+h].length;p+=l*i.rightPad.length,p+=(u+l+g-1)*i.separator.length,n[r+s]=new Uint8Array(p);for(var f=n[r+s],I=0,C=function(e){return e.forEach((function(e){return f[I++]=e}))},m=0;m<u;++m)C(i.leftPad),C(i.separator);for(var v=0;v<g-1;++v)C(e[d+v]),C(i.separator);if(g>0){C(e[d+g-1]);for(var b=0;b<l;++b)C(i.separator),C(i.rightPad)}else{for(var A=0;A<l-1;++A)C(i.rightPad),C(i.separator);C(i.rightPad)}},c=0;c<a;++c)s(c)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var s=t[i]>=o;if(!(s=s&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var c=a-1,u=Ge("int32",a);if(0===r||0===a){for(var l=new Array(r),g=0;g<=c;++g)u[g]=0;return[l,u]}u[0]=0;for(var d=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),u[e]=u[e-1]+a},p=1;p<=c;++p)d(p);for(var h=new Array(u[c]),f=function(r){var a=t[r],o=u[r];if(n.nGramWidths.forEach((function(i){var s=t[r+1]-t[r],c=n.getNumNGrams(s,i);n.createNGrams(e,a,h,o,c,i),o+=c})),n.preserveShort&&o===u[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var s=i+2*n.padWidth;n.createNGrams(e,a,h,o,1,s)}},I=0;I<c;++I)f(I);return[h,u]}}]),e}();function jN(e,t,n,r,a,o,i,s){return new UN(n,r,a,o,i,s).compute(e,t)}var QN={kernelName:_r,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,c=r.padWidth,u=r.preserveShortSequences,l=t.data,g=t.dataSplits,d=jN(n.data.get(l.dataId).values,n.data.get(g.dataId).values,a,o,i,s,c,u),p=(0,ne.Z)(d,2),h=p[0],f=p[1];return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(g.shape,"int32",f)]}};function qN(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){var i=e.subarray(a,o);n&&0===i.length||r.push(i),a=o+1}}else{for(var s=t[0],c=e.indexOf(s);-1!==c;){var u=e.subarray(0,c);n&&0===u.length||r.push(u),c=(e=e.subarray(c+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function $N(e,t,n){for(var r=e.length,a=[],o=0,i=0,s=new Array(r),c=0;c<r;++c){var u=a.length;qN(e[c],t,n,a);var l=a.length-u;s[c]=l,o+=l,i=Math.max(i,l)}for(var g=Ge("int32",2*o),d=new Array(o),p=[r,i],h=0,f=0;f<r;++f)for(var I=0;I<s[f];++I)g[2*h]=f,g[2*h+1]=I,d[h]=a[h],++h;return[g,d,p]}var eX={kernelName:Or,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=$N(n.data.get(a.dataId).values,n.data.get(o.dataId).values[0],r),s=(0,ne.Z)(i,3),c=s[0],u=s[1],l=s[2],g=u.length;return[n.makeTensorInfo([g,2],"int32",c),n.makeTensorInfo([g],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};function tX(e,t){for(var n=Ge("int32",e.length),r=0;r<e.length;++r)n[r]=Da(e[r]).modulo(t).getLowBitsUnsigned();return n}var nX={kernelName:Ur,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=tX(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},rX=CG(Qr,(function(e){return Math.tan(e)})),aX={kernelName:Qr,backendName:"cpu",kernelFunc:rX},oX=CG(qr,(function(e){return Math.tanh(e)}));function iX(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=os(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),c=0;c<s.length;c++)s[c]=i[c]%e.shape[c];var u=e.locToIndex(s);a.values[o]=e.values[u]}return a}var sX={kernelName:$r,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;hG(a,"tile");var i=iX(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},cX=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function uX(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),c=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2),u=Math.max(n,Math.floor(t-o*s/a+c)),l=Math.min(r,Math.floor(t+(a-o)*s/a+c));uX(e,t,u,l)}var g=e[t],d=n,p=r;for(se(e,n,t),cX(e[r],g)>0&&se(e,n,r);d<p;){for(se(e,d,p),d++,p--;cX(e[d],g)<0;)d+=1;for(;cX(e[p],g)>0;)p-=1}0===cX(e[n],g)?se(e,n,p):se(e,p+=1,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function lX(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,c=Be(n,i*r),u=Be("int32",i*r),l=function(t){var n=t*s,o=e.subarray(n,n+s),i=new Array(o.length);o.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(uX(i,r),i=i.slice(0,r)),a&&i.sort(cX);for(var l=t*r,g=c.subarray(l,l+r),d=u.subarray(l,l+r),p=0;p<r;p++)g[p]=i[p].value,d[p]=i[p].index},g=0;g<i;g++)l(g);var d=t.slice();return d[d.length-1]=r,[os(d,n,c),os(d,"int32",u)]}var gX={kernelName:ea,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted;hG(a,"topk");var s=lX(n.data.get(a.dataId).values,a.shape,a.dtype,o,i),c=(0,ne.Z)(s,2),u=c[0],l=c[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var dX={kernelName:ta,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,i=n.interpolation,s=n.fillMode,c=n.fillValue,u=n.outputShape,l=(0,ne.Z)(a.shape,4),g=l[0],d=l[1],p=l[2],h=l[3],f=null!=u?u:[d,p],I=(0,ne.Z)(f,2),C=I[0],m=I[1],v=[g,C,m,h],b=Me(a.shape),A=b[0],y=b[1],k=b[2],Z=Be(a.dtype,fe(v));Z.fill(c);for(var S=r.data.get(a.dataId).values,w=r.data.get(o.dataId).values,B=0;B<g;++B){for(var G=1===o.shape[0]?w:w.subarray(8*B,8*B+8),x=0;x<C;++x)for(var R=0;R<m;++R)for(var W=0;W<h;++W){var V=void 0,N=G[6]*R+G[7]*x+1;if(0!==N){var X=(G[0]*R+G[1]*x+G[2])/N,J=(G[3]*R+G[4]*x+G[5])/N,F=pX(X,p,s),E=pX(J,d,s);switch(i){case"nearest":V=fX(S,d,p,A,y,k,B,E,F,W,c);break;case"bilinear":V=IX(S,d,p,A,y,k,B,E,F,W,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(i))}Z[B*A+x*y+R*k+W]=V}}return r.makeTensorInfo(v,a.dtype,Z)}return{dataId:r.write(Z,v,a.dtype),shape:a.shape,dtype:a.dtype}}};function pX(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return oe(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return oe(0,n,t-1)}(e,t);case"nearest":return function(e,t){return oe(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function hX(e,t,n,r,a,o,i,s,c,u,l){return 0<=s&&s<t&&0<=c&&c<n?e[i*r+s*a+c*o+u]:l}function fX(e,t,n,r,a,o,i,s,c,u,l){return hX(e,t,n,r,a,o,i,Math.round(s),Math.round(c),u,l)}function IX(e,t,n,r,a,o,i,s,c,u,l){var g=Math.floor(s),d=Math.floor(c),p=g+1,h=d+1;return(p-s)*((h-c)*hX(e,t,n,r,a,o,i,g,d,u,l)+(c-d)*hX(e,t,n,r,a,o,i,g,h,u,l))+(s-g)*((h-c)*hX(e,t,n,r,a,o,i,p,d,u,l)+(c-d)*hX(e,t,n,r,a,o,i,p,h,u,l))}function CX(e,t,n,r){for(var a=Se(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var c={},u=new Int32Array(n[a]),l=new po(o,r,e),g=[],d=1===o[0]&&1===o[2],p=0;p<n[a];p++){var h=void 0;if(d)h=e[p].toString();else{for(var f=[],I=0;I<o[0];I++)for(var C=0;C<o[2];C++)f.push(l.get(I,p,C));h=f.join(",")}if(void 0!==c[h])u[p]=c[h];else{var m=Object.keys(c).length;c[h]=m,u[p]=m,g.push(p)}}var v=o.slice();v[1]=Object.keys(c).length;var b=new po(v,r);g.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)b.set(l.get(n,e,r),n,t,r)}));var A=n.slice();return A[a]=v[1],{outputValues:b.values,outputShape:A,indices:u}}var mX={kernelName:ra,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;hG(o,"unique");var i=CX(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,c=i.outputShape,u=i.indices;return[r.makeTensorInfo(c,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};var vX={kernelName:aa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],c=new Array(i-1),u=0,l=0;l<i;l++)l!==o&&(c[u++]=a.shape[l]);var g=new Array(i).fill(0),d=a.shape.slice();d[o]=1;for(var p=new Array(s),h=0;h<p.length;h++){g[o]=h;var f=Fx({inputs:{x:a},backend:n,attrs:{begin:g,size:d}});p[h]=QG({inputs:{x:f},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(f)}return p}};for(var bX={kernelName:oa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;hG(a,"unsortedSegmentSum");for(var s=[],c=[],u=a.shape.length-o.shape.length,l=o,g=0;g<u;++g){var d=PR({inputs:{input:l},backend:n,attrs:{dim:g+1}});l=d,c.push(d)}for(var p=0;p<i;++p){var h=Ka(p,"int32"),f=n.makeTensorInfo([],"int32",h),I=NR({inputs:{a:f,b:l},backend:n}),C=KG({inputs:{x:I},backend:n,attrs:{dtype:"float32"}}),m=wR({inputs:{a:C,b:a},backend:n}),v=GR({inputs:{x:m},backend:n,attrs:{axis:0,keepDims:!1}});s.push(v),c.push(f),c.push(I),c.push(C),c.push(m),c.push(v)}var b=KV({inputs:s,backend:n,attrs:{axis:0}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}},AX=0,yX=[tx,rx,ox,sx,jG,cx,dx,px,hx,fx,Cx,vx,Ax,Zx,wx,Rx,Wx,Vx,Nx,ex,Xx,Tx,Mx,Dx,zG,Lx,_x,YG,Ox,$x,tR,nR,rR,aR,oR,iR,cR,lR,gR,dR,pR,hR,fR,CR,mR,vR,bR,AR,yR,kR,RR,bG,WR,XR,DR,LR,_R,jR,sW,uW,lW,pW,IW,CW,mW,bW,yW,SW,GW,yG,xW,Qx,WW,NW,JW,ZG,TW,MW,KW,PW,OW,QW,$W,nV,rV,aV,sV,lV,gV,dV,pV,hV,fV,IV,CV,bV,AV,ZV,BV,BR,xV,WV,NV,JV,TV,YV,DV,zV,LV,OV,GG,jV,qV,DG,$R,eN,RG,VG,qG,tN,nN,rN,aN,oN,iN,cN,gN,pN,hN,mN,FG,bN,yN,ZN,Ex,wV,BN,GN,RN,VN,XN,JN,FN,EN,HN,MN,zN,PN,ON,QN,eX,nX,rW,xR,aX,{kernelName:qr,backendName:"cpu",kernelFunc:oX},sX,gX,dX,gx,mX,vX,bX,MV];AX<yX.length;AX++){ba(yX[AX])}var kX,ZX,SX,wX={},BX={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function GX(e,t){if(!(e in wX)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete wX[e]}),!1),1===e)return n.getContext("webgl",BX)||n.getContext("experimental-webgl",BX);return n.getContext("webgl2",BX)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;wX[e]=n}var r=wX[e];return null==r||r.isContextLost()?(delete wX[e],GX(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),wX[e])}function xX(e,t){return[t,e]}function RX(e){var t=fe(e);return be(Math.ceil(t/4))}function WX(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function VX(e,t){var n,r,a,o,i,s,c,u,l,g,d=e;return 2===tt().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,c=4,u=1,l=d.HALF_FLOAT,g=d.FLOAT,s=d.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,c=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null,g=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:s,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:g}}function NX(e,t){var n=t();return tt().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(kX||(kX={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(ZX||(ZX={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(SX||(SX={}));function XX(e){return!!(tt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function JX(e,t){return OX(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var FX,EX,TX=/ERROR: [0-9]+:([0-9]+):/g;function YX(e,t){var n=TX.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return ye((t+1).toString(),o)+e})),s=0,c=0;c<i.length;c++)s=Math.max(i[c].length,s);var u=i.slice(0,r-1),l=i.slice(r-1,r),g=i.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(ye(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join("\n"))}function HX(e,t){if(NX(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function MX(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(NX(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),NX(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),NX(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function DX(e,t,n){return OX(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function KX(e,t,n){return e.getUniformLocation(t,n)}function zX(e,t,n,r){NX(e,(function(){return function(e,t,n){UX(e,n),NX(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),NX(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),NX(e,(function(){return e.uniform1i(n,r)}))}function LX(e,t,n){NX(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),NX(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function PX(e,t){NX(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),NX(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function _X(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function OX(e,t,n){var r=NX(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function UX(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function jX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return fe(e.slice(0,e.length-t))}function QX(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function qX(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[jX(e)].concat((0,_.Z)(QX(e)))),t}function $X(e){return e%2===0}function eJ(e,t){if(Ce(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if($X(n)&&$X(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&$X(e[0])&&$X(t[0])}function tJ(e,t){return null!=e.getExtension(t)}function nJ(e){try{if(null!=GX(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function rJ(e){if(0===e)return!1;var t=GX(e);if(1!==e){if(tJ(t,"EXT_color_buffer_float"))return aJ(t);var n="EXT_color_buffer_half_float";if(tJ(t,n)){var r=t.getExtension(n);return function(e,t){var n=VX(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,r)}return!1}return!!tJ(t,"OES_texture_float")&&(!!tJ(t,"WEBGL_color_buffer_float")&&aJ(t))}function aJ(e){var t=VX(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function oJ(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&ge("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var iJ=tt();function sJ(){var e,t,n,r,a,o,i,s,c,u;return 2===tt().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:c,defineRound:u}}function cJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Me(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(t),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(o,"; ").concat(i,";")})).join("")}function uJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Me(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function lJ(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var o=n-3;o>=0;--o)a[o]="(".concat(a[o+1]," * ").concat(r[o+1],")");return a}function gJ(e){var t=Me(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}iJ.registerFlag("HAS_WEBGL",(function(){return iJ.getNumber("WEBGL_VERSION")>0})),iJ.registerFlag("WEBGL_VERSION",(function(){return nJ(2)?2:nJ(1)?1:0})),iJ.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),iJ.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===iJ.get("WEBGL_VERSION")})),iJ.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),iJ.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),iJ.registerFlag("WEBGL_PACK",(function(){return iJ.getBool("HAS_WEBGL")})),iJ.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_PACK_CLIP",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_PACK_REDUCE",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_CONV_IM2COL",(function(){return iJ.getBool("WEBGL_PACK")})),iJ.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==FX){var t=GX(e);FX=t.getParameter(t.MAX_TEXTURE_SIZE)}return FX}(iJ.getNumber("WEBGL_VERSION"))})),iJ.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==EX){var t=GX(e);EX=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,EX)}(iJ.getNumber("WEBGL_VERSION"))})),iJ.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=iJ.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=GX(e);return tJ(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:tJ(t,"EXT_disjoint_timer_query")?1:0}(e)})),iJ.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return iJ.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Mo()})),iJ.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=GX(e);if(1===e){if(!tJ(t,"OES_texture_float"))return!1}else if(!tJ(t,"EXT_color_buffer_float"))return!1;return aJ(t)}(iJ.getNumber("WEBGL_VERSION"))})),iJ.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!iJ.getBool("WEBGL_FORCE_F16_TEXTURES")&&iJ.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),iJ.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return rJ(iJ.getNumber("WEBGL_VERSION"))})),iJ.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=iJ.getNumber("WEBGL_VERSION"))&&null!=GX(e).fenceSync;var e})),iJ.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return iJ.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),iJ.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),iJ.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return Mo()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),iJ.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),iJ.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),iJ.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),iJ.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var dJ="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",pJ=Xs;function hJ(e,t,n){var r=[];if(e.forEach((function(e){var t=fe(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(NJ(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?IJ(e,r):fJ(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(a+=n?RJ(e,t):WJ(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),c=t.texShape,u=sJ(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(u),g=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(CJ,"\n    ").concat(mJ,"\n    ").concat(vJ,"\n  ")}(u);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Ce(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,s="",c="b, r, c",u=2;u<e.length-1;u++)i*=e[e.length-u-1],s="\n      int b".concat(u," = index / ").concat(i,";\n      index -= b").concat(u," * ").concat(i,";\n    ")+s,c="b".concat(u,", ")+c;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(c,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,c,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(u)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Ce(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=uJ(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=cJ(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=uJ(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=cJ(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=cJ(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=cJ(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,c,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(u)),n.packedInputs&&(g+=bJ),[g,l,o,i,a,s,n.userCode].join("\n")}function fJ(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return yJ(e,t);case 1:return kJ(e,t);case 2:return ZJ(e,t);case 3:return SJ(e,t);case 4:return wJ(e,t);case 5:return BJ(e);case 6:return GJ(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function IJ(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=sJ();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=sJ();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],c=sJ();if(null!=o&&Ce(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(u[0],", ").concat(u[1],", row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var s=[1,2],c=XJ(e,n.slice(1)),u=["b","row","col"];return"\n        ".concat(IJ(c,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(JJ(u,s),");\n        }\n      ")}var l=sJ();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var g=i[0],d=i[1],p=Math.ceil(n[2]/2),h=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(g,", ").concat(d,", ").concat(h,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=sJ();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=c[0],l=c[1],g=Math.ceil(o[i-1]/2),d=g*Math.ceil(o[i-2]/2),p="int b, int row, int col",h="b * ".concat(d," + (row / 2) * ").concat(g," + (col / 2)"),f=2;f<i-1;f++)p="int b".concat(f,", ")+p,d*=o[i-f-1],h="b".concat(f," * ").concat(d," + ")+h;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(u,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var CJ="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",mJ="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",vJ="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",bJ="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function AJ(e){return"offset".concat(e)}function yJ(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,ne.Z)(e.shapeInfo.texShape,2),o=a[0],i=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=AJ(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var c=(0,ne.Z)(e.shapeInfo.texShape,2),u=c[0],l=c[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(u,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function kJ(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(xJ(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=AJ(n);return 1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function ZJ(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&Ce(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0],s=o[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var c=we(n),u=c.newShape,l=c.keptDims,g=u;if(g.length<n.length){var d=XJ(e,g);return"\n      ".concat(fJ(d,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(JJ(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(xJ(e),"\n      }\n    ");var p=o[0],h=o[1],f=AJ(r);return 1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(f,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function SJ(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],s=we(n),c=s.newShape,u=s.keptDims,l=c;if(l.length<n.length){var g=XJ(e,l);return"\n        ".concat(fJ(g,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(JJ(["row","col","depth"],u),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(xJ(e),"\n      }\n    ");var d=e.shapeInfo.texShape,p=d[0],h=d[1],f=e.shapeInfo.flatOffset;if(h===o&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var I=AJ(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(I,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(I,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function wJ(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,c=we(n),u=c.newShape,l=c.keptDims;if(u.length<n.length){var g=XJ(e,u);return"\n      ".concat(fJ(g,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(JJ(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(xJ(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1],I="int stride2 = ".concat(r,"Shape[3];"),C="int stride1 = ".concat(r,"Shape[2] * stride2;"),m="int stride0 = ".concat(r,"Shape[1] * stride1;");if(f===s&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(I,"\n        ").concat(C,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(f===o&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var v=AJ(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(I,"\n      ").concat(C,"\n      ").concat(m,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(v,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index + ").concat(v,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function BJ(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,c=we(t),u=c.newShape,l=c.keptDims;if(u.length<t.length){var g=XJ(e,u);return"\n      ".concat(fJ(g),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(JJ(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(xJ(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var I=AJ(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(I,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function GJ(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=we(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){var s=XJ(e,o);return"\n      ".concat(fJ(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(JJ(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var c=t[5],u=t[4]*c,l=t[3]*u,g=t[2]*l,d=t[1]*g;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(g,", ").concat(l,", ").concat(u,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(c,", 1)));\n        ").concat(xJ(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],I=h[1];if(I===d&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(g,", ").concat(l,", ").concat(u,", ").concat(c,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(I,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(I===c&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(I,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var C=AJ(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(g," + depth * ").concat(l," +\n          depth2 * ").concat(u," + depth3 * ").concat(c," + depth4 + ").concat(C,";\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(I,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function xJ(e){var t=e.name,n=fe(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function RJ(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,c=pJ(e.shapeInfo.logicalShape,t.logicalShape),u=VJ(s),l=s-i,g=["x","y","z","w","u","v"];n=0===i?"":s<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(g[e+l]," = 0;")})).join("\n");var d="";d=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(g[t+l])})).join(", ");var p="return outputValue;",h=1===fe(e.shapeInfo.logicalShape),f=1===fe(t.logicalShape);if(1!==i||h||f){if(h&&!f)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var I=i-2,C=i-1;c.indexOf(I)>-1&&c.indexOf(C)>-1?p="return vec4(outputValue.x);":c.indexOf(I)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(C)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}function WJ(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&Ce(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var u,l=VJ(c),g=pJ(e.shapeInfo.logicalShape,t.logicalShape),d=c-s,p=["x","y","z","w","u","v"];u=0===s?"":c<2&&g.length>=1?"coords = 0;":g.map((function(e){return"coords.".concat(p[e+d]," = 0;")})).join("\n");var h="";return h=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+d])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}function VJ(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function NJ(e,t,n){var r=we(t),a=r.newShape,o=r.keptDims,i=t.length,s=e&&3===i&&1===t[0],c=s?t.slice(1):a,u=!e&&i>1&&!Ce(t,n)&&a.length<i||s;return{useSqueezeShape:u,uniformShape:u?c:t,keptDims:o}}function XJ(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function JJ(e,t){return t.map((function(t){return e[t]})).join(", ")}function FJ(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=hJ(a,i,t),c=function(e,t){var n=OX(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(NX(e,(function(){return e.shaderSource(n,t)})),NX(e,(function(){return e.compileShader(n)})),tt().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw YX(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),u=e.createProgram(c);return tt().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:c,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:i,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:c,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:i},EJ(e,t,u))}function EJ(e,t,n){var r,a,o,i,s={},c={},u={},l=[],g=null;i=e.getUniformLocation(n,"NAN",!1),1===tt().getNumber("WEBGL_VERSION")&&(g=e.getUniformLocation(n,"INFINITY",!1));for(var d=!1,p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];s[h]=e.getUniformLocation(n,h,d),s["offset".concat(h)]=e.getUniformLocation(n,"offset".concat(h),d),t.enableShapeUniforms&&(c["".concat(h,"Shape")]=e.getUniformLocation(n,"".concat(h,"Shape"),d),u["".concat(h,"TexShape")]=e.getUniformLocation(n,"".concat(h,"TexShape"),d))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",d),o=e.getUniformLocation(n,"outShapeStrides",d),a=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,d)})),{uniformLocations:s,customUniformLocations:l,infLoc:g,nanLoc:i,inShapesLocations:c,inTexShapesLocations:u,outShapeLocation:r,outShapeStridesLocation:o,outTexShapeLocation:a}}function TJ(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!Ce(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Ce(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}}))}function YJ(e,t,n,r,a){t.program.enableShapeUniforms||(TJ(t.inShapeInfos,n),TJ([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===tt().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],c=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var u=NJ(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(u.length){case 1:e.gl.uniform1iv(s,new Int32Array(u));break;case 2:e.gl.uniform2iv(s,new Int32Array(u));break;case 3:e.gl.uniform3iv(s,new Int32Array(u));break;case 4:e.gl.uniform4iv(s,new Int32Array(u))}}if(c&&e.gl.uniform2i(c,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(fe(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(o,l)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,o,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var c=Me(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(c));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(c));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(c))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var o=t.customUniformLocations[r],i=a[r];if("float"===n.type)e.gl.uniform1fv(o,i);else if("vec2"===n.type)e.gl.uniform2fv(o,i);else if("vec3"===n.type)e.gl.uniform3fv(o,i);else if("vec4"===n.type)e.gl.uniform4fv(o,i);else if("int"===n.type)e.gl.uniform1iv(o,i);else if("ivec2"===n.type)e.gl.uniform2iv(o,i);else if("ivec3"===n.type)e.gl.uniform3iv(o,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(o,i)}})),e.executeProgram()}function HJ(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=NJ(e.packedInputs,t.shape,o),s=i.useSqueezeShape,c=i.uniformShape,u=i.keptDims,l="",g="",d="";if(1===c.length&&e.packedInputs){var p=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==c.length||e.packedInputs){if(c.length>2&&!e.packedInputs){var h=Me(c);d="".concat(h[0]===o[1],"_").concat(h[h.length-1]===o[1])}}else g="".concat(c[0]>1,"_").concat(c[1]>1);var f=t.shape.length,I=2===c.length&&Ce(t.shape,o),C=1===fe(t.shape),m=Xs(t.shape,n.shape),v=!e.packedInputs&&f===n.shape.length&&Ce(o,n.texData.texShape),b=e.packedInputs||c.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(f,"_").concat(v,"_").concat(s?u:"","_").concat(c.length,"_").concat(C,"_").concat(m,"_").concat(I,"_").concat(l,"_").concat(g,"_").concat(d,"_").concat(b,"_").concat(a)}else{var A=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(A,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a+"".concat(tt().getNumber("WEBGL_VERSION"))}function MJ(e){return tt().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var DJ=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=kX.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=sJ();this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?uJ(["r","c","d"],t):cJ(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),KJ=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=kX.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=sJ();this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?uJ(["r","c","d"],t):cJ(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),zJ=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.outTexUsage=ZX.DOWNLOAD;var n=sJ();this.outputShape=t,this.userCode="\n      ".concat(dJ,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),LJ=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ZX.DOWNLOAD;var n=sJ();this.outputShape=t,this.userCode="\n      ".concat(dJ,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),PJ=(0,j.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,U.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=sJ();this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":gJ(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),_J=(0,j.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=sJ();this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length);var a="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var i=0;i<=1;i++)for(var s=0;s<=1;s++){var c=2*i+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(c,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(c,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(c,"] = values[2];\n            } else {\n              result[").concat(c,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":gJ(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(o,";\n        }\n    ")}));function OJ(e){var t=sJ();return function(e,t){var n=OX(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(NX(e,(function(){return e.shaderSource(n,t)})),NX(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function UJ(e){return function(e,t){var n=OX(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return NX(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),NX(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function jJ(e){return function(e,t){var n=OX(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return NX(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),NX(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function QJ(e,t,n,r,a,o){!function(e,t){var n=tt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var i=function(e){return OX(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return NX(e,(function(){return e.bindTexture(s,i)})),NX(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),NX(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),NX(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),NX(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===tt().getNumber("WEBGL_VERSION")?NX(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})):NX(e,(function(){return e.texStorage2D(s,1,r,t,n)})),NX(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:i,texShape:[n,t]}}function qJ(e){return e.internalFormatFloat}function $J(e){return e.internalFormatHalfFloat}function eF(e){return e.downloadTextureFormat}function tF(e){return e.internalFormatPackedFloat}function nF(e){return e.internalFormatPackedHalfFloat}function rF(e,t,n,r,a,o,i,s){var c=e,u=new Float32Array(function(e,t){var n=WX(e,t),r=(0,ne.Z)(n,2);return r[0]*r[1]*4}(o,i));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}var aF=function(){function e(t){(0,U.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=tt().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){wX[e]=t}(n,t)):this.gl=GX(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===tt().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=JX(this.gl,"OES_texture_float"),tJ(this.gl,o))this.textureHalfFloatExtension=JX(this.gl,o);else if(tt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),tJ(this.gl,a))this.colorBufferHalfFloatExtension=JX(this.gl,a);else if(tt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",tJ(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!tJ(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=UJ(this.gl),this.indexBuffer=jJ(this.gl),this.framebuffer=function(e){return OX(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=VX(this.gl,this.textureHalfFloatExtension)}return(0,j.Z)(e,[{key:"debug",get:function(){return tt().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;NX(t,(function(){return t.finish()})),NX(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),NX(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),NX(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),NX(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),NX(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=xX(t,n),o=(0,ne.Z)(a,2);return QJ(e,o[0],o[1],qJ(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=xX(t,n),o=(0,ne.Z)(a,2);return QJ(e,o[0],o[1],$J(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=xX(t,n),o=(0,ne.Z)(a,2);return QJ(e,o[0],o[1],eF(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){NX(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===tt().getNumber("WEBGL_VERSION")?NX(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):NX(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===tt().getNumber("WEBGL_VERSION")?NX(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):NX(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),NX(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,c;NX(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,c=o.internalFormatPackedFloat),i.set(a),2===tt().getNumber("WEBGL_VERSION")?NX(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i)})):NX(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,c,n,r,0,e.RGBA,s,i)})),NX(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=WX(t,n),o=(0,ne.Z)(a,2);return QJ(e,o[0],o[1],nF(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=WX(t,n),o=(0,ne.Z)(a,2);return QJ(e,o[0],o[1],tF(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(PX(this.gl,this.framebuffer),this.outputTexture=null),NX(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=xX(t,n),o=(0,ne.Z)(a,2),i=o[0],s=o[1],c=new Uint8Array(t*n*4);return NX(e,(function(){return e.readPixels(0,0,i,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return rF(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();NX(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return NX(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),NX(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),NX(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(tt().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return NX(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=OJ(n));var r=function(e){return OX(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return NX(n,(function(){return n.attachShader(r,t.vertexShader)})),NX(n,(function(){return n.attachShader(r,e)})),function(e,t){if(NX(e,(function(){return e.linkProgram(t)})),!tt().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&HX(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return NX(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),MX(e,t,"clipSpacePos",n,3,20,0)&&MX(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&NX(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&HX(this.gl,this.program),NX(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?DX(this.gl,e,t):KX(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),NX(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),zX(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=WX(t,n),a=(0,ne.Z)(r,2),o=a[0],i=a[1];this.setOutputMatrixTextureDriver(e,o,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&HX(this.gl,this.program),_X(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),NX(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),NX(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=JX(this.gl,2===tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke((function(){return n.disposed||n.isQueryAvailable(t,tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||ke((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),LX(this.gl,e,this.framebuffer),this.debug&&_X(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(LX(this.gl,this.outputTexture,this.framebuffer),this.debug&&_X(this.gl)):PX(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;LX(r,e,this.framebuffer),this.debug&&_X(r),this.outputTexture=e,NX(r,(function(){return r.viewport(0,0,t,n)})),NX(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),NX(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var oF=_G,iF=Yx,sF=Hx,cF=Kx,uF=Ux,lF=VR,gF=KR,dF=OR,pF=gW,hF=vW,fF=AW,IF=kW,CF=wW,mF=FW,vF=YW,bF=DW,AF=zW,yF=oV,kF=cV,ZF=mV,SF=ZR,wF=GV,BF=FV,GF=UV,xF=QV,RF=uN,WF=XG,VF=nx,NF=Jx,XF=xN,JF=WN,FF=NN,EF=TN,TF=_N,YF=jN,HF=$N,MF=tX,DF=eW,KF=iX,zF=lX,LF=ux,PF=CX;function _F(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function OF(e,t){return 1===t?[e]:_F(e,t)}var UF=function(){function e(t){if((0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=MJ(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=OF("rc",this.rank),r=VJ(this.rank),a=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}return(0,j.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),o=2;o<this.rank;o++)a="".concat(e[e.length-1-o],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),jF=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length);for(var r="",a=0;a<4;a++){var o="thisRC = rc;";a%2===1&&(o+="thisRC.z += 1;"),a>1&&(o+="thisRC.y += 1;"),r+="\n        ".concat(o,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=lJ(r,t);return a.map((function(t,r){var o="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(i,";")})).join("")}(["r","c","d"],"inputShape"):cJ(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":gJ(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var QF=function(){function e(t){(0,U.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,j.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=$F(t,n),a=eE(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=qF(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===SX.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===SX.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===SX.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===SX.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===SX.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=$F(n,r),o=eE(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=qF(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=tt().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var c=this.usedTextures[o],u=c.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(u,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function qF(e,t,n,r,a){var o,i=function(e,t){switch(e){case SX.PACKED_2X2_FLOAT32:return tF(t);case SX.PACKED_2X2_FLOAT16:return nF(t);case SX.UNPACKED_FLOAT32:return qJ(t);case SX.UNPACKED_FLOAT16:return $J(t);case SX.PACKED_4X1_UNSIGNED_BYTE:return eF(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=WX(e[0],e[1]),c=(0,ne.Z)(s,2);o=c[0]*c[1]}else{var u=xX(e[0],e[1]),l=(0,ne.Z)(u,2);o=l[0]*l[1]}var g=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,i);return o*g}function $F(e,t){if(e===ZX.UPLOAD)return SX.PACKED_2X2_FLOAT32;if(e===ZX.RENDER||null==e)return function(e){return tt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?SX.PACKED_2X2_FLOAT32:SX.UNPACKED_FLOAT32:e?SX.PACKED_2X2_FLOAT16:SX.UNPACKED_FLOAT16}(t);if(e===ZX.DOWNLOAD||e===ZX.PIXELS)return SX.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function eE(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var tE=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),nE="if (isnan(x)) return x;",rE="return x;",aE="return abs(x);";var oE="return (x >= 0.0) ? x : (exp(x) - 1.0);",iE=nE+"\n  return (x < 0.0) ? 0.0 : x;\n",sE=nE+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",cE="return x;",uE="return 1.0 / (1.0 + exp(-1.0 * x));",lE="return x;",gE="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",dE="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",pE="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",hE="return 1.0 / (1.0 + exp(-1.0 * x));",fE=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),IE=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length);var n=t.length,r=OF("rc",n),a=VJ(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),CE=$d,mE={};var vE=tt().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var bE=function(e){eo(n,e);var t=io(n);function n(e){var r,a,o;if((0,U.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!tt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof aF)a=e;else{var i=GX(tt().getNumber("WEBGL_VERSION"),e);a=new aF(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=GX(tt().getNumber("WEBGL_VERSION"));a=new aF(s),r.binaryCache=((o=tt().getNumber("WEBGL_VERSION"))in mE||(mE[o]={}),mE[o]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new QF(r.gpgpu),r.numMBBeforeWarning=null==tt().global.screen?1024:tt().global.screen.height*tt().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new $((0,ao.Z)(r),Vc()),r}return(0,j.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((tt().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||tt().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:ZX.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(tt().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:ZX.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var c;c=s?new fE(i,cE):new tE(i,cE);var u=this.runWebGLProgram(c,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(u.dataId);return this.disposeIntermediateTensorInfo(u),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var g,d,p=null!=this.activeTimers;(p&&(g=La()),"complex64"===r)?d=sf(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):d=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=La()-g),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n,r,a,o,i,s,c,u,l,g,d,p,h,f,I,C,m,v,b,A,y,k,Z;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,c=r.complexTensorInfos,u=r.isPacked,null==i){e.next=11;break}return l=u?new fE(o,cE):new tE(o,cE),g=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:s}],s),d=this.read(g.dataId),this.disposeIntermediateTensorInfo(g),e.abrupt("return",d);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!tt().getBool("DEBUG")){e.next=16;break}if(tt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==tt().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&tt().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(t),I=this.texData.get(h.dataId),p=(f=this.gpgpu).createBufferFromTexture.apply(f,[I.texture.texture].concat((0,_.Z)(RX(o))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 25:m=e.sent,v=m[0],b=m[1],C=sf(v,b),e.next=32;break;case 31:null==p?C=this.getValuesFromTexture(t):(A=fe(o),C=this.gpgpu.downloadFloat32MatrixFromBuffer(p,A));case 32:return null!=h&&this.disposeIntermediateTensorInfo(h),null!=p&&NX(y=this.gpgpu.gl,(function(){return y.deleteBuffer(p)})),k=this.convertAndCacheOnCPU(t,C),Z=this.pendingRead.get(t),this.pendingRead.delete(t),Z.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Vc().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",k);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,o=n.slice,i=n.dtype,s=n.isPacked,c=n.texture;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){var u;u=s?new fE(a,cE):new tE(a,cE);var l=this.runWebGLProgram(u,[{dataId:e,shape:a,dtype:i}],i),g=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),g}if(null==c)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(e,t.customTexShape),p=Vc().makeTensorFromDataId(d.dataId,d.shape,d.dtype),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Oa(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return os(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!XX(n)){if(tt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=fe(n);if(tt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),c=this.texData.get(s.dataId),u=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[c.texture.texture].concat((0,_.Z)(RX(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),u}var l=tt().getBool("WEBGL_PACK")&&!0===a,g=l?qX(n):n,d=l?new LJ(g):new zJ(g),p=this.runWebGLProgram(d,[{shape:g,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),f}},{key:"timerAvailable",value:function(){return tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var o=he(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=he(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,O.Z)(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(o);case 3:n=e.sent,s.kernelMs=ce(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:La(),endMs:null}}},{key:"endTimer",value:function(e){return tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=La(),e)}},{key:"getQueryTime",value:function(){var e=(0,O.Z)(q().mark((function e(t){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(tt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,c=s&&s.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vE;return tt().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&fe(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){pa("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return CE(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new fE(e.shape,t),a=this.compileAndRun(r,[e],n);return Vc().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=VF(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(tt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,aE,e.dtype);var n=new tE(e.shape,aE),r=this.compileAndRun(n,[e]);return Vc().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Je(n[0])){var a=n.map((function(e){return _a(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Vc().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new IE(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new UF(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[jX(e.shape)].concat((0,_.Z)(QX(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[jX(t)].concat((0,_.Z)(QX(t))),o=new jF(a,n),i=[n],s=this.runWebGLProgram(o,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype;null!=t&&ge(fe(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var i,s=qX(a);i=r?new KJ(s):new DJ(s);var c=[null!=t?t:RX(s)];return{dtype:o,shape:a,dataId:this.runWebGLProgram(i,[{shape:s,dtype:o,dataId:e}],o,c,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),c=this.texData.get(s.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===kX.DENSE){var u=null!=i?i:RX(e.outputShape);c.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(c.usage=e.outTexUsage),0===fe(s.shape))return c.values=Be(s.dtype,0),s;var l=[],g=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&fe(t.shape)<=tt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!eJ(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),l.push(t),n=a.texData.get(t.dataId),r.shape=o}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var d,p={shape:s.shape,texData:c,isUniform:!1},h=HJ(e,g,p),f=this.getAndSaveBinary(h,(function(){return FJ(a.gpgpu,e,g,p)})),I=null!=this.activeTimers;I&&(d=this.startTimer()),tt().get("ENGINE_COMPILE_ONLY")||YJ(this.gpgpu,f,g,p,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),I&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var C=tt().get("WEBGL_FLUSH_THRESHOLD");if(C>0){var m=La();m-this.lastGlFlushTime>C&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=m)}if(!tt().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===o){var v=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),v}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var o=this.runWebGLProgram(e,t,n,r,a);return o}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!tt().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Jc((function(){if(!tt().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=tt().getBool("DEBUG");tt().set("DEBUG",!1);var n=e.abs(cu(1e-8)).dataSync()[0];if(tt().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,i=t.usage,s=t.isPacked;if(null==o){var c,u=null!=this.activeTimers;u&&(c=La());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=tt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?ie(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=we(e);e=r.newShape}var a=fe(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o=jX(e),i=2,s=2;if(e.length){var c=QX(e),u=(0,ne.Z)(c,2);i=u[0],s=u[1]}return be(a=o*(i/2)*(s/2)).map((function(e){return 2*e}))}return be(a)}(n,s),t.texShape=l),null!=a){var g,d=qX(n),p=l[1],h=l[0],f=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!f){var I=WX(l[0],l[1]),C=(0,ne.Z)(I,2);p=C[0],h=C[1]}g=s?new _J(d,f):new PJ(d,f);var m=f?[h,p]:l,v=this.makeTensorInfo(m,r),b=this.texData.get(v.dataId);b.usage=f?ZX.PIXELS:ZX.UPLOAD,b.texShape=m,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,h,a);var A=[[h,p]],y=this.runWebGLProgram(g,[v],r,A,!0),k=this.texData.get(y.dataId);t.texShape=k.texShape,t.isPacked=k.isPacked,t.usage=k.usage,tt().get("ENGINE_COMPILE_ONLY")?this.disposeData(y.dataId):(t.texture=k.texture,t.values=null,this.texData.delete(y.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=La()-c)}else{var Z=this.acquireTexture(l,i,r,s);t.texture=Z}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Ne(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,ne.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=(0,O.Z)(q().mark((function e(){var t,n,r,a,o,i,s,c,u=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,ne.Z)(r[n],2),o=a[1],t.push(this.checkCompletionAsync_(o));return e.abrupt("return",Promise.all(t));case 6:for(i=function(){var e=(0,ne.Z)(c[s],2)[1],n=new Promise((function(t){try{u.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,c=Object.entries(this.binaryCache);s<c.length;s++)i();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=(0,O.Z)(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,Mh();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw YX(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,ne.Z)(t[e],2)[1],r=EJ(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,o=r.customUniformLocations,i=r.infLoc,s=r.nanLoc,c=r.inShapesLocations,u=r.inTexShapesLocations,l=r.outShapeLocation,g=r.outShapeStridesLocation,d=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=o,n.infLoc=i,n.nanLoc=s,n.inShapesLocations=c,n.inTexShapesLocations=u,n.outShapeLocation=l,n.outShapeStridesLocation=g,n.outTexShapeLocation=d}}}]),n}(ee);bE.nextDataId=0;Do()&&Lc("webgl",(function(){return new bE}),2);var AE=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["A","B"],this.outputShape=Fs(n,r),this.enableShapeUniforms=MJ(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),yE=(0,j.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,U.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Fs(n,r);var o=this.outputShape.length;this.enableShapeUniforms=MJ(o);var i="";if(a)if(0===o||1===fe(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=VJ(o);if(i="\n          ".concat(s," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var c=OF("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(c[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(c[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(c[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(c[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}));function kE(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var ZE={kernelName:An,backendName:"webgl",kernelFunc:kE};function SE(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=kE({inputs:{x:r},backend:n}),c=kE({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:c},o}var wE={kernelName:Vt,backendName:"webgl",kernelFunc:SE},BE="return (a < 0.) ? b * a : a;",GE="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var xE={kernelName:Bn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",Ka(o,"float32")),s=tt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yE(GE,a.shape,i.shape):new AE(BE,a.shape,i.shape),c=n.runWebGLProgram(s,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),c}},RE="return (a < 0.) ? b * a : a;",WE="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var VE={kernelName:lr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=tt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yE(WE,r.shape,a.shape):new AE(RE,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],"float32")}};function NE(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,c=i.x,u=s,l=a||c.dtype;if(u.shouldExecuteOnCPU([c])&&null!=r){var g=u.texData.get(c.dataId),d=r(g.values,l);return u.makeTensorInfo(c.shape,l,d)}return o=tt().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new fE(c.shape,n):new tE(c.shape,t),u.runWebGLProgram(o,[c],l)}}function XE(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,i=void 0!==o&&o,s=e.cpuKernelImpl,c=e.dtype;return function(e){var r=e.inputs,o=e.backend,u=r.a,l=r.b,g=o;if(i&&"complex64"===u.dtype){var d=g.texData.get(u.dataId),p=g.texData.get(l.dataId),h=[[d.complexTensorInfos.real,p.complexTensorInfos.real],[d.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=(0,ne.Z)(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:u.shape},i={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new AE(t,u.shape,l.shape);return g.runWebGLProgram(s,[o,i],So(r.dtype,a.dtype))})),f=(0,ne.Z)(h,2),I=f[0],C=f[1],m=SE({inputs:{real:I,imag:C},backend:g});return g.disposeIntermediateTensorInfo(I),g.disposeIntermediateTensorInfo(C),m}var v,b=c||So(u.dtype,l.dtype);if(("string"===u.dtype||"string"===l.dtype||g.shouldExecuteOnCPU([u,l]))&&null!=s){var A=g.texData.get(u.dataId).values,y=g.texData.get(l.dataId).values,k="string"===u.dtype?Yf(A):A,Z="string"===u.dtype?Yf(y):y,S=s(u.shape,l.shape,k,Z,b),w=(0,ne.Z)(S,2),B=w[0],G=w[1],x=g.makeTensorInfo(G,b);return g.texData.get(x.dataId).values=B,x}return v=tt().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new yE(n,u.shape,l.shape,a):new AE(t,u.shape,l.shape),g.runWebGLProgram(v,[u,l],b)}}function JE(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?lE:rE;if("relu"===e)return t?dE:iE;if("elu"===e)return t?gE:oE;if("relu6"===e)return t?pE:sE;if("prelu"===e)return t?WE:RE;if("leakyrelu"===e)return t?GE:BE;if("sigmoid"===e)return t?hE:uE;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var FE=(0,j.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,U.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=MJ(this.outputShape.length);var l=a?t[1]:t[2],g=Math.ceil(l/2),d=a?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],I="",C="";s&&(I=c?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):u?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),C="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");var v="rc.x",b="rc.x";t[0]<n[0]?v="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(b="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(I,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(g,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(g,"; i++) {\n          int batchA = ").concat(v,";\n          int batchB = ").concat(b,";\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(f[0],");\n          result += (").concat(h[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(m,"\n\n        ").concat(C,"\n\n        setOutput(result);\n      }\n    ")})),EE="return areal * breal - aimag * bimag;",TE="return areal * bimag + aimag * breal;",YE=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Fs(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),HE="return a * b;";function ME(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,i=So(a.dtype,o.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),c=r.texData.get(o.dataId),u=new YE(EE,a.shape,o.shape),l=new YE(TE,a.shape,o.shape),g=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:o.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:o.shape}],d=r.runWebGLProgram(u,g,"float32"),p=r.runWebGLProgram(l,g,"float32"),h=SE({inputs:{real:d,imag:p},backend:r});return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),h}if(r.shouldExecuteOnCPU([a,o])){var f=r.texData.get(a.dataId),I=r.texData.get(o.dataId),C=SF(a.shape,o.shape,f.values,I.values,i),m=(0,ne.Z)(C,2),v=m[0],b=m[1],A=r.makeTensorInfo(b,i);return r.texData.get(A.dataId).values=v,A}return t=tt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yE(HE,a.shape,o.shape):new AE(HE,a.shape,o.shape),r.runWebGLProgram(t,[a,o],i)}var DE={kernelName:qn,backendName:"webgl",kernelFunc:ME};function KE(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=fe(a.shape),c=Ze(o,s),u=fe(c);ge(s===u,(function(){return"The new shape (".concat(c,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=i.texData.get(a.dataId);return!l.isPacked||eJ(a.shape,c)||null!==l.texture&&eJ(l.shape,c)?(i.incRef(a.dataId),{dataId:a.dataId,shape:c,dtype:a.dtype}):function(e,t,n){var r=[jX(e.shape)].concat((0,_.Z)(QX(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[jX(t)].concat((0,_.Z)(QX(t))),i=new jF(o,r),s=[r],c=n.runWebGLProgram(i,[a],e.dtype,s,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(a,c,i)}var zE={kernelName:Ir,backendName:"webgl",kernelFunc:KE},LE=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),c=r%4,u="sumValue += dot(values, ones);";if(null!=n){var l=1/n;u="sumValue += dot(values * ".concat(me(l)?l.toPrecision(2):l,", ones);")}var g="";o%r>0&&(g="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(g,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(u,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),PE=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",c="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",c="min"):"max"===n&&(s="-1.0 / 1e-20",c="max");var u="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?u="sumValue":"prod"===n?u="prodValue":"all"===n?u="allValue":"any"===n&&(u="anyValue");var l=4*Math.floor(r/4),g=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(c,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(c,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===g,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===g,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===g,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(u,");\n      }\n    ")}));function _E(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=Lh(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,c=a[i],u=c.inSize,l=c.windowSize,g=c.outSize,d=void 0;d="mean"===n?0===i?new LE({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:g},u):new LE({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:g}):new PE({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:g},n),s=o,o=r.runWebGLProgram(d,[o],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return o}var OE=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=VJ(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}));var UE=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=VJ(this.rank),i=_F("rc",this.rank),s=new Array(this.rank),c=0;c<n.length;c++)s[n[c]]=i[c];var u="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),g="getChannel(getA(".concat(s.join(),"), ").concat(u,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(g,";\n      if(").concat(l,") {\n        result[1] = ").concat(g,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(g,";\n        if(").concat(l,") {\n          result[3] = ").concat(g,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function jE(e,t,n){var r=tt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UE(e.shape,t):new OE(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function QE(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,i=Se(a,e.shape),s=i,c=vg(s,o),u=null!=c,l=e;u&&(l=jE(e,c,r),s=Ag(s.length,o)),mg("sum",s,o);var g=Ig(l.shape,s),d=(0,ne.Z)(g,2),p=d[0],h=d[1],f=p;n&&(f=Cg(p,i));var I=fe(h),C=KE({inputs:{x:l},attrs:{shape:[fe(e.shape)/I,I]},backend:r}),m=_E(C,wo(e.dtype),"sum",r),v=KE({inputs:{x:m},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(m),u&&r.disposeIntermediateTensorInfo(l),v}(t.x,r.axis,r.keepDims,n)}var qE={kernelName:Jr,backendName:"webgl",kernelFunc:QE};function $E(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,c=o.shape.length,u=new Array(c),l=0;l<u.length;l++)u[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var g=s.texData.get(o.dataId).values,d=LF(g,o.shape,o.dtype,i,u);t=s.makeTensorInfo(u,o.dtype),s.texData.get(t.dataId).values=d}else t=jE(o,i,s);return t}var eT={kernelName:na,backendName:"webgl",kernelFunc:$E};function tT(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,c=e.preluActivationWeights,u=void 0===c?null:c,l=e.leakyreluAlpha,g=void 0===l?0:l,d=e.activation,p=void 0===d?null:d,h=t.shape.length,f=n.shape.length,I=r?t.shape[h-2]:t.shape[h-1],C=a?n.shape[f-1]:n.shape[f-2],m=r?t.shape[h-1]:t.shape[h-2],v=a?n.shape[f-2]:n.shape[f-1],b=t.shape.slice(0,-2),A=n.shape.slice(0,-2),y=fe(b),k=fe(A),Z=Fs(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([m,v]);ge(I===C,(function(){return"Error in matMul: inner shapes (".concat(I,") and (")+"".concat(C,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var S,w=r?[y,I,m]:[y,m,I],B=a?[k,v,C]:[k,C,v],G=KE({inputs:{x:t},backend:o,attrs:{shape:w}}),x=KE({inputs:{x:n},backend:o,attrs:{shape:B}}),R=[G,x],W=Math.max(y,k),V=r?G.shape[1]:G.shape[2],N=null!=s,X=null!=u,J="leakyrelu"===p,F=null!=p?JE(p,!0):null;if((1===m||1===v)&&V>1e3&&!1===(N||X||J||null!=F)){var E=G,T=x;r&&(E=$E({inputs:{x:G},backend:o,attrs:{perm:[0,2,1]}}),R.push(E)),a&&(T=$E({inputs:{x:x},backend:o,attrs:{perm:[0,2,1]}}),R.push(T));var Y=1===v,H=E;1!==v&&(H=KE({inputs:{x:E},backend:o,attrs:{shape:[W,V,1]}}),R.push(H));var M=1===v?2:1,D=T;Y&&(D=KE({inputs:{x:T},backend:o,attrs:{shape:[W,1,V]}}),R.push(D));var K=ME({inputs:{a:H,b:D},backend:o});S=QE({inputs:{x:K},backend:o,attrs:{axis:M,keepDims:!0}}),R.push(K)}else{var z=So(t.dtype,n.dtype),L=new FE(w,B,[W,m,v],r,a,N,F,X,J),P=[G,x];if(null!=s&&P.push(s),X&&P.push(u),J){var _=o.makeTensorInfo([],"float32",Ka(g,"float32"));P.push(_),R.push(_)}S=o.runWebGLProgram(L,P,z)}var O=KE({inputs:{x:S},backend:o,attrs:{shape:Z}});R.push(S);for(var U=0,j=R;U<j.length;U++){var Q=j[U];o.disposeIntermediateTensorInfo(Q)}return O}var nT={kernelName:la,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,c=r.transposeA,u=r.transposeB,l=r.activation;return tT({a:a,b:o,transposeA:c,transposeB:u,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},rT="return abs(x);";var aT={kernelName:it,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=VF(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=tt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new fE(a.shape,rT):new tE(a.shape,rT),r.runWebGLProgram(t,[a],a.dtype)}},oT=NE({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),iT={kernelName:st,backendName:"webgl",kernelFunc:oT},sT=NE({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),cT={kernelName:ct,backendName:"webgl",kernelFunc:sT},uT="return a + b;",lT=XE({opSnippet:uT,packedOpSnippet:uT,supportsComplex:!0,cpuKernelImpl:oF}),gT={kernelName:ut,backendName:"webgl",kernelFunc:lT},dT=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),pT=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var hT={kernelName:lt,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return kE({inputs:{x:a[0]},backend:r});if(a.length>tt().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var c=a.map((function(e){return e.dtype})).reduce((function(e,t){return So(e,t)})),u=a.map((function(e){return e.shape})),l=tt().getBool("WEBGL_PACK")?new pT(a[0].shape,u):new dT(a[0].shape,u);return r.runWebGLProgram(l,a,c)}};var fT={kernelName:gt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,c=Se(o,a.shape),u=c,l=vg(u,s),g=a;null!=l&&(g=$E({inputs:{x:a},backend:n,attrs:{perm:l}}),u=Ag(u.length,s)),mg("all",u,s);var d,p=Ig(g.shape,u),h=(0,ne.Z)(p,2),f=h[0],I=KE({inputs:{x:g},backend:n,attrs:{shape:[-1,fe(h[1])]}}),C=_E(I,I.dtype,"all",n);return d=KE(i?{inputs:{x:C},backend:n,attrs:{shape:Cg(f,c)}}:{inputs:{x:C},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(C),null!=l&&n.disposeIntermediateTensorInfo(g),d}};var IT={kernelName:dt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,c=Se(o,a.shape),u=c,l=vg(u,s),g=a;null!=l&&(g=$E({inputs:{x:a},backend:n,attrs:{perm:l}}),u=Ag(u.length,s)),mg("any",u,s);var d,p=Ig(g.shape,u),h=(0,ne.Z)(p,2),f=h[0],I=KE({inputs:{x:g},backend:n,attrs:{shape:[-1,fe(h[1])]}}),C=_E(I,I.dtype,"any",n);return d=KE(i?{inputs:{x:C},backend:n,attrs:{shape:Cg(f,c)}}:{inputs:{x:C},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(C),null!=l&&n.disposeIntermediateTensorInfo(g),d}},CT=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(c,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),mT=(0,j.Z)((function e(t,n,r,a){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ge(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,c,u=this.outputShape,l=u.length,g=VJ(l),d=OF("coords",l);if(1===i){var p=VJ(c=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(d.join(),", 0);\n        ++").concat(d[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(d.join(),", 0);\n        ++").concat(d[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(d.join(),", 0);\n        --").concat(d[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(d.join(),", 0);\n        --").concat(d[l-2],";")}else c=l,s="\n        ".concat(g," sourceLocR = coords;\n        ++").concat(d[l-1],";\n        ").concat(g," sourceLocG = coords;\n        ++").concat(d[l-2],";\n        ").concat(g," sourceLocA = coords;\n        --").concat(d[l-1],";\n        ").concat(g," sourceLocB = coords;\n        --").concat(d[l-2],";");var h=["x","y","z","w","u","v"].slice(0,c),f="."+h[c-1],I=h.map((function(e){return"int "+e})),C=OF("sourceLocR",c-1).concat("inIdx.r"),m=OF("sourceLocG",c-1).concat("inIdx.g"),v=OF("sourceLocB",c-1).concat("inIdx.b"),b=OF("sourceLocA",c-1).concat("inIdx.a"),A="max"===r?"greaterThan":"lessThan",y=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(C.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),")));"),k="vec4(\n            getAChannel(".concat(C.join(),"),\n            hasNextCol ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(v.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(b.join(),") : 0.)"),Z=a?"":"\n      float getBestIndicesAChannel(".concat(I.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(I.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(Z,"\n      void main() {\n        ").concat(g," coords = getOutputCoords();\n        bool hasNextCol = ").concat(d[l-1]," < ").concat(u[l-1]-1,";\n        bool hasNextRow = ").concat(d[l-2]," < ").concat(u[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(f,", sourceLocG").concat(f,",\n          sourceLocB").concat(f,", sourceLocA").concat(f,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(k,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(y,"\n          vec4 candidate = ").concat(k,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(A,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function vT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=Lh(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},c=new CT(s,n,null==r),u=[t];null!=r&&u.push(r);var l=e.runWebGLProgram(c,u,"int32");if(1===l.shape[1])return l;var g=vT(e,t,n,l);return e.disposeIntermediateTensorInfo(l),g}function bT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=a[a.length-1],i=Lh(o),s=new mT(a,i,n,null==r),c=null==r?[t]:[t,r],u=e.runWebGLProgram(s,c,"int32");if(u.shape.length===t.shape.length){var l=bT(e,t,n,u);return e.disposeIntermediateTensorInfo(u),l}return u}function AT(e,t,n,r){var a=[n];if(mg("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!tt().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],i=e.texData.get(t.dataId),s=t;null!==i&&i.isPacked&&(s=e.unpackTensor(t),o.push(s));var c=Ig(s.shape,a),u=(0,ne.Z)(c,2),l=u[0],g=fe(u[1]),d=KE({inputs:{x:s},backend:e,attrs:{shape:[-1,g]}});o.push(d);var p=vT(e,d,r);o.push(p);var h=KE({inputs:{x:p},backend:e,attrs:{shape:l}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),h}return bT(e,t,r)}var yT={kernelName:pt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=Se(r.axis,a.shape),i=vg(o,a.shape.length),s=a,c=[];null!=i&&(s=$E({inputs:{x:a},backend:n,attrs:{perm:i}}),c.push(s),o=Ag(o.length,s.shape.length)),mg("argMax",[o[0]],s.shape.length);var u=AT(n,s,o[0],"max");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}};var kT={kernelName:ht,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=Se(r.axis,a.shape),i=vg(o,a.shape.length),s=a,c=[];null!=i&&(s=$E({inputs:{x:a},backend:n,attrs:{perm:i}}),c.push(s),o=Ag(o.length,s.shape.length)),mg("argMin",[o[0]],s.shape.length);var u=AT(n,s,o[0],"min");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},ZT=NE({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),ST={kernelName:ft,backendName:"webgl",kernelFunc:ZT},wT=NE({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),BT={kernelName:It,backendName:"webgl",kernelFunc:wT},GT=NE({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),xT={kernelName:Ct,backendName:"webgl",kernelFunc:GT},RT=XE({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),WT={kernelName:vt,backendName:"webgl",kernelFunc:RT},VT=NE({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),NT={kernelName:mt,backendName:"webgl",kernelFunc:VT},XT=(0,j.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,U.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,c=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,g=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var f="avg"===n,I="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),C="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),m="0.0";if(f||(m="-1.0 / 1e-20"),r){var v=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(c,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(g,";\n              wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(v," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?I:C:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var b="max",A="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(A="avgValue / count");var y=4*Math.floor(i/4),k=i%4,Z="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(b,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(m,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(m,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(g,";\n            wR += ").concat(u,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(y,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(Z,"\n          }\n\n          int xC = xCCorner + ").concat(y,";\n          if (").concat(1===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(Z,"\n          } else if (").concat(2===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(Z,"\n          } else if (").concat(3===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(Z,"\n          }\n        }\n        setOutput(").concat(A,");\n      }\n    ")}})),JT=(0,j.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,U.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,c=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,g=t.dilationHeight,d=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,I=t.padInfo.front,C=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,b="0.0";if(v||(b="-1.0 / 1e-20"),r){var A=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(c,", ").concat(u,");\n        const ivec3 pads = ivec3(").concat(I,", ").concat(C,", ").concat(m,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(g,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(A," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var y="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var Z=4*Math.floor(i/4),S=i%4,w="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(y,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(c,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(I,", ").concat(C,", ").concat(m,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(g,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(Z,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(w,"\n            }\n\n            int xC = xCCorner + ").concat(Z,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(w,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(w,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(w,"\n            }\n          }\n          setOutput(").concat(k,");\n        }\n      }\n    ")}}));var FT={kernelName:bt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;oJ(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,c=r.dimRoundingMode;ge(Ou(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var u=Fu(a.shape,o,i,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Ce(u.inShape,u.outShape))return kE({inputs:{x:a},backend:n});var l=new XT(u,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var ET={kernelName:yt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,c=r.dimRoundingMode,u=r.dataFormat,l=Eu(a.shape,o,i,[1,1,1],s,c,u),g=new JT(l,"avg",!1);return n.runWebGLProgram(g,[a],"float32")}},TT=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=c-1-t.padInfo.top,g=u-1-t.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(g,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(c,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(u,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),YT=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,g=t.effectiveFilterDepth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=g-1-t.padInfo.front,f=d-1-t.padInfo.top,I=p-1-t.padInfo.left,C=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(f,", ").concat(I,");\n      const float avgMultiplier = float(").concat(C,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(g,";\n            wD += ").concat(c,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(u,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var HT={kernelName:kt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,c=r.pad,u=r.dimRoundingMode,l=Eu(o.shape,i,s,[1,1,1],c,u),g=new YT(l);return n.runWebGLProgram(g,[a],o.dtype)}};var MT={kernelName:At,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;oJ([a,o],"avgPoolGrad");var s=r.filterSize,c=r.strides,u=r.pad,l=Fu(i.shape,s,c,1,u),g=new TT(l);return n.runWebGLProgram(g,[a],i.dtype)}};var DT={kernelName:Zt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return tT({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},KT=(0,j.Z)((function e(t,n,r,a,o,i){(0,U.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],Fs(t,n),Fs(t,r);var s="0.0";null!=a&&(Fs(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="1.0";null!=o&&(Fs(t,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(c,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),zT=(0,j.Z)((function e(t,n,r,a,o,i){(0,U.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Fs(t,n),Fs(t,r);var s="vec4(0.0)";null!=a&&(Fs(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="vec4(1.0)";null!=o&&(Fs(t,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(c,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),LT={kernelName:In,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,c=t.scale;ge(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),ge(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),ge(null==c||o.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var u=r.varianceEpsilon;null==u&&(u=.001);var l=[a,o,i],g=null;null!=s&&(g=s.shape,l.push(s));var d=null;null!=c&&(d=c.shape,l.push(c));var p=tt().getBool("WEBGL_PACK_NORMALIZATION")?new zT(a.shape,o.shape,i.shape,g,d,u):new KT(a.shape,o.shape,i.shape,g,d,u);return n.runWebGLProgram(p,l,l[0].dtype)}},PT=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=VJ(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return _T.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(_T[t]," = start[").concat(t,"] + coords.").concat(_T[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),_T=["x","y","z","w","u","v"];var OT=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=VJ(this.rank),r=OF("coords",this.rank),a=OF("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),c=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),u=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(u,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}));function UT(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=uc(a,r.begin,r.size),i=(0,ne.Z)(o,2),s=i[0],c=i[1];if(Us(a,s,c),0===fe(c))return n.makeTensorInfo(c,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),l=NF(u.values,s,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var g=n.texData.get(a.dataId).isPacked,d=sc(a.shape,s,c);if(g||!d){var p=tt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OT(c):new PT(c),h=[s];return n.runWebGLProgram(p,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=cc(t,Me(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var c=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,c+1),o}(a,s,c,n)}var jT={kernelName:Gr,backendName:"webgl",kernelFunc:UT},QT={kernelName:St,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;ge(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),c=_h(a.shape,o,s),u=Oh(c.length,o.length),l=Uh(a.shape,o,s),g=jh(i,o.length),d=Qh(l,i,o.length),p=[],h=KE({inputs:{x:a},backend:n,attrs:{shape:c}}),f=$E({inputs:{x:h},backend:n,attrs:{perm:u}}),I=KE({inputs:{x:f},backend:n,attrs:{shape:l}}),C=UT({inputs:{x:I},backend:n,attrs:{begin:g,size:d}});return p.push(h),p.push(f),p.push(I),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}};var qT={kernelName:wt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),c=n.readSync(o.dataId),u=iF(s,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}};var $T={kernelName:Gt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.readSync(r.dataId),i=n.readSync(a.dataId),s=Fs(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},eY=XE({opSnippet:"return float(a != b);",cpuKernelImpl:BF,dtype:"bool"}),tY={kernelName:er,backendName:"webgl",kernelFunc:eY};function nY(e){var t=e.inputs,n=e.backend,r=t.input;return kE({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var rY={kernelName:pr,backendName:"webgl",kernelFunc:nY};var aY={kernelName:xt,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return kE({inputs:{x:o},backend:r});var s=Wg(o.shape),c=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),u=SE({inputs:{real:c,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(c),u}if("complex64"===o.dtype){var l=nY({inputs:{input:o},backend:r}),g=e({inputs:{x:l},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(l),g}if(!We(o.dtype,i)){var d=kE({inputs:{x:o},backend:r});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i)return function(e,t){var n=new tE(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var p=r.makeTensorInfo([],"bool",Be("bool",1)),h=eY({inputs:{a:o,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},oY="return ceil(x);",iY=NE({opSnippet:oY,packedOpSnippet:oY,cpuKernelImpl:cF}),sY={kernelName:Rt,backendName:"webgl",kernelFunc:iY},cY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),uY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var lY={kernelName:Wt,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax;t=tt().getBool("WEBGL_PACK_CLIP")?new uY(o.shape):new cY(o.shape);var c=[[i],[s]];return r.runWebGLProgram(t,[o],o.dtype,c)}},gY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function dY(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var pY={kernelName:Nt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new gY(r.shape),i=[dY(r,a.complexTensorInfos.real),dY(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},hY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.outputShape=[],this.outputShape=Kh(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,c=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(c,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),fY=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Kh(t,n);var r=this.outputShape,a=r.length,o=VJ(a),i=OF("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var c=new Array(t.length-1);c[0]=t[0][n];for(var u=1;u<c.length;u++)c[u]=c[u-1]+t[u][n];for(var l=s[n],g=s.slice(-2),d=s.join(),p="if (".concat(l," < ").concat(c[0],") {\n        return getChannel(\n            getT0(").concat(d,"), vec2(").concat(g.join(),"));\n        }"),h=1;h<c.length;h++){var f=c[h-1];p+="\n        if (".concat(l," < ").concat(c[h],"  && ").concat(l," >= ").concat(c[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(IY(s,l,f),"),\n            vec2(").concat(IY(g,l,f),"));\n        }")}var I=c.length,C=c[c.length-1];p+="\n        return getChannel(\n          getT".concat(I,"(").concat(IY(s,l,C),"),\n          vec2(").concat(IY(g,l,C),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}));function IY(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function CY(e){var t=e.inputs,n=e.backend,r=t.input;return kE({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var mY={kernelName:kn,backendName:"webgl",kernelFunc:CY};function vY(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return nY({inputs:{input:e},backend:n})})),o=e.map((function(e){return CY({inputs:{input:e},backend:n})})),i=vY(a,t,n),s=vY(o,t,n),c=SE({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}var u=n.shouldExecuteOnCPU(e);if("string"===r&&(u=!0),u){var l=e.map((function(e){var r=fe(e.shape.slice(t));return KE({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),g=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),d=Kh(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],h=uF(g,d,r,p),f=Kh(e.map((function(e){return e.shape})),t),I=n.makeTensorInfo(f,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}if(e.length>tt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var C=Math.floor(e.length/2),m=vY(e.slice(0,C),t,n),v=vY(e.slice(C),t,n),b=vY([m,v],t,n);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),b}if(tt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var A=new fY(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(A,e,r)}var y=function(e,t,n){var r=Kh(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return KE({inputs:{x:e},attrs:{shape:[-1,fe(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),k=y.tensors2D,Z=y.outShape,S=new hY(k.map((function(e){return e.shape}))),w=n.runWebGLProgram(S,k,r);k.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var B=KE({inputs:{x:w},attrs:{shape:Z},backend:n});return n.disposeIntermediateTensorInfo(w),B}function bY(e){var t=e.inputs,n=e.backend,r=Se(e.attrs.axis,t[0].shape)[0],a=Kh(t.map((function(e){return e.shape})),r);if(0===fe(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return fe(e.shape)>0}));return 1===o.length?kE({inputs:{x:o[0]},backend:n}):(Dh(o.map((function(e){return e.shape})),r),vY(o,r,n))}var AY={kernelName:Xt,backendName:"webgl",kernelFunc:bY},yY=(0,j.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,U.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,c=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,g=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4,I="channelsLast"===t.dataFormat,C=I?1:2,m=I?2:3,v=I?3:1,b="",A="";r&&(b=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),A="result = activation(result);");var y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(c,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(C,"], coords[").concat(m,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(g,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(I,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(I,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(I,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(I,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(y,"\n        ").concat(A,"\n        setOutput(result);\n      }\n    ")})),kY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,g=t.filterDepth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(g,"; wF++) {\n          int xF = xFCorner + wF * ").concat(c,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(u,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ZY=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=MJ(this.outputShape.length);for(var r=n.dataFormat,a=sJ(),o="channelsLast"===r,i=o?0:1,s=o?1:2,c=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),u="",l=0;l<=1;l++)for(var g=0;g<=1;g++)u+="\n          blockIndex = rc.y + ".concat(g,";\n          pos = rc.x + ").concat(l,";\n\n          ").concat(c,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+g,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+g,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(u,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function SY(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,c=e.preluActivationWeights,u=void 0===c?null:c,l=e.leakyreluAlpha,g=void 0===l?0:l,d=e.activation,p=void 0===d?null:d,h=n.shape,f=o.texData.get(n.dataId),I=a.inChannels,C=h[0]*h[1]*h[2],m=a.outChannels,v="channelsLast"===a.dataFormat,b=[];if(!((1===C||1===m)&&I>1e3)&&f.isPacked&&v&&null!=f.texture&&h[2]%2!==0&&Ce(f.shape.slice(-3),h.slice(-3))){var A=h[0]*h[1]*(h[2]+1),y={dataId:n.dataId,shape:[1,A,a.inChannels],dtype:n.dtype},k=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,ge(eJ(f.shape,y.shape),(function(){return"packed reshape ".concat(f.shape," to ").concat(y.shape," isn't free")}));var Z=KE({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});b.push(Z);var S=tT({a:y,b:Z,backend:o,transposeA:false,transposeB:false,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:g}),w=o.texData.get(S.dataId);ge(w.isPacked,(function(){return"batchMatMul result is expected to be packed"})),f.shape=k,w.shape=a.outShape,(t=kE({inputs:{x:S},backend:o})).shape=a.outShape,b.push(S)}else{var B=KE({inputs:{x:n},backend:o,attrs:{shape:[1,v?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),G=KE({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),x=tT({a:B,b:G,transposeA:false,transposeB:false,backend:o,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:g});t=KE({inputs:{x:x},backend:o,attrs:{shape:a.outShape}}),b.push(B),b.push(G),b.push(x)}for(var R=0,W=b;R<W.length;R++){var V=W[R];o.disposeIntermediateTensorInfo(V)}return t}function wY(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,c=void 0===s?null:s,u=e.leakyreluAlpha,l=void 0===u?0:u,g=e.activation,d=void 0===g?null:g,p=r.filterWidth,h=r.filterHeight,f=r.inChannels,I=r.outWidth,C=r.outHeight,m="channelsLast"===r.dataFormat,v=p*h*f,b=C*I,A=[v,b],y=[],k=KE({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),Z=KE({inputs:{x:n},backend:a,attrs:{shape:[1,v,fe(n.shape)/v]}});y.push(k),y.push(Z);var S=new ZY(A,r),w=[k.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],B=a.runWebGLProgram(S,[k],"float32",w),G=KE({inputs:{x:B},backend:a,attrs:{shape:[1,A[0],A[1]]}});y.push(B),y.push(G);var x=null!=i,R=null!=c,W="leakyrelu"===d,V=d?JE(d,!0):null,N=new FE(G.shape,Z.shape,[1,b,r.outChannels],!0,!1,x,V,R,W),X=[G,Z];if(i&&X.push(i),R&&X.push(c),W){var J=a.makeTensorInfo([],"float32",Ka(l,"float32"));X.push(J),y.push(J)}var F=a.runWebGLProgram(N,X,"float32"),E=KE({inputs:{x:F},backend:a,attrs:{shape:m?[1,C,I,r.outChannels]:[1,r.outChannels,C,I]}});y.push(F);for(var T=0,Y=y;T<Y.length;T++){var H=Y[T];a.disposeIntermediateTensorInfo(H)}return E}var BY={kernelName:Jt,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,c=a.pad,u=a.dataFormat,l=a.dilations,g=a.dimRoundingMode,d=Uu(u),p=Tu(o.shape,i.shape,s,l,c,g,!1,d);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(tt().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=wY({x:o,filter:i,convInfo:p,backend:r});else{var h=new yY(p);t=r.runWebGLProgram(h,[o,i],"float32")}else t=SY({x:o,filter:i,convInfo:p,backend:r});var f=KE({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),f}},GY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),xY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,c=r-1-t.padInfo.left,u=i?1:2,l=i?2:3,g=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(g,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(u,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),RY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),WY=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,c=n-1-t.padInfo.front,u=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(c,", ").concat(u,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var VY={kernelName:Ft,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,c=r.dataFormat,u=r.dimRoundingMode,l=r.filterShape,g=Uu(c),d=Tu(a.shape,l,i,1,s,u,!1,g),p=new GY(d);return n.runWebGLProgram(p,[a,o],"float32")}};var NY={kernelName:Et,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,c=r.pad,u=r.dataFormat,l=r.dimRoundingMode,g=Uu(u),d=Tu(i,o.shape,s,1,c,l,!1,g),p=new xY(d);return n.runWebGLProgram(p,[a,o],"float32")}};var XY={kernelName:Tt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,c=r.dilations,u=Yu(a.shape,o.shape,i,c,s),l=new kY(u);return n.runWebGLProgram(l,[a,o],"float32")}};var JY={kernelName:Yt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,c=r.filterShape,u=Yu(a.shape,c,i,1,s),l=new RY(u);return n.runWebGLProgram(l,[a,o],"float32")}};var FY={kernelName:Ht,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,c=Yu(r.inputShape,o.shape,s,1,i),u=new WY(c);return n.runWebGLProgram(u,[a,o],"float32")}},EY=NE({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),TY={kernelName:Mt,backendName:"webgl",kernelFunc:EY},YY=NE({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),HY={kernelName:Dt,backendName:"webgl",kernelFunc:YY},MY=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=(0,ne.Z)(t,4),s=i[0],c=i[1],u=i[2],l=i[3],g=(0,ne.Z)(n,1)[0],d=(0,ne.Z)(r,2),p=d[0],h=d[1];this.outputShape=[g,p,h,l];var f="bilinear"===a?1:0,I="".concat(c-1,".0"),C="".concat(u-1,".0"),m=p>1?["".concat((c-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(I," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(I)],v=(0,ne.Z)(m,3),b=v[0],A=v[1],y=v[2],k=h>1?["".concat((u-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(C," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(C)],Z=(0,ne.Z)(k,3),S=Z[0],w=Z[1],B=Z[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(A,";\n        float width_scale = ").concat(w,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(I," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(B,";\n        if( in_x < 0.0 || in_x > ").concat(C," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(f," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),DY={kernelName:Lt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,c=r.method,u=r.extrapolationValue,l=new MY(a.shape,o.shape,s,c,u);return n.runWebGLProgram(l,[a,o,i],"float32")}},KY=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,o=n?"1.0":"getX(".concat(zY(a,"coords"),")"),i=t[t.length-1],s="",c="";n?(s=r?"end != ".concat(i-1):"end != 0",c=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(i):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(VJ(a)," coords = getOutputCoords();\n        int end = ").concat(LY(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(c,";\n          ").concat(LY(a,"coords")," = idx;\n          val *= getX(").concat(zY(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function zY(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative product for rank ".concat(e," is not yet supported"))}function LY(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative product for rank ".concat(e," is not yet supported"))}var PY={kernelName:Kt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,c=a.shape.length,u=vg([o],c),l=a;null!=u&&(l=$E({inputs:{x:a},backend:n,attrs:{perm:u}}));var g=Ag(1,c)[0];if(g!==c-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(o));for(var d=l.shape[g],p=kE({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(d))-1;h++){var f=new KY(l.shape,!1,s),I=[[h]],C=p;p=n.runWebGLProgram(f,[p],p.dtype,I),n.disposeIntermediateTensorInfo(C)}if(i){var m=new KY(l.shape,i,s),v=p;p=n.runWebGLProgram(m,[p],p.dtype),n.disposeIntermediateTensorInfo(v)}if(null!=u){var b=$E({inputs:{x:p},backend:n,attrs:{perm:bg(u)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),b}return p}},_Y=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,o=n?"0.0":"getX(".concat(OY(a,"coords"),")"),i=t[t.length-1],s="",c="";n?(s=r?"end != ".concat(i-1):"end != 0",c=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(i):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(VJ(a)," coords = getOutputCoords();\n        int end = ").concat(UY(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(c,";\n          ").concat(UY(a,"coords")," = idx;\n          val += getX(").concat(OY(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function OY(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function UY(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var jY={kernelName:zt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,c=a.shape.length,u=vg([o],c),l=a;null!=u&&(l=$E({inputs:{x:a},backend:n,attrs:{perm:u}}));var g=Ag(1,c)[0];if(g!==c-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(o));for(var d=l.shape[g],p=kE({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(d))-1;h++){var f=new _Y(l.shape,!1,s),I=[[h]],C=p;p=n.runWebGLProgram(f,[p],p.dtype,I),n.disposeIntermediateTensorInfo(C)}if(i){var m=new _Y(l.shape,i,s),v=p;p=n.runWebGLProgram(m,[p],p.dtype),n.disposeIntermediateTensorInfo(v)}if(null!=u){var b=$E({inputs:{x:p},backend:n,attrs:{perm:bg(u)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),b}return p}};var QY={kernelName:Pt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var c=n.readSync(a.dataId),u=n.readSync(o.dataId),l=iF(c,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var g=n.bufferSync(a),d=n.bufferSync(o),p=sF(g,d,i,s);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},qY=function(){function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,j.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var $Y={kernelName:_t,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat,s=a.shape[0],c=("NHWC"===i?a.shape[1]:a.shape[2])*o,u=("NHWC"===i?a.shape[2]:a.shape[3])*o,l=("NHWC"===i?a.shape[3]:a.shape[1])/(o*o),g=new qY("NHWC"===i?[s,c,u,l]:[s,l,c,u],o,i);return n.runWebGLProgram(g,[a],a.dtype)}},eH=(0,j.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,U.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=MJ(this.outputShape.length);var i=t.filterHeight,s=t.filterWidth,c=t.outChannels/t.inChannels,u="",l="";r&&(u=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(u,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(c,";\n        int q = d2 - d1 * ").concat(c,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(g,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),tH=(0,j.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,U.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=MJ(this.outputShape.length);for(var i=t.outChannels/t.inChannels,s=t.padInfo.left,c=t.strideWidth,u=t.dilationWidth,l=t.filterHeight,g=t.filterWidth,d=g,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",h=0;h<g;h++)p+="\n          vec4 xTexelC".concat(2*h,";\n          int xTexelC").concat(2*h,"Ready;\n          vec4 xTexelC").concat(2*h+1,";\n          int xTexelC").concat(2*h+1,"Ready;\n          vec4 xC").concat(h,";");p+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var f=0;f<g;f++)p+="\n          xTexelC".concat(2*f," = vec4(0.0);\n          xTexelC").concat(2*f,"Ready = 0;\n          xTexelC").concat(2*f+1," = vec4(0.0);\n          xTexelC").concat(2*f+1,"Ready = 0;\n          xC").concat(f," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var I=0;I<(d+1)/2;I++){var C=2*I;if(p+="\n          xC = xCCorner + ".concat(C*u,";\n          "),1===c){if(C<g&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(C,"Ready == 0) {\n                  xTexelC").concat(C," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(C,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(C,"Ready = 1;\n                }\n              "),p+=1===u&&C>0?"\n                xC".concat(C," = vec4(xTexelC").concat(C-2,".zw, xTexelC").concat(C,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(C," = vec4(previous.zw, xTexelC").concat(C,".xy);\n                  } else {\n                    xC").concat(C," = vec4(0.0, 0.0, xTexelC").concat(C,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(C,"Ready == 0) {\n                  xTexelC").concat(C," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(C,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(C,"Ready = 1;\n                }\n\n                xC").concat(C," = xTexelC").concat(C,";\n                "),C+1<g)){var m=s%2===0?ie(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(m,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(C+1,"Ready == 0) {\n                    xTexelC").concat(C+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(C+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(C+1,"Ready = 1;\n                  }\n                  "),u>1&&(p+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(C,"Ready == 0) {\n                      xTexelC").concat(C," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(C,"Ready = 1;\n                    }\n                    ")),p+="\n                  xC".concat(C+1," = vec4(xTexelC").concat(C,".zw, xTexelC").concat(C+1,".xy);\n                  ")):p+=1===m?"\n                    xC".concat(C+1," = xTexelC").concat(C,";\n                    "):"\n                    xCOffset = xC + ".concat(m,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(C+1,"Ready == 0) {\n                      xTexelC").concat(C+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(C+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(C+1,"Ready = 1;\n                    }\n\n                    xC").concat(C+1," = xTexelC").concat(C+1,";\n                    ")}}else C<g&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(C,"Ready == 0) {\n                  xTexelC").concat(C," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(C,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(C,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(C+1,"Ready == 0) {\n                  xTexelC").concat(C+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(C+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(C+1,"Ready = 1;\n                }\n\n                xC").concat(C," = vec4(xTexelC").concat(C,".zw, xTexelC").concat(C+1,".zw);\n              "),C+1<g&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(C+1," = vec4(xTexelC").concat(C+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(C,"Ready == 0) {\n                  xTexelC").concat(C," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(C,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(C,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(C+1,"Ready == 0) {\n                  xTexelC").concat(C+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(C+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(C+1,"Ready = 1;\n                }\n\n                xC").concat(C," = vec4(\n                  xTexelC").concat(C,".xy, xTexelC").concat(C+1,".xy);\n              "),C+1<g&&(p+="\n                  xC".concat(C+1," = vec4(xTexelC").concat(C,".zw, xTexelC").concat(C+1,".zw);\n                "))));C<g&&(p+="\n            wTexel = getW(r, ".concat(C,", d1, q);\n            dotProd += xC").concat(C," * vec4(wTexel.xz, wTexel.xz);\n          "),C+1<g&&(p+="\n              wTexel = getW(r, ".concat(C+1,", d1, q);\n              dotProd += xC").concat(C+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var v="",b="";r&&(v=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),b="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(A,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")}));var nH={kernelName:Ot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,c=r.dilations,u=r.dimRoundingMode,l=c;null==l&&(l=[1,1]),ge(Ou(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var g,d=Tu(a.shape,o.shape,i,l,s,u,!0);g=tt().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new tH(d):new eH(d);var p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(g,[a,o],"float32",p)}},rH=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),aH=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,c=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(c,"; dm++) {\n              int d2 = d1 * ").concat(c," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var oH={kernelName:Ut,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=r.filterShape,g=Tu(a.shape,l,i,s,c,u,!0),d=new rH(g);return n.runWebGLProgram(d,[a,o],"float32")}};var iH={kernelName:jt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=Tu(r.inputShape,o.shape,i,s,c,u,!0),g=new aH(l);return n.runWebGLProgram(g,[a,o],"float32")}},sH=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var cH={kernelName:Qt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,_.Z)(r.shape),(0,_.Z)(r.shape)),o=fe(r.shape),i=KE({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new sH(o),c=n.runWebGLProgram(s,[i],i.dtype),u=KE({inputs:{x:c},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),u}},uH=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,c=t.filterWidth,u=t.dilationHeight,l=t.dilationWidth,g=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(g,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(u,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(c,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var lH={kernelName:qt,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,c=a.pad,u=a.dilations,l=Ju(o.shape,i.shape,s,c,"NHWC",u),g=new uH(l),d=KE({inputs:{x:t=r.runWebGLProgram(g,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var gH={kernelName:nn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=Cf(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;vf(o.length,s,r);for(var c=bf(i,s),u=c.path,l=c.steps,g=l.length,d=null,p=o.length,h=[],f=0;f<g;++f){var I,C=(0,P.Z)(l[f]);try{for(C.s();!(I=C.n()).done;){var m=I.value,v=mf(p,s[m]),b=v.permutationIndices,A=v.expandDims,y=void 0;Af(b)?y=r[m]:(y=$E({inputs:{x:r[m]},backend:n,attrs:{perm:b}}),h.push(y));for(var k=y.shape.slice(),Z=0;Z<A.length;++Z)k.splice(A[Z],0,1);Ce(y.shape,k)||(y=KE({inputs:{x:y},backend:n,attrs:{shape:k}}),h.push(y)),null===d?d=y:(d=ME({inputs:{a:y,b:d},backend:n}),h.push(d))}}catch($K){C.e($K)}finally{C.f()}f<g-1&&(u[f]>=0&&(d=QE({inputs:{x:d},backend:n,attrs:{axis:u[f]-(o.length-p),keepDims:!1}}),h.push(d)),p--)}for(var S=0,w=h;S<w.length;S++){var B=w[S];B!==d&&n.disposeIntermediateTensorInfo(B)}return d}},dH=NE({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),pH={kernelName:rn,backendName:"webgl",kernelFunc:dH},hH={kernelName:an,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=tt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yE("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new AE("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},fH=XE({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:lF}),IH={kernelName:sn,backendName:"webgl",kernelFunc:fH},CH=NE({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(ef,";\n  float a1 = ").concat(tf,";\n  float a2 = ").concat(nf,";\n  float a3 = ").concat(rf,";\n  float a4 = ").concat(af,";\n  float a5 = ").concat(of,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),mH={kernelName:on,backendName:"webgl",kernelFunc:CH},vH=NE({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:gF,dtype:"float32"}),bH={kernelName:cn,backendName:"webgl",kernelFunc:vH};function AH(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),c=a;return a<0&&(ge(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),c=i+a+1),s.splice(c,0,1),KE({inputs:{x:o},backend:r,attrs:{shape:s}})}var yH={kernelName:un,backendName:"webgl",kernelFunc:AH},kH="return exp(x) - 1.0;",ZH=NE({opSnippet:kH,packedOpSnippet:kH,cpuKernelImpl:dF}),SH={kernelName:ln,backendName:"webgl",kernelFunc:ZH},wH=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function BH(e,t,n){var r=n.texData.get(e.dataId),a=fe(e.shape),o=e.shape[e.shape.length-1],i=KE({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,c=new wH("real",s,t),u=new wH("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],g=n.runWebGLProgram(c,l,"float32"),d=n.runWebGLProgram(u,l,"float32"),p=SE({inputs:{real:g,imag:d},backend:n});n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d);var h=KE({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),h}var GH={kernelName:gn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return BH(t.input,!1,n)}},xH=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function RH(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||Te(a))){var i=Ge(o,fe(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new xH(r,a),c=[[a]];return t.runWebGLProgram(s,[],o,c)}var WH,VH={kernelName:dn,backendName:"webgl",kernelFunc:RH},NH=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),XH={kernelName:pn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new NH(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},JH="return floor(x);",FH=NE({opSnippet:JH,packedOpSnippet:JH,cpuKernelImpl:pF}),EH={kernelName:hn,backendName:"webgl",kernelFunc:FH},TH=XE({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),YH={kernelName:fn,backendName:"webgl",kernelFunc:TH},HH=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"];var n=sJ(),r=(0,ne.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),MH=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=sJ(),r=(0,ne.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),DH={kernelName:ca,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,c=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=(0,ne.Z)(c,2),l=u[0],g=u[1],d=[g,l],p=[g,l,o];(s||i)&&(null==WH&&(WH=document.createElement("canvas").getContext("2d")),WH.canvas.width=l,WH.canvas.height=g,WH.drawImage(a,0,0,l,g),a=WH.canvas);var h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=ZX.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var f=tt().getBool("WEBGL_PACK")?new MH(p):new HH(p),I=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),I}};var KH={kernelName:ga,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,c=n.preluActivationWeights,u=a.strides,l=a.pad,g=a.dataFormat,d=a.dilations,p=a.dimRoundingMode,h=a.activation,f=a.leakyreluAlpha,I=Uu(g),C=Tu(o.shape,i.shape,u,d,l,p,!1,I),m=[];if(1!==C.filterHeight||1!==C.filterWidth||1!==C.dilationHeight||1!==C.dilationWidth||1!==C.strideHeight||1!==C.strideWidth||"SAME"!==C.padInfo.type&&"VALID"!==C.padInfo.type)if(tt().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=wY({x:o,filter:i,convInfo:C,backend:r,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:f});else{var v=null!=s,b=null!=c,A="leakyrelu"===h,y=h?JE(h,!1):null,k=new yY(C,v,y,b,A),Z=[o,i];if(s&&Z.push(s),c&&Z.push(c),A){var S=r.makeTensorInfo([],"float32",Ka(f,"float32"));Z.push(S),m.push(S)}t=r.runWebGLProgram(k,Z,"float32")}else t=SY({x:o,filter:i,convInfo:C,backend:r,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:f});var w=KE({inputs:{x:t},backend:r,attrs:{shape:C.outShape}});return m.push(t),m.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),w}};var zH={kernelName:da,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,c=r.strides,u=r.pad,l=r.dilations,g=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,h=[],f=l;null==f&&(f=[1,1]),ge(Ou(c,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(f,"'")}));var I,C=Tu(a.shape,o.shape,c,f,u,g,!0),m=tt().getBool("WEBGL_PACK_DEPTHWISECONV")&&C.strideWidth<=2&&C.outChannels/C.inChannels===1,v=d?JE(d,m):null,b=[a,o],A=null!=i,y=null!=s,k="leakyrelu"===d;if(A&&b.push(i),y&&b.push(s),k){var Z=n.makeTensorInfo([],"float32",Ka(p,"float32"));b.push(Z),h.push(Z)}I=m?new tH(C,A,v,y,k):new eH(C,A,v,y,k);var S=[[C.padInfo.top,C.padInfo.left],[C.strideHeight,C.strideWidth],[C.dilationHeight,C.dilationWidth],[C.inHeight,C.inWidth]],w=n.runWebGLProgram(I,b,"float32",S);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),w}},LH=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=VJ(n.length),o=VJ(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(i,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var PH={kernelName:mn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,i=o[o.length-1],s=fe(r.shape),c=Ls(r,a),u=(0,ne.Z)(c,4),l=u[0],g=u[1],d=u[2],p=u[3],h=KE({inputs:{x:a},backend:n,attrs:{shape:[g,i]}}),f=KE({inputs:{x:r},backend:n,attrs:{shape:[fe(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var I=n.readSync(a.dataId),C=n.bufferSync(r),m=hF(I,C,r.dtype,g,i,d,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,m.values)}var v=new LH(i,p,[g,d]),b=n.runWebGLProgram(v,[f,h],f.dtype),A=KE({inputs:{x:b},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(b),A}},_H=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=VJ(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function OH(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,c=Se(i,a.shape)[0];tt().get("DEBUG")&&function(){for(var e=n.readSync(o.dataId),t=a.shape[c],r=function(n){var r=e[n];ge(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},i=0;i<e.length;++i)r(i)}();var u=Tf(a,o,c,s),l=fe(o.shape),g=[],d=KE({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=KE({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,l/u.batchSize]}});g.push(d),g.push(p);var h=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var f=n.bufferSync(p),I=n.bufferSync(d),C=fF(I,f,h);return g.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(u.outputShape,C.dtype,C.values)}var m=new _H(d.shape,h),v=n.runWebGLProgram(m,[d,p],d.dtype);g.push(v);var b=KE({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return g.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}var UH={kernelName:Cn,backendName:"webgl",kernelFunc:OH},jH=XE({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:IF,dtype:"bool"}),QH={kernelName:vn,backendName:"webgl",kernelFunc:jH},qH=XE({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:CF}),$H={kernelName:bn,backendName:"webgl",kernelFunc:qH};var eM={kernelName:yn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return BH(t.input,!0,n)}},tM=NE({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),nM={kernelName:Zn,backendName:"webgl",kernelFunc:tM},rM=NE({opSnippet:"return float(isinf(x));",dtype:"bool"}),aM={kernelName:Sn,backendName:"webgl",kernelFunc:rM},oM=NE({opSnippet:"return float(isnan(x));",dtype:"bool"}),iM={kernelName:wn,backendName:"webgl",kernelFunc:oM},sM=XE({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:mF,dtype:"bool"}),cM={kernelName:Gn,backendName:"webgl",kernelFunc:sM},uM=XE({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:vF,dtype:"bool"}),lM={kernelName:xn,backendName:"webgl",kernelFunc:uM};var gM={kernelName:Rn,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=bF(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},dM=NE({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:AF}),pM={kernelName:Wn,backendName:"webgl",kernelFunc:dM},hM=NE({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),fM={kernelName:Vn,backendName:"webgl",kernelFunc:hM},IM=XE({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),CM={kernelName:Nn,backendName:"webgl",kernelFunc:IM},mM=NE({opSnippet:"return float(!(x >= 1.0));"}),vM={kernelName:Xn,backendName:"webgl",kernelFunc:mM},bM=XE({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),AM={kernelName:Jn,backendName:"webgl",kernelFunc:bM},yM=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,c=t[3]-1;this.outputShape=t;var u="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(u,")"):1===o?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(c,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")})),kM=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,c=t[3]-1;this.outputShape=t;var u="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(u,")"):1===o?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(c,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")})),ZM={kernelName:En,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,c=r.beta,u=tt().getBool("WEBGL_PACK_NORMALIZATION")?new kM(a.shape,o,i,s,c):new yM(a.shape,o,i,s,c);return n.runWebGLProgram(u,[a],a.dtype)}},SM=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),wM={kernelName:Tn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,c=r.bias,u=r.alpha,l=r.beta,g=new SM(a.shape,s,c,u,l);return n.runWebGLProgram(g,[a,o,i],a.dtype)}};function BM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=a.shape.length,c=Se(o,a.shape),u=c,l=vg(u,s),g=null!=l,d=n.shouldExecuteOnCPU([a]),p=a;if(g){if(d){for(var h=n.texData.get(p.dataId).values,f=new Array(s),I=0;I<f.length;I++)f[I]=a.shape[l[I]];var C=LF(h,a.shape,a.dtype,l,f);p=n.makeTensorInfo(f,a.dtype),n.texData.get(p.dataId).values=C}else p=jE(a,l,n);u=Ag(u.length,s)}mg("max",u,s);var m,v=Ig(p.shape,u),b=(0,ne.Z)(v,2),A=b[0],y=b[1],k=A;if(i&&(k=Cg(A,c)),d){var Z=n.texData.get(p.dataId).values,S=yF(Z,fe(y),k,a.dtype);m=n.makeTensorInfo(k,a.dtype),n.texData.get(m.dataId).values=S}else m=function(e,t,n,r){var a=fe(t),o=KE({inputs:{x:e},attrs:{shape:[fe(e.shape)/a,a]},backend:r}),i=_E(o,e.dtype,"max",r),s=KE({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(p,y,k,n);return g&&n.disposeIntermediateTensorInfo(p),m}var GM={kernelName:Yn,backendName:"webgl",kernelFunc:BM},xM=XE({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:kF}),RM={kernelName:Hn,backendName:"webgl",kernelFunc:xM};var WM={kernelName:Mn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;oJ(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,c=r.dimRoundingMode;ge(Ou(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var u=Fu(a.shape,o,i,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Ce(u.inShape,u.outShape))return kE({inputs:{x:a},backend:n});var l=new XT(u,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var VM={kernelName:Kn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,c=r.dataFormat,u=r.dimRoundingMode,l=Eu(a.shape,o,i,[1,1,1],s,u,c),g=new JT(l,"max",!1);return n.runWebGLProgram(g,[a],a.dtype)}},NM=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,c=i-1-t.padInfo.left,u=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(u," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),XM=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,g=c-1-t.padInfo.front,d=u-1-t.padInfo.top,p=l-1-t.padInfo.left,h=c*u*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(g,", ").concat(d,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(c,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(u," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var JM={kernelName:zn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,c=r.pad,u=r.dimRoundingMode,l=Eu(o.shape,i,s,[1,1,1],c,u),g=new JT(l,"max",!0),d=n.runWebGLProgram(g,[o],o.dtype),p=new XM(l),h=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),h}};var FM={kernelName:Dn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;oJ([o,t.output],"maxPoolGrad");var s=r.filterSize,c=r.strides,u=r.pad,l=r.dimRoundingMode,g=Fu(i.shape,s,c,1,u,l),d=new XT(g,"max",!0),p=n.runWebGLProgram(d,[i],i.dtype),h=new NM(g),f=n.runWebGLProgram(h,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),f}};var EM={kernelName:Ln,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,c=n.includeBatchInIndex,u=r;ge(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];ge(Ou(i,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(l,"'")}));var g=Fu(a.shape,o,i,l,s),d=function(e,t,n,r){var a=new XT(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new XT(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,c,g,u),p=(0,ne.Z)(d,2);return[p[0],p[1]]}};var TM={kernelName:Pn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,i=n.axis,s=r,c=a.shape.length,u=Se(i,a.shape),l=u,g=vg(l,c),d=null!=g,p=s.shouldExecuteOnCPU([a]),h=[],f=a;if(d){if(p){for(var I=s.texData.get(f.dataId).values,C=new Array(c),m=0;m<C.length;m++)C[m]=a.shape[g[m]];var v=LF(I,a.shape,a.dtype,g,C);f=s.makeTensorInfo(C,a.dtype),s.texData.get(f.dataId).values=v}else f=jE(a,g,s);h.push(f),l=Ag(l.length,c)}mg("sum",l,c);var b=Ig(f.shape,l),A=(0,ne.Z)(b,2),y=A[0],k=A[1],Z=y;o&&(Z=Cg(y,u));for(var S=function(e,t,n,r){var a=fe(t),o=KE({inputs:{x:e},attrs:{shape:[fe(e.shape)/a,a]},backend:r}),i=_E(o,"float32","mean",r),s=KE({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(f,k,Z,s),w=0,B=h;w<B.length;w++){var G=B[w];s.disposeIntermediateTensorInfo(G)}return S}};var YM={kernelName:_n,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,c=Se(o,a.shape),u=c,l=vg(u,s),g=a;null!=l&&(g=$E({inputs:{x:a},backend:n,attrs:{perm:l}}),u=Ag(u.length,a.shape.length)),mg("min",u,s);var d,p=Ig(g.shape,u),h=(0,ne.Z)(p,2),f=h[0],I=KE({inputs:{x:g},backend:n,attrs:{shape:[-1,fe(h[1])]}}),C=_E(I,I.dtype,"min",n);return d=KE(i?{inputs:{x:C},backend:n,attrs:{shape:Cg(f,c)}}:{inputs:{x:C},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(C),null!=l&&n.disposeIntermediateTensorInfo(g),d}},HM=XE({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:ZF}),MM={kernelName:On,backendName:"webgl",kernelFunc:HM},DM=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=VJ(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(u,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(u,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(c,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(u,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(u,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),KM=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=VJ(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=OF("rc",a),u=OF("source",a),l="".concat(c[a-1]," < ").concat(this.outputShape[a-1]),g=1===a?"source":"vec2(".concat(u.slice(-2).join(),")"),d="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(g,");\n        ").concat(c[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(g,");\n        }\n      ")}else{var f="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(f,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(g,");\n        ").concat(c[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(f,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(g,");\n        }\n        rc = outputLoc;\n        ").concat(c[a-2]," += 1;\n        if(").concat(c[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(f,"\n          result[2] = getChannel(getX(").concat(u.join(),"), ").concat(g,");\n          ").concat(c[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(f,"\n            result[3] = getChannel(getX(").concat(u.join(),"), ").concat(g,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),zM={kernelName:Un,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=tt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KM(a.shape,o,i):new DM(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},LM=XE({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),PM={kernelName:jn,backendName:"webgl",kernelFunc:LM},_M=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),OM=XE({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),UM={kernelName:tn,backendName:"webgl",kernelFunc:OM},jM="return a - b;",QM=XE({opSnippet:jM,packedOpSnippet:jM,supportsComplex:!0,cpuKernelImpl:DF}),qM={kernelName:jr,backendName:"webgl",kernelFunc:QM};function $M(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=Se([r.dim],a.shape),i=BM({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=Cg(i.shape,o),c=KE({inputs:{x:i},backend:n,attrs:{shape:s}}),u=QM({inputs:{a:a,b:c},backend:n}),l=vH({inputs:{x:u},backend:n}),g=QE({inputs:{x:l},backend:n,attrs:{axis:o,keepDims:!1}}),d=KE({inputs:{x:g},backend:n,attrs:{shape:s}}),p=OM({inputs:{a:l,b:d},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),p}var eD={kernelName:Tr,backendName:"webgl",kernelFunc:$M};var tD={kernelName:Qn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,c=s?a:$M({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=c.shape[0],l=c.shape[1],g=new _M(u,l,o),d=[[i]],p=n.runWebGLProgram(g,[c],"int32",d);return s||n.disposeIntermediateTensorInfo(c),p}};var nD={kernelName:$n,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),i=wF(o.values,a.shape,a.dtype),s=(0,ne.Z)(i,2),c=s[0],u=s[1];return r.makeTensorInfo(u,a.dtype,c)}return t=tt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new fE(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new tE(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},rD=Tp;var aD={kernelName:tr,backendName:"webgl",kernelFunc:function(e){pa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=n.readSync(a.dataId),l=n.readSync(o.dataId),g=rD(u,l,i,s,c).selectedIndices;return n.makeTensorInfo([g.length],"int32",new Int32Array(g))}},oD=Yp;var iD={kernelName:nr,backendName:"webgl",kernelFunc:function(e){pa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.padToMaxOutputSize,l=n.readSync(a.dataId),g=n.readSync(o.dataId),d=oD(l,g,i,s,c,u),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},sD=Hp;var cD={kernelName:rr,backendName:"webgl",kernelFunc:function(e){pa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.softNmsSigma,l=n.readSync(a.dataId),g=n.readSync(o.dataId),d=sD(l,g,i,s,c,u),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},uD=(0,j.Z)((function e(t,n,r,a){(0,U.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),lD={kernelName:or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,c=fe(a.shape),u=new uD(c,o,i,s),l=KE({inputs:{x:a},backend:n,attrs:{shape:[c]}}),g=n.runWebGLProgram(u,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var d=KE({inputs:{x:g},backend:n,attrs:{shape:[].concat((0,_.Z)(a.shape),[o])}});return n.disposeIntermediateTensorInfo(g),d}};function gD(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=nY({inputs:{input:r},backend:n}),o=gD({inputs:{x:a},backend:n}),i=CY({inputs:{input:r},backend:n}),s=gD({inputs:{x:i},backend:n}),c=SE({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}return RH({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var dD={kernelName:ia,backendName:"webgl",kernelFunc:gD};var pD={kernelName:ar,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=nY({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=CY({inputs:{input:a},backend:r}),c=gD({inputs:{x:s},backend:r}),u=SE({inputs:{real:i,imag:c},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(c),u}return RH({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var hD={kernelName:ir,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return AH({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){de(a,e.shape,"All tensors passed to stack must have matching shapes"),ge(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=bY({inputs:t.map((function(e){var t=AH({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},fD=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=VJ(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(c,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),ID=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=VJ(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=OF("rc",a),u=OF("source",a),l="".concat(c[a-1]," < ").concat(this.outputShape[a-1]),g=1===a?"source":"vec2(".concat(u.slice(-2).join(),")"),d=["".concat(o," rc = outputLoc;"),"".concat(c[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(c[a-2]," += 1;\n       if(").concat(c[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(c[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",f=0,I=1===a?2:4;f<I;f++)h+="\n        ".concat(d[f],"\n        if (").concat(p,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(u.join(),"), ").concat(g,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),CD=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;if(0===fe(a.shape)){var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return RH({backend:n,attrs:{shape:s,value:i,dtype:a.dtype}})}var c=tt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ID(a.shape,o,i):new fD(a.shape,o,i),u=[[i]];return n.runWebGLProgram(c,[a],a.dtype,u)},mD={kernelName:sr,backendName:"webgl",kernelFunc:CD},vD=XE({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),bD={kernelName:ur,backendName:"webgl",kernelFunc:vD};var AD={kernelName:gr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims,c=o.shape.length,u=[],l=Se(i,o.shape),g=l,d=vg(g,c),p=o;if(null!=d&&(p=$E({inputs:{x:o},backend:r,attrs:{perm:d}}),g=Ag(g.length,c),u.push(p)),mg("prod",g,c),r.shouldExecuteOnCPU([p])){var h=r.texData.get(p.dataId).values,f=GF(p.shape,p.dtype,h,g),I=f.outVals,C=f.outShape,m=f.outDtype;t=r.makeTensorInfo(C,m,I)}else{var v=Ig(p.shape,g),b=(0,ne.Z)(v,2),A=b[0],y=fe(b[1]),k=KE({inputs:{x:p},backend:r,attrs:{shape:[-1,y]}}),Z=_E(k,wo(o.dtype),"prod",r);t=KE({inputs:{x:Z},backend:r,attrs:{shape:A}}),u.push(k),u.push(Z)}if(s){u.push(t);var S=Cg(t.shape,l);t=KE({inputs:{x:t},backend:r,attrs:{shape:S}})}return u.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},yD=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=xF(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},kD={kernelName:dr,backendName:"webgl",kernelFunc:yD},ZD=NE({opSnippet:"return 1.0 / x;"}),SD={kernelName:hr,backendName:"webgl",kernelFunc:ZD},wD=NE({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),BD={kernelName:fr,backendName:"webgl",kernelFunc:wD},GD=NE({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),xD={kernelName:Ar,backendName:"webgl",kernelFunc:GD},RD=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var i=(0,ne.Z)(t,4),s=i[0],c=i[1],u=i[2],l=i[3];this.outputShape=[s,n,r,l];var g,d=[a&&n>1?c-1:c,a&&r>1?u-1:u],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];g=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(g,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),WD=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=(0,ne.Z)(t,4),s=i[0],c=i[1],u=i[2],l=i[3];this.outputShape=[s,n,r,l];var g,d=[a&&n>1?c-1:c,a&&r>1?u-1:u],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];g=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],",\n          ").concat(d[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(g,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var VD={kernelName:vr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size,c=(0,ne.Z)(s,2),u=c[0],l=c[1],g=tt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new WD(a.shape,u,l,o,i):new RD(a.shape,u,l,o,i);return n.runWebGLProgram(g,[a],"float32")}},ND=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,ne.Z)(n,3),o=a[1],i=a[2],s=(0,ne.Z)(t,3),c=s[1],u=s[2],l=[r&&c>1?o-1:o,r&&u>1?i-1:i],g=[r&&c>1?c-1:c,r&&u>1?u-1:u],d=l[0]/g[0],p=l[1]/g[1],h=1/d,f=1/p,I=2*Math.ceil(h)+2,C=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(f,");\n\n        const int winHeight = int(").concat(I,");\n        const int winWidth = int(").concat(C,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var XD={kernelName:br,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new ND(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},JD=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var i=(0,ne.Z)(t,4),s=i[0],c=i[1],u=i[2],l=i[3];this.outputShape=[s,n,r,l];var g,d=[a&&n>1?c-1:c,a&&r>1?u-1:u],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";g=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(g,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),FD=(0,j.Z)((function e(t,n,r,a,o){(0,U.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=(0,ne.Z)(t,4),s=i[0],c=i[1],u=i[2],l=i[3];this.outputShape=[s,n,r,l];var g,d=[a&&n>1?c-1:c,a&&r>1?u-1:u],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";g=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],",\n          ").concat(d[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(g,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var ED={kernelName:Cr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size,c=(0,ne.Z)(s,2),u=c[0],l=c[1],g=tt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new FD(a.shape,u,l,o,i):new JD(a.shape,u,l,o,i);return n.runWebGLProgram(g,[a],a.dtype)}},TD=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,ne.Z)(n,3),o=a[1],i=a[2],s=(0,ne.Z)(t,3),c=s[1],u=s[2],l=[r&&c>1?o-1:o,r&&u>1?i-1:i],g=[r&&c>1?c-1:c,r&&u>1?u-1:u],d=l[0]/g[0],p=l[1]/g[1],h=1/d,f=1/p,I=2*Math.ceil(h)+2,C=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(f,");\n\n        const int winHeight = int(").concat(I,");\n        const int winWidth = int(").concat(C,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(g[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(g[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var YD={kernelName:mr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new TD(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},HD=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=VJ(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),MD=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=OF("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=VJ(r);function c(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(o,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return c(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",c(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",c(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",c(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var DD={kernelName:yr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=Se(o,a.shape);if(0===i)return kE({inputs:{x:a},backend:n});var c=tt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MD(a.shape,s):new HD(a.shape,s);return n.runWebGLProgram(c,[a],a.dtype)}},KD=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o="";o="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),zD={kernelName:ua,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,c=r,u=new KD(a.shape,i),l=Ph(s,a.shape[1],a.shape[2]),g=(0,ne.Z)(l,2),d=[[g[0],g[1],Math.sin(o),Math.cos(o)]];return c.runWebGLProgram(u,[a],a.dtype,d)}},LD=NE({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),PD={kernelName:kr,backendName:"webgl",kernelFunc:LD},_D=NE({opSnippet:"return inversesqrt(x);",cpuKernelImpl:RF}),OD={kernelName:Zr,backendName:"webgl",kernelFunc:_D},UD=(0,j.Z)((function e(t,n,r,a,o,i){(0,U.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=VJ(o.length),c=VJ(i.length),u="";1===r?u="i":2===r&&(u="i, j");var l="getIndices(".concat(u,")"),g="";1===a?g="i":2===a&&(g="i, coords[1]");var d="getUpdates(".concat(g,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var jD={kernelName:Sr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=Os(0,a,i),c=s.sliceRank,u=s.numUpdates,l=s.sliceSize,g=s.strides,d=s.outputSize,p=[d/l,l];if(0===d)return n.makeTensorInfo(i,a.dtype);var h=KE({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}),f=KE({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}),I=n.makeTensorInfo([],"float32",new Float32Array([0])),C=new UD(u,c,h.shape.length,f.shape.length,g,p),m=n.runWebGLProgram(C,[f,h,I],f.dtype),v=KE({inputs:{x:m},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(I),v}},QD=(0,j.Z)((function e(t,n,r){var a,o;if((0,U.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],c=[],u=0;u<n.length;u++)c.push("".concat(i[u])),u<t&&s.push("".concat(i[u]));a=s.join(),o=c.join()}var l=VJ(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}));var qD={kernelName:wr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new QD(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],So(a.dtype,o.dtype))}},$D=NE({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(qh,";\n  float scale = ").concat($h,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),eK={kernelName:Br,backendName:"webgl",kernelFunc:$D},tK=NE({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:WF}),nK={kernelName:Vr,backendName:"webgl",kernelFunc:tK},rK=NE({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),aK={kernelName:Wr,backendName:"webgl",kernelFunc:rK},oK=NE({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),iK={kernelName:xr,backendName:"webgl",kernelFunc:oK},sK=NE({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),cK={kernelName:Rr,backendName:"webgl",kernelFunc:sK},uK=NE({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),lK={kernelName:Nr,backendName:"webgl",kernelFunc:uK},gK={kernelName:Fr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;ge(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),c=[[0,0]];c.push.apply(c,(0,_.Z)(i));for(var u=1+o.length;u<a.shape.length;++u)c.push([0,0]);var l=[],g=CD({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),d=_h(g.shape,o,s,!1),p=Oh(d.length,o.length,!1),h=Uh(g.shape,o,s,!1),f=KE({inputs:{x:g},backend:n,attrs:{shape:d}}),I=$E({inputs:{x:f},backend:n,attrs:{perm:p}}),C=KE({inputs:{x:I},backend:n,attrs:{shape:h}});return l.push(g),l.push(f),l.push(I),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}};var dK={kernelName:Yr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.readSync(r.dataId),c=n.readSync(a.dataId),u=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],g=XF(s,r.shape,r.dtype,c,a.dtype,u,l),d=(0,ne.Z)(g,5),p=d[0],h=d[1],f=d[2],I=d[3],C=d[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,f),n.makeTensorInfo([I.length],"bool",new Uint8Array(I.map((function(e){return Number(e)})))),n.makeTensorInfo([C.length],r.dtype,new Int32Array(C))]}};var pK={kernelName:Hr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),c=Array.from(n.readSync(o.dataId)),u=JF(s,r.shape,r.dtype,i,c),l=(0,ne.Z)(u,3),g=l[0],d=l[1],p=l[2];return[n.makeTensorInfo(d,r.dtype,g),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};var hK={kernelName:Mr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(o.dataId),u=FF(i,r.shape,r.dtype,s,c,!0),l=(0,ne.Z)(u,2),g=l[0],d=l[1];return n.makeTensorInfo(d,r.dtype,g)}};var fK={kernelName:Dr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(o.dataId),u=FF(i,r.shape,r.dtype,s,c),l=(0,ne.Z)(u,2),g=l[0],d=l[1];return n.makeTensorInfo(d,r.dtype,g)}};var IK={kernelName:Kr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,c=Os(0,a,s),u=c.sliceRank,l=c.numUpdates,g=c.strides,d=c.outputSize,p=new UD(l,u,a.shape.length,o.shape.length,g,[d,1],!1),h=n.runWebGLProgram(p,[o,a,i],o.dtype),f=KE({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),f}};var CK={kernelName:Er,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=Se(r.axis,a.shape)[0],s=kf(a,o,i),c=a.shape.length,u=new Array(c).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,_.Z)(l);t[i]=e;var r=UT({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},mK="return sqrt(x);",vK=NE({opSnippet:mK,packedOpSnippet:mK,cpuKernelImpl:EF}),bK={kernelName:Xr,backendName:"webgl",kernelFunc:vK},AK=NE({opSnippet:"return x * x;"}),yK={kernelName:Lr,backendName:"webgl",kernelFunc:AK},kK="return (a - b) * (a - b);",ZK=XE({opSnippet:kK,packedOpSnippet:kK}),SK={kernelName:zr,backendName:"webgl",kernelFunc:ZK};var wK={kernelName:sa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=nE+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new tE(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},BK=(0,j.Z)((function e(t,n,r){(0,U.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=VJ(r.length),i=VJ(r.length),s="";if(1===a)s="coords * strides + begin";else{var c=0;s=r.map((function(e,t){return c++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(c-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var GK={kernelName:Pr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,c=a.strides,u=a.beginMask,l=a.endMask,g=a.ellipsisMask,d=a.newAxisMask,p=a.shrinkAxisMask,h=lc(o.shape,i,s,c,u,l,g,d,p),f=h.finalShapeSparse,I=h.finalShape,C=h.isIdentity,m=h.sliceDim0,v=h.isSimpleSlice,b=h.begin,A=h.end,y=h.strides;if(C)t=KE({inputs:{x:o},backend:r,attrs:{shape:I}});else if(m||v){ge(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var k=Qs(b,A,y),Z=UT({inputs:{x:o},backend:r,attrs:{begin:b,size:k}});t=KE({inputs:{x:Z},backend:r,attrs:{shape:I}}),r.disposeIntermediateTensorInfo(Z)}else{if(r.shouldExecuteOnCPU([o])){var S=r.readSync(o.dataId),w=os(o.shape,o.dtype,S),B=TF(f,w,y,b);t=r.makeTensorInfo(I,o.dtype,B.values)}else{var G=new BK(b,y,f);t=r.runWebGLProgram(G,[o],o.dtype)}}var x=KE({inputs:{x:t},backend:r,attrs:{shape:I}});return r.disposeIntermediateTensorInfo(t),x}};var xK={kernelName:_r,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,c=r.padWidth,u=r.preserveShortSequences,l=t.data,g=t.dataSplits,d=n.readSync(l.dataId),p=n.readSync(g.dataId),h=YF(d,p,a,o,i,s,c,u),f=(0,ne.Z)(h,2),I=f[0],C=f[1];return[n.makeTensorInfo([I.length],"string",I),n.makeTensorInfo(g.shape,"int32",C)]}};var RK={kernelName:Or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=n.readSync(a.dataId),s=n.readSync(o.dataId)[0],c=HF(i,s,r),u=(0,ne.Z)(c,3),l=u[0],g=u[1],d=u[2],p=g.length;return[n.makeTensorInfo([p,2],"int32",l),n.makeTensorInfo([p],"string",g),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};var WK={kernelName:Ur,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=MF(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},VK=NE({opSnippet:"return tan(x);"}),NK={kernelName:Qr,backendName:"webgl",kernelFunc:VK},XK=NE({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),JK={kernelName:qr,backendName:"webgl",kernelFunc:XK},FK=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=VJ(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}));function EK(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),s="string"===a.dtype?i.map((function(e){return Oa(e)})):i,c=os(a.shape,a.dtype,s),u=KF(c,o);return n.makeTensorInfo(u.shape,u.dtype,u.values)}var l=new FK(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var TK={kernelName:$r,backendName:"webgl",kernelFunc:EK},YK=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),HK=(0,j.Z)((function e(t){(0,U.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function MK(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function DK(e){for(var t=1;t<e;)t*=2;return t}var KK={kernelName:ea,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=tt().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=tt().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,l=u[u.length-1];if(n.shouldExecuteOnCPU([a])||l<s||o>c){var g=n.readSync(a.dataId),d=zF(g,u,a.dtype,o,i),p=(0,ne.Z)(d,2),h=p[0],f=p[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(f.shape,f.dtype,f.values)]}if(0===o)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===l)return[a,RH({attrs:{shape:u,dtype:"int32",value:0},backend:n})];var I=n.texData.get(a.dataId),C=null!==I&&I.isPacked,m=C?n.unpackTensor(a):a,v=fe(u)/l,b=KE({inputs:{x:m},attrs:{shape:[v,l]},backend:n});C&&MK(n,m);for(var A=DK(o),y=DK(l),k=null,Z=function(){return null===k?[b,b]:[b,k]},S=function(e,t,r){var a=Z(),o=new YK(r),i=[[l],[null===k?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=k;k=n.runWebGLProgram(o,a,"int32",i),MK(n,s)},w=1;w<A;w*=2)for(var B=2*w,G=w;G>=1;G/=2)S(B,G,[v,y]);for(var x=y;x>A;x/=2){var R=Z(),W=new HK([v,x/2]),V=[[l],[null===k?1:0],[A]],N=k;k=n.runWebGLProgram(W,R,"int32",V),MK(n,N);for(var X=A/2,J=2*X,F=X;F>=1;F/=2)S(J,F,k.shape)}var E=k;k=UT({inputs:{x:k},backend:n,attrs:{begin:0,size:[v,o]}}),MK(n,E);var T=OH({inputs:{x:b,indices:k},backend:n,attrs:{axis:1,batchDims:1}});MK(n,b);var Y=u.slice(0,-1);Y.push(o),E=k,k=KE({inputs:{x:k},attrs:{shape:Y},backend:n}),MK(n,E);var H=T;return T=KE({inputs:{x:T},attrs:{shape:Y},backend:n}),MK(n,H),[T,k]}},zK=(0,j.Z)((function e(t,n,r,a,o,i){(0,U.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,c="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(c," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var LK={kernelName:ta,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,i=r.interpolation,s=r.fillMode,c=r.fillValue,u=r.outputShape,l=(0,ne.Z)(a.shape,4),g=l[0],d=l[1],p=l[2],h=l[3],f=null!=u?u:[d,p],I=(0,ne.Z)(f,2),C=I[0],m=I[1],v=new zK(d,p,i,s,c,[g,C,m,h]);return n.runWebGLProgram(v,[a,o],"float32")}};var PK={kernelName:ra,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;oJ(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=PF(i,a,o.shape,o.dtype),c=s.outputValues,u=s.outputShape,l=s.indices;return[r.makeTensorInfo(u,o.dtype,c),r.makeTensorInfo([l.length],"int32",l)]}};var _K={kernelName:aa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,c=a.shape[o],u=new Array(s-1),l=0,g=0;g<s;g++)g!==o&&(u[l++]=i.shape[g]);var d=[],p=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var f=new Array(c),I=0;I<f.length;I++){p[o]=I;var C=UT({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),m=KE({inputs:{x:C},backend:n,attrs:{shape:u}});f[I]=m,d.push(C)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}},OK=(0,j.Z)((function e(t,n){(0,U.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var c=4*Math.floor(r/4),u=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",g="";o%r>0&&(g="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(g,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var UK={kernelName:oa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,c=[],u=0,l=vg([u],s),g=a;null!=l&&(g=$E({inputs:{x:a},backend:n,attrs:{perm:l}}),c.push(g),u=Ag(1,s)[0]);var d=Ef(g.shape,u,i),p=fe([g.shape[u]]),h=KE({inputs:{x:g},backend:n,attrs:{shape:[-1,p]}});c.push(h);var f=function e(t,r,a,o,i){var s=t.shape[0],u=t.shape[1],l=Ff(u,i),g=new OK({windowSize:l,inSize:u,batchSize:s,numSegments:i},r),d=n.compileAndRun(g,[t,a],o);if(c.push(d),d.shape[1]===i)return d;var p=yD({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=EK({inputs:{x:p},backend:n,attrs:{reps:[u/l]}});return c.push(p),c.push(h),e(d,r,h,o,i)}(h,"unsortedSegmentSum",o,wo(a.dtype),i),I=KE({inputs:{x:f},backend:n,attrs:{shape:d}}),C=I;if(null!=l){c.push(I);var m=bg(l);C=$E({inputs:{x:C},backend:n,attrs:{perm:m}})}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}},jK=0,QK=[nT,aT,iT,cT,gT,hT,fT,IT,yT,kT,ST,BT,xT,WT,NT,FT,ET,HT,MT,DT,LT,QT,qT,$T,aY,sY,lY,wE,pY,AY,BY,VY,NY,XY,JY,FY,TY,HY,DY,PY,jY,QY,$Y,nH,oH,iH,cH,lH,gH,pH,hH,IH,mH,bH,yH,SH,GH,VH,XH,EH,YH,DH,KH,zH,PH,UH,QH,$H,ZE,eM,mY,nM,aM,iM,xE,cM,lM,gM,pM,fM,CM,vM,AM,ZM,wM,GM,RM,WM,VM,JM,FM,EM,TM,YM,MM,zM,PM,tD,DE,nD,aD,iD,cD,tY,lD,pD,hD,mD,bD,VE,AD,kD,rY,UM,SD,BD,xD,zE,VD,XD,ED,YD,DD,zD,PD,OD,jD,qD,eK,nK,aK,iK,cK,jT,eD,lK,gK,dK,pK,hK,fK,IK,CK,bK,yK,SK,wK,GK,xK,RK,WK,qM,qE,NK,JK,TK,KK,LK,eT,PK,_K,UK,dD];jK<QK.length;jK++){ba(QK[jK])}var qK={"tfjs-core":wc,"tfjs-backend-cpu":"3.15.0","tfjs-backend-webgl":"3.15.0","tfjs-data":pG,"tfjs-layers":Wb,"tfjs-converter":Qw,tfjs:"3.15.0"}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=a.apply(null,n);i&&e.push(i)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"===typeof e||"number"===typeof e)a+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})},8177:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.BlockCipher,n=e.algo,r=[],a=[],i=[],s=[],c=[],u=[],l=[],g=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var h=o^o<<1^o<<2^o<<3^o<<4;h=h>>>8^255&h^99,r[n]=h,a[h]=n;var f=e[n],I=e[f],C=e[I],m=257*e[h]^16843008*h;i[n]=m<<24|m>>>8,s[n]=m<<16|m>>>16,c[n]=m<<8|m>>>24,u[n]=m,m=16843009*C^65537*I^257*f^16843008*n,l[h]=m<<24|m>>>8,g[h]=m<<16|m>>>16,d[h]=m<<8|m>>>24,p[h]=m,n?(n=f^e[e[e[C^f]]],o^=e[e[o]]):n=o=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],f=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,a=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],i=0;i<a;i++)i<n?o[i]=t[i]:(u=o[i-1],i%n?n>6&&i%n==4&&(u=r[u>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u]):(u=r[(u=u<<8|u>>>24)>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u],u^=h[i/n|0]<<24),o[i]=o[i-n]^u);for(var s=this._invKeySchedule=[],c=0;c<a;c++){if(i=a-c,c%4)var u=o[i];else u=o[i-4];s[c]=c<4||i<=4?u:l[r[u>>>24]]^g[r[u>>>16&255]]^d[r[u>>>8&255]]^p[r[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,s,c,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,g,d,p,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,a,o,i,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],g=e[t+2]^n[2],d=e[t+3]^n[3],p=4,h=1;h<c;h++){var f=r[u>>>24]^a[l>>>16&255]^o[g>>>8&255]^i[255&d]^n[p++],I=r[l>>>24]^a[g>>>16&255]^o[d>>>8&255]^i[255&u]^n[p++],C=r[g>>>24]^a[d>>>16&255]^o[u>>>8&255]^i[255&l]^n[p++],m=r[d>>>24]^a[u>>>16&255]^o[l>>>8&255]^i[255&g]^n[p++];u=f,l=I,g=C,d=m}f=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[g>>>8&255]<<8|s[255&d])^n[p++],I=(s[l>>>24]<<24|s[g>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[p++],C=(s[g>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[p++],m=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&g])^n[p++],e[t]=f,e[t+1]=I,e[t+2]=C,e[t+3]=m},keySize:8});e.AES=t._createHelper(f)}(),o.AES)}()},3650:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(8228),void(o.lib.Cipher||function(e){var t=o,n=t.lib,r=n.Base,a=n.WordArray,i=n.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),u=t.algo.EvpKDF,l=n.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:C}return function(t){return{encrypt:function(n,r,a){return e(r).encrypt(t,n,r,a)},decrypt:function(n,r,a){return e(r).decrypt(t,n,r,a)}}}}()}),g=(n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=g.CBC=function(){var t=d.extend();function n(t,n,r){var a,o=this._iv;o?(a=o,this._iv=e):a=this._prevBlock;for(var i=0;i<r;i++)t[n+i]^=a[i]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize;n.call(this,e,t,a),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+a)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize,o=e.slice(t,t+a);r.decryptBlock(e,t),n.call(this,e,t,a),this._prevBlock=o}}),t}(),h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(o);var c=a.create(i,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},f=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:h}),reset:function(){var e;l.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),I=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),f.create({ciphertext:n,salt:t})}},C=n.SerializableCipher=r.extend({cfg:r.extend({format:I}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var a=e.createEncryptor(n,r),o=a.finalize(t),i=a.cfg;return f.create({ciphertext:o,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),m=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var o=u.create({keySize:t+n}).compute(e,r),i=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,f.create({key:o,iv:i,salt:r})}},v=n.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:m}),encrypt:function(e,t,n,r){var a=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=a.iv;var o=C.encrypt.call(this,e,t,a.key,r);return o.mixIn(a),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var a=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=a.iv,C.decrypt.call(this,e,t,a.key,r)}})}()))}()},8926:function(e,t,n){e.exports=function(){var e=e||function(e,t){var r;if("undefined"!==typeof window&&window.crypto&&(r=window.crypto),"undefined"!==typeof self&&self.crypto&&(r=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!==typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!==typeof n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(I){}var a=function(){if(r){if("function"===typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(I){}if("function"===typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(I){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},s=i.lib={},c=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||g).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<a;o++){var i=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=i<<24-(r+o)%4*8}else for(var s=0;s<a;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(a());return new u.init(t,e)}}),l=i.enc={},g=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,a=r.words,o=r.sigBytes,i=this.blockSize,s=o/(4*i),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,l=e.min(4*c,o);if(c){for(var g=0;g<c;g+=i)this._doProcessBlock(a,g);n=a.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(s.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),i.algo={});return i}(Math);return e}()},3713:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib.WordArray;function n(e,n,r){for(var a=[],o=0,i=0;i<n;i++)if(i%4){var s=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;a[o>>>2]|=s<<24-o%4*8,o++}return t.create(a,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var a=[],o=0;o<n;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)a.push(r.charAt(i>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e){var t=e.length,r=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var o=0;o<r.length;o++)a[r.charCodeAt(o)]=o}var i=r.charAt(64);if(i){var s=e.indexOf(i);-1!==s&&(t=s)}return n(e,t,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),a.enc.Base64)}()},4728:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib.WordArray;function n(e,n,r){for(var a=[],o=0,i=0;i<n;i++)if(i%4){var s=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;a[o>>>2]|=s<<24-o%4*8,o++}return t.create(a,o)}e.enc.Base64url={stringify:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.words,r=e.sigBytes,a=t?this._safe_map:this._map;e.clamp();for(var o=[],i=0;i<r;i+=3)for(var s=(n[i>>>2]>>>24-i%4*8&255)<<16|(n[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|n[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<r;c++)o.push(a.charAt(s>>>6*(3-c)&63));var u=a.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.length,a=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<a.length;i++)o[a.charCodeAt(i)]=i}var s=a.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(r=c)}return n(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),a.enc.Base64url)}()},1551:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib.WordArray,n=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a+=2){var o=t[a>>>2]>>>16-a%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],a=0;a<n;a++)r[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],o=0;o<n;o+=2){var i=r(t[o>>>2]>>>16-o%4*8&65535);a.push(String.fromCharCode(i))}return a.join("")},parse:function(e){for(var n=e.length,a=[],o=0;o<n;o++)a[o>>>1]|=r(e.charCodeAt(o)<<16-o%2*16);return t.create(a,2*n)}}}(),a.enc.Utf16)}()},8228:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(5590),n(5086),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,a=e.algo,i=a.MD5,s=a.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,a=this.cfg,o=a.hasher.create(),i=r.create(),s=i.words,c=a.keySize,u=a.iterations;s.length<c;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var l=1;l<u;l++)n=o.finalize(n),o.reset();i.concat(n)}return i.sigBytes=4*c,i}});e.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),o.EvpKDF)}()},1863:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),function(e){var t=o,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),o.format.Hex)}()},5086:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),void function(){var e=a,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,a=4*r;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),s=o.words,c=i.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=i.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}()},9704:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),n(5533),n(1551),n(3713),n(4728),n(3074),n(5590),n(9517),n(3183),n(4345),n(6319),n(6853),n(77),n(5086),n(3822),n(8228),n(3650),n(5152),n(2992),n(7223),n(5858),n(130),n(2409),n(4823),n(6644),n(1181),n(8413),n(1863),n(8177),n(2550),n(1325),n(2639),n(2130),o)}()},5533:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){if("function"==typeof ArrayBuffer){var e=a.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],a=0;a<n;a++)r[a>>>2]|=e[a]<<24-a%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),a.lib.WordArray)}()},3074:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=i.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,i=e[t+0],c=e[t+1],p=e[t+2],h=e[t+3],f=e[t+4],I=e[t+5],C=e[t+6],m=e[t+7],v=e[t+8],b=e[t+9],A=e[t+10],y=e[t+11],k=e[t+12],Z=e[t+13],S=e[t+14],w=e[t+15],B=o[0],G=o[1],x=o[2],R=o[3];B=u(B,G,x,R,i,7,s[0]),R=u(R,B,G,x,c,12,s[1]),x=u(x,R,B,G,p,17,s[2]),G=u(G,x,R,B,h,22,s[3]),B=u(B,G,x,R,f,7,s[4]),R=u(R,B,G,x,I,12,s[5]),x=u(x,R,B,G,C,17,s[6]),G=u(G,x,R,B,m,22,s[7]),B=u(B,G,x,R,v,7,s[8]),R=u(R,B,G,x,b,12,s[9]),x=u(x,R,B,G,A,17,s[10]),G=u(G,x,R,B,y,22,s[11]),B=u(B,G,x,R,k,7,s[12]),R=u(R,B,G,x,Z,12,s[13]),x=u(x,R,B,G,S,17,s[14]),B=l(B,G=u(G,x,R,B,w,22,s[15]),x,R,c,5,s[16]),R=l(R,B,G,x,C,9,s[17]),x=l(x,R,B,G,y,14,s[18]),G=l(G,x,R,B,i,20,s[19]),B=l(B,G,x,R,I,5,s[20]),R=l(R,B,G,x,A,9,s[21]),x=l(x,R,B,G,w,14,s[22]),G=l(G,x,R,B,f,20,s[23]),B=l(B,G,x,R,b,5,s[24]),R=l(R,B,G,x,S,9,s[25]),x=l(x,R,B,G,h,14,s[26]),G=l(G,x,R,B,v,20,s[27]),B=l(B,G,x,R,Z,5,s[28]),R=l(R,B,G,x,p,9,s[29]),x=l(x,R,B,G,m,14,s[30]),B=g(B,G=l(G,x,R,B,k,20,s[31]),x,R,I,4,s[32]),R=g(R,B,G,x,v,11,s[33]),x=g(x,R,B,G,y,16,s[34]),G=g(G,x,R,B,S,23,s[35]),B=g(B,G,x,R,c,4,s[36]),R=g(R,B,G,x,f,11,s[37]),x=g(x,R,B,G,m,16,s[38]),G=g(G,x,R,B,A,23,s[39]),B=g(B,G,x,R,Z,4,s[40]),R=g(R,B,G,x,i,11,s[41]),x=g(x,R,B,G,h,16,s[42]),G=g(G,x,R,B,C,23,s[43]),B=g(B,G,x,R,b,4,s[44]),R=g(R,B,G,x,k,11,s[45]),x=g(x,R,B,G,w,16,s[46]),B=d(B,G=g(G,x,R,B,p,23,s[47]),x,R,i,6,s[48]),R=d(R,B,G,x,m,10,s[49]),x=d(x,R,B,G,S,15,s[50]),G=d(G,x,R,B,I,21,s[51]),B=d(B,G,x,R,k,6,s[52]),R=d(R,B,G,x,h,10,s[53]),x=d(x,R,B,G,A,15,s[54]),G=d(G,x,R,B,c,21,s[55]),B=d(B,G,x,R,v,6,s[56]),R=d(R,B,G,x,w,10,s[57]),x=d(x,R,B,G,C,15,s[58]),G=d(G,x,R,B,Z,21,s[59]),B=d(B,G,x,R,f,6,s[60]),R=d(R,B,G,x,y,10,s[61]),x=d(x,R,B,G,p,15,s[62]),G=d(G,x,R,B,b,21,s[63]),o[0]=o[0]+B|0,o[1]=o[1]+G|0,o[2]=o[2]+x|0,o[3]=o[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var o=e.floor(r/4294967296),i=r;n[15+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,a,o,i){var s=e+(t&n|~t&r)+a+i;return(s<<o|s>>>32-o)+t}function l(e,t,n,r,a,o,i){var s=e+(t&r|n&~r)+a+i;return(s<<o|s>>>32-o)+t}function g(e,t,n,r,a,o,i){var s=e+(t^n^r)+a+i;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,a,o,i){var s=e+(n^(t|~r))+a+i;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),a.MD5)}()},5152:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.CFB=function(){var e=o.lib.BlockCipherMode.extend();function t(e,t,n,r){var a,o=this._iv;o?(a=o.slice(0),this._iv=void 0):a=this._prevBlock,r.encryptBlock(a,0);for(var i=0;i<n;i++)e[t+i]^=a[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize;t.call(this,e,n,a,r),this._prevBlock=e.slice(n,n+a)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize,o=e.slice(n,n+a);t.call(this,e,n,a,r),this._prevBlock=o}}),e}(),o.mode.CFB)}()},7223:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.CTRGladman=function(){var e=o.lib.BlockCipherMode.extend();function t(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var r=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize,o=this._iv,i=this._counter;o&&(i=this._counter=o.slice(0),this._iv=void 0),n(i);var s=i.slice(0);r.encryptBlock(s,0);for(var c=0;c<a;c++)e[t+c]^=s[c]}});return e.Decryptor=r,e}(),o.mode.CTRGladman)}()},2992:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.CTR=function(){var e=o.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0);var i=o.slice(0);n.encryptBlock(i,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=i[s]}});return e.Decryptor=t,e}(),o.mode.CTR)}()},130:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.ECB=function(){var e=o.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),o.mode.ECB)}()},5858:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.OFB=function(){var e=o.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,o=this._keystream;a&&(o=this._keystream=a.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var i=0;i<r;i++)e[t+i]^=o[i]}});return e.Decryptor=t,e}(),o.mode.OFB)}()},2409:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,a=r-n%r,o=n+a-1;e.clamp(),e.words[o>>>2]|=a<<24-o%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Ansix923)}()},4823:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.Iso10126={pad:function(e,t){var n=4*t,r=n-e.sigBytes%n;e.concat(o.lib.WordArray.random(r-1)).concat(o.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Iso10126)}()},6644:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.Iso97971={pad:function(e,t){e.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(e,t)},unpad:function(e){o.pad.ZeroPadding.unpad(e),e.sigBytes--}},o.pad.Iso97971)}()},8413:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding)}()},1181:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},o.pad.ZeroPadding)}()},3822:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(5590),n(5086),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,a=e.algo,i=a.SHA1,s=a.HMAC,c=a.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=s.create(n.hasher,e),o=r.create(),i=r.create([1]),c=o.words,u=i.words,l=n.keySize,g=n.iterations;c.length<l;){var d=a.update(t).finalize(i);a.reset();for(var p=d.words,h=p.length,f=d,I=1;I<g;I++){f=a.finalize(f),a.reset();for(var C=f.words,m=0;m<h;m++)p[m]^=C[m]}o.concat(d),u[0]++}return o.sigBytes=4*l,o}});e.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),o.PBKDF2)}()},2130:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=[],a=[],i=[],s=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)c.call(this);for(a=0;a<8;a++)r[a]^=n[a+4&7];if(t){var o=t.words,i=o[0],s=o[1],u=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),g=u>>>16|4294901760&l,d=l<<16|65535&u;for(r[0]^=u,r[1]^=g,r[2]^=l,r[3]^=d,r[4]^=u,r[5]^=g,r[6]^=l,r[7]^=d,a=0;a<4;a++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=c^u}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.RabbitLegacy=t._createHelper(s)}(),o.RabbitLegacy)}()},2639:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=[],a=[],i=[],s=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)a[n]^=r[n+4&7];if(t){var o=t.words,i=o[0],s=o[1],u=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),g=u>>>16|4294901760&l,d=l<<16|65535&u;for(a[0]^=u,a[1]^=g,a[2]^=l,a[3]^=d,a[4]^=u,a[5]^=g,a[6]^=l,a[7]^=d,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=c^u}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.Rabbit=t._createHelper(s)}(),o.Rabbit)}()},1325:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],a=0;a<256;a++)r[a]=a;a=0;for(var o=0;a<256;a++){var i=a%n,s=t[i>>>2]>>>24-i%4*8&255;o=(o+r[a]+s)%256;var c=r[a];r[a]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,n=this._j,r=0,a=0;a<4;a++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*a}return this._i=t,this._j=n,r}e.RC4=t._createHelper(r);var i=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});e.RC4Drop=t._createHelper(i)}(),o.RC4)}()},77:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=r.create([0,1518500249,1859775393,2400959708,2840853838]),d=r.create([1352829926,1548603684,1836072691,2053994217,0]),p=i.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o,i,p,b,A,y,k,Z,S,w,B,G=this._hash.words,x=g.words,R=d.words,W=s.words,V=c.words,N=u.words,X=l.words;for(y=o=G[0],k=i=G[1],Z=p=G[2],S=b=G[3],w=A=G[4],n=0;n<80;n+=1)B=o+e[t+W[n]]|0,B+=n<16?h(i,p,b)+x[0]:n<32?f(i,p,b)+x[1]:n<48?I(i,p,b)+x[2]:n<64?C(i,p,b)+x[3]:m(i,p,b)+x[4],B=(B=v(B|=0,N[n]))+A|0,o=A,A=b,b=v(p,10),p=i,i=B,B=y+e[t+V[n]]|0,B+=n<16?m(k,Z,S)+R[0]:n<32?C(k,Z,S)+R[1]:n<48?I(k,Z,S)+R[2]:n<64?f(k,Z,S)+R[3]:h(k,Z,S)+R[4],B=(B=v(B|=0,X[n]))+w|0,y=w,w=S,S=v(Z,10),Z=k,k=B;B=G[1]+p+S|0,G[1]=G[2]+b+w|0,G[2]=G[3]+A+y|0,G[3]=G[4]+o+k|0,G[4]=G[0]+i+Z|0,G[0]=B},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,o=a.words,i=0;i<5;i++){var s=o[i];o[i]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,n){return e^t^n}function f(e,t,n){return e&t|~e&n}function I(e,t,n){return(e|~t)^n}function C(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(p),t.HmacRIPEMD160=o._createHmacHelper(p)}(Math),a.RIPEMD160)}()},5590:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib,n=t.WordArray,r=t.Hasher,o=e.algo,i=[],s=o.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],u=0;u<80;u++){if(u<16)i[u]=0|e[t+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}var g=(r<<5|r>>>27)+c+i[u];g+=u<20?1518500249+(a&o|~a&s):u<40?1859775393+(a^o^s):u<60?(a&o|a&s|o&s)-1894007588:(a^o^s)-899497514,c=s,s=o,o=a<<30|a>>>2,a=r,r=g}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s)}(),a.SHA1)}()},3183:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(9517),function(){var e=o,t=e.lib.WordArray,n=e.algo,r=n.SHA256,a=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(a),e.HmacSHA224=r._createHmacHelper(a)}(),o.SHA224)}()},9517:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,a=0;a<64;)t(r)&&(a<8&&(s[a]=n(e.pow(r,.5))),c[a]=n(e.pow(r,1/3)),a++),r++}();var u=[],l=i.SHA256=o.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],s=n[4],l=n[5],g=n[6],d=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var h=u[p-15],f=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,I=u[p-2],C=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;u[p]=f+u[p-7]+C+u[p-16]}var m=r&a^r&o^a&o,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&g)+c[p]+u[p];d=g,g=l,l=s,s=i+b|0,i=o,o=a,a=r,r=b+(v+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+g|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),a.SHA256)}()},6853:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),function(e){var t=o,n=t.lib,r=n.WordArray,a=n.Hasher,i=t.x64.Word,s=t.algo,c=[],u=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,o=0;o<24;o++){for(var s=0,g=0,d=0;d<7;d++){if(1&a){var p=(1<<d)-1;p<32?g^=1<<p:s^=1<<p-32}128&a?a=a<<1^113:a<<=1}l[o]=i.create(s,g)}}();var g=[];!function(){for(var e=0;e<25;e++)g[e]=i.create()}();var d=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,a=0;a<r;a++){var o=e[t+2*a],i=e[t+2*a+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(G=n[a]).high^=i,G.low^=o}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var p=0,h=0,f=0;f<5;f++)p^=(G=n[d+5*f]).high,h^=G.low;var I=g[d];I.high=p,I.low=h}for(d=0;d<5;d++){var C=g[(d+4)%5],m=g[(d+1)%5],v=m.high,b=m.low;for(p=C.high^(v<<1|b>>>31),h=C.low^(b<<1|v>>>31),f=0;f<5;f++)(G=n[d+5*f]).high^=p,G.low^=h}for(var A=1;A<25;A++){var y=(G=n[A]).high,k=G.low,Z=c[A];Z<32?(p=y<<Z|k>>>32-Z,h=k<<Z|y>>>32-Z):(p=k<<Z-32|y>>>64-Z,h=y<<Z-32|k>>>64-Z);var S=g[u[A]];S.high=p,S.low=h}var w=g[0],B=n[0];for(w.high=B.high,w.low=B.low,d=0;d<5;d++)for(f=0;f<5;f++){var G=n[A=d+5*f],x=g[A],R=g[(d+1)%5+5*f],W=g[(d+2)%5+5*f];G.high=x.high^~R.high&W.high,G.low=x.low^~R.low&W.low}G=n[0];var V=l[s];G.high^=V.high,G.low^=V.low}},_doFinalize:function(){var t=this._data,n=t.words,a=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[a>>>5]|=1<<24-a%32,n[(e.ceil((a+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var i=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],l=0;l<c;l++){var g=i[l],d=g.high,p=g.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),u.push(p),u.push(d)}return new r.init(u,s)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=a._createHelper(d),t.HmacSHA3=a._createHmacHelper(d)}(Math),o.SHA3)}()},6319:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),n(4345),function(){var e=o,t=e.x64,n=t.Word,r=t.WordArray,a=e.algo,i=a.SHA512,s=a.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=i._createHelper(s),e.HmacSHA384=i._createHmacHelper(s)}(),o.SHA384)}()},4345:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),function(){var e=o,t=e.lib.Hasher,n=e.x64,r=n.Word,a=n.WordArray,i=e.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var l=i.SHA512=t.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],s=n[4],l=n[5],g=n[6],d=n[7],p=r.high,h=r.low,f=a.high,I=a.low,C=o.high,m=o.low,v=i.high,b=i.low,A=s.high,y=s.low,k=l.high,Z=l.low,S=g.high,w=g.low,B=d.high,G=d.low,x=p,R=h,W=f,V=I,N=C,X=m,J=v,F=b,E=A,T=y,Y=k,H=Z,M=S,D=w,K=B,z=G,L=0;L<80;L++){var P,_,O=u[L];if(L<16)_=O.high=0|e[t+2*L],P=O.low=0|e[t+2*L+1];else{var U=u[L-15],j=U.high,Q=U.low,q=(j>>>1|Q<<31)^(j>>>8|Q<<24)^j>>>7,$=(Q>>>1|j<<31)^(Q>>>8|j<<24)^(Q>>>7|j<<25),ee=u[L-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ae=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=u[L-7],ie=oe.high,se=oe.low,ce=u[L-16],ue=ce.high,le=ce.low;_=(_=(_=q+ie+((P=$+se)>>>0<$>>>0?1:0))+re+((P+=ae)>>>0<ae>>>0?1:0))+ue+((P+=le)>>>0<le>>>0?1:0),O.high=_,O.low=P}var ge,de=E&Y^~E&M,pe=T&H^~T&D,he=x&W^x&N^W&N,fe=R&V^R&X^V&X,Ie=(x>>>28|R<<4)^(x<<30|R>>>2)^(x<<25|R>>>7),Ce=(R>>>28|x<<4)^(R<<30|x>>>2)^(R<<25|x>>>7),me=(E>>>14|T<<18)^(E>>>18|T<<14)^(E<<23|T>>>9),ve=(T>>>14|E<<18)^(T>>>18|E<<14)^(T<<23|E>>>9),be=c[L],Ae=be.high,ye=be.low,ke=K+me+((ge=z+ve)>>>0<z>>>0?1:0),Ze=Ce+fe;K=M,z=D,M=Y,D=H,Y=E,H=T,E=J+(ke=(ke=(ke=ke+de+((ge+=pe)>>>0<pe>>>0?1:0))+Ae+((ge+=ye)>>>0<ye>>>0?1:0))+_+((ge+=P)>>>0<P>>>0?1:0))+((T=F+ge|0)>>>0<F>>>0?1:0)|0,J=N,F=X,N=W,X=V,W=x,V=R,x=ke+(Ie+he+(Ze>>>0<Ce>>>0?1:0))+((R=ge+Ze|0)>>>0<ge>>>0?1:0)|0}h=r.low=h+R,r.high=p+x+(h>>>0<R>>>0?1:0),I=a.low=I+V,a.high=f+W+(I>>>0<V>>>0?1:0),m=o.low=m+X,o.high=C+N+(m>>>0<X>>>0?1:0),b=i.low=b+F,i.high=v+J+(b>>>0<F>>>0?1:0),y=s.low=y+T,s.high=A+E+(y>>>0<T>>>0?1:0),Z=l.low=Z+H,l.high=k+Y+(Z>>>0<H>>>0?1:0),w=g.low=w+D,g.high=S+M+(w>>>0<D>>>0?1:0),G=d.low=G+z,d.high=B+K+(G>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),o.SHA512)}()},2550:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib,n=t.WordArray,r=t.BlockCipher,a=e.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=a.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=i[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var a=this._subKeys=[],o=0;o<16;o++){var u=a[o]=[],l=c[o];for(n=0;n<24;n++)u[n/6|0]|=t[(s[n]-1+l)%28]<<31-n%6,u[4+(n/6|0)]|=t[28+(s[n+24]-1+l)%28]<<31-n%6;for(u[0]=u[0]<<1|u[0]>>>31,n=1;n<7;n++)u[n]=u[n]>>>4*(n-1)+3;u[7]=u[7]<<5|u[7]>>>27}var g=this._invSubKeys=[];for(n=0;n<16;n++)g[n]=a[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var a=n[r],o=this._lBlock,i=this._rBlock,s=0,c=0;c<8;c++)s|=u[c][((i^a[c])&l[c])>>>0];this._lBlock=i,this._rBlock=o^s}var g=this._lBlock;this._lBlock=this._rBlock,this._rBlock=g,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=r._createHelper(g);var h=a.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),a=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=g.createEncryptor(n.create(t)),this._des2=g.createEncryptor(n.create(r)),this._des3=g.createEncryptor(n.create(a))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(h)}(),o.TripleDES)}()},3098:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.Base,o=n.WordArray,i=t.x64={};i.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,a=0;a<n;a++)t[a]=t[a].clone();return e}})}(),a)}()},3904:function(e,t,n){"use strict";n.r(t),n.d(t,{entries:function(){return m},keys:function(){return I},map:function(){return i},nest:function(){return s},set:function(){return f},values:function(){return C}});var r="$";function a(){}function o(e,t){var n=new a;if(e instanceof a)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,o=-1,i=e.length;if(null==t)for(;++o<i;)n.set(o,e[o]);else for(;++o<i;)n.set(t(r=e[o],o,e),r)}else if(e)for(var s in e)n.set(s,e[s]);return n}a.prototype=o.prototype={constructor:a,has:function(e){return r+e in this},get:function(e){return this[r+e]},set:function(e,t){return this[r+e]=t,this},remove:function(e){var t=r+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===r&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===r&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===r&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===r&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===r&&++e;return e},empty:function(){for(var e in this)if(e[0]===r)return!1;return!0},each:function(e){for(var t in this)t[0]===r&&e(this[t],t.slice(1),this)}};var i=o;function s(){var e,t,n,r=[],a=[];function o(n,a,s,c){if(a>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var u,l,g,d=-1,p=n.length,h=r[a++],f=i(),I=s();++d<p;)(g=f.get(u=h(l=n[d])+""))?g.push(l):f.set(u,[l]);return f.each((function(e,t){c(I,t,o(e,a,s,c))})),I}function s(e,n){if(++n>r.length)return e;var o,i=a[n-1];return null!=t&&n>=r.length?o=e.entries():(o=[],e.each((function(e,t){o.push({key:t,values:s(e,n)})}))),null!=i?o.sort((function(e,t){return i(e.key,t.key)})):o}return n={object:function(e){return o(e,0,c,u)},map:function(e){return o(e,0,l,g)},entries:function(e){return s(o(e,0,l,g),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return a[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function c(){return{}}function u(e,t,n){e[t]=n}function l(){return i()}function g(e,t,n){e.set(t,n)}function d(){}var p=i.prototype;function h(e,t){var n=new d;if(e instanceof d)e.each((function(e){n.add(e)}));else if(e){var r=-1,a=e.length;if(null==t)for(;++r<a;)n.add(e[r]);else for(;++r<a;)n.add(t(e[r],r,e))}return n}d.prototype=h.prototype={constructor:d,has:p.has,add:function(e){return this[r+(e+="")]=e,this},remove:p.remove,clear:p.clear,values:p.keys,size:p.size,empty:p.empty,each:p.each};var f=h;function I(e){var t=[];for(var n in e)t.push(n);return t}function C(e){var t=[];for(var n in e)t.push(e[n]);return t}function m(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}},7594:function(e,t,n){"use strict";function r(e,t){var n;function r(){var r,a,o=n.length,i=0,s=0;for(r=0;r<o;++r)i+=(a=n[r]).x,s+=a.y;for(i=i/o-e,s=s/o-t,r=0;r<o;++r)(a=n[r]).x-=i,a.y-=s}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r}function a(e){return function(){return e}}function o(){return 1e-6*(Math.random()-.5)}function i(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,o,i,s,c,u,l,g,d,p=e._root,h={data:r},f=e._x0,I=e._y0,C=e._x1,m=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((u=t>=(o=(f+C)/2))?f=o:C=o,(l=n>=(i=(I+m)/2))?I=i:m=i,a=p,!(p=p[g=l<<1|u]))return a[g]=h,e;if(s=+e._x.call(null,p.data),c=+e._y.call(null,p.data),t===s&&n===c)return h.next=p,a?a[g]=h:e._root=h,e;do{a=a?a[g]=new Array(4):e._root=new Array(4),(u=t>=(o=(f+C)/2))?f=o:C=o,(l=n>=(i=(I+m)/2))?I=i:m=i}while((g=l<<1|u)===(d=(c>=i)<<1|s>=o));return a[d]=p,a[g]=h,e}function s(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a}function c(e){return e[0]}function u(e){return e[1]}function l(e,t,n){var r=new g(null==t?c:t,null==n?u:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function g(e,t,n,r,a,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=o,this._root=void 0}function d(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}n.r(t),n.d(t,{forceCenter:function(){return r},forceCollide:function(){return I},forceLink:function(){return b},forceManyBody:function(){return U},forceRadial:function(){return j},forceSimulation:function(){return O},forceX:function(){return Q},forceY:function(){return q}});var p=l.prototype=g.prototype;function h(e){return e.x+e.vx}function f(e){return e.y+e.vy}function I(e){var t,n,r=1,i=1;function s(){for(var e,a,s,u,g,d,p,I=t.length,C=0;C<i;++C)for(a=l(t,h,f).visitAfter(c),e=0;e<I;++e)s=t[e],d=n[s.index],p=d*d,u=s.x+s.vx,g=s.y+s.vy,a.visit(m);function m(e,t,n,a,i){var c=e.data,l=e.r,h=d+l;if(!c)return t>u+h||a<u-h||n>g+h||i<g-h;if(c.index>s.index){var f=u-c.x-c.vx,I=g-c.y-c.vy,C=f*f+I*I;C<h*h&&(0===f&&(C+=(f=o())*f),0===I&&(C+=(I=o())*I),C=(h-(C=Math.sqrt(C)))/C*r,s.vx+=(f*=C)*(h=(l*=l)/(p+l)),s.vy+=(I*=C)*h,c.vx-=f*(h=1-h),c.vy-=I*h)}}}function c(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,a,o=t.length;for(n=new Array(o),r=0;r<o;++r)a=t[r],n[a.index]=+e(a,r,t)}}return"function"!==typeof e&&(e=a(null==e?1:+e)),s.initialize=function(e){t=e,u()},s.iterations=function(e){return arguments.length?(i=+e,s):i},s.strength=function(e){return arguments.length?(r=+e,s):r},s.radius=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),u(),s):e},s}p.copy=function(){var e,t,n=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=d(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=d(t));return n},p.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return i(this.cover(t,n),t,n,e)},p.addAll=function(e){var t,n,r,a,o=e.length,s=new Array(o),c=new Array(o),u=1/0,l=1/0,g=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,c[n]=a,r<u&&(u=r),r>g&&(g=r),a<l&&(l=a),a>d&&(d=a));if(u>g||l>d)return this;for(this.cover(u,l).cover(g,d),n=0;n<o;++n)i(this,s[n],c[n],e[n]);return this},p.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var i,s,c=a-n,u=this._root;n>e||e>=a||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(i=new Array(4))[s]=u,u=i,c*=2,s){case 0:a=n+c,o=r+c;break;case 1:n=a-c,o=r+c;break;case 2:a=n+c,r=o-c;break;case 3:n=a-c,r=o-c}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=a,this._y1=o,this},p.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},p.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},p.find=function(e,t,n){var r,a,o,i,c,u,l,g=this._x0,d=this._y0,p=this._x1,h=this._y1,f=[],I=this._root;for(I&&f.push(new s(I,g,d,p,h)),null==n?n=1/0:(g=e-n,d=t-n,p=e+n,h=t+n,n*=n);u=f.pop();)if(!(!(I=u.node)||(a=u.x0)>p||(o=u.y0)>h||(i=u.x1)<g||(c=u.y1)<d))if(I.length){var C=(a+i)/2,m=(o+c)/2;f.push(new s(I[3],C,m,i,c),new s(I[2],a,m,C,c),new s(I[1],C,o,i,m),new s(I[0],a,o,C,m)),(l=(t>=m)<<1|e>=C)&&(u=f[f.length-1],f[f.length-1]=f[f.length-1-l],f[f.length-1-l]=u)}else{var v=e-+this._x.call(null,I.data),b=t-+this._y.call(null,I.data),A=v*v+b*b;if(A<n){var y=Math.sqrt(n=A);g=e-y,d=t-y,p=e+y,h=t+y,r=I.data}}return r},p.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(i=+this._y.call(null,e)))return this;var t,n,r,a,o,i,s,c,u,l,g,d,p=this._root,h=this._x0,f=this._y0,I=this._x1,C=this._y1;if(!p)return this;if(p.length)for(;;){if((u=o>=(s=(h+I)/2))?h=s:I=s,(l=i>=(c=(f+C)/2))?f=c:C=c,t=p,!(p=p[g=l<<1|u]))return this;if(!p.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(n=t,d=g)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,r?(a?r.next=a:delete r.next,this):t?(a?t[g]=a:delete t[g],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=a,this)},p.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},p.root=function(){return this._root},p.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},p.visit=function(e){var t,n,r,a,o,i,c=[],u=this._root;for(u&&c.push(new s(u,this._x0,this._y0,this._x1,this._y1));t=c.pop();)if(!e(u=t.node,r=t.x0,a=t.y0,o=t.x1,i=t.y1)&&u.length){var l=(r+o)/2,g=(a+i)/2;(n=u[3])&&c.push(new s(n,l,g,o,i)),(n=u[2])&&c.push(new s(n,r,g,l,i)),(n=u[1])&&c.push(new s(n,l,a,o,g)),(n=u[0])&&c.push(new s(n,r,a,l,g))}return this},p.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var o,i=t.x0,c=t.y0,u=t.x1,l=t.y1,g=(i+u)/2,d=(c+l)/2;(o=a[0])&&n.push(new s(o,i,c,g,d)),(o=a[1])&&n.push(new s(o,g,c,u,d)),(o=a[2])&&n.push(new s(o,i,d,g,l)),(o=a[3])&&n.push(new s(o,g,d,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},p.x=function(e){return arguments.length?(this._x=e,this):this._x},p.y=function(e){return arguments.length?(this._y=e,this):this._y};var C=n(3904);function m(e){return e.index}function v(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function b(e){var t,n,r,i,s,c=m,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=a(30),g=1;function d(r){for(var a=0,i=e.length;a<g;++a)for(var c,u,l,d,p,h,f,I=0;I<i;++I)u=(c=e[I]).source,d=(l=c.target).x+l.vx-u.x-u.vx||o(),p=l.y+l.vy-u.y-u.vy||o(),d*=h=((h=Math.sqrt(d*d+p*p))-n[I])/h*r*t[I],p*=h,l.vx-=d*(f=s[I]),l.vy-=p*f,u.vx+=d*(f=1-f),u.vy+=p*f}function p(){if(r){var a,o,u=r.length,l=e.length,g=(0,C.map)(r,c);for(a=0,i=new Array(u);a<l;++a)(o=e[a]).index=a,"object"!==typeof o.source&&(o.source=v(g,o.source)),"object"!==typeof o.target&&(o.target=v(g,o.target)),i[o.source.index]=(i[o.source.index]||0)+1,i[o.target.index]=(i[o.target.index]||0)+1;for(a=0,s=new Array(l);a<l;++a)o=e[a],s[a]=i[o.source.index]/(i[o.source.index]+i[o.target.index]);t=new Array(l),h(),n=new Array(l),f()}}function h(){if(r)for(var n=0,a=e.length;n<a;++n)t[n]=+u(e[n],n,e)}function f(){if(r)for(var t=0,a=e.length;t<a;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e){r=e,p()},d.links=function(t){return arguments.length?(e=t,p(),d):e},d.id=function(e){return arguments.length?(c=e,d):c},d.iterations=function(e){return arguments.length?(g=+e,d):g},d.strength=function(e){return arguments.length?(u="function"===typeof e?e:a(+e),h(),d):u},d.distance=function(e){return arguments.length?(l="function"===typeof e?e:a(+e),f(),d):l},d}var A={value:function(){}};function y(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new k(r)}function k(e){this._=e}function Z(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function S(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function w(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=A,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}k.prototype=y.prototype={constructor:k,on:function(e,t){var n,r=this._,a=Z(e+"",r),o=-1,i=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<i;)if(n=(e=a[o]).type)r[n]=w(r[n],e.name,t);else if(null==t)for(n in r)r[n]=w(r[n],e.name,null);return this}for(;++o<i;)if((n=(e=a[o]).type)&&(n=S(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new k(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),o=0;o<n;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};var B,G,x=y,R=0,W=0,V=0,N=0,X=0,J=0,F="object"===typeof performance&&performance.now?performance:Date,E="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function T(){return X||(E(Y),X=F.now()+J)}function Y(){X=0}function H(){this._call=this._time=this._next=null}function M(e,t,n){var r=new H;return r.restart(e,t,n),r}function D(){X=(N=F.now())+J,R=W=0;try{!function(){T(),++R;for(var e,t=B;t;)(e=X-t._time)>=0&&t._call.call(null,e),t=t._next;--R}()}finally{R=0,function(){var e,t,n=B,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:B=t);G=e,z(r)}(),X=0}}function K(){var e=F.now(),t=e-N;t>1e3&&(J-=t,N=e)}function z(e){R||(W&&(W=clearTimeout(W)),e-X>24?(e<1/0&&(W=setTimeout(D,e-F.now()-J)),V&&(V=clearInterval(V))):(V||(N=F.now(),V=setInterval(K,1e3)),R=1,E(D)))}function L(e){return e.x}function P(e){return e.y}H.prototype=M.prototype={constructor:H,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?T():+n)+(null==t?0:+t),this._next||G===this||(G?G._next=this:B=this,G=this),this._call=e,this._time=n,z()},stop:function(){this._call&&(this._call=null,this._time=1/0,z())}};var _=Math.PI*(3-Math.sqrt(5));function O(e){var t,n=1,r=.001,a=1-Math.pow(r,1/300),o=0,i=.6,s=(0,C.map)(),c=M(l),u=x("tick","end");function l(){g(),u.call("tick",t),n<r&&(c.stop(),u.call("end",t))}function g(r){var c,u,l=e.length;void 0===r&&(r=1);for(var g=0;g<r;++g)for(n+=(o-n)*a,s.each((function(e){e(n)})),c=0;c<l;++c)null==(u=e[c]).fx?u.x+=u.vx*=i:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=i:(u.y=u.fy,u.vy=0);return t}function d(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var a=10*Math.sqrt(n),o=n*_;t.x=a*Math.cos(o),t.y=a*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),d(),t={tick:g,restart:function(){return c.restart(l),t},stop:function(){return c.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),s.each(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(i=1-e,t):1-i},force:function(e,n){return arguments.length>1?(null==n?s.remove(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var a,o,i,s,c,u=0,l=e.length;for(null==r?r=1/0:r*=r,u=0;u<l;++u)(i=(a=t-(s=e[u]).x)*a+(o=n-s.y)*o)<r&&(c=s,r=i);return c},on:function(e,n){return arguments.length>1?(u.on(e,n),t):u.on(e)}}}function U(){var e,t,n,r,i=a(-30),s=1,c=1/0,u=.81;function g(r){var a,o=e.length,i=l(e,L,P).visitAfter(p);for(n=r,a=0;a<o;++a)t=e[a],i.visit(h)}function d(){if(e){var t,n,a=e.length;for(r=new Array(a),t=0;t<a;++t)n=e[t],r[n.index]=+i(n,t,e)}}function p(e){var t,n,a,o,i,s=0,c=0;if(e.length){for(a=o=i=0;i<4;++i)(t=e[i])&&(n=Math.abs(t.value))&&(s+=t.value,c+=n,a+=n*t.x,o+=n*t.y);e.x=a/c,e.y=o/c}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=r[t.data.index]}while(t=t.next)}e.value=s}function h(e,a,i,l){if(!e.value)return!0;var g=e.x-t.x,d=e.y-t.y,p=l-a,h=g*g+d*d;if(p*p/u<h)return h<c&&(0===g&&(h+=(g=o())*g),0===d&&(h+=(d=o())*d),h<s&&(h=Math.sqrt(s*h)),t.vx+=g*e.value*n/h,t.vy+=d*e.value*n/h),!0;if(!(e.length||h>=c)){(e.data!==t||e.next)&&(0===g&&(h+=(g=o())*g),0===d&&(h+=(d=o())*d),h<s&&(h=Math.sqrt(s*h)));do{e.data!==t&&(p=r[e.data.index]*n/h,t.vx+=g*p,t.vy+=d*p)}while(e=e.next)}}return g.initialize=function(t){e=t,d()},g.strength=function(e){return arguments.length?(i="function"===typeof e?e:a(+e),d(),g):i},g.distanceMin=function(e){return arguments.length?(s=e*e,g):Math.sqrt(s)},g.distanceMax=function(e){return arguments.length?(c=e*e,g):Math.sqrt(c)},g.theta=function(e){return arguments.length?(u=e*e,g):Math.sqrt(u)},g}function j(e,t,n){var r,o,i,s=a(.1);function c(e){for(var a=0,s=r.length;a<s;++a){var c=r[a],u=c.x-t||1e-6,l=c.y-n||1e-6,g=Math.sqrt(u*u+l*l),d=(i[a]-g)*o[a]*e/g;c.vx+=u*d,c.vy+=l*d}}function u(){if(r){var t,n=r.length;for(o=new Array(n),i=new Array(n),t=0;t<n;++t)i[t]=+e(r[t],t,r),o[t]=isNaN(i[t])?0:+s(r[t],t,r)}}return"function"!==typeof e&&(e=a(+e)),null==t&&(t=0),null==n&&(n=0),c.initialize=function(e){r=e,u()},c.strength=function(e){return arguments.length?(s="function"===typeof e?e:a(+e),u(),c):s},c.radius=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),u(),c):e},c.x=function(e){return arguments.length?(t=+e,c):t},c.y=function(e){return arguments.length?(n=+e,c):n},c}function Q(e){var t,n,r,o=a(.1);function i(e){for(var a,o=0,i=t.length;o<i;++o)(a=t[o]).vx+=(r[o]-a.x)*n[o]*e}function s(){if(t){var a,i=t.length;for(n=new Array(i),r=new Array(i),a=0;a<i;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+o(t[a],a,t)}}return"function"!==typeof e&&(e=a(null==e?0:+e)),i.initialize=function(e){t=e,s()},i.strength=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),s(),i):o},i.x=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),s(),i):e},i}function q(e){var t,n,r,o=a(.1);function i(e){for(var a,o=0,i=t.length;o<i;++o)(a=t[o]).vy+=(r[o]-a.y)*n[o]*e}function s(){if(t){var a,i=t.length;for(n=new Array(i),r=new Array(i),a=0;a<i;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+o(t[a],a,t)}}return"function"!==typeof e&&(e=a(null==e?0:+e)),i.initialize=function(e){t=e,s()},i.strength=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),s(),i):o},i.y=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),s(),i):e},i}},3339:function(e,t){"use strict";var n=Math.PI,r=2*n,a=1e-6,o=r-a;function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function s(){return new i}i.prototype=s.prototype={constructor:i,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(e,t,r,o,i){e=+e,t=+t,r=+r,o=+o,i=+i;var s=this._x1,c=this._y1,u=r-e,l=o-t,g=s-e,d=c-t,p=g*g+d*d;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(p>a)if(Math.abs(d*u-l*g)>a&&i){var h=r-s,f=o-c,I=u*u+l*l,C=h*h+f*f,m=Math.sqrt(I),v=Math.sqrt(p),b=i*Math.tan((n-Math.acos((I+p-C)/(2*m*v)))/2),A=b/v,y=b/m;Math.abs(A-1)>a&&(this._+="L"+(e+A*g)+","+(t+A*d)),this._+="A"+i+","+i+",0,0,"+ +(d*h>g*f)+","+(this._x1=e+y*u)+","+(this._y1=t+y*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,i,s,c,u){e=+e,t=+t,u=!!u;var l=(i=+i)*Math.cos(s),g=i*Math.sin(s),d=e+l,p=t+g,h=1^u,f=u?s-c:c-s;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+d+","+p:(Math.abs(this._x1-d)>a||Math.abs(this._y1-p)>a)&&(this._+="L"+d+","+p),i&&(f<0&&(f=f%r+r),f>o?this._+="A"+i+","+i+",0,1,"+h+","+(e-l)+","+(t-g)+"A"+i+","+i+",0,1,"+h+","+(this._x1=d)+","+(this._y1=p):f>a&&(this._+="A"+i+","+i+",0,"+ +(f>=n)+","+h+","+(this._x1=e+i*Math.cos(c))+","+(this._y1=t+i*Math.sin(c))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.Z=s},5457:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(6229),a=n(6094);function o(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===a.P&&t.documentElement.namespaceURI===a.P?t.createElement(e):t.createElementNS(n,e)}}function i(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function s(e){var t=(0,r.Z)(e);return(t.local?i:o)(t)}},4686:function(e,t,n){"use strict";n.r(t),n.d(t,{clientPoint:function(){return p.Z},create:function(){return o},creator:function(){return r.Z},customEvent:function(){return k._H},event:function(){return k.B},local:function(){return s},matcher:function(){return u.Z},mouse:function(){return l.Z},namespace:function(){return g.Z},namespaces:function(){return d.Z},select:function(){return a.Z},selectAll:function(){return f},selection:function(){return h.ZP},selector:function(){return I.Z},selectorAll:function(){return C.Z},style:function(){return m.S},touch:function(){return b},touches:function(){return A.Z},window:function(){return y.Z}});var r=n(5457),a=n(9261);function o(e){return(0,a.Z)((0,r.Z)(e).call(document.documentElement))}var i=0;function s(){return new c}function c(){this._="@"+(++i).toString(36)}c.prototype=s.prototype={constructor:c,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var u=n(1761),l=n(2698),g=n(6229),d=n(6094),p=n(9397),h=n(6382);function f(e){return"string"===typeof e?new h.Y1([document.querySelectorAll(e)],[document.documentElement]):new h.Y1([null==e?[]:e],h.Jz)}var I=n(2538),C=n(4265),m=n(946),v=n(252);function b(e,t,n){arguments.length<3&&(n=t,t=(0,v.Z)().changedTouches);for(var r,a=0,o=t?t.length:0;a<o;++a)if((r=t[a]).identifier===n)return(0,p.Z)(e,r);return null}var A=n(9064),y=n(5795),k=n(2923)},1761:function(e,t,n){"use strict";function r(e){return function(){return this.matches(e)}}n.d(t,{Z:function(){return r}})},2698:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(252),a=n(9397);function o(e){var t=(0,r.Z)();return t.changedTouches&&(t=t.changedTouches[0]),(0,a.Z)(e,t)}},6229:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6094);function a(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),r.Z.hasOwnProperty(t)?{space:r.Z[t],local:e}:e}},6094:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var r="http://www.w3.org/1999/xhtml";t.Z={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},9397:function(e,t,n){"use strict";function r(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}n.d(t,{Z:function(){return r}})},9261:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6382);function a(e){return"string"===typeof e?new r.Y1([[document.querySelector(e)]],[document.documentElement]):new r.Y1([[e]],r.Jz)}},6382:function(e,t,n){"use strict";n.d(t,{Y1:function(){return U},ZP:function(){return Q},Jz:function(){return O}});var r=n(2538);var a=n(4265);var o=n(1761);function i(e){return new Array(e.length)}function s(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}s.prototype={constructor:s,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function c(e,t,n,r,a,o){for(var i,c=0,u=t.length,l=o.length;c<l;++c)(i=t[c])?(i.__data__=o[c],r[c]=i):n[c]=new s(e,o[c]);for(;c<u;++c)(i=t[c])&&(a[c]=i)}function u(e,t,n,r,a,o,i){var c,u,l,g={},d=t.length,p=o.length,h=new Array(d);for(c=0;c<d;++c)(u=t[c])&&(h[c]=l="$"+i.call(u,u.__data__,c,t),l in g?a[c]=u:g[l]=u);for(c=0;c<p;++c)(u=g[l="$"+i.call(e,o[c],c,o)])?(r[c]=u,u.__data__=o[c],g[l]=null):n[c]=new s(e,o[c]);for(c=0;c<d;++c)(u=t[c])&&g[h[c]]===u&&(a[c]=u)}function l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var g=n(6229);function d(e){return function(){this.removeAttribute(e)}}function p(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h(e,t){return function(){this.setAttribute(e,t)}}function f(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function I(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function C(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var m=n(946);function v(e){return function(){delete this[e]}}function b(e,t){return function(){this[e]=t}}function A(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function y(e){return e.trim().split(/^|\s+/)}function k(e){return e.classList||new Z(e)}function Z(e){this._node=e,this._names=y(e.getAttribute("class")||"")}function S(e,t){for(var n=k(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function w(e,t){for(var n=k(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function B(e){return function(){S(this,e)}}function G(e){return function(){w(this,e)}}function x(e,t){return function(){(t.apply(this,arguments)?S:w)(this,e)}}function R(){this.textContent=""}function W(e){return function(){this.textContent=e}}function V(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function N(){this.innerHTML=""}function X(e){return function(){this.innerHTML=e}}function J(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function F(){this.nextSibling&&this.parentNode.appendChild(this)}function E(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Z.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var T=n(5457);function Y(){return null}function H(){var e=this.parentNode;e&&e.removeChild(this)}function M(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function D(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}var K=n(2923),z=n(5795);function L(e,t,n){var r=(0,z.Z)(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function P(e,t){return function(){return L(this,e,t)}}function _(e,t){return function(){return L(this,e,t.apply(this,arguments))}}var O=[null];function U(e,t){this._groups=e,this._parents=t}function j(){return new U([[document.documentElement]],O)}U.prototype=j.prototype={constructor:U,select:function(e){"function"!==typeof e&&(e=(0,r.Z)(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var i,s,c=t[o],u=c.length,l=a[o]=new Array(u),g=0;g<u;++g)(i=c[g])&&(s=e.call(i,i.__data__,g,c))&&("__data__"in i&&(s.__data__=i.__data__),l[g]=s);return new U(a,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=(0,a.Z)(e));for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s,c=t[i],u=c.length,l=0;l<u;++l)(s=c[l])&&(r.push(e.call(s,s.__data__,l,c)),o.push(s));return new U(r,o)},filter:function(e){"function"!==typeof e&&(e=(0,o.Z)(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,s=t[a],c=s.length,u=r[a]=[],l=0;l<c;++l)(i=s[l])&&e.call(i,i.__data__,l,s)&&u.push(i);return new U(r,this._parents)},data:function(e,t){if(!e)return I=new Array(this.size()),d=-1,this.each((function(e){I[++d]=e})),I;var n,r=t?u:c,a=this._parents,o=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var i=o.length,s=new Array(i),l=new Array(i),g=new Array(i),d=0;d<i;++d){var p=a[d],h=o[d],f=h.length,I=e.call(p,p&&p.__data__,d,a),C=I.length,m=l[d]=new Array(C),v=s[d]=new Array(C);r(p,h,m,v,g[d]=new Array(f),I,t);for(var b,A,y=0,k=0;y<C;++y)if(b=m[y]){for(y>=k&&(k=y+1);!(A=v[k])&&++k<C;);b._next=A||null}}return(s=new U(s,a))._enter=l,s._exit=g,s},enter:function(){return new U(this._enter||this._groups.map(i),this._parents)},exit:function(){return new U(this._exit||this._groups.map(i),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,o=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(a=t(a)),null==n?o.remove():n(o),r&&a?r.merge(a).order():a},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),s=0;s<o;++s)for(var c,u=t[s],l=n[s],g=u.length,d=i[s]=new Array(g),p=0;p<g;++p)(c=u[p]||l[p])&&(d[p]=c);for(;s<r;++s)i[s]=t[s];return new U(i,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],o=a.length-1,i=a[o];--o>=0;)(r=a[o])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=l);for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i,s=n[o],c=s.length,u=a[o]=new Array(c),g=0;g<c;++g)(i=s[g])&&(u[g]=i);u.sort(t)}return new U(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,o=t[n],i=0,s=o.length;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this},attr:function(e,t){var n=(0,g.Z)(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?p:d:"function"===typeof t?n.local?C:I:n.local?f:h)(n,t))},style:m.Z,property:function(e,t){return arguments.length>1?this.each((null==t?v:"function"===typeof t?A:b)(e,t)):this.node()[e]},classed:function(e,t){var n=y(e+"");if(arguments.length<2){for(var r=k(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?x:t?B:G)(n,t))},text:function(e){return arguments.length?this.each(null==e?R:("function"===typeof e?V:W)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?N:("function"===typeof e?J:X)(e)):this.node().innerHTML},raise:function(){return this.each(F)},lower:function(){return this.each(E)},append:function(e){var t="function"===typeof e?e:(0,T.Z)(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:(0,T.Z)(e),a=null==t?Y:"function"===typeof t?t:(0,r.Z)(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)}))},remove:function(){return this.each(H)},clone:function(e){return this.select(e?D:M)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:K.ZP,dispatch:function(e,t){return this.each(("function"===typeof t?_:P)(e,t))}};var Q=j},2923:function(e,t,n){"use strict";n.d(t,{B:function(){return a},ZP:function(){return l},_H:function(){return g}});var r={},a=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(r={mouseenter:"mouseover",mouseleave:"mouseout"}));function o(e,t,n){return e=i(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function i(e,t,n){return function(r){var o=a;a=r;try{e.call(this,this.__data__,t,n)}finally{a=o}}}function s(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function c(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function u(e,t,n){var a=r.hasOwnProperty(e.type)?o:i;return function(r,o,i){var s,c=this.__on,u=a(t,o,i);if(c)for(var l=0,g=c.length;l<g;++l)if((s=c[l]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},c?c.push(s):this.__on=[s]}}function l(e,t,n){var r,a,o=s(e+""),i=o.length;if(!(arguments.length<2)){for(l=t?u:c,null==n&&(n=!1),r=0;r<i;++r)this.each(l(o[r],t,n));return this}var l=this.node().__on;if(l)for(var g,d=0,p=l.length;d<p;++d)for(r=0,g=l[d];r<i;++r)if((a=o[r]).type===g.type&&a.name===g.name)return g.value}function g(e,t,n,r){var o=a;e.sourceEvent=a,a=e;try{return t.apply(n,r)}finally{a=o}}},946:function(e,t,n){"use strict";n.d(t,{Z:function(){return s},S:function(){return c}});var r=n(5795);function a(e){return function(){this.style.removeProperty(e)}}function o(e,t,n){return function(){this.style.setProperty(e,t,n)}}function i(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function s(e,t,n){return arguments.length>1?this.each((null==t?a:"function"===typeof t?i:o)(e,t,null==n?"":n)):c(this.node(),e)}function c(e,t){return e.style.getPropertyValue(t)||(0,r.Z)(e).getComputedStyle(e,null).getPropertyValue(t)}},2538:function(e,t,n){"use strict";function r(){}function a(e){return null==e?r:function(){return this.querySelector(e)}}n.d(t,{Z:function(){return a}})},4265:function(e,t,n){"use strict";function r(){return[]}function a(e){return null==e?r:function(){return this.querySelectorAll(e)}}n.d(t,{Z:function(){return a}})},252:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2923);function a(){for(var e,t=r.B;e=t.sourceEvent;)t=e;return t}},9064:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(252),a=n(9397);function o(e,t){null==t&&(t=(0,r.Z)().touches);for(var n=0,o=t?t.length:0,i=new Array(o);n<o;++n)i[n]=(0,a.Z)(e,t[n]);return i}},5795:function(e,t,n){"use strict";function r(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}n.d(t,{Z:function(){return r}})},7670:function(e,t,n){"use strict";n.r(t),n.d(t,{arc:function(){return S},area:function(){return W},areaRadial:function(){return H},curveBasis:function(){return be},curveBasisClosed:function(){return ye},curveBasisOpen:function(){return Ze},curveBundle:function(){return we},curveCardinal:function(){return xe},curveCardinalClosed:function(){return We},curveCardinalOpen:function(){return Ne},curveCatmullRom:function(){return Fe},curveCatmullRomClosed:function(){return Te},curveCatmullRomOpen:function(){return He},curveLinear:function(){return B},curveLinearClosed:function(){return De},curveMonotoneX:function(){return je},curveMonotoneY:function(){return Qe},curveNatural:function(){return et},curveStep:function(){return nt},curveStepAfter:function(){return at},curveStepBefore:function(){return rt},line:function(){return R},lineRadial:function(){return Y},linkHorizontal:function(){return U},linkRadial:function(){return Q},linkVertical:function(){return j},pie:function(){return X},pointRadial:function(){return M},radialArea:function(){return H},radialLine:function(){return Y},stack:function(){return ct},stackOffsetDiverging:function(){return lt},stackOffsetExpand:function(){return ut},stackOffsetNone:function(){return ot},stackOffsetSilhouette:function(){return gt},stackOffsetWiggle:function(){return dt},stackOrderAppearance:function(){return pt},stackOrderAscending:function(){return ft},stackOrderDescending:function(){return Ct},stackOrderInsideOut:function(){return mt},stackOrderNone:function(){return it},stackOrderReverse:function(){return vt},symbol:function(){return Ie},symbolCircle:function(){return q},symbolCross:function(){return $},symbolDiamond:function(){return ne},symbolSquare:function(){return se},symbolStar:function(){return ie},symbolTriangle:function(){return ue},symbolWye:function(){return he},symbols:function(){return fe}});var r=n(3339);function a(e){return function(){return e}}var o=Math.abs,i=Math.atan2,s=Math.cos,c=Math.max,u=Math.min,l=Math.sin,g=Math.sqrt,d=1e-12,p=Math.PI,h=p/2,f=2*p;function I(e){return e>1?0:e<-1?p:Math.acos(e)}function C(e){return e>=1?h:e<=-1?-h:Math.asin(e)}function m(e){return e.innerRadius}function v(e){return e.outerRadius}function b(e){return e.startAngle}function A(e){return e.endAngle}function y(e){return e&&e.padAngle}function k(e,t,n,r,a,o,i,s){var c=n-e,u=r-t,l=i-a,g=s-o,p=g*c-l*u;if(!(p*p<d))return[e+(p=(l*(t-o)-g*(e-a))/p)*c,t+p*u]}function Z(e,t,n,r,a,o,i){var s=e-n,u=t-r,l=(i?o:-o)/g(s*s+u*u),d=l*u,p=-l*s,h=e+d,f=t+p,I=n+d,C=r+p,m=(h+I)/2,v=(f+C)/2,b=I-h,A=C-f,y=b*b+A*A,k=a-o,Z=h*C-I*f,S=(A<0?-1:1)*g(c(0,k*k*y-Z*Z)),w=(Z*A-b*S)/y,B=(-Z*b-A*S)/y,G=(Z*A+b*S)/y,x=(-Z*b+A*S)/y,R=w-m,W=B-v,V=G-m,N=x-v;return R*R+W*W>V*V+N*N&&(w=G,B=x),{cx:w,cy:B,x01:-d,y01:-p,x11:w*(a/k-1),y11:B*(a/k-1)}}function S(){var e=m,t=v,n=a(0),c=null,S=b,w=A,B=y,G=null;function x(){var a,m,v=+e.apply(this,arguments),b=+t.apply(this,arguments),A=S.apply(this,arguments)-h,y=w.apply(this,arguments)-h,x=o(y-A),R=y>A;if(G||(G=a=(0,r.Z)()),b<v&&(m=b,b=v,v=m),b>d)if(x>f-d)G.moveTo(b*s(A),b*l(A)),G.arc(0,0,b,A,y,!R),v>d&&(G.moveTo(v*s(y),v*l(y)),G.arc(0,0,v,y,A,R));else{var W,V,N=A,X=y,J=A,F=y,E=x,T=x,Y=B.apply(this,arguments)/2,H=Y>d&&(c?+c.apply(this,arguments):g(v*v+b*b)),M=u(o(b-v)/2,+n.apply(this,arguments)),D=M,K=M;if(H>d){var z=C(H/v*l(Y)),L=C(H/b*l(Y));(E-=2*z)>d?(J+=z*=R?1:-1,F-=z):(E=0,J=F=(A+y)/2),(T-=2*L)>d?(N+=L*=R?1:-1,X-=L):(T=0,N=X=(A+y)/2)}var P=b*s(N),_=b*l(N),O=v*s(F),U=v*l(F);if(M>d){var j,Q=b*s(X),q=b*l(X),$=v*s(J),ee=v*l(J);if(x<p&&(j=k(P,_,$,ee,Q,q,O,U))){var te=P-j[0],ne=_-j[1],re=Q-j[0],ae=q-j[1],oe=1/l(I((te*re+ne*ae)/(g(te*te+ne*ne)*g(re*re+ae*ae)))/2),ie=g(j[0]*j[0]+j[1]*j[1]);D=u(M,(v-ie)/(oe-1)),K=u(M,(b-ie)/(oe+1))}}T>d?K>d?(W=Z($,ee,P,_,b,K,R),V=Z(Q,q,O,U,b,K,R),G.moveTo(W.cx+W.x01,W.cy+W.y01),K<M?G.arc(W.cx,W.cy,K,i(W.y01,W.x01),i(V.y01,V.x01),!R):(G.arc(W.cx,W.cy,K,i(W.y01,W.x01),i(W.y11,W.x11),!R),G.arc(0,0,b,i(W.cy+W.y11,W.cx+W.x11),i(V.cy+V.y11,V.cx+V.x11),!R),G.arc(V.cx,V.cy,K,i(V.y11,V.x11),i(V.y01,V.x01),!R))):(G.moveTo(P,_),G.arc(0,0,b,N,X,!R)):G.moveTo(P,_),v>d&&E>d?D>d?(W=Z(O,U,Q,q,v,-D,R),V=Z(P,_,$,ee,v,-D,R),G.lineTo(W.cx+W.x01,W.cy+W.y01),D<M?G.arc(W.cx,W.cy,D,i(W.y01,W.x01),i(V.y01,V.x01),!R):(G.arc(W.cx,W.cy,D,i(W.y01,W.x01),i(W.y11,W.x11),!R),G.arc(0,0,v,i(W.cy+W.y11,W.cx+W.x11),i(V.cy+V.y11,V.cx+V.x11),R),G.arc(V.cx,V.cy,D,i(V.y11,V.x11),i(V.y01,V.x01),!R))):G.arc(0,0,v,F,J,R):G.lineTo(O,U)}else G.moveTo(0,0);if(G.closePath(),a)return G=null,a+""||null}return x.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+S.apply(this,arguments)+ +w.apply(this,arguments))/2-p/2;return[s(r)*n,l(r)*n]},x.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),x):e},x.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:a(+e),x):t},x.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:a(+e),x):n},x.padRadius=function(e){return arguments.length?(c=null==e?null:"function"===typeof e?e:a(+e),x):c},x.startAngle=function(e){return arguments.length?(S="function"===typeof e?e:a(+e),x):S},x.endAngle=function(e){return arguments.length?(w="function"===typeof e?e:a(+e),x):w},x.padAngle=function(e){return arguments.length?(B="function"===typeof e?e:a(+e),x):B},x.context=function(e){return arguments.length?(G=null==e?null:e,x):G},x}function w(e){this._context=e}function B(e){return new w(e)}function G(e){return e[0]}function x(e){return e[1]}function R(){var e=G,t=x,n=a(!0),o=null,i=B,s=null;function c(a){var c,u,l,g=a.length,d=!1;for(null==o&&(s=i(l=(0,r.Z)())),c=0;c<=g;++c)!(c<g&&n(u=a[c],c,a))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(u,c,a),+t(u,c,a));if(l)return s=null,l+""||null}return c.x=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),c):e},c.y=function(e){return arguments.length?(t="function"===typeof e?e:a(+e),c):t},c.defined=function(e){return arguments.length?(n="function"===typeof e?e:a(!!e),c):n},c.curve=function(e){return arguments.length?(i=e,null!=o&&(s=i(o)),c):i},c.context=function(e){return arguments.length?(null==e?o=s=null:s=i(o=e),c):o},c}function W(){var e=G,t=null,n=a(0),o=x,i=a(!0),s=null,c=B,u=null;function l(a){var l,g,d,p,h,f=a.length,I=!1,C=new Array(f),m=new Array(f);for(null==s&&(u=c(h=(0,r.Z)())),l=0;l<=f;++l){if(!(l<f&&i(p=a[l],l,a))===I)if(I=!I)g=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),d=l-1;d>=g;--d)u.point(C[d],m[d]);u.lineEnd(),u.areaEnd()}I&&(C[l]=+e(p,l,a),m[l]=+n(p,l,a),u.point(t?+t(p,l,a):C[l],o?+o(p,l,a):m[l]))}if(h)return u=null,h+""||null}function g(){return R().defined(i).curve(c).context(s)}return l.x=function(n){return arguments.length?(e="function"===typeof n?n:a(+n),t=null,l):e},l.x0=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),l):e},l.x1=function(e){return arguments.length?(t=null==e?null:"function"===typeof e?e:a(+e),l):t},l.y=function(e){return arguments.length?(n="function"===typeof e?e:a(+e),o=null,l):n},l.y0=function(e){return arguments.length?(n="function"===typeof e?e:a(+e),l):n},l.y1=function(e){return arguments.length?(o=null==e?null:"function"===typeof e?e:a(+e),l):o},l.lineX0=l.lineY0=function(){return g().x(e).y(n)},l.lineY1=function(){return g().x(e).y(o)},l.lineX1=function(){return g().x(t).y(n)},l.defined=function(e){return arguments.length?(i="function"===typeof e?e:a(!!e),l):i},l.curve=function(e){return arguments.length?(c=e,null!=s&&(u=c(s)),l):c},l.context=function(e){return arguments.length?(null==e?s=u=null:u=c(s=e),l):s},l}function V(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function N(e){return e}function X(){var e=N,t=V,n=null,r=a(0),o=a(f),i=a(0);function s(a){var s,c,u,l,g,d=a.length,p=0,h=new Array(d),I=new Array(d),C=+r.apply(this,arguments),m=Math.min(f,Math.max(-f,o.apply(this,arguments)-C)),v=Math.min(Math.abs(m)/d,i.apply(this,arguments)),b=v*(m<0?-1:1);for(s=0;s<d;++s)(g=I[h[s]=s]=+e(a[s],s,a))>0&&(p+=g);for(null!=t?h.sort((function(e,n){return t(I[e],I[n])})):null!=n&&h.sort((function(e,t){return n(a[e],a[t])})),s=0,u=p?(m-d*b)/p:0;s<d;++s,C=l)c=h[s],l=C+((g=I[c])>0?g*u:0)+b,I[c]={data:a[c],index:s,value:g,startAngle:C,endAngle:l,padAngle:v};return I}return s.value=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),s):e},s.sortValues=function(e){return arguments.length?(t=e,n=null,s):t},s.sort=function(e){return arguments.length?(n=e,t=null,s):n},s.startAngle=function(e){return arguments.length?(r="function"===typeof e?e:a(+e),s):r},s.endAngle=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),s):o},s.padAngle=function(e){return arguments.length?(i="function"===typeof e?e:a(+e),s):i},s}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var J=E(B);function F(e){this._curve=e}function E(e){function t(t){return new F(e(t))}return t._curve=e,t}function T(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(E(e)):t()._curve},e}function Y(){return T(R().curve(J))}function H(){var e=W().curve(J),t=e.curve,n=e.lineX0,r=e.lineX1,a=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return T(n())},delete e.lineX0,e.lineEndAngle=function(){return T(r())},delete e.lineX1,e.lineInnerRadius=function(){return T(a())},delete e.lineY0,e.lineOuterRadius=function(){return T(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(E(e)):t()._curve},e}function M(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var D=Array.prototype.slice;function K(e){return e.source}function z(e){return e.target}function L(e){var t=K,n=z,o=G,i=x,s=null;function c(){var a,c=D.call(arguments),u=t.apply(this,c),l=n.apply(this,c);if(s||(s=a=(0,r.Z)()),e(s,+o.apply(this,(c[0]=u,c)),+i.apply(this,c),+o.apply(this,(c[0]=l,c)),+i.apply(this,c)),a)return s=null,a+""||null}return c.source=function(e){return arguments.length?(t=e,c):t},c.target=function(e){return arguments.length?(n=e,c):n},c.x=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),c):o},c.y=function(e){return arguments.length?(i="function"===typeof e?e:a(+e),c):i},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}function P(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,a,r,a)}function _(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+a)/2,r,n,r,a)}function O(e,t,n,r,a){var o=M(t,n),i=M(t,n=(n+a)/2),s=M(r,n),c=M(r,a);e.moveTo(o[0],o[1]),e.bezierCurveTo(i[0],i[1],s[0],s[1],c[0],c[1])}function U(){return L(P)}function j(){return L(_)}function Q(){var e=L(O);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}var q={draw:function(e,t){var n=Math.sqrt(t/p);e.moveTo(n,0),e.arc(0,0,n,0,f)}},$={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ee=Math.sqrt(1/3),te=2*ee,ne={draw:function(e,t){var n=Math.sqrt(t/te),r=n*ee;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},re=Math.sin(p/10)/Math.sin(7*p/10),ae=Math.sin(f/10)*re,oe=-Math.cos(f/10)*re,ie={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=ae*n,a=oe*n;e.moveTo(0,-n),e.lineTo(r,a);for(var o=1;o<5;++o){var i=f*o/5,s=Math.cos(i),c=Math.sin(i);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*a,c*r+s*a)}e.closePath()}},se={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},ce=Math.sqrt(3),ue={draw:function(e,t){var n=-Math.sqrt(t/(3*ce));e.moveTo(0,2*n),e.lineTo(-ce*n,-n),e.lineTo(ce*n,-n),e.closePath()}},le=-.5,ge=Math.sqrt(3)/2,de=1/Math.sqrt(12),pe=3*(de/2+1),he={draw:function(e,t){var n=Math.sqrt(t/pe),r=n/2,a=n*de,o=r,i=n*de+n,s=-o,c=i;e.moveTo(r,a),e.lineTo(o,i),e.lineTo(s,c),e.lineTo(le*r-ge*a,ge*r+le*a),e.lineTo(le*o-ge*i,ge*o+le*i),e.lineTo(le*s-ge*c,ge*s+le*c),e.lineTo(le*r+ge*a,le*a-ge*r),e.lineTo(le*o+ge*i,le*i-ge*o),e.lineTo(le*s+ge*c,le*c-ge*s),e.closePath()}},fe=[q,$,ne,se,ie,ue,he];function Ie(){var e=a(q),t=a(64),n=null;function o(){var a;if(n||(n=a=(0,r.Z)()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return o.type=function(t){return arguments.length?(e="function"===typeof t?t:a(t),o):e},o.size=function(e){return arguments.length?(t="function"===typeof e?e:a(+e),o):t},o.context=function(e){return arguments.length?(n=null==e?null:e,o):n},o}function Ce(){}function me(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ve(e){this._context=e}function be(e){return new ve(e)}function Ae(e){this._context=e}function ye(e){return new Ae(e)}function ke(e){this._context=e}function Ze(e){return new ke(e)}function Se(e,t){this._basis=new ve(e),this._beta=t}ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:me(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:me(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ae.prototype={areaStart:Ce,areaEnd:Ce,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:me(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:me(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Se.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],o=t[0],i=e[n]-a,s=t[n]-o,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*e[c]+(1-this._beta)*(a+r*i),this._beta*t[c]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var we=function e(t){function n(e){return 1===t?new ve(e):new Se(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Be(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Ge(e,t){this._context=e,this._k=(1-t)/6}Ge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Be(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Be(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var xe=function e(t){function n(e){return new Ge(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Re(e,t){this._context=e,this._k=(1-t)/6}Re.prototype={areaStart:Ce,areaEnd:Ce,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Be(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var We=function e(t){function n(e){return new Re(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Ve(e,t){this._context=e,this._k=(1-t)/6}Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Be(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ne=function e(t){function n(e){return new Ve(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Xe(e,t,n){var r=e._x1,a=e._y1,o=e._x2,i=e._y2;if(e._l01_a>d){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,a=(a*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>d){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/l,i=(i*u+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,o,i,e._x2,e._y2)}function Je(e,t){this._context=e,this._alpha=t}Je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Xe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Fe=function e(t){function n(e){return t?new Je(e,t):new Ge(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ee(e,t){this._context=e,this._alpha=t}Ee.prototype={areaStart:Ce,areaEnd:Ce,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Te=function e(t){function n(e){return t?new Ee(e,t):new Re(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ye(e,t){this._context=e,this._alpha=t}Ye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var He=function e(t){function n(e){return t?new Ye(e,t):new Ve(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Me(e){this._context=e}function De(e){return new Me(e)}function Ke(e){return e<0?-1:1}function ze(e,t,n){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||a<0&&-0),i=(n-e._y1)/(a||r<0&&-0),s=(o*a+i*r)/(r+a);return(Ke(o)+Ke(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(s))||0}function Le(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Pe(e,t,n){var r=e._x0,a=e._y0,o=e._x1,i=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,a+s*t,o-s,i-s*n,o,i)}function _e(e){this._context=e}function Oe(e){this._context=new Ue(e)}function Ue(e){this._context=e}function je(e){return new _e(e)}function Qe(e){return new Oe(e)}function qe(e){this._context=e}function $e(e){var t,n,r=e.length-1,a=new Array(r),o=new Array(r),i=new Array(r);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function et(e){return new qe(e)}function tt(e,t){this._context=e,this._t=t}function nt(e){return new tt(e,.5)}function rt(e){return new tt(e,0)}function at(e){return new tt(e,1)}function ot(e,t){if((a=e.length)>1)for(var n,r,a,o=1,i=e[t[0]],s=i.length;o<a;++o)for(r=i,i=e[t[o]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function it(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function st(e,t){return e[t]}function ct(){var e=a([]),t=it,n=ot,r=st;function o(a){var o,i,s=e.apply(this,arguments),c=a.length,u=s.length,l=new Array(u);for(o=0;o<u;++o){for(var g,d=s[o],p=l[o]=new Array(c),h=0;h<c;++h)p[h]=g=[0,+r(a[h],d,h,a)],g.data=a[h];p.key=d}for(o=0,i=t(l);o<u;++o)l[i[o]].index=o;return n(l,i),l}return o.keys=function(t){return arguments.length?(e="function"===typeof t?t:a(D.call(t)),o):e},o.value=function(e){return arguments.length?(r="function"===typeof e?e:a(+e),o):r},o.order=function(e){return arguments.length?(t=null==e?it:"function"===typeof e?e:a(D.call(e)),o):t},o.offset=function(e){return arguments.length?(n=null==e?ot:e,o):n},o}function ut(e,t){if((r=e.length)>0){for(var n,r,a,o=0,i=e[0].length;o<i;++o){for(a=n=0;n<r;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<r;++n)e[n][o][1]/=a}ot(e,t)}}function lt(e,t){if((s=e.length)>0)for(var n,r,a,o,i,s,c=0,u=e[t[0]].length;c<u;++c)for(o=i=0,n=0;n<s;++n)(a=(r=e[t[n]][c])[1]-r[0])>0?(r[0]=o,r[1]=o+=a):a<0?(r[1]=i,r[0]=i+=a):(r[0]=0,r[1]=a)}function gt(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],o=a.length;r<o;++r){for(var i=0,s=0;i<n;++i)s+=e[i][r][1]||0;a[r][1]+=a[r][0]=-s/2}ot(e,t)}}function dt(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,o=0,i=1;i<r;++i){for(var s=0,c=0,u=0;s<a;++s){for(var l=e[t[s]],g=l[i][1]||0,d=(g-(l[i-1][1]||0))/2,p=0;p<s;++p){var h=e[t[p]];d+=(h[i][1]||0)-(h[i-1][1]||0)}c+=g,u+=d*g}n[i-1][1]+=n[i-1][0]=o,c&&(o-=u/c)}n[i-1][1]+=n[i-1][0]=o,ot(e,t)}}function pt(e){var t=e.map(ht);return it(e).sort((function(e,n){return t[e]-t[n]}))}function ht(e){for(var t,n=-1,r=0,a=e.length,o=-1/0;++n<a;)(t=+e[n][1])>o&&(o=t,r=n);return r}function ft(e){var t=e.map(It);return it(e).sort((function(e,n){return t[e]-t[n]}))}function It(e){for(var t,n=0,r=-1,a=e.length;++r<a;)(t=+e[r][1])&&(n+=t);return n}function Ct(e){return ft(e).reverse()}function mt(e){var t,n,r=e.length,a=e.map(It),o=pt(e),i=0,s=0,c=[],u=[];for(t=0;t<r;++t)n=o[t],i<s?(i+=a[n],c.push(n)):(s+=a[n],u.push(n));return u.reverse().concat(c)}function vt(e){return it(e).reverse()}Me.prototype={areaStart:Ce,areaEnd:Ce,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pe(this,this._t0,Le(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Pe(this,Le(this,n=ze(this,e,t)),n);break;default:Pe(this,this._t0,n=ze(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Oe.prototype=Object.create(_e.prototype)).point=function(e,t){_e.prototype.point.call(this,t,e)},Ue.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,o){this._context.bezierCurveTo(t,e,r,n,o,a)}},qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=$e(e),a=$e(t),o=0,i=1;i<n;++o,++i)this._context.bezierCurveTo(r[0][o],a[0][o],r[1][o],a[1][o],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}}},9412:function(e){"use strict";var t="%[a-f0-9]{2}",n=new RegExp(t,"gi"),r=new RegExp("("+t+")+","gi");function a(e,t){try{return decodeURIComponent(e.join(""))}catch(o){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=a(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},a=r.exec(e);a;){try{n[a[0]]=decodeURIComponent(a[0])}catch(t){var i=o(a[0]);i!==a[0]&&(n[a[0]]=i)}a=r.exec(e)}n["%C2"]="\ufffd";for(var s=Object.keys(n),c=0;c<s.length;c++){var u=s[c];e=e.replace(new RegExp(u,"g"),n[u])}return e}(e)}}},951:function(e){"use strict";var t={single_source_shortest_paths:function(e,n,r){var a={},o={};o[n]=0;var i,s,c,u,l,g,d,p=t.PriorityQueue.make();for(p.push(n,0);!p.empty();)for(c in s=(i=p.pop()).value,u=i.cost,l=e[s]||{})l.hasOwnProperty(c)&&(g=u+l[c],d=o[c],("undefined"===typeof o[c]||d>g)&&(o[c]=g,p.push(c,g),a[c]=s));if("undefined"!==typeof r&&"undefined"===typeof o[r]){var h=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(h)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var a=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(a,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,a={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(a[n]=r[n]);return a.queue=[],a.sorter=e.sorter||r.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},153:function(e){"use strict";e.exports=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);if(a>=55296&&a<=56319&&n>r+1){var o=e.charCodeAt(r+1);o>=56320&&o<=57343&&(a=1024*(a-55296)+o-56320+65536,r+=1)}a<128?t.push(a):a<2048?(t.push(a>>6|192),t.push(63&a|128)):a<55296||a>=57344&&a<65536?(t.push(a>>12|224),t.push(a>>6&63|128),t.push(63&a|128)):a>=65536&&a<=1114111?(t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(63&a|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},2683:function(e){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),o=0;o<r.length;o++){var i=r[o],s=e[i];(a?-1!==t.indexOf(i):t(i,s,e))&&(n[i]=s)}return n}},2110:function(e,t,n){"use strict";var r=n(7441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?i:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var a=p(n);a&&a!==h&&e(t,a,r)}var i=l(n);g&&(i=i.concat(g(n)));for(var s=c(t),f=c(n),I=0;I<i.length;++I){var C=i[I];if(!o[C]&&(!r||!r[C])&&(!f||!f[C])&&(!s||!s[C])){var m=d(n,C);try{u(t,C,m)}catch(v){}}}}return t}},1596:function(e,t,n){var r=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")();function l(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var g=Object.prototype,d=g.hasOwnProperty,p=g.toString,h=u.Symbol,f=g.propertyIsEnumerable,I=h?h.isConcatSpreadable:void 0;function C(e,t,n,r,a){var o=-1,i=e.length;for(n||(n=m),a||(a=[]);++o<i;){var s=e[o];t>0&&n(s)?t>1?C(s,t-1,n,r,a):l(a,s):r||(a[a.length]=s)}return a}function m(e){return v(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?p.call(e):"";return t==o||t==i}(e)}(e)}(e)&&d.call(e,"callee")&&(!f.call(e,"callee")||p.call(e)==a)}(e)||!!(I&&e&&e[I])}var v=Array.isArray;e.exports=function(e){return(e?e.length:0)?C(e,Infinity):[]}},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(S){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},o={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=c(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?C:I;if(t){if(e<0)return C;if(e>=p)return y}else{if(e<=-h)return k;if(e+1>=h)return A}return e<0?s(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=c;var u=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return I;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(u(n,8)),o=I,i=0;i<e.length;i+=8){var c=Math.min(8,e.length-i),g=parseInt(e.substring(i,i+c),n);if(c<8){var d=s(u(n,c));o=o.mul(d).add(s(g))}else o=(o=o.mul(a)).add(s(g))}return o.unsigned=t,o}function g(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=g;var d=4294967296,p=d*d,h=p/2,f=i(1<<24),I=i(0);n.ZERO=I;var C=i(0,!0);n.UZERO=C;var m=i(1);n.ONE=m;var v=i(1,!0);n.UONE=v;var b=i(-1);n.NEG_ONE=b;var A=c(-1,2147483647,!1);n.MAX_VALUE=A;var y=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=y;var k=c(0,-2147483648,!1);n.MIN_VALUE=k;var Z=n.prototype;Z.toInt=function(){return this.unsigned?this.low>>>0:this.low},Z.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},Z.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(u(e,6),this.unsigned),o=this,i="";;){var c=o.div(a),l=(o.sub(c.mul(a)).toInt()>>>0).toString(e);if((o=c).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},Z.getHighBits=function(){return this.high},Z.getHighBitsUnsigned=function(){return this.high>>>0},Z.getLowBits=function(){return this.low},Z.getLowBitsUnsigned=function(){return this.low>>>0},Z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},Z.isZero=function(){return 0===this.high&&0===this.low},Z.eqz=Z.isZero,Z.isNegative=function(){return!this.unsigned&&this.high<0},Z.isPositive=function(){return this.unsigned||this.high>=0},Z.isOdd=function(){return 1===(1&this.low)},Z.isEven=function(){return 0===(1&this.low)},Z.equals=function(e){return r(e)||(e=g(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},Z.eq=Z.equals,Z.notEquals=function(e){return!this.eq(e)},Z.neq=Z.notEquals,Z.ne=Z.notEquals,Z.lessThan=function(e){return this.comp(e)<0},Z.lt=Z.lessThan,Z.lessThanOrEqual=function(e){return this.comp(e)<=0},Z.lte=Z.lessThanOrEqual,Z.le=Z.lessThanOrEqual,Z.greaterThan=function(e){return this.comp(e)>0},Z.gt=Z.greaterThan,Z.greaterThanOrEqual=function(e){return this.comp(e)>=0},Z.gte=Z.greaterThanOrEqual,Z.ge=Z.greaterThanOrEqual,Z.compare=function(e){if(r(e)||(e=g(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},Z.comp=Z.compare,Z.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(m)},Z.neg=Z.negate,Z.add=function(e){r(e)||(e=g(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,d=0,p=0,h=0;return p+=(h+=o+(65535&e.low))>>>16,d+=(p+=a+u)>>>16,l+=(d+=n+s)>>>16,l+=t+i,c((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},Z.subtract=function(e){return r(e)||(e=g(e)),this.add(e.neg())},Z.sub=Z.subtract,Z.multiply=function(e){if(this.isZero())return I;if(r(e)||(e=g(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return I;if(this.eq(k))return e.isOdd()?k:I;if(e.eq(k))return this.isOdd()?k:I;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,o=this.low>>>16,i=65535&this.low,u=e.high>>>16,l=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,C=0,m=0,v=0;return m+=(v+=i*p)>>>16,C+=(m+=o*p)>>>16,m&=65535,C+=(m+=i*d)>>>16,h+=(C+=a*p)>>>16,C&=65535,h+=(C+=o*d)>>>16,C&=65535,h+=(C+=i*l)>>>16,h+=n*p+a*d+o*l+i*u,c((m&=65535)<<16|(v&=65535),(h&=65535)<<16|(C&=65535),this.unsigned)},Z.mul=Z.multiply,Z.divide=function(e){if(r(e)||(e=g(e)),e.isZero())throw Error("division by zero");var n,a,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?C:I;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return C;if(e.gt(this.shru(1)))return v;o=C}else{if(this.eq(k))return e.eq(m)||e.eq(b)?k:e.eq(k)?m:(n=this.shr(1).div(e).shl(1)).eq(I)?e.isNegative()?m:b:(a=this.sub(e.mul(n)),o=n.add(a.div(e)));if(e.eq(k))return this.unsigned?C:I;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=I}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),l=i<=48?1:u(2,i-48),d=s(n),p=d.mul(e);p.isNegative()||p.gt(a);)p=(d=s(n-=l,this.unsigned)).mul(e);d.isZero()&&(d=m),o=o.add(d),a=a.sub(p)}return o},Z.div=Z.divide,Z.modulo=function(e){return r(e)||(e=g(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},Z.mod=Z.modulo,Z.rem=Z.modulo,Z.not=function(){return c(~this.low,~this.high,this.unsigned)},Z.and=function(e){return r(e)||(e=g(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},Z.or=function(e){return r(e)||(e=g(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},Z.xor=function(e){return r(e)||(e=g(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},Z.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},Z.shl=Z.shiftLeft,Z.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},Z.shr=Z.shiftRight,Z.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},Z.shru=Z.shiftRightUnsigned,Z.shr_u=Z.shiftRightUnsigned,Z.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},Z.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},Z.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},Z.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},Z.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,o){for(var i,s,c=a(e),u=1;u<arguments.length;u++){for(var l in i=Object(arguments[u]))n.call(i,l)&&(c[l]=i[l]);if(t){s=t(i);for(var g=0;g<s.length;g++)r.call(i,s[g])&&(c[s[g]]=i[s[g]])}}return c}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},741:function(e,t,n){var r=n(6887),a=n(5054),o=n(416),i=n(9413);function s(e,t,n,o,i){var s=[].slice.call(arguments,1),c=s.length,u="function"===typeof s[c-1];if(!u&&!r())throw new Error("Callback required as last argument");if(!u){if(c<1)throw new Error("Too few arguments provided");return 1===c?(n=t,t=o=void 0):2!==c||t.getContext||(o=n,n=t,t=void 0),new Promise((function(r,i){try{var s=a.create(n,o);r(e(s,t,o))}catch(c){i(c)}}))}if(c<2)throw new Error("Too few arguments provided");2===c?(i=n,n=t,t=o=void 0):3===c&&(t.getContext&&"undefined"===typeof i?(i=o,o=void 0):(i=o,o=n,n=t,t=void 0));try{var l=a.create(n,o);i(null,e(l,t,o))}catch(g){i(g)}}t.create=a.create,t.toCanvas=s.bind(null,o.render),t.toDataURL=s.bind(null,o.renderToDataURL),t.toString=s.bind(null,(function(e,t,n){return i.render(e,n)}))},6887:function(e){e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},3234:function(e,t,n){var r=n(2338).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=r(e),a=145===n?26:2*Math.ceil((n-13)/(2*t-2)),o=[n-7],i=1;i<t-1;i++)o[i]=o[i-1]-a;return o.push(6),o.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),a=r.length,o=0;o<a;o++)for(var i=0;i<a;i++)0===o&&0===i||0===o&&i===a-1||o===a-1&&0===i||n.push([r[o],r[i]]);return n}},8295:function(e,t,n){var r=n(1337),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*a.indexOf(this.data[t]);n+=a.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=o},5673:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1===(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1===(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},2988:function(e){function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){var a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},639:function(e,t,n){var r=n(153),a=n(1337);function o(e){this.mode=a.BYTE,this.data=new Uint8Array(r(e))}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},3180:function(e,t,n){var r=n(8955),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}}},8955:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},8947:function(e,t,n){var r=n(2338).getSymbolSize;t.getPositions=function(e){var t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},7435:function(e,t,n){var r=n(2338),a=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,o=n<<10;r.getBCHDigit(o)-a>=0;)o^=1335<<r.getBCHDigit(o)-a;return 21522^(n<<10|o)}},1239:function(e,t){var n=new Uint8Array(512),r=new Uint8Array(256);!function(){for(var e=1,t=0;t<255;t++)n[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(var a=255;a<512;a++)n[a]=n[a-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},8588:function(e,t,n){var r=n(1337),a=n(2338);function o(e){this.mode=r.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=a.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=o},6823:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n=3,r=3,a=40,o=10;function i(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,r=0,a=0,o=0,i=null,s=null,c=0;c<t;c++){a=o=0,i=s=null;for(var u=0;u<t;u++){var l=e.get(c,u);l===i?a++:(a>=5&&(r+=n+(a-5)),i=l,a=1),(l=e.get(u,c))===s?o++:(o>=5&&(r+=n+(o-5)),s=l,o=1)}a>=5&&(r+=n+(a-5)),o>=5&&(r+=n+(o-5))}return r},t.getPenaltyN2=function(e){for(var t=e.size,n=0,a=0;a<t-1;a++)for(var o=0;o<t-1;o++){var i=e.get(a,o)+e.get(a,o+1)+e.get(a+1,o)+e.get(a+1,o+1);4!==i&&0!==i||n++}return n*r},t.getPenaltyN3=function(e){for(var t=e.size,n=0,r=0,o=0,i=0;i<t;i++){r=o=0;for(var s=0;s<t;s++)r=r<<1&2047|e.get(i,s),s>=10&&(1488===r||93===r)&&n++,o=o<<1&2047|e.get(s,i),s>=10&&(1488===o||93===o)&&n++}return n*a},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*o},t.applyMask=function(e,t){for(var n=t.size,r=0;r<n;r++)for(var a=0;a<n;a++)t.isReserved(a,r)||t.xor(a,r,i(e,a,r))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,a=0,o=1/0,i=0;i<r;i++){n(i),t.applyMask(i,e);var s=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(i,e),s<o&&(o=s,a=i)}return a}},1337:function(e,t,n){var r=n(8402),a=n(8650);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},320:function(e,t,n){var r=n(1337);function a(e){this.mode=r.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);var a=this.data.length-t;a>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*a+1))},e.exports=a},9203:function(e,t,n){var r=n(1239);t.mul=function(e,t){for(var n=new Uint8Array(e.length+t.length-1),a=0;a<e.length;a++)for(var o=0;o<t.length;o++)n[a+o]^=r.mul(e[a],t[o]);return n},t.mod=function(e,t){for(var n=new Uint8Array(e);n.length-t.length>=0;){for(var a=n[0],o=0;o<t.length;o++)n[o]^=r.mul(t[o],a);for(var i=0;i<n.length&&0===n[i];)i++;n=n.slice(i)}return n},t.generateECPolynomial=function(e){for(var n=new Uint8Array([1]),a=0;a<e;a++)n=t.mul(n,new Uint8Array([1,r.exp(a)]));return n}},5054:function(e,t,n){var r=n(2338),a=n(8955),o=n(5673),i=n(2988),s=n(3234),c=n(8947),u=n(6823),l=n(3180),g=n(220),d=n(1265),p=n(7435),h=n(1337),f=n(2179);function I(e,t,n){var r,a,o=e.size,i=p.getEncodedBits(t,n);for(r=0;r<15;r++)a=1===(i>>r&1),r<6?e.set(r,8,a,!0):r<8?e.set(r+1,8,a,!0):e.set(o-15+r,8,a,!0),r<8?e.set(8,o-r-1,a,!0):r<9?e.set(8,15-r-1+1,a,!0):e.set(8,15-r-1,a,!0);e.set(o-8,8,1,!0)}function C(e,t,n){var a=new o;n.forEach((function(t){a.put(t.mode.bit,4),a.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(a)}));var i=8*(r.getSymbolTotalCodewords(e)-l.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=i&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);for(var s=(i-a.getLengthInBits())/8,c=0;c<s;c++)a.put(c%2?17:236,8);return function(e,t,n){for(var a=r.getSymbolTotalCodewords(t),o=l.getTotalCodewordsCount(t,n),i=a-o,s=l.getBlocksCount(t,n),c=s-a%s,u=Math.floor(a/s),d=Math.floor(i/s),p=d+1,h=u-d,f=new g(h),I=0,C=new Array(s),m=new Array(s),v=0,b=new Uint8Array(e.buffer),A=0;A<s;A++){var y=A<c?d:p;C[A]=b.slice(I,I+y),m[A]=f.encode(C[A]),I+=y,v=Math.max(v,y)}var k,Z,S=new Uint8Array(a),w=0;for(k=0;k<v;k++)for(Z=0;Z<s;Z++)k<C[Z].length&&(S[w++]=C[Z][k]);for(k=0;k<h;k++)for(Z=0;Z<s;Z++)S[w++]=m[Z][k];return S}(a,e,t)}function m(e,t,n,a){var o;if(Array.isArray(e))o=f.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");var l=t;if(!l){var g=f.rawSplit(e);l=d.getBestVersionForData(g,n)}o=f.fromString(e,l||40)}var p=d.getBestVersionForData(o,n);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<p)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+p+".\n")}else t=p;var h=C(t,n,o),m=r.getSymbolSize(t),v=new i(m);return function(e,t){for(var n=e.size,r=c.getPositions(t),a=0;a<r.length;a++)for(var o=r[a][0],i=r[a][1],s=-1;s<=7;s++)if(!(o+s<=-1||n<=o+s))for(var u=-1;u<=7;u++)i+u<=-1||n<=i+u||(s>=0&&s<=6&&(0===u||6===u)||u>=0&&u<=6&&(0===s||6===s)||s>=2&&s<=4&&u>=2&&u<=4?e.set(o+s,i+u,!0,!0):e.set(o+s,i+u,!1,!0))}(v,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}(v),function(e,t){for(var n=s.getPositions(t),r=0;r<n.length;r++)for(var a=n[r][0],o=n[r][1],i=-2;i<=2;i++)for(var c=-2;c<=2;c++)-2===i||2===i||-2===c||2===c||0===i&&0===c?e.set(a+i,o+c,!0,!0):e.set(a+i,o+c,!1,!0)}(v,t),I(v,n,0),t>=7&&function(e,t){for(var n,r,a,o=e.size,i=d.getEncodedBits(t),s=0;s<18;s++)n=Math.floor(s/3),r=s%3+o-8-3,a=1===(i>>s&1),e.set(n,r,a,!0),e.set(r,n,a,!0)}(v,t),function(e,t){for(var n=e.size,r=-1,a=n-1,o=7,i=0,s=n-1;s>0;s-=2)for(6===s&&s--;;){for(var c=0;c<2;c++)if(!e.isReserved(a,s-c)){var u=!1;i<t.length&&(u=1===(t[i]>>>o&1)),e.set(a,s-c,u),-1===--o&&(i++,o=7)}if((a+=r)<0||n<=a){a-=r,r=-r;break}}}(v,h),isNaN(a)&&(a=u.getBestMask(v,I.bind(null,v,n))),u.applyMask(a,v),I(v,n,a),{modules:v,version:t,errorCorrectionLevel:n,maskPattern:a,segments:o}}t.create=function(e,t){if("undefined"===typeof e||""===e)throw new Error("No input text");var n,o,i=a.M;return"undefined"!==typeof t&&(i=a.from(t.errorCorrectionLevel,a.M),n=d.from(t.version),o=u.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),m(e,n,i,o)}},220:function(e,t,n){var r=n(9203);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new Uint8Array(e.length+this.degree);t.set(e);var n=r.mod(t,this.genPoly),a=this.degree-n.length;if(a>0){var o=new Uint8Array(this.degree);return o.set(n,a),o}return n},e.exports=a},8650:function(e,t){var n="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(a,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var o=new RegExp("^"+r+"$"),i=new RegExp("^[0-9]+$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},2179:function(e,t,n){var r=n(1337),a=n(320),o=n(8295),i=n(639),s=n(8588),c=n(8650),u=n(2338),l=n(951);function g(e){return unescape(encodeURIComponent(e)).length}function d(e,t,n){for(var r,a=[];null!==(r=e.exec(n));)a.push({data:r[0],index:r.index,mode:t,length:r[0].length});return a}function p(e){var t,n,a=d(c.NUMERIC,r.NUMERIC,e),o=d(c.ALPHANUMERIC,r.ALPHANUMERIC,e);return u.isKanjiModeEnabled()?(t=d(c.BYTE,r.BYTE,e),n=d(c.KANJI,r.KANJI,e)):(t=d(c.BYTE_KANJI,r.BYTE,e),n=[]),a.concat(o,t,n).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function h(e,t){switch(t){case r.NUMERIC:return a.getBitsLength(e);case r.ALPHANUMERIC:return o.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return i.getBitsLength(e)}}function f(e,t){var n,c=r.getBestModeForData(e);if((n=r.from(t,c))!==r.BYTE&&n.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(c));switch(n!==r.KANJI||u.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new a(e);case r.ALPHANUMERIC:return new o(e);case r.KANJI:return new s(e);case r.BYTE:return new i(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"===typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e}),[])},t.fromString=function(e,n){for(var a=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];switch(a.mode){case r.NUMERIC:t.push([a,{data:a.data,mode:r.ALPHANUMERIC,length:a.length},{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.ALPHANUMERIC:t.push([a,{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.KANJI:t.push([a,{data:a.data,mode:r.BYTE,length:g(a.data)}]);break;case r.BYTE:t.push([{data:a.data,mode:r.BYTE,length:g(a.data)}])}}return t}(p(e,u.isKanjiModeEnabled())),o=function(e,t){for(var n={},a={start:{}},o=["start"],i=0;i<e.length;i++){for(var s=e[i],c=[],u=0;u<s.length;u++){var l=s[u],g=""+i+u;c.push(g),n[g]={node:l,lastCount:0},a[g]={};for(var d=0;d<o.length;d++){var p=o[d];n[p]&&n[p].node.mode===l.mode?(a[p][g]=h(n[p].lastCount+l.length,l.mode)-h(n[p].lastCount,l.mode),n[p].lastCount+=l.length):(n[p]&&(n[p].lastCount=l.length),a[p][g]=h(l.length,l.mode)+4+r.getCharCountIndicator(l.mode,t))}}o=c}for(var f=0;f<o.length;f++)a[o[f]].end=0;return{map:a,table:n}}(a,n),i=l.find_path(o.map,"start","end"),s=[],c=1;c<i.length-1;c++)s.push(o.table[i[c]].node);return t.fromArray(function(e){return e.reduce((function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(s))},t.rawSplit=function(e){return t.fromArray(p(e,u.isKanjiModeEnabled()))}},2338:function(e,t){var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return"undefined"!==typeof n},t.toSJIS=function(e){return n(e)}},8402:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},1265:function(e,t,n){var r=n(2338),a=n(3180),o=n(8955),i=n(1337),s=n(8402),c=r.getBCHDigit(7973);function u(e,t){return i.getCharCountIndicator(e,t)+4}function l(e,t){var n=0;return e.forEach((function(e){var r=u(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=i.BYTE);var o=8*(r.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t));if(n===i.MIXED)return o;var c=o-u(n,e);switch(n){case i.NUMERIC:return Math.floor(c/10*3);case i.ALPHANUMERIC:return Math.floor(c/11*2);case i.KANJI:return Math.floor(c/13);case i.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,n){var r,a=o.from(n,o.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(var r=1;r<=40;r++)if(l(e,r)<=t.getCapacity(r,n,i.MIXED))return r}(e,a);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(var a=1;a<=40;a++)if(n<=t.getCapacity(a,r,e))return a}(r.mode,r.getLength(),a)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;r.getBCHDigit(t)-c>=0;)t^=7973<<r.getBCHDigit(t)-c;return e<<12|t}},416:function(e,t,n){var r=n(3605);t.render=function(e,t,n){var a=n,o=t;"undefined"!==typeof a||t&&t.getContext||(a=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=r.getOptions(a);var i=r.getImageWidth(e.modules.size,a),s=o.getContext("2d"),c=s.createImageData(i,i);return r.qrToImageData(c.data,e,a),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,o,i),s.putImageData(c,0,0),o},t.renderToDataURL=function(e,n,r){var a=r;"undefined"!==typeof a||n&&n.getContext||(a=n,n=void 0),a||(a={});var o=t.render(e,n,a),i=a.type||"image/png",s=a.rendererOpts||{};return o.toDataURL(i,s.quality)}},9413:function(e,t,n){var r=n(3605);function a(e,t){var n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(e,t,n){var r=e+t;return"undefined"!==typeof n&&(r+=" "+n),r}t.render=function(e,t,n){var i=r.getOptions(t),s=e.modules.size,c=e.modules.data,u=s+2*i.margin,l=i.color.light.a?"<path "+a(i.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",g="<path "+a(i.color.dark,"stroke")+' d="'+function(e,t,n){for(var r="",a=0,i=!1,s=0,c=0;c<e.length;c++){var u=Math.floor(c%t),l=Math.floor(c/t);u||i||(i=!0),e[c]?(s++,c>0&&u>0&&e[c-1]||(r+=i?o("M",u+n,.5+l+n):o("m",a,0),a=0,i=!1),u+1<t&&e[c+1]||(r+=o("h",s),s=0)):a++}return r}(c,s,i.margin)+'"/>',d='viewBox="0 0 '+u+" "+u+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+g+"</svg>\n";return"function"===typeof n&&n(null,p),p}},3605:function(e,t){function n(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var a=n.modules.size,o=n.modules.data,i=t.getScale(a,r),s=Math.floor((a+2*r.margin)*i),c=r.margin*i,u=[r.color.light,r.color.dark],l=0;l<s;l++)for(var g=0;g<s;g++){var d=4*(l*s+g),p=r.color.light;if(l>=c&&g>=c&&l<s-c&&g<s-c)p=u[o[Math.floor((l-c)/i)*a+Math.floor((g-c)/i)]?1:0];e[d++]=p.r,e[d++]=p.g,e[d++]=p.b,e[d]=p.a}}},4245:function(e,t,n){"use strict";var r=n(9713).default,a=n(3038).default,o=n(3269).default,i=n(319).default,s=n(499),c=n(9412),u=n(845),l=n(2683),g=Symbol("encodeFragmentIdentifier");function d(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function p(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function h(e,t){return t.decode?c(e):e}function f(e){return Array.isArray(e)?e.sort():"object"===typeof e?f(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function I(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function C(e){var t=(e=I(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function v(e,t){d((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return function(e,n,r){t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var a="string"===typeof n&&n.includes(e.arrayFormatSeparator),o="string"===typeof n&&!a&&h(n,e).includes(e.arrayFormatSeparator);n=o?h(n,e):n;var i=a||o?n.split(e.arrayFormatSeparator).map((function(t){return h(t,e)})):null===n?n:h(n,e);r[t]=i};case"bracket-separator":return function(t,n,r){var a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),a){var o=null===n?[]:n.split(e.arrayFormatSeparator).map((function(t){return h(t,e)}));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o}else r[t]=n?h(n,e):n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!==typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var i,s=o(e.split("&"));try{for(s.s();!(i=s.n()).done;){var c=i.value;if(""!==c){var l=u(t.decode?c.replace(/\+/g," "):c,"="),g=a(l,2),p=g[0],I=g[1];I=void 0===I?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?I:h(I,t),n(h(p,t),I,r)}}}catch(S){s.e(S)}finally{s.f()}for(var C=0,v=Object.keys(r);C<v.length;C++){var b=v[C],A=r[b];if("object"===typeof A&&null!==A)for(var y=0,k=Object.keys(A);y<k.length;y++){var Z=k[y];A[Z]=m(A[Z],t)}else r[b]=m(A,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=f(n):e[t]=n,e}),Object.create(null))}t.extract=C,t.parse=v,t.stringify=function(e,t){if(!e)return"";d((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&(null===(r=e[n])||void 0===r)||t.skipEmptyString&&""===e[n];var r},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[[p(t,e),"[",a,"]"].join("")]:[[p(t,e),"[",p(a,e),"]=",p(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[[p(t,e),"[]"].join("")]:[[p(t,e),"[]=",p(r,e)].join("")])}};case"colon-list-separator":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[[p(t,e),":list="].join("")]:[[p(t,e),":list=",p(r,e)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===e.arrayFormat?"[]=":"=";return function(n){return function(r,a){return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:(a=null===a?"":a,0===r.length?[[p(n,e),t,p(a,e)].join("")]:[[r,p(a,e)].join(e.arrayFormatSeparator)])}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[p(t,e)]:[[p(t,e),"=",p(r,e)].join("")])}}}}(t),a={},o=0,s=Object.keys(e);o<s.length;o++){var c=s[o];n(c)||(a[c]=e[c])}var u=Object.keys(a);return!1!==t.sort&&u.sort(t.sort),u.map((function(n){var a=e[n];return void 0===a?"":null===a?p(n,t):Array.isArray(a)?0===a.length&&"bracket-separator"===t.arrayFormat?p(n,t)+"[]":a.reduce(r(n),[]).join("&"):p(n,t)+"="+p(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=u(e,"#"),r=a(n,2),o=r[0],i=r[1];return Object.assign({url:o.split("?")[0]||"",query:v(C(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:h(i,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign(r({encode:!0,strict:!0},g,!0),n);var a=I(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),s=Object.assign(i,e.query),c=t.stringify(s,n);c&&(c="?".concat(c));var u=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#".concat(n[g]?p(e.fragmentIdentifier,n):e.fragmentIdentifier)),"".concat(a).concat(c).concat(u)},t.pick=function(e,n,a){a=Object.assign(r({parseFragmentIdentifier:!0},g,!1),a);var o=t.parseUrl(e,a),i=o.url,s=o.query,c=o.fragmentIdentifier;return t.stringifyUrl({url:i,query:l(s,n),fragmentIdentifier:c},a)},t.exclude=function(e,n,r){var a=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,a,r)}},8472:function(e,t,n){e.exports=n(3561)},8015:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=(r=o)&&r.__esModule?r:{default:r},s=n(1509),c=n(8333);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return s.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,r=e.separator,a=e.enclosingCharacter,o=e.uFEFF,i=e.target,s=e.specs,c=e.replace;this.state.page=window.open(this.buildURI(t,o,n,r,a),i,s,c)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(i.default.Component);u.defaultProps=Object.assign(c.defaultProps,{target:"_blank"}),u.propTypes=c.propTypes,t.default=u},9088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),s=(r=i)&&r.__esModule?r:{default:r},c=n(1509),u=n(8333);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"buildURI",value:function(){return c.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,r=n.data,a=n.headers,o=n.separator,i=n.filename,s=n.enclosingCharacter,u=n.uFEFF,l=t&&"function"===typeof r?r():r,g=new Blob([u?"\ufeff":"",(0,c.toCSV)(l,a,o,s)]);return window.navigator.msSaveBlob(g,i),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,(function(n){!1!==n?t.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.headers,o=t.separator,i=t.filename,c=t.uFEFF,u=t.children,l=(t.onClick,t.asyncOnClick,t.enclosingCharacter),g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),d="undefined"===typeof window?"":this.buildURI(n,c,r,o,l);return s.default.createElement("a",a({download:i},g,{ref:function(t){return e.link=t},target:"_self",href:d,onClick:this.handleClick()}),u)}}]),t}(s.default.Component);l.defaultProps=u.defaultProps,l.propTypes=u.propTypes,t.default=l},1509:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},o=t.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":n(e))&&!(e instanceof Array)}))},i=t.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},s=t.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,t){return new Set([].concat(r(e),r(t)))}),[]))},c=t.jsons2arrays=function(e,t){var n=t=t||s(e),a=t;o(t)&&(n=t.map((function(e){return e.label})),a=t.map((function(e){return e.key})));var i=e.map((function(e){return a.map((function(t){return u(t,e)}))}));return[n].concat(r(i))},u=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,t,n,r){var a=e[t];if(void 0!==a&&null!==a)return a;r.splice(1)}),t);return void 0===n?e in t?t[e]:"":n},l=t.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},g=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return l(e)})).map((function(e){return""+n+e+n})).join(t)})).join("\n")},d=t.arrays2csv=function(e,t,n,a){return g(t?[t].concat(r(e)):e,n,a)},p=t.jsons2csv=function(e,t,n,r){return g(c(e,t),n,r)},h=t.string2csv=function(e,t,n,r){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},f=t.toCSV=function(e,t,n,r){if(o(e))return p(e,t,n,r);if(i(e))return d(e,t,n,r);if("string"===typeof e)return h(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,r,o){var i=f(e,n,r,o),s=a()?"application/csv":"text/csv",c=new Blob([t?"\ufeff":"",i],{type:s}),u="data:"+s+";charset=utf-8,"+(t?"\ufeff":"")+i,l=window.URL||window.webkitURL;return"undefined"===typeof l.createObjectURL?u:l.createObjectURL(c)}},3561:function(e,t,n){"use strict";t.CSVLink=void 0;var r=o(n(8015)),a=o(n(9088));function o(e){return e&&e.__esModule?e:{default:e}}r.default,t.CSVLink=a.default},8333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0;var r,a=n(2791),o=((r=a)&&r.__esModule,n(2007));t.propTypes={data:(0,o.oneOfType)([o.string,o.array,o.func]).isRequired,headers:o.array,target:o.string,separator:o.string,filename:o.string,uFEFF:o.bool,onClick:o.func,asyncOnClick:o.bool,enclosingCharacter:o.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]},4463:function(e,t,n){"use strict";var r=n(2791),a=n(1725),o=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var s=new Set,c={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},f={};function I(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){C[e]=new I(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];C[t]=new I(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){C[e]=new I(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){C[e]=new I(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){C[e]=new I(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){C[e]=new I(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){C[e]=new I(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){C[e]=new I(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){C[e]=new I(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=C.hasOwnProperty(t)?C[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!p.call(f,e)||!p.call(h,e)&&(d.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,v);C[t]=new I(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,v);C[t]=new I(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,v);C[t]=new I(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){C[e]=new I(e,1,!1,e.toLowerCase(),null,!1,!1)})),C.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){C[e]=new I(e,1,!1,e.toLowerCase(),null,!0,!0)}));var A=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=60103,k=60106,Z=60107,S=60108,w=60114,B=60109,G=60110,x=60112,R=60113,W=60120,V=60115,N=60116,X=60121,J=60128,F=60129,E=60130,T=60131;if("function"===typeof Symbol&&Symbol.for){var Y=Symbol.for;y=Y("react.element"),k=Y("react.portal"),Z=Y("react.fragment"),S=Y("react.strict_mode"),w=Y("react.profiler"),B=Y("react.provider"),G=Y("react.context"),x=Y("react.forward_ref"),R=Y("react.suspense"),W=Y("react.suspense_list"),V=Y("react.memo"),N=Y("react.lazy"),X=Y("react.block"),Y("react.scope"),J=Y("react.opaque.id"),F=Y("react.debug_trace_mode"),E=Y("react.offscreen"),T=Y("react.legacy_hidden")}var H,M="function"===typeof Symbol&&Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}function K(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var z=!1;function L(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s])return"\n"+a[i].replace(" at new "," at ")}while(1<=i&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?K(e):""}function P(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=L(e.type,!1);case 11:return e=L(e.type.render,!1);case 22:return e=L(e.type._render,!1);case 1:return e=L(e.type,!0);default:return""}}function _(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case Z:return"Fragment";case k:return"Portal";case w:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case W:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case G:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case V:return _(e.type);case X:return _(e._render);case N:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}function O(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function j(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=U(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=O(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=O(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,O(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+O(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:O(n)}}function ue(e,t){var n=O(t.value),r=O(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ge="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,Ie,Ce=(Ie=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ie(e,t)}))}:Ie);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function Ae(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Ae(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ve).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var ke=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Be=null,Ge=null,xe=null;function Re(e){if(e=ra(e)){if("function"!==typeof Be)throw Error(i(280));var t=e.stateNode;t&&(t=oa(t),Be(e.stateNode,e.type,t))}}function We(e){Ge?xe?xe.push(e):xe=[e]:Ge=e}function Ve(){if(Ge){var e=Ge,t=xe;if(xe=Ge=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Ne(e,t){return e(t)}function Xe(e,t,n,r,a){return e(t,n,r,a)}function Je(){}var Fe=Ne,Ee=!1,Te=!1;function Ye(){null===Ge&&null===xe||(Je(),Ve())}function He(e,t){var n=e.stateNode;if(null===n)return null;var r=oa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(g)try{var De={};Object.defineProperty(De,"passive",{get:function(){Me=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(Ie){Me=!1}function Ke(e,t,n,r,a,o,i,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var ze=!1,Le=null,Pe=!1,_e=null,Oe={onError:function(e){ze=!0,Le=e}};function Ue(e,t,n,r,a,o,i,s,c){ze=!1,Le=null,Ke.apply(Oe,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(je(e)!==e)throw Error(i(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return qe(a),e;if(o===r)return qe(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,ot=!1,it=[],st=null,ct=null,ut=null,lt=new Map,gt=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ct=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gt.delete(t.pointerId)}}function It(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=ht(t,n,r,a,o),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ct(e){var t=na(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){mt(e)&&n.delete(t)}function bt(){for(ot=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==st&&mt(st)&&(st=null),null!==ct&&mt(ct)&&(ct=null),null!==ut&&mt(ut)&&(ut=null),lt.forEach(vt),gt.forEach(vt)}function At(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function yt(e){function t(t){return At(t,e)}if(0<it.length){At(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&At(st,e),null!==ct&&At(ct,e),null!==ut&&At(ut,e),lt.forEach(t),gt.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)Ct(n),null===n.blockedOn&&dt.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zt={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},St={},wt={};function Bt(e){if(St[e])return St[e];if(!Zt[e])return e;var t,n=Zt[e];for(t in n)if(n.hasOwnProperty(t)&&t in wt)return St[e]=n[t];return e}g&&(wt=document.createElement("div").style,"AnimationEvent"in window||(delete Zt.animationend.animation,delete Zt.animationiteration.animation,delete Zt.animationstart.animation),"TransitionEvent"in window||delete Zt.transitionend.transition);var Gt=Bt("animationend"),xt=Bt("animationiteration"),Rt=Bt("animationstart"),Wt=Bt("transitionend"),Vt=new Map,Nt=new Map,Xt=["abort","abort",Gt,"animationEnd",xt,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Wt,"transitionEnd","waiting","waiting"];function Jt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Nt.set(r,t),Vt.set(r,a),u(a,[r])}}(0,o.unstable_now)();var Ft=8;function Et(e){if(0!==(1&e))return Ft=15,1;if(0!==(2&e))return Ft=14,2;if(0!==(4&e))return Ft=13,4;var t=24&e;return 0!==t?(Ft=12,t):0!==(32&e)?(Ft=11,32):0!==(t=192&e)?(Ft=10,t):0!==(256&e)?(Ft=9,256):0!==(t=3584&e)?(Ft=8,t):0!==(4096&e)?(Ft=7,4096):0!==(t=4186112&e)?(Ft=6,t):0!==(t=62914560&e)?(Ft=5,t):67108864&e?(Ft=4,67108864):0!==(134217728&e)?(Ft=3,134217728):0!==(t=805306368&e)?(Ft=2,t):0!==(1073741824&e)?(Ft=1,1073741824):(Ft=8,e)}function Tt(e,t){var n=e.pendingLanes;if(0===n)return Ft=0;var r=0,a=0,o=e.expiredLanes,i=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,a=Ft=15;else if(0!==(o=134217727&n)){var c=o&~i;0!==c?(r=Et(c),a=Ft):0!==(s&=o)&&(r=Et(s),a=Ft)}else 0!==(o=n&~i)?(r=Et(o),a=Ft):0!==s&&(r=Et(s),a=Ft);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&i)){if(Et(t),a<=Ft)return t;Ft=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-zt(t)),r|=e[n],t&=~a;return r}function Yt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ht(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Mt(24&~t))?Ht(10,t):e;case 10:return 0===(e=Mt(192&~t))?Ht(8,t):e;case 8:return 0===(e=Mt(3584&~t))&&(0===(e=Mt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Mt(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function Mt(e){return e&-e}function Dt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Kt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Lt(e)/Pt|0)|0},Lt=Math.log,Pt=Math.LN2;var _t=o.unstable_UserBlockingPriority,Ot=o.unstable_runWithPriority,Ut=!0;function jt(e,t,n,r){Ee||Je();var a=qt,o=Ee;Ee=!0;try{Xe(a,e,t,n,r)}finally{(Ee=o)||Ye()}}function Qt(e,t,n,r){Ot(_t,qt.bind(null,e,t,n,r))}function qt(e,t,n,r){var a;if(Ut)if((a=0===(4&t))&&0<it.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),it.push(e);else{var o=$t(e,t,n,r);if(null===o)a&&ft(e,r);else{if(a){if(-1<pt.indexOf(e))return e=ht(o,e,t,n,r),void it.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=It(st,e,t,n,r,a),!0;case"dragenter":return ct=It(ct,e,t,n,r,a),!0;case"mouseover":return ut=It(ut,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return lt.set(o,It(lt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,gt.set(o,It(gt.get(o)||null,e,t,n,r,a)),!0}return!1}(o,e,t,n,r))return;ft(e,r)}Jr(e,t,r,null,n)}}}function $t(e,t,n,r){var a=we(r);if(null!==(a=na(a))){var o=je(a);if(null===o)a=null;else{var i=o.tag;if(13===i){if(null!==(a=Qe(o)))return a;a=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Jr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function cn(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var un,ln,gn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=cn(dn),hn=a({},dn,{view:0,detail:0}),fn=cn(hn),In=a({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gn&&(gn&&"mousemove"===e.type?(un=e.screenX-gn.screenX,ln=e.screenY-gn.screenY):ln=un=0,gn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),Cn=cn(In),mn=cn(a({},In,{dataTransfer:0})),vn=cn(a({},hn,{relatedTarget:0})),bn=cn(a({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),An=a({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=cn(An),kn=cn(a({},dn,{data:0})),Zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Gn(){return Bn}var xn=a({},hn,{key:function(e){if(e.key){var t=Zn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=cn(xn),Wn=cn(a({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Vn=cn(a({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gn})),Nn=cn(a({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Xn=a({},In,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jn=cn(Xn),Fn=[9,13,27,32],En=g&&"CompositionEvent"in window,Tn=null;g&&"documentMode"in document&&(Tn=document.documentMode);var Yn=g&&"TextEvent"in window&&!Tn,Hn=g&&(!En||Tn&&8<Tn&&11>=Tn),Mn=String.fromCharCode(32),Dn=!1;function Kn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function On(e,t,n,r){We(r),0<(t=Er(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,jn=null;function Qn(e){xr(e,0)}function qn(e){if(Q(aa(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(g){var tr;if(g){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Un&&(Un.detachEvent("onpropertychange",or),jn=Un=null)}function or(e){if("value"===e.propertyName&&qn(jn)){var t=[];if(On(t,jn,e,we(e)),e=Qn,Ee)e(t);else{Ee=!0;try{Ne(e,t)}finally{Ee=!1,Ye()}}}}function ir(e,t,n){"focusin"===e?(ar(),jn=n,(Un=t).attachEvent("onpropertychange",or)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(jn)}function cr(e,t){if("click"===e)return qn(t)}function ur(e,t){if("input"===e||"change"===e)return qn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},gr=Object.prototype.hasOwnProperty;function dr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!gr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ir(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function Cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=g&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,Ar=null,yr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==q(r)||("selectionStart"in(r=vr)&&Cr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ar&&dr(Ar,r)||(Ar=r,0<(r=Er(br,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Jt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Jt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Jt(Xt,2);for(var Zr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Zr.length;Sr++)Nt.set(Zr[Sr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Br=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Gr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,c,u){if(Ue.apply(this,arguments),ze){if(!ze)throw Error(i(198));var l=Le;ze=!1,Le=null,Pe||(Pe=!0,_e=l)}}(r,t,void 0,e),e.currentTarget=null}function xr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&a.isPropagationStopped())break e;Gr(a,s,u),o=c}else for(i=0;i<r.length;i++){if(c=(s=r[i]).instance,u=s.currentTarget,s=s.listener,c!==o&&a.isPropagationStopped())break e;Gr(a,s,u),o=c}}}if(Pe)throw e=_e,Pe=!1,_e=null,e}function Rr(e,t){var n=ia(t),r=e+"__bubble";n.has(r)||(Xr(t,e,2,!1),n.add(r))}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){e[Wr]||(e[Wr]=!0,s.forEach((function(t){Br.has(t)||Nr(t,!1,e,null),Nr(t,!0,e,null)})))}function Nr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Br.has(e)){if("scroll"!==e)return;a|=2,o=r}var i=ia(o),s=e+"__"+(t?"capture":"bubble");i.has(s)||(t&&(a|=4),Xr(o,e,a,t),i.add(s))}function Xr(e,t,n,r){var a=Nt.get(t);switch(void 0===a?2:a){case 0:a=jt;break;case 1:a=Qt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Jr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&((c=i.stateNode.containerInfo)===a||8===c.nodeType&&c.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=na(s)))return;if(5===(c=i.tag)||6===c){r=o=i;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Te)return e(t,n);Te=!0;try{Fe(e,t,n)}finally{Te=!1,Ye()}}((function(){var r=o,a=we(n),i=[];e:{var s=Vt.get(e);if(void 0!==s){var c=pn,u=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":c=Rn;break;case"focusin":u="focus",c=vn;break;case"focusout":u="blur",c=vn;break;case"beforeblur":case"afterblur":c=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Vn;break;case Gt:case xt:case Rt:c=bn;break;case Wt:c=Nn;break;case"scroll":c=fn;break;case"wheel":c=Jn;break;case"copy":case"cut":case"paste":c=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Wn}var l=0!==(4&t),g=!l&&"scroll"===e,d=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var f=(p=h).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==d&&(null!=(f=He(h,d))&&l.push(Fr(h,f,p)))),g)break;h=h.return}0<l.length&&(s=new c(s,u,null,n,a),i.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!na(u)&&!u[ea])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?na(u):null)&&(u!==(g=je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=Cn,f="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=Wn,f="onPointerLeave",d="onPointerEnter",h="pointer"),g=null==c?s:aa(c),p=null==u?s:aa(u),(s=new l(f,h+"leave",c,n,a)).target=g,s.relatedTarget=p,f=null,na(a)===r&&((l=new l(d,h+"enter",u,n,a)).target=p,l.relatedTarget=g,f=l),g=f,c&&u)e:{for(d=u,h=0,p=l=c;p;p=Tr(p))h++;for(p=0,f=d;f;f=Tr(f))p++;for(;0<h-p;)l=Tr(l),h--;for(;0<p-h;)d=Tr(d),p--;for(;h--;){if(l===d||null!==d&&l===d.alternate)break e;l=Tr(l),d=Tr(d)}l=null}else l=null;null!==c&&Yr(i,s,c,l,!1),null!==u&&null!==g&&Yr(i,g,u,l,!0)}if("select"===(c=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var I=$n;else if(_n(s))if(er)I=ur;else{I=sr;var C=ir}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(I=cr);switch(I&&(I=I(e,r))?On(i,I,n,a):(C&&C(e,s,r),"focusout"===e&&(C=s._wrapperState)&&C.controlled&&"number"===s.type&&ae(s,"number",s.value)),C=r?aa(r):window,e){case"focusin":(_n(C)||"true"===C.contentEditable)&&(vr=C,br=r,Ar=null);break;case"focusout":Ar=br=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,kr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":kr(i,n,a)}var m;if(En)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ln?Kn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Hn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ln&&(m=rn()):(tn="value"in(en=a)?en.value:en.textContent,Ln=!0)),0<(C=Er(r,v)).length&&(v=new kn(v,e,null,n,a),i.push({event:v,listeners:C}),m?v.data=m:null!==(m=zn(n))&&(v.data=m))),(m=Yn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Dn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!En&&Kn(e,t)?(e=rn(),nn=tn=en=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Er(r,"onBeforeInput")).length&&(a=new kn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=m))}xr(i,t)}))}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Er(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=He(e,n))&&r.unshift(Fr(e,o,a)),null!=(o=He(e,t))&&r.push(Fr(e,o,a))),e=e.return}return r}function Tr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(c=He(n,o))&&i.unshift(Fr(n,c,s)):a||null!=(c=He(n,o))&&i.push(Fr(n,c,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function Hr(){}var Mr=null,Dr=null;function Kr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Lr="function"===typeof setTimeout?setTimeout:void 0,Pr="function"===typeof clearTimeout?clearTimeout:void 0;function _r(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Or(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var jr=0;var Qr=Math.random().toString(36).slice(2),qr="__reactFiber$"+Qr,$r="__reactProps$"+Qr,ea="__reactContainer$"+Qr,ta="__reactEvents$"+Qr;function na(e){var t=e[qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ur(e);null!==e;){if(n=e[qr])return n;e=Ur(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[qr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function oa(e){return e[$r]||null}function ia(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ca=-1;function ua(e){return{current:e}}function la(e){0>ca||(e.current=sa[ca],sa[ca]=null,ca--)}function ga(e,t){ca++,sa[ca]=e.current,e.current=t}var da={},pa=ua(da),ha=ua(!1),fa=da;function Ia(e,t){var n=e.type.contextTypes;if(!n)return da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ca(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ma(){la(ha),la(pa)}function va(e,t,n){if(pa.current!==da)throw Error(i(168));ga(pa,t),ga(ha,n)}function ba(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(i(108,_(t)||"Unknown",o));return a({},n,r)}function Aa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||da,fa=pa.current,ga(pa,e),ga(ha,ha.current),!0}function ya(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=ba(e,t,fa),r.__reactInternalMemoizedMergedChildContext=e,la(ha),la(pa),ga(pa,e)):la(ha),ga(ha,n)}var ka=null,Za=null,Sa=o.unstable_runWithPriority,wa=o.unstable_scheduleCallback,Ba=o.unstable_cancelCallback,Ga=o.unstable_shouldYield,xa=o.unstable_requestPaint,Ra=o.unstable_now,Wa=o.unstable_getCurrentPriorityLevel,Va=o.unstable_ImmediatePriority,Na=o.unstable_UserBlockingPriority,Xa=o.unstable_NormalPriority,Ja=o.unstable_LowPriority,Fa=o.unstable_IdlePriority,Ea={},Ta=void 0!==xa?xa:function(){},Ya=null,Ha=null,Ma=!1,Da=Ra(),Ka=1e4>Da?Ra:function(){return Ra()-Da};function za(){switch(Wa()){case Va:return 99;case Na:return 98;case Xa:return 97;case Ja:return 96;case Fa:return 95;default:throw Error(i(332))}}function La(e){switch(e){case 99:return Va;case 98:return Na;case 97:return Xa;case 96:return Ja;case 95:return Fa;default:throw Error(i(332))}}function Pa(e,t){return e=La(e),Sa(e,t)}function _a(e,t,n){return e=La(e),wa(e,t,n)}function Oa(){if(null!==Ha){var e=Ha;Ha=null,Ba(e)}Ua()}function Ua(){if(!Ma&&null!==Ya){Ma=!0;var e=0;try{var t=Ya;Pa(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ya=null}catch(n){throw null!==Ya&&(Ya=Ya.slice(e+1)),wa(Va,Oa),n}finally{Ma=!1}}}var ja=A.ReactCurrentBatchConfig;function Qa(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qa=ua(null),$a=null,eo=null,to=null;function no(){to=eo=$a=null}function ro(e){var t=qa.current;la(qa),e.type._context._currentValue=t}function ao(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){$a=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ei=!0),e.firstContext=null)}function io(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===$a)throw Error(i(308));eo=t,$a.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function go(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ho(e,t,n,r){var o=e.updateQueue;so=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,c=o.shared.pending;if(null!==c){o.shared.pending=null;var u=c,l=u.next;u.next=null,null===s?i=l:s.next=l,s=u;var g=e.alternate;if(null!==g){var d=(g=g.updateQueue).lastBaseUpdate;d!==s&&(null===d?g.firstBaseUpdate=l:d.next=l,g.lastBaseUpdate=u)}}if(null!==i){for(d=o.baseState,s=0,g=l=u=null;;){c=i.lane;var p=i.eventTime;if((r&c)===c){null!==g&&(g=g.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,f=i;switch(c=t,p=n,f.tag){case 1:if("function"===typeof(h=f.payload)){d=h.call(p,d,c);break e}d=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(c="function"===typeof(h=f.payload)?h.call(p,d,c):h)||void 0===c)break e;d=a({},d,c);break e;case 2:so=!0}}null!==i.callback&&(e.flags|=32,null===(c=o.effects)?o.effects=[i]:c.push(i))}else p={eventTime:p,lane:c,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===g?(l=g=p,u=d):g=g.next=p,s|=c;if(null===(i=i.next)){if(null===(c=o.shared.pending))break;i=c.next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}null===g&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=g,Ms|=s,e.lanes=s,e.memoizedState=d}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Io=(new r.Component).refs;function Co(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dc(),a=pc(e),o=lo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),go(e,o),hc(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dc(),a=pc(e),o=lo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),go(e,o),hc(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dc(),r=pc(e),a=lo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),go(e,a),hc(e,r,n)}};function vo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(a,o))}function bo(e,t,n){var r=!1,a=da,o=t.contextType;return"object"===typeof o&&null!==o?o=io(o):(a=Ca(t)?fa:pa.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ia(e,a):da),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function yo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Io,co(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=io(o):(o=Ca(t)?fa:pa.current,a.context=Ia(e,o)),ho(e,n,a,r),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Co(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&mo.enqueueReplaceState(a,a.state,null),ho(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var ko=Array.isArray;function Zo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===Io&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function So(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Zo(e,t,n),r.return=e,r):((r=_c(n.type,n.key,n.props,null,e.mode,r)).ref=Zo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function g(e,t,n,r,o){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(n=_c(t.type,t.key,t.props,null,e.mode,n)).ref=Zo(e,null,t),n.return=e,n;case k:return(t=Qc(t,e.mode,n)).return=e,t}if(ko(t)||D(t))return(t=Oc(t,e.mode,n,null)).return=e,t;So(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===a?n.type===Z?g(e,t,n.props.children,r,a):u(e,t,n,r):null;case k:return n.key===a?l(e,t,n,r):null}if(ko(n)||D(n))return null!==a?null:g(e,t,n,r,null);So(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case y:return e=e.get(null===r.key?n:r.key)||null,r.type===Z?g(t,e,r.props.children,a,r.key):u(t,e,r,a);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(ko(r)||D(r))return g(t,e=e.get(n)||null,r,a,null);So(t,r)}return null}function f(a,i,s,c){for(var u=null,l=null,g=i,f=i=0,I=null;null!==g&&f<s.length;f++){g.index>f?(I=g,g=null):I=g.sibling;var C=p(a,g,s[f],c);if(null===C){null===g&&(g=I);break}e&&g&&null===C.alternate&&t(a,g),i=o(C,i,f),null===l?u=C:l.sibling=C,l=C,g=I}if(f===s.length)return n(a,g),u;if(null===g){for(;f<s.length;f++)null!==(g=d(a,s[f],c))&&(i=o(g,i,f),null===l?u=g:l.sibling=g,l=g);return u}for(g=r(a,g);f<s.length;f++)null!==(I=h(g,a,f,s[f],c))&&(e&&null!==I.alternate&&g.delete(null===I.key?f:I.key),i=o(I,i,f),null===l?u=I:l.sibling=I,l=I);return e&&g.forEach((function(e){return t(a,e)})),u}function I(a,s,c,u){var l=D(c);if("function"!==typeof l)throw Error(i(150));if(null==(c=l.call(c)))throw Error(i(151));for(var g=l=null,f=s,I=s=0,C=null,m=c.next();null!==f&&!m.done;I++,m=c.next()){f.index>I?(C=f,f=null):C=f.sibling;var v=p(a,f,m.value,u);if(null===v){null===f&&(f=C);break}e&&f&&null===v.alternate&&t(a,f),s=o(v,s,I),null===g?l=v:g.sibling=v,g=v,f=C}if(m.done)return n(a,f),l;if(null===f){for(;!m.done;I++,m=c.next())null!==(m=d(a,m.value,u))&&(s=o(m,s,I),null===g?l=m:g.sibling=m,g=m);return l}for(f=r(a,f);!m.done;I++,m=c.next())null!==(m=h(f,a,I,m.value,u))&&(e&&null!==m.alternate&&f.delete(null===m.key?I:m.key),s=o(m,s,I),null===g?l=m:g.sibling=m,g=m);return e&&f.forEach((function(e){return t(a,e)})),l}return function(e,r,o,c){var u="object"===typeof o&&null!==o&&o.type===Z&&null===o.key;u&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case y:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){if(7===u.tag){if(o.type===Z){n(e,u.sibling),(r=a(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=a(u,o.props)).ref=Zo(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===Z?((r=Oc(o.props.children,e.mode,c,o.key)).return=e,e=r):((c=_c(o.type,o.key,o.props,null,e.mode,c)).ref=Zo(e,r,o),c.return=e,e=c)}return s(e);case k:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Qc(o,e.mode,c)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=jc(o,e.mode,c)).return=e,e=r),s(e);if(ko(o))return f(e,r,o,c);if(D(o))return I(e,r,o,c);if(l&&So(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,_(e.type)||"Component"))}return n(e,r)}}var Bo=wo(!0),Go=wo(!1),xo={},Ro=ua(xo),Wo=ua(xo),Vo=ua(xo);function No(e){if(e===xo)throw Error(i(174));return e}function Xo(e,t){switch(ga(Vo,t),ga(Wo,e),ga(Ro,xo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(Ro),ga(Ro,t)}function Jo(){la(Ro),la(Wo),la(Vo)}function Fo(e){No(Vo.current);var t=No(Ro.current),n=he(t,e.type);t!==n&&(ga(Wo,e),ga(Ro,n))}function Eo(e){Wo.current===e&&(la(Ro),la(Wo))}var To=ua(0);function Yo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ho=null,Mo=null,Do=!1;function Ko(e,t){var n=zc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Lo(e){if(Do){var t=Mo;if(t){var n=t;if(!zo(e,t)){if(!(t=Or(n.nextSibling))||!zo(e,t))return e.flags=-1025&e.flags|2,Do=!1,void(Ho=e);Ko(Ho,n)}Ho=e,Mo=Or(t.firstChild)}else e.flags=-1025&e.flags|2,Do=!1,Ho=e}}function Po(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ho=e}function _o(e){if(e!==Ho)return!1;if(!Do)return Po(e),Do=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zr(t,e.memoizedProps))for(t=Mo;t;)Ko(e,t),t=Or(t.nextSibling);if(Po(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Mo=Or(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Mo=null}}else Mo=Ho?Or(e.stateNode.nextSibling):null;return!0}function Oo(){Mo=Ho=null,Do=!1}var Uo=[];function jo(){for(var e=0;e<Uo.length;e++)Uo[e]._workInProgressVersionPrimary=null;Uo.length=0}var Qo=A.ReactCurrentDispatcher,qo=A.ReactCurrentBatchConfig,$o=0,ei=null,ti=null,ni=null,ri=!1,ai=!1;function oi(){throw Error(i(321))}function ii(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function si(e,t,n,r,a,o){if($o=o,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qo.current=null===e||null===e.memoizedState?Ni:Xi,e=n(r,a),ai){o=0;do{if(ai=!1,!(25>o))throw Error(i(301));o+=1,ni=ti=null,t.updateQueue=null,Qo.current=Ji,e=n(r,a)}while(ai)}if(Qo.current=Vi,t=null!==ti&&null!==ti.next,$o=0,ni=ti=ei=null,ri=!1,t)throw Error(i(300));return e}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ni?ei.memoizedState=ni=e:ni=ni.next=e,ni}function ui(){if(null===ti){var e=ei.alternate;e=null!==e?e.memoizedState:null}else e=ti.next;var t=null===ni?ei.memoizedState:ni.next;if(null!==t)ni=t,ti=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ti=e).memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},null===ni?ei.memoizedState=ni=e:ni=ni.next=e}return ni}function li(e,t){return"function"===typeof t?t(e):t}function gi(e){var t=ui(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ti,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var c=s=o=null,u=a;do{var l=u.lane;if(($o&l)===l)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var g={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(s=c=g,o=r):c=c.next=g,ei.lanes|=l,Ms|=l}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=s,lr(r,t.memoizedState)||(Ei=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function di(e){var t=ui(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);lr(o,t.memoizedState)||(Ei=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function pi(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=($o&e)===e)&&(t._workInProgressVersionPrimary=r,Uo.push(t))),e)return n(t._source);throw Uo.push(t),Error(i(350))}function hi(e,t,n,r){var a=Ns;if(null===a)throw Error(i(349));var o=t._getVersion,s=o(t._source),c=Qo.current,u=c.useState((function(){return pi(a,t,n)})),l=u[1],g=u[0];u=ni;var d=e.memoizedState,p=d.refs,h=p.getSnapshot,f=d.source;d=d.subscribe;var I=ei;return e.memoizedState={refs:p,source:t,subscribe:r},c.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=o(t._source);if(!lr(s,e)){e=n(t._source),lr(g,e)||(l(e),e=pc(I),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,i=e;0<i;){var c=31-zt(i),u=1<<c;r[c]|=e,i&=~u}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pc(I);a.mutableReadLanes|=r&a.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),lr(h,n)&&lr(f,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:g}).dispatch=l=Wi.bind(null,ei,e),u.queue=e,u.baseQueue=null,g=pi(a,t,n),u.memoizedState=u.baseState=g),g}function fi(e,t,n){return hi(ui(),e,t,n)}function Ii(e){var t=ci();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:e}).dispatch=Wi.bind(null,ei,e),[t.memoizedState,e]}function Ci(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ei.updateQueue)?(t={lastEffect:null},ei.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mi(e){return e={current:e},ci().memoizedState=e}function vi(){return ui().memoizedState}function bi(e,t,n,r){var a=ci();ei.flags|=e,a.memoizedState=Ci(1|t,n,void 0,void 0===r?null:r)}function Ai(e,t,n,r){var a=ui();r=void 0===r?null:r;var o=void 0;if(null!==ti){var i=ti.memoizedState;if(o=i.destroy,null!==r&&ii(r,i.deps))return void Ci(t,n,o,r)}ei.flags|=e,a.memoizedState=Ci(1|t,n,o,r)}function yi(e,t){return bi(516,4,e,t)}function ki(e,t){return Ai(516,4,e,t)}function Zi(e,t){return Ai(4,2,e,t)}function Si(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function wi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4,2,Si.bind(null,t,e),n)}function Bi(){}function Gi(e,t){var n=ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ii(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xi(e,t){var n=ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ii(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ri(e,t){var n=za();Pa(98>n?98:n,(function(){e(!0)})),Pa(97<n?97:n,(function(){var n=qo.transition;qo.transition=1;try{e(!1),t()}finally{qo.transition=n}}))}function Wi(e,t,n){var r=dc(),a=pc(e),o={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===ei||null!==i&&i===ei)ai=ri=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,c=i(s,n);if(o.eagerReducer=i,o.eagerState=c,lr(c,s))return}catch(u){}hc(e,a,r)}}var Vi={readContext:io,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useOpaqueIdentifier:oi,unstable_isNewReconciler:!1},Ni={readContext:io,useCallback:function(e,t){return ci().memoizedState=[e,void 0===t?null:t],e},useContext:io,useEffect:yi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bi(4,2,Si.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bi(4,2,e,t)},useMemo:function(e,t){var n=ci();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ci();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Wi.bind(null,ei,e),[r.memoizedState,e]},useRef:mi,useState:Ii,useDebugValue:Bi,useDeferredValue:function(e){var t=Ii(e),n=t[0],r=t[1];return yi((function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}}),[e]),n},useTransition:function(){var e=Ii(!1),t=e[0];return mi(e=Ri.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ci();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},hi(r,e,t,n)},useOpaqueIdentifier:function(){if(Do){var e=!1,t=function(e){return{$$typeof:J,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(jr++).toString(36))),Error(i(355))})),n=Ii(t)[1];return 0===(2&ei.mode)&&(ei.flags|=516,Ci(5,(function(){n("r:"+(jr++).toString(36))}),void 0,null)),t}return Ii(t="r:"+(jr++).toString(36)),t},unstable_isNewReconciler:!1},Xi={readContext:io,useCallback:Gi,useContext:io,useEffect:ki,useImperativeHandle:wi,useLayoutEffect:Zi,useMemo:xi,useReducer:gi,useRef:vi,useState:function(){return gi(li)},useDebugValue:Bi,useDeferredValue:function(e){var t=gi(li),n=t[0],r=t[1];return ki((function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}}),[e]),n},useTransition:function(){var e=gi(li)[0];return[vi().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return gi(li)[0]},unstable_isNewReconciler:!1},Ji={readContext:io,useCallback:Gi,useContext:io,useEffect:ki,useImperativeHandle:wi,useLayoutEffect:Zi,useMemo:xi,useReducer:di,useRef:vi,useState:function(){return di(li)},useDebugValue:Bi,useDeferredValue:function(e){var t=di(li),n=t[0],r=t[1];return ki((function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}}),[e]),n},useTransition:function(){var e=di(li)[0];return[vi().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return di(li)[0]},unstable_isNewReconciler:!1},Fi=A.ReactCurrentOwner,Ei=!1;function Ti(e,t,n,r){t.child=null===e?Go(t,null,n,r):Bo(t,e.child,n,r)}function Yi(e,t,n,r,a){n=n.render;var o=t.ref;return oo(t,a),r=si(e,t,n,r,o,a),null===e||Ei?(t.flags|=1,Ti(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,os(e,t,a))}function Hi(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!==typeof i||Lc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_c(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Mi(e,t,i,r,a,o))}return i=e.child,0===(a&o)&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:dr)(a,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e)}function Mi(e,t,n,r,a,o){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Ei=!1,0===(o&a))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Ei=!0)}return zi(e,t,n,r,o)}function Di(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},yc(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},yc(t,e),null;t.memoizedState={baseLanes:0},yc(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,yc(t,r);return Ti(e,t,a,n),t.child}function Ki(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function zi(e,t,n,r,a){var o=Ca(n)?fa:pa.current;return o=Ia(t,o),oo(t,a),n=si(e,t,n,r,o,a),null===e||Ei?(t.flags|=1,Ti(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,os(e,t,a))}function Li(e,t,n,r,a){if(Ca(n)){var o=!0;Aa(t)}else o=!1;if(oo(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),yo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var c=i.context,u=n.contextType;"object"===typeof u&&null!==u?u=io(u):u=Ia(t,u=Ca(n)?fa:pa.current);var l=n.getDerivedStateFromProps,g="function"===typeof l||"function"===typeof i.getSnapshotBeforeUpdate;g||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||c!==u)&&Ao(t,i,r,u),so=!1;var d=t.memoizedState;i.state=d,ho(t,r,i,a),c=t.memoizedState,s!==r||d!==c||ha.current||so?("function"===typeof l&&(Co(t,n,l,r),c=t.memoizedState),(s=so||vo(t,n,s,r,d,c,u))?(g||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4)):("function"===typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,uo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Qa(t.type,s),i.props=u,g=t.pendingProps,d=i.context,"object"===typeof(c=n.contextType)&&null!==c?c=io(c):c=Ia(t,c=Ca(n)?fa:pa.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==g||d!==c)&&Ao(t,i,r,c),so=!1,d=t.memoizedState,i.state=d,ho(t,r,i,a);var h=t.memoizedState;s!==g||d!==h||ha.current||so?("function"===typeof p&&(Co(t,n,p,r),h=t.memoizedState),(u=so||vo(t,n,u,r,d,h,c))?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=c,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Pi(e,t,n,r,o,a)}function Pi(e,t,n,r,a,o){Ki(e,t);var i=0!==(64&t.flags);if(!r&&!i)return a&&ya(t,n,!1),os(e,t,o);r=t.stateNode,Fi.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Bo(t,e.child,null,o),t.child=Bo(t,null,s,o)):Ti(e,t,s,o),t.memoizedState=r.state,a&&ya(t,n,!0),t.child}function _i(e){var t=e.stateNode;t.pendingContext?va(0,t.pendingContext,t.pendingContext!==t.context):t.context&&va(0,t.context,!1),Xo(e,t.containerInfo)}var Oi,Ui,ji,Qi={dehydrated:null,retryLane:0};function qi(e,t,n){var r,a=t.pendingProps,o=To.current,i=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),ga(To,1&o),null===e?(void 0!==a.fallback&&Lo(t),e=a.children,o=a.fallback,i?(e=$i(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qi,e):"number"===typeof a.unstable_expectedLoadTime?(e=$i(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qi,t.lanes=33554432,e):((n=Uc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(a=ts(e,t,a.children,a.fallback,n),i=t.child,o=e.child.memoizedState,i.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=Qi,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function $i(e,t,n,r){var a=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Uc(t,a,0,null),n=Oc(n,a,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Pc(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var o=t.mode,i=e.child;e=i.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=s,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Pc(i,s),null!==e?r=Pc(e,r):(r=Oc(r,o,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ao(e.return,t)}function rs(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a,i.lastEffect=o)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Ti(e,t,r.children,n),0!==(2&(r=To.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ga(To,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Yo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Yo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function is(e,t){if(!Do)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Ca(t.type)&&ma(),null;case 3:return Jo(),la(ha),la(pa),jo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(_o(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Eo(t);var o=No(Vo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ui(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=No(Ro.current),_o(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[qr]=t,r[$r]=s,n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(e=0;e<wr.length;e++)Rr(wr[e],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":ee(r,s),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rr("invalid",r);break;case"textarea":ce(r,s),Rr("invalid",r)}for(var u in Ze(n,s),e=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):c.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Rr("scroll",r));switch(n){case"input":j(r),re(r,s,!0);break;case"textarea":j(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Hr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===ge&&(e=pe(n)),e===ge?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[qr]=t,e[$r]=r,Oi(e,t),t.stateNode=e,u=Se(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),o=r;break;case"iframe":case"object":case"embed":Rr("load",e),o=r;break;case"video":case"audio":for(o=0;o<wr.length;o++)Rr(wr[o],e);o=r;break;case"source":Rr("error",e),o=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),o=r;break;case"details":Rr("toggle",e),o=r;break;case"input":ee(e,r),o=$(e,r),Rr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=a({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ce(e,r),o=se(e,r),Rr("invalid",e);break;default:o=r}Ze(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var g=l[s];"style"===s?ye(e,g):"dangerouslySetInnerHTML"===s?null!=(g=g?g.__html:void 0)&&Ce(e,g):"children"===s?"string"===typeof g?("textarea"!==n||""!==g)&&me(e,g):"number"===typeof g&&me(e,""+g):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(c.hasOwnProperty(s)?null!=g&&"onScroll"===s&&Rr("scroll",e):null!=g&&b(e,s,g,u))}switch(n){case"input":j(e),re(e,r,!1);break;case"textarea":j(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+O(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ie(e,!!r.multiple,s,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Hr)}Kr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)ji(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));n=No(Vo.current),No(Ro.current),_o(t)?(r=t.stateNode,n=t.memoizedProps,r[qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[qr]=t,t.stateNode=r)}return null;case 13:return la(To),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&_o(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&To.current)?0===Ts&&(Ts=3):(0!==Ts&&3!==Ts||(Ts=4),null===Ns||0===(134217727&Ms)&&0===(134217727&Ds)||mc(Ns,Js))),(r||n)&&(t.flags|=4),null);case 4:return Jo(),null===e&&Vr(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(la(To),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=r.rendering))if(s)is(r,!1);else{if(0!==Ts||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Yo(e))){for(t.flags|=64,is(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ga(To,1&To.current|2),t.child}e=e.sibling}null!==r.tail&&Ka()>Ps&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Yo(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),is(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Do)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ka()-r.renderingStartTime>Ps&&1073741824!==n&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ka(),n.sibling=null,t=To.current,ga(To,s?1&t|2:1&t),n):null;case 23:case 24:return kc(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function cs(e){switch(e.tag){case 1:Ca(e.type)&&ma();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Jo(),la(ha),la(pa),jo(),0!==(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return Eo(e),null;case 13:return la(To),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(To),null;case 4:return Jo(),null;case 10:return ro(e),null;case 23:case 24:return kc(),null;default:return null}}function us(e,t){try{var n="",r=t;do{n+=P(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Oi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ui=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,No(Ro.current);var i,s=null;switch(n){case"input":o=$(e,o),r=$(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Hr)}for(g in Ze(n,r),n=null,o)if(!r.hasOwnProperty(g)&&o.hasOwnProperty(g)&&null!=o[g])if("style"===g){var u=o[g];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==g&&"children"!==g&&"suppressContentEditableWarning"!==g&&"suppressHydrationWarning"!==g&&"autoFocus"!==g&&(c.hasOwnProperty(g)?s||(s=[]):(s=s||[]).push(g,null));for(g in r){var l=r[g];if(u=null!=o?o[g]:void 0,r.hasOwnProperty(g)&&l!==u&&(null!=l||null!=u))if("style"===g)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(g,n)),n=l;else"dangerouslySetInnerHTML"===g?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(s=s||[]).push(g,l)):"children"===g?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(g,""+l):"suppressContentEditableWarning"!==g&&"suppressHydrationWarning"!==g&&(c.hasOwnProperty(g)?(null!=l&&"onScroll"===g&&Rr("scroll",e),s||u===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===J?l.toString():(s=s||[]).push(g,l))}n&&(s=s||[]).push("style",n);var g=s;(t.updateQueue=g)&&(t.flags|=4)}},ji=function(e,t,n,r){n!==r&&(t.flags|=4)};var gs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){js||(js=!0,Qs=r),ls(0,t)},n}function ps(e,t,n){(n=lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ls(0,t),r(a)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Hc(e,n)}else t.current=null}function Is(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qa(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&_r(t.stateNode.containerInfo))}throw Error(i(163))}function Cs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Ec(n,e),Fc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qa(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Kr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&yt(n)))))}throw Error(i(163))}function ms(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ae("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function vs(e,t){if(Za&&"function"===typeof Za.onCommitFiberUnmount)try{Za.onCommitFiberUnmount(ka,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Ec(t,n);else{r=t;try{a()}catch(o){Hc(r,o)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Hc(t,o)}break;case 5:fs(t);break;case 4:Ss(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function As(e){return 5===e.tag||3===e.tag||4===e.tag}function ys(e){e:{for(var t=e.return;null!==t;){if(As(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||As(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ks(e,n,t):Zs(e,n,t)}function ks(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Hr));else if(4!==r&&null!==(e=e.child))for(ks(e,t,n),e=e.sibling;null!==e;)ks(e,t,n),e=e.sibling}function Zs(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Zs(e,t,n),e=e.sibling;null!==e;)Zs(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(i(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,u=c;;)if(vs(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(vs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function ws(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,a),t=Se(e,r),a=0;a<o.length;a+=2){var s=o[a],c=o[a+1];"style"===s?ye(n,c):"dangerouslySetInnerHTML"===s?Ce(n,c):"children"===s?me(n,c):b(n,s,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ie(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,yt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ls=Ka(),ms(t.child,!0)),void Bs(t);case 19:return void Bs(t);case 23:case 24:return void ms(t,null!==t.memoizedState)}throw Error(i(163))}function Bs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Gs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var xs=Math.ceil,Rs=A.ReactCurrentDispatcher,Ws=A.ReactCurrentOwner,Vs=0,Ns=null,Xs=null,Js=0,Fs=0,Es=ua(0),Ts=0,Ys=null,Hs=0,Ms=0,Ds=0,Ks=0,zs=null,Ls=0,Ps=1/0;function _s(){Ps=Ka()+500}var Os,Us=null,js=!1,Qs=null,qs=null,$s=!1,ec=null,tc=90,nc=[],rc=[],ac=null,oc=0,ic=null,sc=-1,cc=0,uc=0,lc=null,gc=!1;function dc(){return 0!==(48&Vs)?Ka():-1!==sc?sc:sc=Ka()}function pc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===za()?1:2;if(0===cc&&(cc=Hs),0!==ja.transition){0!==uc&&(uc=null!==zs?zs.pendingLanes:0),e=cc;var t=4186112&~uc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=za(),0!==(4&Vs)&&98===e?e=Ht(12,cc):e=Ht(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),cc),e}function hc(e,t,n){if(50<oc)throw oc=0,ic=null,Error(i(185));if(null===(e=fc(e,t)))return null;Kt(e,t,n),e===Ns&&(Ds|=t,4===Ts&&mc(e,Js));var r=za();1===t?0!==(8&Vs)&&0===(48&Vs)?vc(e):(Ic(e,n),0===Vs&&(_s(),Oa())):(0===(4&Vs)||98!==r&&99!==r||(null===ac?ac=new Set([e]):ac.add(e)),Ic(e,n)),zs=e}function fc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ic(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-zt(s),u=1<<c,l=o[c];if(-1===l){if(0===(u&r)||0!==(u&a)){l=t,Et(u);var g=Ft;o[c]=10<=g?l+250:6<=g?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);s&=~u}if(r=Tt(e,e===Ns?Js:0),t=Ft,0===r)null!==n&&(n!==Ea&&Ba(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ea&&Ba(n)}15===t?(n=vc.bind(null,e),null===Ya?(Ya=[n],Ha=wa(Va,Ua)):Ya.push(n),n=Ea):14===t?n=_a(99,vc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=_a(n,Cc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function Cc(e){if(sc=-1,uc=cc=0,0!==(48&Vs))throw Error(i(327));var t=e.callbackNode;if(Jc()&&e.callbackNode!==t)return null;var n=Tt(e,e===Ns?Js:0);if(0===n)return null;var r=n,a=Vs;Vs|=16;var o=wc();for(Ns===e&&Js===r||(_s(),Zc(e,r));;)try{xc();break}catch(c){Sc(e,c)}if(no(),Rs.current=o,Vs=a,null!==Xs?r=0:(Ns=null,Js=0,r=Ts),0!==(Hs&Ds))Zc(e,0);else if(0!==r){if(2===r&&(Vs|=64,e.hydrate&&(e.hydrate=!1,_r(e.containerInfo)),0!==(n=Yt(e))&&(r=Bc(e,n))),1===r)throw t=Ys,Zc(e,0),mc(e,n),Ic(e,Ka()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Vc(e);break;case 3:if(mc(e,n),(62914560&n)===n&&10<(r=Ls+500-Ka())){if(0!==Tt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){dc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Lr(Vc.bind(null,e),r);break}Vc(e);break;case 4:if(mc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-zt(n);o=1<<s,(s=r[s])>a&&(a=s),n&=~o}if(n=a,10<(n=(120>(n=Ka()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xs(n/1960))-n)){e.timeoutHandle=Lr(Vc.bind(null,e),n);break}Vc(e);break;default:throw Error(i(329))}}return Ic(e,Ka()),e.callbackNode===t?Cc.bind(null,e):null}function mc(e,t){for(t&=~Ks,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function vc(e){if(0!==(48&Vs))throw Error(i(327));if(Jc(),e===Ns&&0!==(e.expiredLanes&Js)){var t=Js,n=Bc(e,t);0!==(Hs&Ds)&&(n=Bc(e,t=Tt(e,t)))}else n=Bc(e,t=Tt(e,0));if(0!==e.tag&&2===n&&(Vs|=64,e.hydrate&&(e.hydrate=!1,_r(e.containerInfo)),0!==(t=Yt(e))&&(n=Bc(e,t))),1===n)throw n=Ys,Zc(e,0),mc(e,t),Ic(e,Ka()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vc(e),Ic(e,Ka()),null}function bc(e,t){var n=Vs;Vs|=1;try{return e(t)}finally{0===(Vs=n)&&(_s(),Oa())}}function Ac(e,t){var n=Vs;Vs&=-2,Vs|=8;try{return e(t)}finally{0===(Vs=n)&&(_s(),Oa())}}function yc(e,t){ga(Es,Fs),Fs|=t,Hs|=t}function kc(){Fs=Es.current,la(Es)}function Zc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Pr(n)),null!==Xs)for(n=Xs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ma();break;case 3:Jo(),la(ha),la(pa),jo();break;case 5:Eo(r);break;case 4:Jo();break;case 13:case 19:la(To);break;case 10:ro(r);break;case 23:case 24:kc()}n=n.return}Ns=e,Xs=Pc(e.current,null),Js=Fs=Hs=t,Ts=0,Ys=null,Ks=Ds=Ms=0}function Sc(e,t){for(;;){var n=Xs;try{if(no(),Qo.current=Vi,ri){for(var r=ei.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ri=!1}if($o=0,ni=ti=ei=null,ai=!1,Ws.current=null,null===n||null===n.return){Ts=1,Ys=t,Xs=null;break}e:{var o=e,i=n.return,s=n,c=t;if(t=Js,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var g=0!==(1&To.current),d=i;do{var p;if(p=13===d.tag){var h=d.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var f=d.memoizedProps;p=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!g)}}if(p){var I=d.updateQueue;if(null===I){var C=new Set;C.add(u),d.updateQueue=C}else I.add(u);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=lo(-1,1);m.tag=2,go(s,m)}s.lanes|=1;break e}c=void 0,s=t;var v=o.pingCache;if(null===v?(v=o.pingCache=new gs,c=new Set,v.set(u,c)):void 0===(c=v.get(u))&&(c=new Set,v.set(u,c)),!c.has(s)){c.add(s);var b=Mc.bind(null,o,u,s);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((_(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ts&&(Ts=2),c=us(c,s),d=i;do{switch(d.tag){case 3:o=c,d.flags|=4096,t&=-t,d.lanes|=t,po(d,ds(0,o,t));break e;case 1:o=c;var A=d.type,y=d.stateNode;if(0===(64&d.flags)&&("function"===typeof A.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===qs||!qs.has(y)))){d.flags|=4096,t&=-t,d.lanes|=t,po(d,ps(d,o,t));break e}}d=d.return}while(null!==d)}Wc(n)}catch(k){t=k,Xs===n&&null!==n&&(Xs=n=n.return);continue}break}}function wc(){var e=Rs.current;return Rs.current=Vi,null===e?Vi:e}function Bc(e,t){var n=Vs;Vs|=16;var r=wc();for(Ns===e&&Js===t||Zc(e,t);;)try{Gc();break}catch(a){Sc(e,a)}if(no(),Vs=n,Rs.current=r,null!==Xs)throw Error(i(261));return Ns=null,Js=0,Ts}function Gc(){for(;null!==Xs;)Rc(Xs)}function xc(){for(;null!==Xs&&!Ga();)Rc(Xs)}function Rc(e){var t=Os(e.alternate,e,Fs);e.memoizedProps=e.pendingProps,null===t?Wc(e):Xs=t,Ws.current=null}function Wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Fs)))return void(Xs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Fs)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=cs(t)))return n.flags&=2047,void(Xs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Xs=t);Xs=t=e}while(null!==t);0===Ts&&(Ts=5)}function Vc(e){var t=za();return Pa(99,Nc.bind(null,e,t)),null}function Nc(e,t){do{Jc()}while(null!==ec);if(0!==(48&Vs))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,o=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,c=e.expirationTimes;0<o;){var u=31-zt(o),l=1<<u;a[u]=0,s[u]=-1,c[u]=-1,o&=~l}if(null!==ac&&0===(24&r)&&ac.has(e)&&ac.delete(e),e===Ns&&(Xs=Ns=null,Js=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Vs,Vs|=32,Ws.current=null,Mr=Ut,Cr(s=Ir())){if("selectionStart"in s)c={start:s.selectionStart,end:s.selectionEnd};else e:if(c=(c=s.ownerDocument)&&c.defaultView||window,(l=c.getSelection&&c.getSelection())&&0!==l.rangeCount){c=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{c.nodeType,u.nodeType}catch(w){c=null;break e}var g=0,d=-1,p=-1,h=0,f=0,I=s,C=null;t:for(;;){for(var m;I!==c||0!==o&&3!==I.nodeType||(d=g+o),I!==u||0!==l&&3!==I.nodeType||(p=g+l),3===I.nodeType&&(g+=I.nodeValue.length),null!==(m=I.firstChild);)C=I,I=m;for(;;){if(I===s)break t;if(C===c&&++h===o&&(d=g),C===u&&++f===l&&(p=g),null!==(m=I.nextSibling))break;C=(I=C).parentNode}I=m}c=-1===d||-1===p?null:{start:d,end:p}}else c=null;c=c||{start:0,end:0}}else c=null;Dr={focusedElem:s,selectionRange:c},Ut=!1,lc=null,gc=!1,Us=r;do{try{Xc()}catch(w){if(null===Us)throw Error(i(330));Hc(Us,w),Us=Us.nextEffect}}while(null!==Us);lc=null,Us=r;do{try{for(s=e;null!==Us;){var v=Us.flags;if(16&v&&me(Us.stateNode,""),128&v){var b=Us.alternate;if(null!==b){var A=b.ref;null!==A&&("function"===typeof A?A(null):A.current=null)}}switch(1038&v){case 2:ys(Us),Us.flags&=-3;break;case 6:ys(Us),Us.flags&=-3,ws(Us.alternate,Us);break;case 1024:Us.flags&=-1025;break;case 1028:Us.flags&=-1025,ws(Us.alternate,Us);break;case 4:ws(Us.alternate,Us);break;case 8:Ss(s,c=Us);var y=c.alternate;bs(c),null!==y&&bs(y)}Us=Us.nextEffect}}catch(w){if(null===Us)throw Error(i(330));Hc(Us,w),Us=Us.nextEffect}}while(null!==Us);if(A=Dr,b=Ir(),v=A.focusedElem,s=A.selectionRange,b!==v&&v&&v.ownerDocument&&fr(v.ownerDocument.documentElement,v)){null!==s&&Cr(v)&&(b=s.start,void 0===(A=s.end)&&(A=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(A,v.value.length)):(A=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(A=A.getSelection(),c=v.textContent.length,y=Math.min(s.start,c),s=void 0===s.end?y:Math.min(s.end,c),!A.extend&&y>s&&(c=s,s=y,y=c),c=hr(v,y),o=hr(v,s),c&&o&&(1!==A.rangeCount||A.anchorNode!==c.node||A.anchorOffset!==c.offset||A.focusNode!==o.node||A.focusOffset!==o.offset)&&((b=b.createRange()).setStart(c.node,c.offset),A.removeAllRanges(),y>s?(A.addRange(b),A.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),A.addRange(b))))),b=[];for(A=v;A=A.parentNode;)1===A.nodeType&&b.push({element:A,left:A.scrollLeft,top:A.scrollTop});for("function"===typeof v.focus&&v.focus(),v=0;v<b.length;v++)(A=b[v]).element.scrollLeft=A.left,A.element.scrollTop=A.top}Ut=!!Mr,Dr=Mr=null,e.current=n,Us=r;do{try{for(v=e;null!==Us;){var k=Us.flags;if(36&k&&Cs(v,Us.alternate,Us),128&k){b=void 0;var Z=Us.ref;if(null!==Z){var S=Us.stateNode;Us.tag,b=S,"function"===typeof Z?Z(b):Z.current=b}}Us=Us.nextEffect}}catch(w){if(null===Us)throw Error(i(330));Hc(Us,w),Us=Us.nextEffect}}while(null!==Us);Us=null,Ta(),Vs=a}else e.current=n;if($s)$s=!1,ec=e,tc=t;else for(Us=r;null!==Us;)t=Us.nextEffect,Us.nextEffect=null,8&Us.flags&&((k=Us).sibling=null,k.stateNode=null),Us=t;if(0===(r=e.pendingLanes)&&(qs=null),1===r?e===ic?oc++:(oc=0,ic=e):oc=0,n=n.stateNode,Za&&"function"===typeof Za.onCommitFiberRoot)try{Za.onCommitFiberRoot(ka,n,void 0,64===(64&n.current.flags))}catch(w){}if(Ic(e,Ka()),js)throw js=!1,e=Qs,Qs=null,e;return 0!==(8&Vs)||Oa(),null}function Xc(){for(;null!==Us;){var e=Us.alternate;gc||null===lc||(0!==(8&Us.flags)?et(Us,lc)&&(gc=!0):13===Us.tag&&Gs(e,Us)&&et(Us,lc)&&(gc=!0));var t=Us.flags;0!==(256&t)&&Is(e,Us),0===(512&t)||$s||($s=!0,_a(97,(function(){return Jc(),null}))),Us=Us.nextEffect}}function Jc(){if(90!==tc){var e=97<tc?97:tc;return tc=90,Pa(e,Tc)}return!1}function Fc(e,t){nc.push(t,e),$s||($s=!0,_a(97,(function(){return Jc(),null})))}function Ec(e,t){rc.push(t,e),$s||($s=!0,_a(97,(function(){return Jc(),null})))}function Tc(){if(null===ec)return!1;var e=ec;if(ec=null,0!==(48&Vs))throw Error(i(331));var t=Vs;Vs|=32;var n=rc;rc=[];for(var r=0;r<n.length;r+=2){var a=n[r],o=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===o)throw Error(i(330));Hc(o,u)}}for(n=nc,nc=[],r=0;r<n.length;r+=2){a=n[r],o=n[r+1];try{var c=a.create;a.destroy=c()}catch(u){if(null===o)throw Error(i(330));Hc(o,u)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Vs=t,Oa(),!0}function Yc(e,t,n){go(e,t=ds(0,t=us(n,t),1)),t=dc(),null!==(e=fc(e,1))&&(Kt(e,1,t),Ic(e,t))}function Hc(e,t){if(3===e.tag)Yc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Yc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){var a=ps(n,e=us(t,e),1);if(go(n,a),a=dc(),null!==(n=fc(n,1)))Kt(n,1,a),Ic(n,a);else if("function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Mc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Js&n)===n&&(4===Ts||3===Ts&&(62914560&Js)===Js&&500>Ka()-Ls?Zc(e,0):Ks|=n),Ic(e,t)}function Dc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===za()?1:2:(0===cc&&(cc=Hs),0===(t=Mt(62914560&~cc))&&(t=4194304))),n=dc(),null!==(e=fc(e,t))&&(Kt(e,t,n),Ic(e,n))}function Kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zc(e,t,n,r){return new Kc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=zc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _c(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case Z:return Oc(n.children,a,o,t);case F:s=8,a|=16;break;case S:s=8,a|=1;break;case w:return(e=zc(12,n,t,8|a)).elementType=w,e.type=w,e.lanes=o,e;case R:return(e=zc(13,n,t,a)).type=R,e.elementType=R,e.lanes=o,e;case W:return(e=zc(19,n,t,a)).elementType=W,e.lanes=o,e;case E:return Uc(n,a,o,t);case T:return(e=zc(24,n,t,a)).elementType=T,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case B:s=10;break e;case G:s=9;break e;case x:s=11;break e;case V:s=14;break e;case N:s=16,r=null;break e;case X:s=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=zc(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=zc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=zc(23,e,r,t)).elementType=E,e.lanes=n,e}function jc(e,t,n){return(e=zc(6,e,null,t)).lanes=n,e}function Qc(e,t,n){return(t=zc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Dt(0),this.expirationTimes=Dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.mutableSourceEagerHydrationData=null}function $c(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function eu(e,t,n,r){var a=t.current,o=dc(),s=pc(a);e:if(n){t:{if(je(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(Ca(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(i(171))}if(1===n.tag){var u=n.type;if(Ca(u)){n=ba(n,u,c);break e}}n=c}else n=da;return null===t.context?t.context=n:t.pendingContext=n,(t=lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),go(a,t),hc(a,s,o),s}function tu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ru(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}function au(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new qc(e,t,null!=n&&!0===n.hydrate),t=zc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,co(t),e[ea]=n.current,Vr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function ou(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tu(i);s.call(e)}}eu(t,i,e,a)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new au(e,0,t?{hydrate:!0}:void 0)}(n,r),i=o._internalRoot,"function"===typeof a){var c=a;a=function(){var e=tu(i);c.call(e)}}Ac((function(){eu(t,i,e,a)}))}return tu(i)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ou(t))throw Error(i(200));return $c(e,t,null,n)}Os=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ha.current)Ei=!0;else{if(0===(n&r)){switch(Ei=!1,t.tag){case 3:_i(t),Oo();break;case 5:Fo(t);break;case 1:Ca(t.type)&&Aa(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;ga(qa,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?qi(e,t,n):(ga(To,1&To.current),null!==(t=os(e,t,n))?t.sibling:null);ga(To,1&To.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ga(To,To.current),r)break;return null;case 23:case 24:return t.lanes=0,Di(e,t,n)}return os(e,t,n)}Ei=0!==(16384&e.flags)}else Ei=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=Ia(t,pa.current),oo(t,n),a=si(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ca(r)){var o=!0;Aa(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,co(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&Co(t,r,s,e),a.updater=mo,t.stateNode=a,a._reactInternals=t,yo(t,r,e,n),t=Pi(null,t,r,!0,o,n)}else t.tag=0,Ti(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===V)return 14}return 2}(a),e=Qa(a,e),o){case 0:t=zi(null,t,a,e,n);break e;case 1:t=Li(null,t,a,e,n);break e;case 11:t=Yi(null,t,a,e,n);break e;case 14:t=Hi(null,t,a,Qa(a.type,e),r,n);break e}throw Error(i(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,zi(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 1:return r=t.type,a=t.pendingProps,Li(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 3:if(_i(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,uo(e,t),ho(t,r,null,n),(r=t.memoizedState.element)===a)Oo(),t=os(e,t,n);else{if((o=(a=t.stateNode).hydrate)&&(Mo=Or(t.stateNode.containerInfo.firstChild),Ho=t,o=Do=!0),o){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(o=e[a])._workInProgressVersionPrimary=e[a+1],Uo.push(o);for(n=Go(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ti(e,t,r,n),Oo();t=t.child}return t;case 5:return Fo(t),null===e&&Lo(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,zr(r,a)?s=null:null!==o&&zr(r,o)&&(t.flags|=16),Ki(e,t),Ti(e,t,s,n),t.child;case 6:return null===e&&Lo(t),null;case 13:return qi(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Bo(t,null,r,n):Ti(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Yi(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 7:return Ti(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ti(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value;var c=t.type._context;if(ga(qa,c._currentValue),c._currentValue=o,null!==s)if(c=s.value,0===(o=lr(c,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,o):1073741823))){if(s.children===a.children&&!ha.current){t=os(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){s=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===c.tag&&((l=lo(-1,n&-n)).tag=2,go(c,l)),c.lanes|=n,null!==(l=c.alternate)&&(l.lanes|=n),ao(c.return,n),u.lanes|=n;break}l=l.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Ti(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(a=io(a,o.unstable_observedBits)),t.flags|=1,Ti(e,t,r,n),t.child;case 14:return o=Qa(a=t.type,t.pendingProps),Hi(e,t,a,o=Qa(a.type,o),r,n);case 15:return Mi(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qa(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ca(r)?(e=!0,Aa(t)):e=!1,oo(t,n),bo(t,r,a),yo(t,r,a,n),Pi(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return Di(e,t,n)}throw Error(i(156,t.tag))},au.prototype.render=function(e){eu(e,this._internalRoot,null,null)},au.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;eu(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(hc(e,4,dc()),ru(e,4))},nt=function(e){13===e.tag&&(hc(e,67108864,dc()),ru(e,67108864))},rt=function(e){if(13===e.tag){var t=dc(),n=pc(e);hc(e,n,t),ru(e,n)}},at=function(e,t){return t()},Be=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=oa(r);if(!a)throw Error(i(90));Q(r),ne(r,a)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Ne=bc,Xe=function(e,t,n,r,a){var o=Vs;Vs|=4;try{return Pa(98,e.bind(null,t,n,r,a))}finally{0===(Vs=o)&&(_s(),Oa())}},Je=function(){0===(49&Vs)&&(function(){if(null!==ac){var e=ac;ac=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Ic(e,Ka())}))}Oa()}(),Jc())},Fe=function(e,t){var n=Vs;Vs|=2;try{return e(t)}finally{0===(Vs=n)&&(_s(),Oa())}};var cu={Events:[ra,aa,oa,We,Ve,Jc,{current:!1}]},uu={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{ka=gu.inject(lu),Za=gu}catch(Ie){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cu,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Vs;if(0!==(48&n))return e(t);Vs|=1;try{if(e)return Pa(99,e.bind(null,t))}finally{Vs=n,Oa()}},t.hydrate=function(e,t,n){if(!ou(t))throw Error(i(200));return iu(null,e,t,!0,n)},t.render=function(e,t,n){if(!ou(t))throw Error(i(200));return iu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ou(e))throw Error(i(40));return!!e._reactRootContainer&&(Ac((function(){iu(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=bc,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ou(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return iu(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,g=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,I=n?Symbol.for("react.lazy"):60116,C=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function A(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case g:case o:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case I:case f:case c:return e;default:return t}}case a:return t}}}function y(e){return A(e)===g}t.AsyncMode=l,t.ConcurrentMode=g,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=I,t.Memo=f,t.Portal=a,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return y(e)||A(e)===l},t.isConcurrentMode=y,t.isContextConsumer=function(e){return A(e)===u},t.isContextProvider=function(e){return A(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return A(e)===d},t.isFragment=function(e){return A(e)===o},t.isLazy=function(e){return A(e)===I},t.isMemo=function(e){return A(e)===f},t.isPortal=function(e){return A(e)===a},t.isProfiler=function(e){return A(e)===s},t.isStrictMode=function(e){return A(e)===i},t.isSuspense=function(e){return A(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===g||e===s||e===i||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===I||e.$$typeof===f||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===m||e.$$typeof===v||e.$$typeof===b||e.$$typeof===C)},t.typeOf=A},7441:function(e,t,n){"use strict";e.exports=n(1372)},6048:function(module,__unused_webpack_exports,__webpack_require__){var t;t=function(__WEBPACK_EXTERNAL_MODULE__98__){return function(){var __webpack_modules__={759:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r,a=n(98),o=n.n(a),i=n(697),s=n.n(i);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=function(e){var t=e.breakLabel,n=e.breakClassName,r=e.breakLinkClassName,a=e.breakHandler,i=e.getEventListener,s=n||"break";return o().createElement("li",{className:s},o().createElement("a",c({className:r,role:"button",tabIndex:"0",onKeyPress:a},i(a)),t))};u.propTypes={breakLabel:s().oneOfType([s().string,s().node]),breakClassName:s().string,breakLinkClassName:s().string,breakHandler:s().func.isRequired,getEventListener:s().func.isRequired};var l,g,d=u,p=d;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(u,"BreakView","/home/yoan/work/oss/react-paginate/react_components/BreakView.js"),l.register(d,"default","/home/yoan/work/oss/react-paginate/react_components/BreakView.js")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},770:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r,a=n(98),o=n.n(a),i=n(697),s=n.n(i);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=function(e){var t=e.pageClassName,n=e.pageLinkClassName,r=e.page,a=e.selected,i=e.activeClassName,s=e.activeLinkClassName,u=e.getEventListener,l=e.pageSelectedHandler,g=e.href,d=e.extraAriaContext,p=e.pageLabelBuilder,h=e.rel,f=e.ariaLabel||"Page "+r+(d?" "+d:""),I=null;return a&&(I="page",f=e.ariaLabel||"Page "+r+" is your current page",t=void 0!==t?t+" "+i:i,void 0!==n?void 0!==s&&(n=n+" "+s):n=s),o().createElement("li",{className:t},o().createElement("a",c({rel:h,role:g?void 0:"button",className:n,href:g,tabIndex:a?"-1":"0","aria-label":f,"aria-current":I,onKeyPress:l},u(l)),p(r)))};u.propTypes={pageSelectedHandler:s().func.isRequired,selected:s().bool.isRequired,pageClassName:s().string,pageLinkClassName:s().string,activeClassName:s().string,activeLinkClassName:s().string,extraAriaContext:s().string,href:s().string,ariaLabel:s().string,page:s().number.isRequired,getEventListener:s().func.isRequired,pageLabelBuilder:s().func.isRequired,rel:s().string};var l,g,d=u,p=d;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(u,"PageView","/home/yoan/work/oss/react-paginate/react_components/PageView.js"),l.register(d,"default","/home/yoan/work/oss/react-paginate/react_components/PageView.js")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},214:function _(module,__webpack_exports__,__nested_webpack_require_5475__){"use strict";__nested_webpack_require_5475__.d(__webpack_exports__,{Z:function(){return PaginationBoxView}});var react__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_5475__(98),react__WEBPACK_IMPORTED_MODULE_0___default=__nested_webpack_require_5475__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_5475__(697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__nested_webpack_require_5475__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_PageView__WEBPACK_IMPORTED_MODULE_2__=__nested_webpack_require_5475__(770),_BreakView__WEBPACK_IMPORTED_MODULE_3__=__nested_webpack_require_5475__(759),_utils__WEBPACK_IMPORTED_MODULE_4__=__nested_webpack_require_5475__(923),enterModule;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}module=__nested_webpack_require_5475__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},PaginationBoxView=function(_Component){_inherits(PaginationBoxView,_Component);var _super=_createSuper(PaginationBoxView);function PaginationBoxView(e){var t,n;return _classCallCheck(this,PaginationBoxView),_defineProperty(_assertThisInitialized(t=_super.call(this,e)),"handlePreviousPage",(function(e){var n=t.state.selected;t.handleClick(e,null,n>0?n-1:void 0,{isPrevious:!0})})),_defineProperty(_assertThisInitialized(t),"handleNextPage",(function(e){var n=t.state.selected,r=t.props.pageCount;t.handleClick(e,null,n<r-1?n+1:void 0,{isNext:!0})})),_defineProperty(_assertThisInitialized(t),"handlePageSelected",(function(e,n){if(t.state.selected===e)return t.callActiveCallback(e),void t.handleClick(n,null,void 0,{isActive:!0});t.handleClick(n,null,e)})),_defineProperty(_assertThisInitialized(t),"handlePageChange",(function(e){t.state.selected!==e&&(t.setState({selected:e}),t.callCallback(e))})),_defineProperty(_assertThisInitialized(t),"getEventListener",(function(e){return _defineProperty({},t.props.eventListener,e)})),_defineProperty(_assertThisInitialized(t),"handleClick",(function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.isPrevious,i=void 0!==o&&o,s=a.isNext,c=void 0!==s&&s,u=a.isBreak,l=void 0!==u&&u,g=a.isActive,d=void 0!==g&&g;e.preventDefault?e.preventDefault():e.returnValue=!1;var p=t.state.selected,h=t.props.onClick,f=r;if(h){var I=h({index:n,selected:p,nextSelectedPage:r,event:e,isPrevious:i,isNext:c,isBreak:l,isActive:d});if(!1===I)return;Number.isInteger(I)&&(f=I)}void 0!==f&&t.handlePageChange(f)})),_defineProperty(_assertThisInitialized(t),"handleBreakClick",(function(e,n){var r=t.state.selected;t.handleClick(n,e,r<e?t.getForwardJump():t.getBackwardJump(),{isBreak:!0})})),_defineProperty(_assertThisInitialized(t),"callCallback",(function(e){void 0!==t.props.onPageChange&&"function"==typeof t.props.onPageChange&&t.props.onPageChange({selected:e})})),_defineProperty(_assertThisInitialized(t),"callActiveCallback",(function(e){void 0!==t.props.onPageActive&&"function"==typeof t.props.onPageActive&&t.props.onPageActive({selected:e})})),_defineProperty(_assertThisInitialized(t),"getElementPageRel",(function(e){var n=t.state.selected,r=t.props,a=r.nextPageRel,o=r.prevPageRel,i=r.selectedPageRel;return n-1===e?o:n===e?i:n+1===e?a:void 0})),_defineProperty(_assertThisInitialized(t),"pagination",(function(){var e=[],n=t.props,r=n.pageRangeDisplayed,a=n.pageCount,o=n.marginPagesDisplayed,i=n.breakLabel,s=n.breakClassName,c=n.breakLinkClassName,u=t.state.selected;if(a<=r)for(var l=0;l<a;l++)e.push(t.getPageElement(l));else{var g=r/2,d=r-g;u>a-r/2?g=r-(d=a-u):u<r/2&&(d=r-(g=u));var p,h,f=function(e){return t.getPageElement(e)},I=[];for(p=0;p<a;p++){var C=p+1;C<=o||C>a-o||p>=u-g&&p<=u+(0===u&&r>1?d-1:d)?I.push({type:"page",index:p,display:f(p)}):i&&I.length>0&&I[I.length-1].display!==h&&(r>0||o>0)&&(h=react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_BreakView__WEBPACK_IMPORTED_MODULE_3__.Z,{key:p,breakLabel:i,breakClassName:s,breakLinkClassName:c,breakHandler:t.handleBreakClick.bind(null,p),getEventListener:t.getEventListener}),I.push({type:"break",index:p,display:h}))}I.forEach((function(t,n){var r=t;"break"===t.type&&I[n-1]&&"page"===I[n-1].type&&I[n+1]&&"page"===I[n+1].type&&I[n+1].index-I[n-1].index<=2&&(r={type:"page",index:t.index,display:f(t.index)}),e.push(r.display)}))}return e})),void 0!==e.initialPage&&void 0!==e.forcePage&&console.warn("(react-paginate): Both initialPage (".concat(e.initialPage,") and forcePage (").concat(e.forcePage,") props are provided, which is discouraged.")+" Use exclusively forcePage prop for a controlled component.\nSee https://reactjs.org/docs/forms.html#controlled-components"),n=e.initialPage?e.initialPage:e.forcePage?e.forcePage:0,t.state={selected:n},t}return _createClass(PaginationBoxView,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,n=e.disableInitialCallback,r=e.extraAriaContext,a=e.pageCount,o=e.forcePage;void 0===t||n||this.callCallback(t),r&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(a)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(a,"). Did you forget a Math.ceil()?")),void 0!==t&&t>a-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(t," > ").concat(a-1,").")),void 0!==o&&o>a-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(o," > ").concat(a-1,")."))}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.forcePage&&this.props.forcePage!==e.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(e.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var e=this.state.selected,t=this.props,n=t.pageCount,r=e+t.pageRangeDisplayed;return r>=n?n-1:r}},{key:"getBackwardJump",value:function(){var e=this.state.selected-this.props.pageRangeDisplayed;return e<0?0:e}},{key:"getElementHref",value:function(e){var t=this.props,n=t.hrefBuilder,r=t.pageCount,a=t.hrefAllControls;if(n)return a||e>=0&&e<r?n(e+1,r,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(e){var t=e===this.state.selected;if(this.props.ariaLabelBuilder&&e>=0&&e<this.props.pageCount){var n=this.props.ariaLabelBuilder(e+1,t);return this.props.extraAriaContext&&!t&&(n=n+" "+this.props.extraAriaContext),n}}},{key:"getPageElement",value:function(e){var t=this.state.selected,n=this.props,r=n.pageClassName,a=n.pageLinkClassName,o=n.activeClassName,i=n.activeLinkClassName,s=n.extraAriaContext,c=n.pageLabelBuilder;return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_PageView__WEBPACK_IMPORTED_MODULE_2__.Z,{key:e,pageSelectedHandler:this.handlePageSelected.bind(null,e),selected:t===e,rel:this.getElementPageRel(e),pageClassName:r,pageLinkClassName:a,activeClassName:o,activeLinkClassName:i,extraAriaContext:s,href:this.getElementHref(e),ariaLabel:this.ariaLabelBuilder(e),page:e+1,pageLabelBuilder:c,getEventListener:this.getEventListener})}},{key:"render",value:function(){var e=this.props.renderOnZeroPageCount;if(0===this.props.pageCount&&void 0!==e)return e?e(this.props):e;var t=this.props,n=t.disabledClassName,r=t.disabledLinkClassName,a=t.pageCount,o=t.className,i=t.containerClassName,s=t.previousLabel,c=t.previousClassName,u=t.previousLinkClassName,l=t.previousAriaLabel,g=t.prevRel,d=t.nextLabel,p=t.nextClassName,h=t.nextLinkClassName,f=t.nextAriaLabel,I=t.nextRel,C=this.state.selected,m=0===C,v=C===a-1,b="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(c)).concat(m?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(n)):""),A="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(p)).concat(v?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(n)):""),y="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(u)).concat(m?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(r)):""),k="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(h)).concat(v?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(r)):""),Z=m?"true":"false",S=v?"true":"false";return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("ul",{className:o||i},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("li",{className:b},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",_extends({className:y,href:this.getElementHref(C-1),tabIndex:m?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":Z,"aria-label":l,rel:g},this.getEventListener(this.handlePreviousPage)),s)),this.pagination(),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("li",{className:A},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",_extends({className:k,href:this.getElementHref(C+1),tabIndex:v?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":S,"aria-label":f,rel:I},this.getEventListener(this.handleNextPage)),d)))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),PaginationBoxView}(react__WEBPACK_IMPORTED_MODULE_0__.Component),reactHotLoader,leaveModule;_defineProperty(PaginationBoxView,"propTypes",{pageCount:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired,pageRangeDisplayed:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,marginPagesDisplayed:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,previousLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,previousAriaLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prevPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prevRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,nextAriaLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prop_types__WEBPACK_IMPORTED_MODULE_1___default().node]),hrefBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,hrefAllControls:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onPageChange:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onPageActive:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,initialPage:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,forcePage:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,disableInitialCallback:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,containerClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageLabelBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,activeClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,activeLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,previousClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,previousLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,disabledClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,disabledLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,extraAriaContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,ariaLabelBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,eventListener:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,renderOnZeroPageCount:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,selectedPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string}),_defineProperty(PaginationBoxView,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(e){return e},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1}),reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(PaginationBoxView,"PaginationBoxView","/home/yoan/work/oss/react-paginate/react_components/PaginationBoxView.js"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},351:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r,a=n(214);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,i,s=a.Z,c=s;(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(s,"default","/home/yoan/work/oss/react-paginate/react_components/index.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},923:function(e,t,n){"use strict";var r,a,o;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!=e?e:t}n.d(t,{m:function(){return i}}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(i,"classNameIfDefined","/home/yoan/work/oss/react-paginate/react_components/utils.js"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},703:function(e,t,n){"use strict";var r=n(414);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},697:function(e,t,n){e.exports=n(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:function(e){"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__98__}},__webpack_module_cache__={};function __nested_webpack_require_32585__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_32585__),n.loaded=!0,n.exports}__nested_webpack_require_32585__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_32585__.d(t,{a:t}),t},__nested_webpack_require_32585__.d=function(e,t){for(var n in t)__nested_webpack_require_32585__.o(t,n)&&!__nested_webpack_require_32585__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_32585__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__nested_webpack_require_32585__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_32585__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_32585__(351);return __webpack_exports__}()},module.exports=t(__webpack_require__(2791))},3198:function(e){"use strict";e.exports=function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new(window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}},1002:function(e){"use strict";function t(){this.name="NoVideoInputDevicesError",this.message="No video input devices found"}t.prototype=new Error,e.exports={NoVideoInputDevicesError:t}},4012:function(e,t,n){"use strict";var r=n(1002).NoVideoInputDevicesError;function a(e,t,n){return e.length>0?e[0].deviceId:1==t.length||"user"==n?t[0].deviceId:t[1].deviceId}var o=function(e){return"environment"==e?/rear|back|environment/gi:/front|user|face/gi};e.exports={getDeviceId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return new Promise((function(n,a){var i=void 0;try{i=navigator.mediaDevices.enumerateDevices()}catch(s){a(new r)}i.then((function(i){var s=i.filter((function(e){return"videoinput"==e.kind}));if(s.length<1)a(new r);else{var c=o(e),u=s.filter((function(e){var t=e.label;return c.test(t)}));n(t(u,s,e))}}))}))},getFacingModePattern:o}},3212:function(e){"use strict";e.exports=function(e,t,n){var r=[];return n.forEach((function(n){e[n]!=t[n]&&r.push(n)})),r}},3292:function(e,t,n){"use strict";var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=n(2791),c=s.Component,u=n(2007),l=n(4012),g=l.getDeviceId,d=(l.getFacingModePattern,n(3212)),p=n(3198);n(9481);var h=p(['!function(o,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jsQR=e():o.jsQR=e()}("undefined"!=typeof self?self:this,function(){return function(o){function e(t){if(r[t])return r[t].exports;var c=r[t]={i:t,l:!1,exports:{}};return o[t].call(c.exports,c,c.exports,e),c.l=!0,c.exports}var r={};return e.m=o,e.c=r,e.d=function(o,r,t){e.o(o,r)||Object.defineProperty(o,r,{configurable:!1,enumerable:!0,get:t})},e.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(r,"a",r),r},e.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},e.p="",e(e.s=3)}([function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(o,e){this.width=e,this.height=o.length/e,this.data=o}return o.createEmpty=function(e,r){return new o(new Uint8ClampedArray(e*r),e)},o.prototype.get=function(o,e){return!(o<0||o>=this.width||e<0||e>=this.height)&&!!this.data[e*this.width+o]},o.prototype.set=function(o,e,r){this.data[e*this.width+o]=r?1:0},o.prototype.setRegion=function(o,e,r,t,c){for(var s=e;s<e+t;s++)for(var a=o;a<o+r;a++)this.set(a,s,!!c)},o}();e.BitMatrix=t},function(o,e,r){"use strict";function t(o,e){return o^e}Object.defineProperty(e,"__esModule",{value:!0});var c=r(2);e.addOrSubtractGF=t;var s=function(){function o(o,e,r){this.primitive=o,this.size=e,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var t=1,s=0;s<this.size;s++)this.expTable[s]=t,(t*=2)>=this.size&&(t=(t^this.primitive)&this.size-1);for(var s=0;s<this.size-1;s++)this.logTable[this.expTable[s]]=s;this.zero=new c.default(this,Uint8ClampedArray.from([0])),this.one=new c.default(this,Uint8ClampedArray.from([1]))}return o.prototype.multiply=function(o,e){return 0===o||0===e?0:this.expTable[(this.logTable[o]+this.logTable[e])%(this.size-1)]},o.prototype.inverse=function(o){if(0===o)throw new Error("Can\'t invert 0");return this.expTable[this.size-this.logTable[o]-1]},o.prototype.buildMonomial=function(o,e){if(o<0)throw new Error("Invalid monomial degree less than 0");if(0===e)return this.zero;var r=new Uint8ClampedArray(o+1);return r[0]=e,new c.default(this,r)},o.prototype.log=function(o){if(0===o)throw new Error("Can\'t take log(0)");return this.logTable[o]},o.prototype.exp=function(o){return this.expTable[o]},o}();e.default=s},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r(1),c=function(){function o(o,e){if(0===e.length)throw new Error("No coefficients.");this.field=o;var r=e.length;if(r>1&&0===e[0]){for(var t=1;t<r&&0===e[t];)t++;if(t===r)this.coefficients=o.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-t);for(var c=0;c<this.coefficients.length;c++)this.coefficients[c]=e[t+c]}}else this.coefficients=e}return o.prototype.degree=function(){return this.coefficients.length-1},o.prototype.isZero=function(){return 0===this.coefficients[0]},o.prototype.getCoefficient=function(o){return this.coefficients[this.coefficients.length-1-o]},o.prototype.addOrSubtract=function(e){if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,c=e.coefficients;r.length>c.length&&(n=[c,r],r=n[0],c=n[1]);for(var s=new Uint8ClampedArray(c.length),a=c.length-r.length,d=0;d<a;d++)s[d]=c[d];for(var d=a;d<c.length;d++)s[d]=t.addOrSubtractGF(r[d-a],c[d]);return new o(this.field,s);var n},o.prototype.multiply=function(e){if(0===e)return this.field.zero;if(1===e)return this;for(var r=this.coefficients.length,t=new Uint8ClampedArray(r),c=0;c<r;c++)t[c]=this.field.multiply(this.coefficients[c],e);return new o(this.field,t)},o.prototype.multiplyPoly=function(e){if(this.isZero()||e.isZero())return this.field.zero;for(var r=this.coefficients,c=r.length,s=e.coefficients,a=s.length,d=new Uint8ClampedArray(c+a-1),n=0;n<c;n++)for(var l=r[n],i=0;i<a;i++)d[n+i]=t.addOrSubtractGF(d[n+i],this.field.multiply(l,s[i]));return new o(this.field,d)},o.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Error("Invalid degree less than 0");if(0===r)return this.field.zero;for(var t=this.coefficients.length,c=new Uint8ClampedArray(t+e),s=0;s<t;s++)c[s]=this.field.multiply(this.coefficients[s],r);return new o(this.field,c)},o.prototype.evaluateAt=function(o){var e=0;if(0===o)return this.getCoefficient(0);var r=this.coefficients.length;if(1===o)return this.coefficients.forEach(function(o){e=t.addOrSubtractGF(e,o)}),e;e=this.coefficients[0];for(var c=1;c<r;c++)e=t.addOrSubtractGF(this.field.multiply(o,e),this.coefficients[c]);return e},o}();e.default=c},function(o,e,r){"use strict";function t(o){var e=n.locate(o);if(!e)return null;var r=d.extract(o,e),t=a.decode(r.matrix);return t?{binaryData:t.bytes,data:t.text,chunks:t.chunks,location:{topRightCorner:r.mappingFunction(e.dimension,0),topLeftCorner:r.mappingFunction(0,0),bottomRightCorner:r.mappingFunction(e.dimension,e.dimension),bottomLeftCorner:r.mappingFunction(0,e.dimension),topRightFinderPattern:e.topRight,topLeftFinderPattern:e.topLeft,bottomLeftFinderPattern:e.bottomLeft,bottomRightAlignmentPattern:e.alignmentPattern}}:null}function c(o,e,r,c){void 0===c&&(c={});var a=l;Object.keys(a||{}).forEach(function(o){a[o]=c[o]||a[o]});var d="attemptBoth"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,n="onlyInvert"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,i=s.binarize(o,e,r,d),B=i.binarized,k=i.inverted,u=t(n?k:B);return u||"attemptBoth"!==a.inversionAttempts&&"invertFirst"!==a.inversionAttempts||(u=t(n?B:k)),u}Object.defineProperty(e,"__esModule",{value:!0});var s=r(4),a=r(5),d=r(11),n=r(12),l={inversionAttempts:"attemptBoth"};c.default=c,e.default=c},function(o,e,r){"use strict";function t(o,e,r){return o<e?e:o>r?r:o}function c(o,e,r,c){if(o.length!==e*r*4)throw new Error("Malformed data passed to binarizer.");for(var l=new n(e,r),i=0;i<e;i++)for(var B=0;B<r;B++){var k=o[4*(B*e+i)+0],u=o[4*(B*e+i)+1],C=o[4*(B*e+i)+2];l.set(i,B,.2126*k+.7152*u+.0722*C)}for(var m=Math.ceil(e/a),f=Math.ceil(r/a),w=new n(m,f),P=0;P<f;P++)for(var v=0;v<m;v++){for(var h=0,p=1/0,y=0,B=0;B<a;B++)for(var i=0;i<a;i++){var b=l.get(v*a+i,P*a+B);h+=b,p=Math.min(p,b),y=Math.max(y,b)}var g=h/Math.pow(a,2);if(y-p<=d&&(g=p/2,P>0&&v>0)){var x=(w.get(v,P-1)+2*w.get(v-1,P)+w.get(v-1,P-1))/4;p<x&&(g=x)}w.set(v,P,g)}var M=s.BitMatrix.createEmpty(e,r),L=null;c&&(L=s.BitMatrix.createEmpty(e,r));for(var P=0;P<f;P++)for(var v=0;v<m;v++){for(var N=t(v,2,m-3),I=t(P,2,f-3),h=0,O=-2;O<=2;O++)for(var z=-2;z<=2;z++)h+=w.get(N+O,I+z);for(var S=h/25,O=0;O<a;O++)for(var z=0;z<a;z++){var i=v*a+O,B=P*a+z,X=l.get(i,B);M.set(i,B,X<=S),c&&L.set(i,B,!(X<=S))}}return c?{binarized:M,inverted:L}:{binarized:M}}Object.defineProperty(e,"__esModule",{value:!0});var s=r(0),a=8,d=24,n=function(){function o(o,e){this.width=o,this.data=new Uint8ClampedArray(o*e)}return o.prototype.get=function(o,e){return this.data[e*this.width+o]},o.prototype.set=function(o,e,r){this.data[e*this.width+o]=r},o}();e.binarize=c},function(o,e,r){"use strict";function t(o,e){for(var r=o^e,t=0;r;)t++,r&=r-1;return t}function c(o,e){return e<<1|o}function s(o){var e=17+4*o.versionNumber,r=k.BitMatrix.createEmpty(e,e);r.setRegion(0,0,9,9,!0),r.setRegion(e-8,0,8,9,!0),r.setRegion(0,e-8,9,8,!0);for(var t=0,c=o.alignmentPatternCenters;t<c.length;t++)for(var s=c[t],a=0,d=o.alignmentPatternCenters;a<d.length;a++){var n=d[a];6===s&&6===n||6===s&&n===e-7||s===e-7&&6===n||r.setRegion(s-2,n-2,5,5,!0)}return r.setRegion(6,9,1,e-17,!0),r.setRegion(9,6,e-17,1,!0),o.versionNumber>6&&(r.setRegion(e-11,0,3,6,!0),r.setRegion(0,e-11,6,3,!0)),r}function a(o,e,r){for(var t=w[r.dataMask],a=o.height,d=s(e),n=[],l=0,i=0,B=!0,k=a-1;k>0;k-=2){6===k&&k--;for(var u=0;u<a;u++)for(var C=B?a-1-u:u,m=0;m<2;m++){var f=k-m;if(!d.get(f,C)){i++;var P=o.get(f,C);t({y:C,x:f})&&(P=!P),l=c(P,l),8===i&&(n.push(l),i=0,l=0)}}B=!B}return n}function d(o){var e=o.height,r=Math.floor((e-17)/4);if(r<=6)return m.VERSIONS[r-1];for(var s=0,a=5;a>=0;a--)for(var d=e-9;d>=e-11;d--)s=c(o.get(d,a),s);for(var n=0,d=5;d>=0;d--)for(var a=e-9;a>=e-11;a--)n=c(o.get(d,a),n);for(var l,i=1/0,B=0,k=m.VERSIONS;B<k.length;B++){var u=k[B];if(u.infoBits===s||u.infoBits===n)return u;var C=t(s,u.infoBits);C<i&&(l=u,i=C),C=t(n,u.infoBits),C<i&&(l=u,i=C)}return i<=3?l:void 0}function n(o){for(var e=0,r=0;r<=8;r++)6!==r&&(e=c(o.get(r,8),e));for(var s=7;s>=0;s--)6!==s&&(e=c(o.get(8,s),e));for(var a=o.height,d=0,s=a-1;s>=a-7;s--)d=c(o.get(8,s),d);for(var r=a-8;r<a;r++)d=c(o.get(r,8),d);for(var n=1/0,l=null,i=0,B=f;i<B.length;i++){var k=B[i],u=k.bits,C=k.formatInfo;if(u===e||u===d)return C;var m=t(e,u);m<n&&(l=C,n=m),e!==d&&(m=t(d,u))<n&&(l=C,n=m)}return n<=3?l:null}function l(o,e,r){var t=e.errorCorrectionLevels[r],c=[],s=0;if(t.ecBlocks.forEach(function(o){for(var e=0;e<o.numBlocks;e++)c.push({numDataCodewords:o.dataCodewordsPerBlock,codewords:[]}),s+=o.dataCodewordsPerBlock+t.ecCodewordsPerBlock}),o.length<s)return null;o=o.slice(0,s);for(var a=t.ecBlocks[0].dataCodewordsPerBlock,d=0;d<a;d++)for(var n=0,l=c;n<l.length;n++){var i=l[n];i.codewords.push(o.shift())}if(t.ecBlocks.length>1)for(var B=t.ecBlocks[0].numBlocks,k=t.ecBlocks[1].numBlocks,d=0;d<k;d++)c[B+d].codewords.push(o.shift());for(;o.length>0;)for(var u=0,C=c;u<C.length;u++){var i=C[u];i.codewords.push(o.shift())}return c}function i(o){var e=d(o);if(!e)return null;var r=n(o);if(!r)return null;var t=a(o,e,r),c=l(t,e,r.errorCorrectionLevel);if(!c)return null;for(var s=c.reduce(function(o,e){return o+e.numDataCodewords},0),i=new Uint8ClampedArray(s),B=0,k=0,m=c;k<m.length;k++){var f=m[k],w=C.decode(f.codewords,f.codewords.length-f.numDataCodewords);if(!w)return null;for(var P=0;P<f.numDataCodewords;P++)i[B++]=w[P]}try{return u.decode(i,e.versionNumber)}catch(o){return null}}function B(o){if(null==o)return null;var e=i(o);if(e)return e;for(var r=0;r<o.width;r++)for(var t=r+1;t<o.height;t++)o.get(r,t)!==o.get(t,r)&&(o.set(r,t,!o.get(r,t)),o.set(t,r,!o.get(t,r)));return i(o)}Object.defineProperty(e,"__esModule",{value:!0});var k=r(0),u=r(6),C=r(9),m=r(10),f=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],w=[function(o){return(o.y+o.x)%2==0},function(o){return o.y%2==0},function(o){return o.x%3==0},function(o){return(o.y+o.x)%3==0},function(o){return(Math.floor(o.y/2)+Math.floor(o.x/3))%2==0},function(o){return o.x*o.y%2+o.x*o.y%3==0},function(o){return(o.y*o.x%2+o.y*o.x%3)%2==0},function(o){return((o.y+o.x)%2+o.y*o.x%3)%2==0}];e.decode=B},function(o,e,r){"use strict";function t(o,e){for(var r=[],t="",c=[10,12,14][e],s=o.readBits(c);s>=3;){var a=o.readBits(10);if(a>=1e3)throw new Error("Invalid numeric value above 999");var d=Math.floor(a/100),n=Math.floor(a/10)%10,l=a%10;r.push(48+d,48+n,48+l),t+=d.toString()+n.toString()+l.toString(),s-=3}if(2===s){var a=o.readBits(7);if(a>=100)throw new Error("Invalid numeric value above 99");var d=Math.floor(a/10),n=a%10;r.push(48+d,48+n),t+=d.toString()+n.toString()}else if(1===s){var a=o.readBits(4);if(a>=10)throw new Error("Invalid numeric value above 9");r.push(48+a),t+=a.toString()}return{bytes:r,text:t}}function c(o,e){for(var r=[],t="",c=[9,11,13][e],s=o.readBits(c);s>=2;){var a=o.readBits(11),d=Math.floor(a/45),n=a%45;r.push(k[d].charCodeAt(0),k[n].charCodeAt(0)),t+=k[d]+k[n],s-=2}if(1===s){var d=o.readBits(6);r.push(k[d].charCodeAt(0)),t+=k[d]}return{bytes:r,text:t}}function s(o,e){for(var r=[],t="",c=[8,16,16][e],s=o.readBits(c),a=0;a<s;a++){var d=o.readBits(8);r.push(d)}try{t+=decodeURIComponent(r.map(function(o){return"%"+("0"+o.toString(16)).substr(-2)}).join(""))}catch(o){}return{bytes:r,text:t}}function a(o,e){for(var r=[],t="",c=[8,10,12][e],s=o.readBits(c),a=0;a<s;a++){var d=o.readBits(13),n=Math.floor(d/192)<<8|d%192;n+=n<7936?33088:49472,r.push(n>>8,255&n),t+=String.fromCharCode(i.shiftJISTable[n])}return{bytes:r,text:t}}function d(o,e){for(var r=new l.BitStream(o),d=e<=9?0:e<=26?1:2,i={text:"",bytes:[],chunks:[]};r.available()>=4;){var k=r.readBits(4);if(k===B.Terminator)return i;if(k===B.ECI)0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(7)}):0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(14)}):0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(21)}):i.chunks.push({type:n.ECI,assignmentNumber:-1});else if(k===B.Numeric){var u=t(r,d);i.text+=u.text,(w=i.bytes).push.apply(w,u.bytes),i.chunks.push({type:n.Numeric,text:u.text})}else if(k===B.Alphanumeric){var C=c(r,d);i.text+=C.text,(P=i.bytes).push.apply(P,C.bytes),i.chunks.push({type:n.Alphanumeric,text:C.text})}else if(k===B.Byte){var m=s(r,d);i.text+=m.text,(v=i.bytes).push.apply(v,m.bytes),i.chunks.push({type:n.Byte,bytes:m.bytes,text:m.text})}else if(k===B.Kanji){var f=a(r,d);i.text+=f.text,(h=i.bytes).push.apply(h,f.bytes),i.chunks.push({type:n.Kanji,bytes:f.bytes,text:f.text})}}var w,P,v,h}Object.defineProperty(e,"__esModule",{value:!0});var n,l=r(7),i=r(8);!function(o){o.Numeric="numeric",o.Alphanumeric="alphanumeric",o.Byte="byte",o.Kanji="kanji",o.ECI="eci"}(n=e.Mode||(e.Mode={}));var B;!function(o){o[o.Terminator=0]="Terminator",o[o.Numeric=1]="Numeric",o[o.Alphanumeric=2]="Alphanumeric",o[o.Byte=4]="Byte",o[o.Kanji=8]="Kanji",o[o.ECI=7]="ECI"}(B||(B={}));var k=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];e.decode=d},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(o){this.byteOffset=0,this.bitOffset=0,this.bytes=o}return o.prototype.readBits=function(o){if(o<1||o>32||o>this.available())throw new Error("Cannot read "+o.toString()+" bits");var e=0;if(this.bitOffset>0){var r=8-this.bitOffset,t=o<r?o:r,c=r-t,s=255>>8-t<<c;e=(this.bytes[this.byteOffset]&s)>>c,o-=t,this.bitOffset+=t,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(o>0){for(;o>=8;)e=e<<8|255&this.bytes[this.byteOffset],this.byteOffset++,o-=8;if(o>0){var c=8-o,s=255>>c<<c;e=e<<o|(this.bytes[this.byteOffset]&s)>>c,this.bitOffset+=o}}return e},o.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},o}();e.BitStream=t},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,\n36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,\n39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,\n59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(o,e,r){"use strict";function t(o,e,r,t){e.degree()<r.degree()&&(w=[r,e],e=w[0],r=w[1]);for(var c=e,s=r,a=o.zero,d=o.one;s.degree()>=t/2;){var n=c,l=a;if(c=s,a=d,c.isZero())return null;s=n;for(var i=o.zero,B=c.getCoefficient(c.degree()),k=o.inverse(B);s.degree()>=c.degree()&&!s.isZero();){var u=s.degree()-c.degree(),C=o.multiply(s.getCoefficient(s.degree()),k);i=i.addOrSubtract(o.buildMonomial(u,C)),s=s.addOrSubtract(c.multiplyByMonomial(u,C))}if(d=i.multiplyPoly(a).addOrSubtract(l),s.degree()>=c.degree())return null}var m=d.getCoefficient(0);if(0===m)return null;var f=o.inverse(m);return[d.multiply(f),s.multiply(f)];var w}function c(o,e){var r=e.degree();if(1===r)return[e.getCoefficient(1)];for(var t=new Array(r),c=0,s=1;s<o.size&&c<r;s++)0===e.evaluateAt(s)&&(t[c]=o.inverse(s),c++);return c!==r?null:t}function s(o,e,r){for(var t=r.length,c=new Array(t),s=0;s<t;s++){for(var a=o.inverse(r[s]),n=1,l=0;l<t;l++)s!==l&&(n=o.multiply(n,d.addOrSubtractGF(1,o.multiply(r[l],a))));c[s]=o.multiply(e.evaluateAt(a),o.inverse(n)),0!==o.generatorBase&&(c[s]=o.multiply(c[s],a))}return c}function a(o,e){var r=new Uint8ClampedArray(o.length);r.set(o);for(var a=new d.default(285,256,0),l=new n.default(a,r),i=new Uint8ClampedArray(e),B=!1,k=0;k<e;k++){var u=l.evaluateAt(a.exp(k+a.generatorBase));i[i.length-1-k]=u,0!==u&&(B=!0)}if(!B)return r;var C=new n.default(a,i),m=t(a,a.buildMonomial(e,1),C,e);if(null===m)return null;var f=c(a,m[0]);if(null==f)return null;for(var w=s(a,m[1],f),P=0;P<f.length;P++){var v=r.length-1-a.log(f[P]);if(v<0)return null;r[v]=d.addOrSubtractGF(r[v],w[P])}return r}Object.defineProperty(e,"__esModule",{value:!0});var d=r(1),n=r(2);e.decode=a},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(o,e,r){"use strict";function t(o,e,r,t){var c=o.x-e.x+r.x-t.x,s=o.y-e.y+r.y-t.y;if(0===c&&0===s)return{a11:e.x-o.x,a12:e.y-o.y,a13:0,a21:r.x-e.x,a22:r.y-e.y,a23:0,a31:o.x,a32:o.y,a33:1};var a=e.x-r.x,d=t.x-r.x,n=e.y-r.y,l=t.y-r.y,i=a*l-d*n,B=(c*l-d*s)/i,k=(a*s-c*n)/i;return{a11:e.x-o.x+B*e.x,a12:e.y-o.y+B*e.y,a13:B,a21:t.x-o.x+k*t.x,a22:t.y-o.y+k*t.y,a23:k,a31:o.x,a32:o.y,a33:1}}function c(o,e,r,c){var s=t(o,e,r,c);return{a11:s.a22*s.a33-s.a23*s.a32,a12:s.a13*s.a32-s.a12*s.a33,a13:s.a12*s.a23-s.a13*s.a22,a21:s.a23*s.a31-s.a21*s.a33,a22:s.a11*s.a33-s.a13*s.a31,a23:s.a13*s.a21-s.a11*s.a23,a31:s.a21*s.a32-s.a22*s.a31,a32:s.a12*s.a31-s.a11*s.a32,a33:s.a11*s.a22-s.a12*s.a21}}function s(o,e){return{a11:o.a11*e.a11+o.a21*e.a12+o.a31*e.a13,a12:o.a12*e.a11+o.a22*e.a12+o.a32*e.a13,a13:o.a13*e.a11+o.a23*e.a12+o.a33*e.a13,a21:o.a11*e.a21+o.a21*e.a22+o.a31*e.a23,a22:o.a12*e.a21+o.a22*e.a22+o.a32*e.a23,a23:o.a13*e.a21+o.a23*e.a22+o.a33*e.a23,a31:o.a11*e.a31+o.a21*e.a32+o.a31*e.a33,a32:o.a12*e.a31+o.a22*e.a32+o.a32*e.a33,a33:o.a13*e.a31+o.a23*e.a32+o.a33*e.a33}}function a(o,e){for(var r=c({x:3.5,y:3.5},{x:e.dimension-3.5,y:3.5},{x:e.dimension-6.5,y:e.dimension-6.5},{x:3.5,y:e.dimension-3.5}),a=t(e.topLeft,e.topRight,e.alignmentPattern,e.bottomLeft),n=s(a,r),l=d.BitMatrix.createEmpty(e.dimension,e.dimension),i=function(o,e){var r=n.a13*o+n.a23*e+n.a33;return{x:(n.a11*o+n.a21*e+n.a31)/r,y:(n.a12*o+n.a22*e+n.a32)/r}},B=0;B<e.dimension;B++)for(var k=0;k<e.dimension;k++){var u=k+.5,C=B+.5,m=i(u,C);l.set(k,B,o.get(Math.floor(m.x),Math.floor(m.y)))}return{matrix:l,mappingFunction:i}}Object.defineProperty(e,"__esModule",{value:!0});var d=r(0);e.extract=a},function(o,e,r){"use strict";function t(o){return o.reduce(function(o,e){return o+e})}function c(o,e,r){var t,c,s,a=C(o,e),d=C(e,r),n=C(o,r);return d>=a&&d>=n?(l=[e,o,r],t=l[0],c=l[1],s=l[2]):n>=d&&n>=a?(i=[o,e,r],t=i[0],c=i[1],s=i[2]):(B=[o,r,e],t=B[0],c=B[1],s=B[2]),(s.x-c.x)*(t.y-c.y)-(s.y-c.y)*(t.x-c.x)<0&&(k=[s,t],t=k[0],s=k[1]),{bottomLeft:t,topLeft:c,topRight:s};var l,i,B,k}function s(o,e,r,c){var s=(t(d(o,r,c,5))/7+t(d(o,e,c,5))/7+t(d(r,o,c,5))/7+t(d(e,o,c,5))/7)/4;if(s<1)throw new Error("Invalid module size");var a=Math.round(C(o,e)/s),n=Math.round(C(o,r)/s),l=Math.floor((a+n)/2)+7;switch(l%4){case 0:l++;break;case 2:l--}return{dimension:l,moduleSize:s}}function a(o,e,r,t){var c,s,a,d,n=[{x:Math.floor(o.x),y:Math.floor(o.y)}],l=Math.abs(e.y-o.y)>Math.abs(e.x-o.x);l?(c=Math.floor(o.y),s=Math.floor(o.x),a=Math.floor(e.y),d=Math.floor(e.x)):(c=Math.floor(o.x),s=Math.floor(o.y),a=Math.floor(e.x),d=Math.floor(e.y));for(var i=Math.abs(a-c),B=Math.abs(d-s),k=Math.floor(-i/2),u=c<a?1:-1,m=s<d?1:-1,f=!0,w=c,P=s;w!==a+u;w+=u){var v=l?P:w,h=l?w:P;if(r.get(v,h)!==f&&(f=!f,n.push({x:v,y:h}),n.length===t+1))break;if((k+=B)>0){if(P===d)break;P+=m,k-=i}}for(var p=[],y=0;y<t;y++)n[y]&&n[y+1]?p.push(C(n[y],n[y+1])):p.push(0);return p}function d(o,e,r,t){var c=e.y-o.y,s=e.x-o.x,d=a(o,e,r,Math.ceil(t/2)),n=a(o,{x:o.x-s,y:o.y-c},r,Math.ceil(t/2)),l=d.shift()+n.shift()-1;return(i=n.concat(l)).concat.apply(i,d);var i}function n(o,e){var r=t(o)/t(e),c=0;return e.forEach(function(e,t){c+=Math.pow(o[t]-e*r,2)}),{averageSize:r,error:c}}function l(o,e,r){try{var t=d(o,{x:-1,y:o.y},r,e.length),c=d(o,{x:o.x,y:-1},r,e.length),s={x:Math.max(0,o.x-o.y)-1,y:Math.max(0,o.y-o.x)-1},a=d(o,s,r,e.length),l={x:Math.min(r.width,o.x+o.y)+1,y:Math.min(r.height,o.y+o.x)+1},i=d(o,l,r,e.length),B=n(t,e),k=n(c,e),u=n(a,e),C=n(i,e),m=Math.sqrt(B.error*B.error+k.error*k.error+u.error*u.error+C.error*C.error),f=(B.averageSize+k.averageSize+u.averageSize+C.averageSize)/4;return m+(Math.pow(B.averageSize-f,2)+Math.pow(k.averageSize-f,2)+Math.pow(u.averageSize-f,2)+Math.pow(C.averageSize-f,2))/f}catch(o){return 1/0}}function i(o){for(var e=[],r=[],a=[],d=[],n=0;n<=o.height;n++)!function(c){for(var s=0,n=!1,l=[0,0,0,0,0],i=-1;i<=o.width;i++)!function(e){var a=o.get(e,c);if(a===n)s++;else{l=[l[1],l[2],l[3],l[4],s],s=1,n=a;var i=t(l)/7,B=Math.abs(l[0]-i)<i&&Math.abs(l[1]-i)<i&&Math.abs(l[2]-3*i)<3*i&&Math.abs(l[3]-i)<i&&Math.abs(l[4]-i)<i&&!a,C=t(l.slice(-3))/3,m=Math.abs(l[2]-C)<C&&Math.abs(l[3]-C)<C&&Math.abs(l[4]-C)<C&&a;if(B){var f=e-l[3]-l[4],w=f-l[2],P={startX:w,endX:f,y:c},v=r.filter(function(o){return w>=o.bottom.startX&&w<=o.bottom.endX||f>=o.bottom.startX&&w<=o.bottom.endX||w<=o.bottom.startX&&f>=o.bottom.endX&&l[2]/(o.bottom.endX-o.bottom.startX)<u&&l[2]/(o.bottom.endX-o.bottom.startX)>k});v.length>0?v[0].bottom=P:r.push({top:P,bottom:P})}if(m){var h=e-l[4],p=h-l[3],P={startX:p,y:c,endX:h},v=d.filter(function(o){return p>=o.bottom.startX&&p<=o.bottom.endX||h>=o.bottom.startX&&p<=o.bottom.endX||p<=o.bottom.startX&&h>=o.bottom.endX&&l[2]/(o.bottom.endX-o.bottom.startX)<u&&l[2]/(o.bottom.endX-o.bottom.startX)>k});v.length>0?v[0].bottom=P:d.push({top:P,bottom:P})}}}(i);e.push.apply(e,r.filter(function(o){return o.bottom.y!==c&&o.bottom.y-o.top.y>=2})),r=r.filter(function(o){return o.bottom.y===c}),a.push.apply(a,d.filter(function(o){return o.bottom.y!==c})),d=d.filter(function(o){return o.bottom.y===c})}(n);e.push.apply(e,r.filter(function(o){return o.bottom.y-o.top.y>=2})),a.push.apply(a,d);var i=e.filter(function(o){return o.bottom.y-o.top.y>=2}).map(function(e){var r=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,c=(e.top.y+e.bottom.y+1)/2;if(o.get(Math.round(r),Math.round(c))){\nvar s=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1],a=t(s)/s.length;return{score:l({x:Math.round(r),y:Math.round(c)},[1,1,3,1,1],o),x:r,y:c,size:a}}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score}).map(function(o,e,r){if(e>B)return null;var t=r.filter(function(o,r){return e!==r}).map(function(e){return{x:e.x,y:e.y,score:e.score+Math.pow(e.size-o.size,2)/o.size,size:e.size}}).sort(function(o,e){return o.score-e.score});if(t.length<2)return null;var c=o.score+t[0].score+t[1].score;return{points:[o].concat(t.slice(0,2)),score:c}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score});if(0===i.length)return null;var m,f,w=c(i[0].points[0],i[0].points[1],i[0].points[2]),P=w.topRight,v=w.topLeft,h=w.bottomLeft;try{L=s(v,P,h,o),m=L.dimension,f=L.moduleSize}catch(o){return null}var p={x:P.x-v.x+h.x,y:P.y-v.y+h.y},y=(C(v,h)+C(v,P))/2/f,b=1-3/y,g={x:v.x+b*(p.x-v.x),y:v.y+b*(p.y-v.y)},x=a.map(function(e){var r=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,c=(e.top.y+e.bottom.y+1)/2;if(o.get(Math.floor(r),Math.floor(c))){var s=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1];t(s);return{x:r,y:c,score:l({x:Math.floor(r),y:Math.floor(c)},[1,1,1],o)+C({x:r,y:c},g)}}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score}),M=y>=15&&x.length?x[0]:g;return{alignmentPattern:{x:M.x,y:M.y},bottomLeft:{x:h.x,y:h.y},dimension:m,topLeft:{x:v.x,y:v.y},topRight:{x:P.x,y:P.y}};var L}Object.defineProperty(e,"__esModule",{value:!0});var B=4,k=.5,u=1.5,C=function(o,e){return Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))};e.locate=i}]).default}),self.addEventListener("message",function(o){var e=jsQR(o.data.data,o.data.width,o.data.height);e?postMessage(e.data):postMessage(null)});'],{type:"application/javascript"}),f=["delay","legacyMode","facingMode"];e.exports=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.els={},n.state={mirrorVideo:!1},n.initiate=n.initiate.bind(n),n.initiateLegacyMode=n.initiateLegacyMode.bind(n),n.check=n.check.bind(n),n.handleVideo=n.handleVideo.bind(n),n.handleLoadStart=n.handleLoadStart.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.clearComponent=n.clearComponent.bind(n),n.handleReaderLoad=n.handleReaderLoad.bind(n),n.openImageDialog=n.openImageDialog.bind(n),n.handleWorkerMessage=n.handleWorkerMessage.bind(n),n.setRefFactory=n.setRefFactory.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.worker=new Worker(URL.createObjectURL(h)),this.worker.onmessage=this.handleWorkerMessage,this.props.legacyMode?this.initiateLegacyMode():this.initiate()}},{key:"componentWillReceiveProps",value:function(e){var t=d(this.props,e,f),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if("facingMode"==s){this.clearComponent(),this.initiate(e);break}if("delay"==s)0!=this.props.delay||e.legacyMode||(this.timeout=setTimeout(this.check,e.delay)),0==e.delay&&clearTimeout(this.timeout);else if("legacyMode"==s){this.props.legacyMode&&!e.legacyMode?(this.clearComponent(),this.initiate(e)):(this.clearComponent(),this.componentDidUpdate=this.initiateLegacyMode);break}}}catch(c){r=!0,a=c}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}}},{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state||d(this.props,e,f).length>0}},{key:"componentWillUnmount",value:function(){this.worker&&(this.worker.terminate(),this.worker=void 0),this.clearComponent()}},{key:"clearComponent",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.stopCamera&&this.stopCamera(),this.reader&&this.reader.removeEventListener("load",this.handleReaderLoad),this.els.img&&this.els.img.removeEventListener("load",this.check)}},{key:"initiate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.onError,n=e.facingMode,r=/firefox/i.test(navigator.userAgent),a={};navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getSupportedConstraints&&(a=navigator.mediaDevices.getSupportedConstraints());var o={};a.facingMode&&(o.facingMode={ideal:n}),a.frameRate&&(o.frameRate={ideal:25,min:10});var i=a.facingMode||r?Promise.resolve(e.constraints||o):g(n).then((function(t){return Object.assign({},{deviceId:t},e.constraints)}));i.then((function(e){return navigator.mediaDevices.getUserMedia({video:e})})).then(this.handleVideo).catch(t)}},{key:"handleVideo",value:function(e){var t=this.els.preview,n=this.props.facingMode;if(!t)return setTimeout(this.handleVideo,200,e);void 0!==(t||{}).srcObject?t.srcObject=e:void 0!==t.mozSrcObject?t.mozSrcObject=e:window.URL.createObjectURL?t.src=window.URL.createObjectURL(e):window.webkitURL?t.src=window.webkitURL.createObjectURL(e):t.src=e,t.playsInline=!0;var r=e.getTracks()[0];this.stopCamera=r.stop.bind(r),t.addEventListener("loadstart",this.handleLoadStart),this.setState({mirrorVideo:"user"==n,streamLabel:r.label})}},{key:"handleLoadStart",value:function(){var e=this.props,t=e.delay,n=e.onLoad,r=this.state,a=r.mirrorVideo,o=r.streamLabel,i=this.els.preview;i.play(),"function"==typeof n&&n({mirrorVideo:a,streamLabel:o}),"number"==typeof t&&(this.timeout=setTimeout(this.check,t)),i.removeEventListener("loadstart",this.handleLoadStart)}},{key:"check",value:function(){var e=this.props,t=e.legacyMode,n=e.resolution,r=e.delay,a=this.els,o=a.preview,i=a.canvas,s=a.img,c=Math.floor(t?s.naturalWidth:o.videoWidth),u=Math.floor(t?s.naturalHeight:o.videoHeight),l=0,g=0;if(t){var d=n/(c>u?c:u);u*=d,c*=d,i.width=c,i.height=u}else{var p=n/(c<u?c:u);g=((u*=p)-n)/2*-1,l=((c*=p)-n)/2*-1,i.width=n,i.height=n}var h=o&&o.readyState===o.HAVE_ENOUGH_DATA;if(t||h){var f=i.getContext("2d");f.drawImage(t?s:o,l,g,c,u);var I=f.getImageData(0,0,i.width,i.height);this.worker.postMessage(I)}else this.timeout=setTimeout(this.check,r)}},{key:"handleWorkerMessage",value:function(e){var t=this.props,n=t.onScan,r=t.legacyMode,a=t.delay;n(e.data||null),!r&&"number"==typeof a&&this.worker&&(this.timeout=setTimeout(this.check,a))}},{key:"initiateLegacyMode",value:function(){this.reader=new FileReader,this.reader.addEventListener("load",this.handleReaderLoad),this.els.img.addEventListener("load",this.check,!1),this.componentDidUpdate=void 0,"function"==typeof this.props.onLoad&&this.props.onLoad()}},{key:"handleInputChange",value:function(e){var t=e.target.files[0];this.reader.readAsDataURL(t)}},{key:"handleReaderLoad",value:function(e){this.els.img.src=e.target.result}},{key:"openImageDialog",value:function(){this.els.input.click()}},{key:"setRefFactory",value:function(e){var t=this;return function(n){t.els[e]=n}}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.onImageLoad,a=e.legacyMode,i=e.showViewFinder,c=(e.facingMode,{display:"none"}),u={top:0,left:0,display:"block",position:"absolute",overflow:"hidden",width:"100%",height:"100%"},l=o({},u,{objectFit:"cover",transform:this.state.mirrorVideo?"scaleX(-1)":void 0}),g=o({},u,{objectFit:"scale-down"});return s.createElement("section",{className:n,style:t},s.createElement("section",{style:{overflow:"hidden",position:"relative",width:"100%",paddingTop:"100%"}},!a&&i?s.createElement("div",{style:{top:0,left:0,zIndex:1,boxSizing:"border-box",border:"50px solid rgba(0, 0, 0, 0.3)",boxShadow:"inset 0 0 0 5px rgba(255, 0, 0, 0.5)",position:"absolute",width:"100%",height:"100%"}}):null,a?s.createElement("input",{style:c,type:"file",accept:"image/*",ref:this.setRefFactory("input"),onChange:this.handleInputChange}):null,a?s.createElement("img",{style:g,ref:this.setRefFactory("img"),onLoad:r}):s.createElement("video",{style:l,ref:this.setRefFactory("preview")}),s.createElement("canvas",{style:c,ref:this.setRefFactory("canvas")})))}}]),t}(c),r.propTypes={onScan:u.func.isRequired,onError:u.func.isRequired,onLoad:u.func,onImageLoad:u.func,delay:u.oneOfType([u.number,u.bool]),facingMode:u.oneOf(["user","environment"]),legacyMode:u.bool,resolution:u.number,showViewFinder:u.bool,style:u.any,className:u.string,constraints:u.object},r.defaultProps={delay:500,resolution:600,facingMode:"environment",showViewFinder:!0,constraints:null},a)},9008:function(e,t,n){e.exports=function(e,t){"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=n(e),a=n(t);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){if(Array.isArray(e))return e}function c(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){s=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return s(e)||c(e,t)||l(e,t)||g()}function p(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function h(e,t){if(null==e)return{};var n,r,a=p(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),a=0,o=n.length;a<o;++a)r[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}function I(e,t,n){var r=void 0===t?null:t,a=f(e,void 0!==n&&n),o=a.indexOf("\n",10)+1,i=a.substring(o)+(r?"//# sourceMappingURL="+r:""),s=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(s)}function C(e,t,n){var r;return function(a){return r=r||I(e,t,n),new Worker(r,a)}}var m=C("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),v=["constraints","onError","onLoad","onScan","resolution"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){return new m},k=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},Z=function(t){var n=t.constraints,a=t.onError,i=t.onLoad,s=t.onScan,c=t.resolution,u=h(t,v),l=JSON.stringify(n),g=e.useRef(null),p=e.useRef(null),f=e.useRef(document.createElement("canvas")),I=e.useRef(null),C=e.useRef(),m=d(e.useState(null),2),b=m[0],Z=m[1],S=e.useRef(!1),w=e.useMemo(y,[y]);e.useEffect((function(){return function(){w.terminate()}}),[w]),e.useEffect((function(){w.onmessage=function(e){s&&s(e.data?A(A({},e.data),{},{canvas:f.current}):null),S.current=!1}}),[s,w]);var B=e.useCallback((function(){var e=p.current&&p.current.readyState===p.current.HAVE_ENOUGH_DATA;if(!S.current&&e){S.current=!0;var t=p.current.videoWidth,n=p.current.videoHeight,r=c/(t>n?t:n);n*=r,t*=r,f.current.width=t,f.current.height=n,I.current=f.current.getContext("2d"),I.current.drawImage(p.current,0,0,t,n);var a=I.current.getImageData(0,0,t,n);w.postMessage(a)}C.current=requestAnimationFrame(B)}),[c,w]);return e.useEffect((function(){var e=JSON.parse(l),t=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(t){g.current=e;try{p.current&&(p.current.srcObject=e,p.current.setAttribute("playsinline",!0))}catch(n){Z(window.URL.createObjectURL(e))}i&&i(),C.current=requestAnimationFrame(B)}else k(e)})).catch((function(e){return t?a(e):null})),function(){cancelAnimationFrame(C.current),t=!1,k(g.current),b&&window.URL.revokeObjectURL(b)}}),[B,l,a,i]),r.default.createElement("video",o({autoPlay:!0,playsInline:!0,src:b,ref:p},u))};return Z.propTypes={constraints:a.default.object,onError:a.default.func.isRequired,onLoad:a.default.func,onScan:a.default.func.isRequired,resolution:a.default.number},Z.defaultProps={constraints:{audio:!1,video:!0},resolution:640},Z}(n(2791),n(2007))},3765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},s=l(n(2007)),c=l(n(9285)),u=n(5418);function l(e){return e&&e.__esModule?e:{default:e}}var g=["drag","dragend"],d=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"preCanvasDraw",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"preCanvasDraw",this).call(this,e,n),e.save();var r=this.context,a=r.margin,o=r.ratio,s=n.chartConfig,c=.5*o+s.origin[0]+a.left,u=.5*o+s.origin[1]+a.top,l=n.chartConfig,g=l.width,d=l.height,p=this.props,h=p.clip,f=p.edgeClip;e.setTransform(1,0,0,1,0,0),e.scale(o,o),f&&(e.beginPath(),e.rect(-1,u-10,g+a.left+a.right+1,d+20),e.clip()),e.translate(c,u),h&&(e.beginPath(),e.rect(-1,-1,g+1,d+1),e.clip())}},{key:"postCanvasDraw",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCanvasDraw",this).call(this,e,n),e.restore()}},{key:"updateMoreProps",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMoreProps",this).call(this,e);var n=e.chartConfig;if(n&&Array.isArray(n)){var r=this.context.chartId,o=(0,u.find)(n,(function(e){return e.id===r}));this.moreProps.chartConfig=o}if((0,u.isDefined)(this.moreProps.chartConfig)){var s=a(this.moreProps.chartConfig.origin,2),c=s[0],l=s[1];if((0,u.isDefined)(e.mouseXY)){var g=a(e.mouseXY,2),d=g[0],p=g[1];this.moreProps.mouseXY=[d-c,p-l]}if((0,u.isDefined)(e.startPos)){var h=a(e.startPos,2),f=h[0],I=h[1];this.moreProps.startPos=[f-c,I-l]}}}},{key:"preEvaluate",value:function(){}},{key:"shouldTypeProceed",value:function(e,t){return!("mousemove"!==e&&"click"!==e||!this.props.disablePan)||(-1!==g.indexOf(e)||!(0,u.isDefined)(t)||!(0,u.isDefined)(t.currentCharts)||t.currentCharts.indexOf(this.context.chartId)>-1)}}]),t}(c.default);d.propTypes=c.default.propTypes,d.defaultProps=c.default.defaultProps,d.contextTypes=r({},c.default.contextTypes,{canvasOriginX:s.default.number,canvasOriginY:s.default.number,chartId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,chartConfig:s.default.object.isRequired,ratio:s.default.number.isRequired}),t.default=d},9285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getAxisCanvas=function(e){return e.axes},t.getMouseCanvas=function(e){return e.mouseCoord};var o=n(2791),i=u(o),s=u(n(2007)),c=n(5418);function u(e){return e&&e.__esModule?e:{default:e}}var l={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag"},g=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.drawOnCanvas=r.drawOnCanvas.bind(r),r.getMoreProps=r.getMoreProps.bind(r),r.listener=r.listener.bind(r),r.draw=r.draw.bind(r),r.updateMoreProps=r.updateMoreProps.bind(r),r.evaluateType=r.evaluateType.bind(r),r.isHover=r.isHover.bind(r),r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.getPanConditions=r.getPanConditions.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r);var a=n.generateSubscriptionId;return r.suscriberId=a(),r.moreProps={},r.state={updateCount:0},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"updateMoreProps",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.moreProps[n]=e[n]}))}},{key:"shouldTypeProceed",value:function(){return!0}},{key:"preEvaluate",value:function(){}},{key:"listener",value:function(e,t,n,r){(0,c.isDefined)(t)&&this.updateMoreProps(t),this.evaluationInProgress=!0,this.evaluateType(e,r),this.evaluationInProgress=!1}},{key:"evaluateType",value:function(e,t){var n=l[e]||e;if(this.props.drawOn.indexOf(n)>-1&&(this.preEvaluate(e,this.moreProps,t),this.shouldTypeProceed(e,this.moreProps)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":this.moreProps.hovering=!1;var r=this.getMoreProps();this.props.onUnHover&&this.props.onUnHover(r,t);break;case"contextmenu":this.props.onContextMenu&&this.props.onContextMenu(this.getMoreProps(),t),this.moreProps.hovering&&this.props.onContextMenuWhenHover&&this.props.onContextMenuWhenHover(this.getMoreProps(),t);break;case"mousedown":this.props.onMouseDown&&this.props.onMouseDown(this.getMoreProps(),t);break;case"click":var a=this.getMoreProps();this.moreProps.hovering?this.props.onClickWhenHover(a,t):this.props.onClickOutside(a,t),this.props.onClick&&this.props.onClick(a,t);break;case"mousemove":var o=this.moreProps.hovering;this.moreProps.hovering=this.isHover(t);var i=this.context,s=i.amIOnTop,u=i.setCursorClass;this.moreProps.hovering&&!this.props.selected&&s(this.suscriberId)&&(0,c.isDefined)(this.props.onHover)?(u("react-stockcharts-pointer-cursor"),this.iSetTheCursorClass=!0):this.moreProps.hovering&&this.props.selected&&s(this.suscriberId)?(u(this.props.interactiveCursorClass),this.iSetTheCursorClass=!0):o&&!this.moreProps.hovering&&this.iSetTheCursorClass&&(this.iSetTheCursorClass=!1,u(null));var g=this.getMoreProps();this.moreProps.hovering&&!o&&this.props.onHover&&this.props.onHover(g,t),o&&!this.moreProps.hovering&&this.props.onUnHover&&this.props.onUnHover(g,t),this.props.onMouseMove&&this.props.onMouseMove(g,t);break;case"dblclick":var d=this.getMoreProps();this.props.onDoubleClick&&this.props.onDoubleClick(d,t),this.moreProps.hovering&&this.props.onDoubleClickWhenHover&&this.props.onDoubleClickWhenHover(d,t);break;case"pan":this.moreProps.hovering=!1,this.props.onPan&&this.props.onPan(this.getMoreProps(),t);break;case"panend":this.props.onPanEnd&&this.props.onPanEnd(this.getMoreProps(),t);break;case"dragstart":if(this.getPanConditions().draggable)(0,this.context.amIOnTop)(this.suscriberId)&&(this.dragInProgress=!0,this.props.onDragStart(this.getMoreProps(),t));this.someDragInProgress=!0;break;case"drag":this.dragInProgress&&this.props.onDrag&&this.props.onDrag(this.getMoreProps(),t);break;case"dragend":this.dragInProgress&&this.props.onDragComplete&&this.props.onDragComplete(this.getMoreProps(),t),this.dragInProgress=!1,this.someDragInProgress=!1;break;case"dragcancel":if(this.dragInProgress||this.iSetTheCursorClass)(0,this.context.setCursorClass)(null)}}},{key:"isHover",value:function(e){return!!(0,c.isDefined)(this.props.isHover)&&this.props.isHover(this.getMoreProps(),e)}},{key:"getPanConditions",value:function(){return{draggable:!(!this.props.selected||!this.moreProps.hovering)||this.props.enableDragOnHover&&this.moreProps.hovering,panEnabled:!this.props.disablePan}}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!1},t=e.trigger,n=e.force,r=l[t]||t,a=this.props.drawOn.indexOf(r)>-1;if(a||this.props.selected||n){var o=this.context.chartCanvasType,i=this.props.canvasDraw;if((0,c.isNotDefined)(i)||"svg"===o){var s=this.state.updateCount;this.setState({updateCount:s+1})}else this.drawOnCanvas()}}},{key:"componentWillMount",value:function(){var e=this.context,t=e.subscribe,n=e.chartId,r=this.props,a=r.clip,o=r.edgeClip;t(this.suscriberId,{chartId:n,clip:a,edgeClip:o,listener:this.listener,draw:this.draw,getPanConditions:this.getPanConditions}),this.componentWillReceiveProps(this.props,this.context)}},{key:"componentWillUnmount",value:function(){((0,this.context.unsubscribe)(this.suscriberId),this.iSetTheCursorClass)&&(0,this.context.setCursorClass)(null)}},{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.context.chartCanvasType,n=this.props,r=n.canvasDraw,a=n.selected,o=n.interactiveCursorClass;if(e.selected!==a){var i=this.context.setCursorClass;a&&this.moreProps.hovering?(this.iSetTheCursorClass=!0,i(o)):(this.iSetTheCursorClass=!1,i(null))}(0,c.isDefined)(r)&&!this.evaluationInProgress&&"svg"!==t&&(this.updateMoreProps(this.moreProps),this.drawOnCanvas())}},{key:"componentWillReceiveProps",value:function(e,t){var n=t.xScale,a=t.plotData,o=t.chartConfig,i=t.getMutableState;this.props.debug(t),this.moreProps=r({},this.moreProps,i(),{xScale:n,plotData:a,chartConfig:o})}},{key:"getMoreProps",value:function(){var e=this.context,t=e.xScale,n=e.plotData,a=e.chartConfig,o=e.morePropsDecorator,i=e.xAccessor,s=e.displayXAccessor,u=e.width,l=e.height,g=this.context,d=g.chartId,p=g.fullData,h=r({xScale:t,plotData:n,chartConfig:a,xAccessor:i,displayXAccessor:s,width:u,height:l,chartId:d,fullData:p},this.moreProps);return(o||c.identity)(h)}},{key:"preCanvasDraw",value:function(){}},{key:"postCanvasDraw",value:function(){}},{key:"drawOnCanvas",value:function(){var e=this.props,t=e.canvasDraw,n=e.canvasToDraw,r=this.context.getCanvasContexts,a=this.getMoreProps(),o=n(r());this.preCanvasDraw(o,a),t(o,a),this.postCanvasDraw(o,a)}},{key:"render",value:function(){var e=this.context,t=e.chartCanvasType,n=e.chartId,r=this.props,a=r.canvasDraw,o=r.clip,s=r.svgDraw;if((0,c.isDefined)(a)&&"svg"!==t)return null;var u=(0,c.isDefined)(n)?"-"+n:"",l=o?{clipPath:"url(#chart-area-clip"+u+")"}:null;return i.default.createElement("g",{style:l},s(this.getMoreProps()))}}]),t}(o.Component);g.propTypes={svgDraw:s.default.func.isRequired,canvasDraw:s.default.func,drawOn:s.default.array.isRequired,clip:s.default.bool.isRequired,edgeClip:s.default.bool.isRequired,interactiveCursorClass:s.default.string,selected:s.default.bool.isRequired,enableDragOnHover:s.default.bool.isRequired,disablePan:s.default.bool.isRequired,canvasToDraw:s.default.func.isRequired,isHover:s.default.func,onClick:s.default.func,onClickWhenHover:s.default.func,onClickOutside:s.default.func,onPan:s.default.func,onPanEnd:s.default.func,onDragStart:s.default.func,onDrag:s.default.func,onDragComplete:s.default.func,onDoubleClick:s.default.func,onDoubleClickWhenHover:s.default.func,onContextMenu:s.default.func,onContextMenuWhenHover:s.default.func,onMouseMove:s.default.func,onMouseDown:s.default.func,onHover:s.default.func,onUnHover:s.default.func,debug:s.default.func},g.defaultProps={svgDraw:(0,c.functor)(null),draw:[],canvasToDraw:function(e){return e.mouseCoord},clip:!0,edgeClip:!1,selected:!1,disablePan:!1,enableDragOnHover:!1,onClickWhenHover:c.noop,onClickOutside:c.noop,onDragStart:c.noop,onMouseMove:c.noop,onMouseDown:c.noop,debug:c.noop},g.contextTypes={width:s.default.number.isRequired,height:s.default.number.isRequired,margin:s.default.object.isRequired,chartId:s.default.oneOfType([s.default.number,s.default.string]),getCanvasContexts:s.default.func,chartCanvasType:s.default.string,xScale:s.default.func.isRequired,xAccessor:s.default.func.isRequired,displayXAccessor:s.default.func.isRequired,plotData:s.default.array.isRequired,fullData:s.default.array.isRequired,chartConfig:s.default.oneOfType([s.default.array,s.default.object]).isRequired,morePropsDecorator:s.default.func,generateSubscriptionId:s.default.func,getMutableState:s.default.func.isRequired,amIOnTop:s.default.func.isRequired,subscribe:s.default.func.isRequired,unsubscribe:s.default.func.isRequired,setCursorClass:s.default.func.isRequired},t.default=g},2314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),s=f(i),c=f(n(2007)),u=n(7594),l=n(6263),g=f(n(3765)),d=n(9285),p=f(n(5)),h=n(5418);function f(e){return e&&e.__esModule?e:{default:e}}var I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n.saveNode=n.saveNode.bind(n),n.getMoreProps=n.getMoreProps.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"saveNode",value:function(e){this.node=e}},{key:"getMoreProps",value:function(){return this.node.getMoreProps()}},{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.showDomain,a=n.showTicks,o=n.transform,i=n.range,s=n.getScale;(e.save(),e.translate(o[0],o[1]),r&&function(e,t,n){var r=t.orient,a=t.outerTickSize,o=t.stroke,i=t.strokeWidth,s=t.opacity,c="top"===r||"left"===r?-1:1,u="bottom"===r||"top"===r;e.lineWidth=i,e.strokeStyle=(0,h.hexToRGBA)(o,s),e.beginPath(),u?(e.moveTo((0,h.first)(n),c*a),e.lineTo((0,h.first)(n),0),e.lineTo((0,h.last)(n),0),e.lineTo((0,h.last)(n),c*a)):(e.moveTo(c*a,(0,h.first)(n)),e.lineTo(0,(0,h.first)(n)),e.lineTo(0,(0,h.last)(n)),e.lineTo(c*a,(0,h.last)(n)));e.stroke()}(e,this.props,i),a)&&function(e,t){var n=t.tickStroke,r=t.tickStrokeOpacity,a=t.tickLabelFill,o=t.textAnchor,i=t.fontSize,s=t.fontFamily,c=t.fontWeight,u=t.ticks,l=t.showTickLabel;e.strokeStyle=(0,h.hexToRGBA)(n,r),e.fillStyle=n,u.forEach((function(n){!function(e,t,n){var r=n.tickStrokeWidth,a=n.tickStrokeDasharray;e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=r,e.setLineDash((0,h.getStrokeDasharray)(a).split(",")),e.stroke()}(e,n,t)})),e.font=c+" "+i+"px "+s,e.fillStyle=a,e.textAlign="middle"===o?"center":o,l&&u.forEach((function(n){!function(e,t,n){var r=n.canvas_dy,a=n.format;e.beginPath(),e.fillText(a(t.value),t.labelX,t.labelY+r)}(e,n,t)}))}(e,C(this.props,s(t)));e.restore()}},{key:"renderSVG",value:function(e){var t=this.props.className,n=this.props,r=n.showDomain,a=n.showTicks,o=n.range,i=n.getScale,c=a?function(e,t){var n=C(e,t),r=n.tickLabelFill,a=n.tickStroke,o=n.tickStrokeOpacity,i=n.tickStrokeWidth,c=n.tickStrokeDasharray,u=n.textAnchor,l=n.fontSize,g=n.fontFamily,d=n.fontWeight,p=n.ticks,h=n.format,f=n.dy;return s.default.createElement("g",null,p.map((function(e,t){return s.default.createElement(m,{key:t,tickStroke:a,tickLabelFill:r,tickStrokeWidth:i,tickStrokeOpacity:o,tickStrokeDasharray:c,dy:f,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,labelX:e.labelX,labelY:e.labelY,textAnchor:u,fontSize:l,fontWeight:d,fontFamily:g},h(e.value))})))}(this.props,i(e)):null,u=r?function(e,t){var n=e.orient,r=e.outerTickSize,a=e.domainClassName,o=e.fill,i=e.stroke,c=e.strokeWidth,u=e.opacity,l="top"===n||"left"===n?-1:1,g=void 0;g="bottom"===n||"top"===n?"M"+t[0]+","+l*r+"V0H"+t[1]+"V"+l*r:"M"+l*r+","+t[0]+"H0V"+t[1]+"H"+l*r;return s.default.createElement("path",{className:a,d:g,fill:o,opacity:u,stroke:i,strokeWidth:c})}(this.props,o):null;return s.default.createElement("g",{className:t},c,u)}},{key:"render",value:function(){var e=this.props,t=e.bg,n=e.axisZoomCallback,r=e.className,a=e.zoomCursorClassName,o=e.zoomEnabled,i=e.getScale,c=e.inverted,u=this.props,l=u.transform,h=u.getMouseDelta,f=u.edgeClip,I=this.props,C=I.onContextMenu,m=I.onDoubleClick,v=o?s.default.createElement(p.default,{bg:t,getScale:i,getMoreProps:this.getMoreProps,getMouseDelta:h,axisZoomCallback:n,className:r,zoomCursorClassName:a,inverted:c,onContextMenu:C,onDoubleClick:m}):null;return s.default.createElement("g",{transform:"translate("+l[0]+", "+l[1]+")"},v,s.default.createElement(g.default,{ref:this.saveNode,canvasToDraw:d.getAxisCanvas,clip:!1,edgeClip:f,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,drawOn:["pan"]}))}}]),t}(i.Component);function C(e,t){var n=e.orient,o=e.innerTickSize,i=e.tickFormat,s=e.tickPadding,c=e.tickLabelFill,g=e.tickStrokeWidth,d=e.tickStrokeDasharray,p=e.fontSize,f=e.fontFamily,I=e.fontWeight,C=e.showTicks,m=e.flexTicks,v=e.showTickLabel,b=e.ticks,A=e.tickValues,y=e.tickStroke,k=e.tickStrokeOpacity,Z=e.tickInterval,S=e.tickIntervalFunction,w=void 0;if((0,h.isDefined)(A))w="function"===typeof A?A(t.domain()):A;else if((0,h.isDefined)(Z)){var B=t.domain(),G=a(B,2),x=G[0],R=G[1],W=(0,l.range)(x,R,(R-x)/Z);w=S?S(x,R,Z):W}else w=(0,h.isDefined)(t.ticks)?t.ticks(b,m):t.domain();var V=t.tickFormat?t.tickFormat(b):h.identity,N=(0,h.isNotDefined)(i)?V:function(e){return i(e)||""},X="top"===n||"left"===n?-1:1,J=Math.max(o,0)+s,F=void 0,E=void 0,T=void 0,Y=void 0;if("bottom"===n||"top"===n){if(E=X<0?"0em":".71em",T=X<0?0:.71*p,Y="middle",F=w.map((function(e){var n=Math.round(t(e));return{value:e,x1:n,y1:0,x2:n,y2:X*o,labelX:n,labelY:X*J}})),C&&m){for(var H=F.map((function(e){return{id:e.value,value:e.value,fy:e.y2,origX:e.x1}})),M=(0,u.forceSimulation)(H).force("x",(0,u.forceX)((function(e){return e.origX})).strength(1)).force("collide",(0,u.forceCollide)(22)).stop(),D=0;D<100;++D)M.tick();F=(0,h.zipper)().combine((function(e,t){return Math.abs(t.x-t.origX)>.01?r({},e,{x2:t.x,labelX:t.x}):e}))(F,H)}}else F=w.map((function(e){var n=Math.round(t(e));return{value:e,x1:0,y1:n,x2:X*o,y2:n,labelX:X*J,labelY:n}})),E=".32em",T=.32*p,Y=X<0?"end":"start";return{ticks:F,scale:t,tickStroke:y,tickLabelFill:c||y,tickStrokeOpacity:k,tickStrokeWidth:g,tickStrokeDasharray:d,dy:E,canvas_dy:T,textAnchor:Y,fontSize:p,fontFamily:f,fontWeight:I,format:N,showTickLabel:v}}function m(e){var t=e.tickLabelFill,n=e.tickStroke,r=e.tickStrokeOpacity,a=e.tickStrokeDasharray,o=e.tickStrokeWidth,i=e.textAnchor,c=e.fontSize,u=e.fontFamily,l=e.fontWeight,g=e.x1,d=e.y1,p=e.x2,f=e.y2,I=e.labelX,C=e.labelY,m=e.dy;return s.default.createElement("g",{className:"tick"},s.default.createElement("line",{shapeRendering:"crispEdges",opacity:r,stroke:n,strokeWidth:o,strokeDasharray:(0,h.getStrokeDasharray)(a),x1:g,y1:d,x2:p,y2:f}),s.default.createElement("text",{dy:m,x:I,y:C,fill:t,fontSize:c,fontWeight:l,fontFamily:u,textAnchor:i},e.children))}I.propTypes={innerTickSize:c.default.number,outerTickSize:c.default.number,tickFormat:c.default.func,tickPadding:c.default.number,tickSize:c.default.number,ticks:c.default.number,tickLabelFill:c.default.string,tickStroke:c.default.string,tickStrokeOpacity:c.default.number,tickStrokeWidth:c.default.number,tickStrokeDasharray:c.default.oneOf(h.strokeDashTypes),tickValues:c.default.oneOfType([c.default.array,c.default.func]),tickInterval:c.default.number,tickIntervalFunction:c.default.func,showDomain:c.default.bool,showTicks:c.default.bool,className:c.default.string,axisZoomCallback:c.default.func,zoomEnabled:c.default.bool,inverted:c.default.bool,zoomCursorClassName:c.default.string,transform:c.default.arrayOf(c.default.number).isRequired,range:c.default.arrayOf(c.default.number).isRequired,getMouseDelta:c.default.func.isRequired,getScale:c.default.func.isRequired,bg:c.default.object.isRequired,edgeClip:c.default.bool.isRequired,onContextMenu:c.default.func,onDoubleClick:c.default.func},I.defaultProps={zoomEnabled:!1,zoomCursorClassName:"",edgeClip:!1},m.propTypes={children:c.default.string.isRequired,x1:c.default.number.isRequired,y1:c.default.number.isRequired,x2:c.default.number.isRequired,y2:c.default.number.isRequired,labelX:c.default.number.isRequired,labelY:c.default.number.isRequired,dy:c.default.string.isRequired,tickStroke:c.default.string,tickLabelFill:c.default.string,tickStrokeWidth:c.default.number,tickStrokeOpacity:c.default.number,tickStrokeDasharray:c.default.oneOf(h.strokeDashTypes),textAnchor:c.default.string,fontSize:c.default.number,fontFamily:c.default.string,fontWeight:c.default.oneOfType([c.default.string,c.default.number])},t.default=I},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=l(a),i=l(n(2007)),s=n(4686),c=n(6263),u=n(5418);function l(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDragStartMouse=n.handleDragStartMouse.bind(n),n.handleDragStartTouch=n.handleDragStartTouch.bind(n),n.handleDrag=n.handleDrag.bind(n),n.handleDragEnd=n.handleDragEnd.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.saveNode=n.saveNode.bind(n),n.state={startPosition:null},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"saveNode",value:function(e){this.node=e}},{key:"handleRightClick",value:function(e){e.stopPropagation(),e.preventDefault();var t=this.props.onContextMenu,n=(0,u.mousePosition)(e,this.node.getBoundingClientRect());(0,s.select)((0,u.d3Window)(this.node)).on(u.MOUSEMOVE,null).on(u.MOUSEUP,null),this.setState({startPosition:null}),t(n,e),this.contextMenuClicked=!0}},{key:"handleDragStartMouse",value:function(e){this.mouseInteraction=!0;var t=this.props,n=(0,t.getScale)((0,t.getMoreProps)());if(this.dragHappened=!1,n.invert){(0,s.select)((0,u.d3Window)(this.node)).on(u.MOUSEMOVE,this.handleDrag,!1).on(u.MOUSEUP,this.handleDragEnd,!1);var r=(0,u.mousePosition)(e);this.setState({startPosition:{startXY:r,startScale:n}})}e.preventDefault()}},{key:"handleDragStartTouch",value:function(e){this.mouseInteraction=!1;var t=this.props,n=(0,t.getScale)((0,t.getMoreProps)());if(this.dragHappened=!1,1===e.touches.length&&n.invert){(0,s.select)((0,u.d3Window)(this.node)).on(u.TOUCHMOVE,this.handleDrag).on(u.TOUCHEND,this.handleDragEnd);var r=(0,u.touchPosition)((0,u.getTouchProps)(e.touches[0]),e);this.setState({startPosition:{startXY:r,startScale:n}})}}},{key:"handleDrag",value:function(){var e=this.state.startPosition,t=this.props,n=t.getMouseDelta,r=t.inverted;if(this.dragHappened=!0,(0,u.isDefined)(e)){var a=e.startScale,o=n(e.startXY,this.mouseInteraction?(0,s.mouse)(this.node):(0,s.touches)(this.node)[0]),i=(0,c.mean)(a.range()),l=a.range().map((function(e){return r?e-(0,u.sign)(e-i)*o:e+(0,u.sign)(e-i)*o})),g=l.map(a.invert);if((0,u.sign)((0,u.last)(a.range())-(0,u.first)(a.range()))===(0,u.sign)((0,u.last)(l)-(0,u.first)(l)))(0,this.props.axisZoomCallback)(g)}}},{key:"handleDragEnd",value:function(){var e=this;if(!this.dragHappened)if(this.clicked){var t=s.event,n=this.mouseInteraction?(0,s.mouse)(this.node):(0,s.touches)(this.node)[0];(0,this.props.onDoubleClick)(n,t)}else this.clicked=!0,setTimeout((function(){e.clicked=!1}),300);(0,s.select)((0,u.d3Window)(this.node)).on(u.MOUSEMOVE,null).on(u.MOUSEUP,null).on(u.TOUCHMOVE,null).on(u.TOUCHEND,null),this.setState({startPosition:null})}},{key:"render",value:function(){var e=this.props,t=e.bg,n=e.className,r=e.zoomCursorClassName,a=(0,u.isDefined)(this.state.startPosition)?r:"react-stockcharts-default-cursor";return o.default.createElement("rect",{className:"react-stockcharts-enable-interaction "+a+" "+n,ref:this.saveNode,x:t.x,y:t.y,opacity:0,height:t.h,width:t.w,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}]),t}(a.Component);g.propTypes={innerTickSize:i.default.number,outerTickSize:i.default.number,tickFormat:i.default.func,tickPadding:i.default.number,tickSize:i.default.number,ticks:i.default.number,tickValues:i.default.array,showDomain:i.default.bool,showTicks:i.default.bool,className:i.default.string,axisZoomCallback:i.default.func,inverted:i.default.bool,bg:i.default.object.isRequired,zoomCursorClassName:i.default.string.isRequired,getMoreProps:i.default.func.isRequired,getScale:i.default.func.isRequired,getMouseDelta:i.default.func.isRequired,onDoubleClick:i.default.func.isRequired,onContextMenu:i.default.func.isRequired},g.defaultProps={onDoubleClick:u.noop,onContextMenu:u.noop,inverted:!0},t.default=g},6317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=u(o),s=u(n(2007)),c=u(n(2314));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.axisZoomCallback=r.axisZoomCallback.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"axisZoomCallback",value:function(e){(0,this.context.xAxisZoom)(e)}},{key:"render",value:function(){var e=this.props.showTicks,t=function(e,t){var n=e.axisAt,r=e.xZoomHeight,a=e.orient,o=t.chartConfig,i=o.width,s=o.height,c=void 0;c="top"===n?0:"bottom"===n?s:"middle"===n?s/2:n;return{transform:[0,c],range:[0,i],getScale:g,bg:{x:0,y:"top"===a?-r:0,h:r,w:i}}}(this.props,this.context);return i.default.createElement(c.default,r({},this.props,t,{x:!0,zoomEnabled:this.props.zoomEnabled&&e,axisZoomCallback:this.axisZoomCallback,zoomCursorClassName:"react-stockcharts-ew-resize-cursor"}))}}]),t}(o.Component);function g(e){var t=e.xScale,n=e.width;if(t.invert){var r=[0,n],a=r.map(t.invert);return t.copy().domain(a).range(r)}return t}l.propTypes={axisAt:s.default.oneOfType([s.default.oneOf(["top","bottom","middle"]),s.default.number]).isRequired,orient:s.default.oneOf(["top","bottom"]).isRequired,innerTickSize:s.default.number,outerTickSize:s.default.number,tickFormat:s.default.func,tickPadding:s.default.number,tickSize:s.default.number,ticks:s.default.number,tickValues:s.default.array,showTicks:s.default.bool,className:s.default.string,zoomEnabled:s.default.bool,onContextMenu:s.default.func,onDoubleClick:s.default.func},l.defaultProps={showTicks:!0,showTickLabel:!0,showDomain:!0,className:"react-stockcharts-x-axis",ticks:10,outerTickSize:0,fill:"none",stroke:"#000000",strokeWidth:1,opacity:1,domainClassName:"react-stockcharts-axis-domain",innerTickSize:5,tickPadding:6,tickStroke:"#000000",tickStrokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontWeight:400,xZoomHeight:25,zoomEnabled:!0,getMouseDelta:function(e,t){return e[0]-t[0]}},l.contextTypes={chartConfig:s.default.object.isRequired,xAxisZoom:s.default.func.isRequired},t.default=l},8090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=u(o),s=u(n(2007)),c=u(n(2314));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.axisZoomCallback=r.axisZoomCallback.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"axisZoomCallback",value:function(e){var t=this.context,n=t.chartId;(0,t.yAxisZoom)(n,e)}},{key:"render",value:function(){var e=function(e,t){var n=e.axisAt,r=e.yZoomWidth,a=e.orient,o=t.chartConfig,i=o.width,s=o.height,c=void 0;c="left"===n?0:"right"===n?i:"middle"===n?i/2:n;return{transform:[c,0],range:[0,s],getScale:g,bg:{x:"left"===a?-r:0,y:0,h:s,w:r},zoomEnabled:t.chartConfig.yPan}}(this.props,this.context),t=e.zoomEnabled,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["zoomEnabled"]);return i.default.createElement(c.default,r({},this.props,n,{zoomEnabled:this.props.zoomEnabled&&t,edgeClip:!0,axisZoomCallback:this.axisZoomCallback,zoomCursorClassName:"react-stockcharts-ns-resize-cursor"}))}}]),t}(o.Component);function g(e){var t=e.chartConfig,n=t.yScale,r=t.flipYScale,a=t.height;if(n.invert){var o=r?[0,a]:[a,0],i=o.map(n.invert);return n.copy().domain(i).range(o)}return n}l.propTypes={axisAt:s.default.oneOfType([s.default.oneOf(["left","right","middle"]),s.default.number]).isRequired,orient:s.default.oneOf(["left","right"]).isRequired,innerTickSize:s.default.number,outerTickSize:s.default.number,tickFormat:s.default.func,tickPadding:s.default.number,tickSize:s.default.number,ticks:s.default.number,yZoomWidth:s.default.number,tickValues:s.default.array,showTicks:s.default.bool,className:s.default.string,zoomEnabled:s.default.bool,onContextMenu:s.default.func,onDoubleClick:s.default.func},l.defaultProps={showTicks:!0,showTickLabel:!0,showDomain:!0,className:"react-stockcharts-y-axis",ticks:10,outerTickSize:0,domainClassName:"react-stockcharts-axis-domain",fill:"none",stroke:"#FFFFFF",strokeWidth:1,opacity:1,innerTickSize:5,tickPadding:6,tickStroke:"#000000",tickStrokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontWeight:400,yZoomWidth:40,zoomEnabled:!0,getMouseDelta:function(e,t){return e[1]-t[1]}},l.contextTypes={yAxisZoom:s.default.func.isRequired,chartId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,chartConfig:s.default.object.isRequired},t.default=l},2771:function(e,t,n){"use strict";var r=n(6317);Object.defineProperty(t,"Kc",{enumerable:!0,get:function(){return o(r).default}});var a=n(8090);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"B2",{enumerable:!0,get:function(){return o(a).default}})},2010:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(207),o=(r=a)&&r.__esModule?r:{default:r},i=n(5418);var s={save:function(e,t,n,r){o.default.svgAsDataUri(t.getElementsByTagName("svg")[0],{},(function(a){var o=new Image;o.onload=function(){var a=e.createElement("canvas");a.width=o.width,a.height=o.height;var s=a.getContext("2d");(0,i.isDefined)(n)&&(s.fillStyle=n,s.fillRect(0,0,a.width,a.height));for(var c=t.getElementsByTagName("canvas"),u=0;u<c.length;u++){var l=c[u];if((0,i.isDefined)(l)){var g=l.parentNode.parentNode.getBoundingClientRect(),d=l.getBoundingClientRect();s.drawImage(l,d.left-g.left+0,d.top-g.top+0)}}s.drawImage(o,0,0),r(a.toDataURL("image/png"))},o.src=a}))},saveWithWhiteBG:function(e,t,n){return this.saveWithBG(e,t,"white",n)},saveWithDarkBG:function(e,t,n){return this.saveWithBG(e,t,"#303030",n)},saveWithBG:function(e,t,n,r){return this.save(e,t,n,r)},saveChartAsImage:function(e){this.saveWithWhiteBG(document,e,(function(e){var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","Chart.png"),document.body.appendChild(t),t.addEventListener("click",(function(){t.parentNode.removeChild(t)})),t.click()}))}};t.default=s},8891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=s(a),i=s(n(2007));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={type:n.props.type},n.handleTypeChange=n.handleTypeChange.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement("label",null,"Type: "),o.default.createElement("select",{name:"type",id:"type",onChange:this.handleTypeChange,value:this.state.type},o.default.createElement("option",{value:"svg"},"svg"),o.default.createElement("option",{value:"hybrid"},"canvas + svg")),o.default.createElement("div",{style:this.props.style},this.props.children(this.state.type)))}}]),t}(a.Component);c.propTypes={type:i.default.oneOf(["svg","hybrid"]),children:i.default.func.isRequired,style:i.default.object.isRequired},c.defaultProps={type:"hybrid",style:{}},t.default=c},9816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minWidth,u=void 0===n?100:n,h=t.minHeight,f=void 0===h?100:h,I=t.ratio,C=t.width,m=t.height;function v(e){var t=e.parentNode.clientWidth,n=e.parentNode.clientHeight;return{width:(0,c.isDefined)(C)?C:Math.max(t,u),height:(0,c.isDefined)(m)?m:Math.max(n,f)}}var b=function(t){function n(e){l(this,n);var t=g(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleWindowResize=t.handleWindowResize.bind(t),t.getWrappedInstance=t.getWrappedInstance.bind(t),t.saveNode=t.saveNode.bind(t),t.setTestCanvas=t.setTestCanvas.bind(t),t.state={},t}return d(n,t),a(n,[{key:"saveNode",value:function(e){this.node=e}},{key:"setTestCanvas",value:function(e){this.testCanvas=e}},{key:"getRatio",value:function(){if((0,c.isDefined)(this.testCanvas)){var e=this.testCanvas.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}return 1}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize);var e=v(this.node);this.setState(r({},e,{ratio:(0,c.isDefined)(I)?I:this.getRatio()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"handleWindowResize",value:function(){var e=s.default.findDOMNode(this.node);this.setState(v(e))}},{key:"getWrappedInstance",value:function(){return this.node}},{key:"render",value:function(){var t={ref:this.saveNode};return this.state.width?i.default.createElement(e,r({height:this.state.height,width:this.state.width,ratio:this.state.ratio},this.props,t)):i.default.createElement("div",t,i.default.createElement("canvas",{ref:this.setTestCanvas}))}}]),n}(o.Component);return b.displayName="fitDimensions("+p(e)+")",b};var o=n(2791),i=u(o),s=u(n(4164)),c=n(5418);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){return e.displayName||e.name||"Series"}},3346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=function(o){function i(e){u(this,i);var t=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.handleWindowResize=t.handleWindowResize.bind(t),t.getWrappedInstance=t.getWrappedInstance.bind(t),t.saveNode=t.saveNode.bind(t),t.setTestCanvas=t.setTestCanvas.bind(t),t.state={},t}return g(i,o),a(i,[{key:"saveNode",value:function(e){this.node=e}},{key:"setTestCanvas",value:function(e){this.testCanvas=e}},{key:"getRatio",value:function(){if((0,c.isDefined)(this.testCanvas)){var e=this.testCanvas.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}return 1}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize(),this.setState({ratio:this.getRatio()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"handleWindowResize",value:function(){var e=this;this.setState({width:0},(function(){var t=e.node,r=window.getComputedStyle(t.parentNode),a=r.width,o=r.paddingLeft,i=r.paddingRight,s=parseFloat(a)-(parseFloat(o)+parseFloat(i));e.setState({width:Math.round(Math.max(s,n))})}))}},{key:"getWrappedInstance",value:function(){return this.node}},{key:"render",value:function(){var n=t?{ref:this.saveNode}:{};return this.state.width?s.default.createElement(e,r({width:this.state.width,ratio:this.state.ratio},this.props,n)):s.default.createElement("div",n,s.default.createElement("canvas",{ref:this.setTestCanvas}))}}]),i}(i.Component);return o.displayName="fitWidth("+d(e)+")",o};var o,i=n(2791),s=(o=i)&&o.__esModule?o:{default:o},c=n(5418);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){return e.displayName||e.name||"Series"}},464:function(e,t,n){"use strict";var r=n(8891);var a=n(2010);var o=n(3346);Object.defineProperty(t,"V6",{enumerable:!0,get:function(){return s(o).default}});var i=n(9816);function s(e){return e&&e.__esModule?e:{default:e}}},5955:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=l(a),i=l(n(2007)),s=l(n(4223)),c=l(n(139)),u=n(5418);function l(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.renderClip=n.renderClip.bind(n),n.topClip=n.topClip.bind(n),n.bottomClip=n.bottomClip.bind(n),n.baseAt=n.baseAt.bind(n);var r=String(Math.round(1e4*Math.random()*1e4));n.clipPathId1="alternating-area-clip-"+r;var a=String(Math.round(1e4*Math.random()*1e4));return n.clipPathId2="alternating-area-clip-"+a,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"topClip",value:function(e,t){var n=t.chartConfig,r=this.props.baseAt,a=n.yScale,o=n.width;e.beginPath(),e.rect(0,0,o,a(r)),e.clip()}},{key:"bottomClip",value:function(e,t){var n=t.chartConfig,r=this.props.baseAt,a=n.yScale,o=n.width,i=n.height;e.beginPath(),e.rect(0,a(r),o,i-a(r)),e.clip()}},{key:"renderClip",value:function(e){var t=e.chartConfig,n=this.props.baseAt,r=t.yScale,a=t.width,i=t.height;return o.default.createElement("defs",null,o.default.createElement("clipPath",{id:this.clipPathId1},o.default.createElement("rect",{x:0,y:0,width:a,height:r(n)})),o.default.createElement("clipPath",{id:this.clipPathId2},o.default.createElement("rect",{x:0,y:r(n),width:a,height:i-r(n)})))}},{key:"baseAt",value:function(e){return e(this.props.baseAt)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.yAccessor,r=e.interpolation,a=this.props,i=a.stroke,u=a.strokeWidth,l=a.strokeOpacity,g=a.strokeDasharray,d=a.fill,p=a.fillOpacity,h={clipPath:"url(#"+this.clipPathId1+")"},f={clipPath:"url(#"+this.clipPathId2+")"};return o.default.createElement("g",{className:t},o.default.createElement(c.default,null,this.renderClip),o.default.createElement(s.default,{style:h,canvasClip:this.topClip,yAccessor:n,interpolation:r,baseAt:this.baseAt,fill:d.top,opacity:p.top,stroke:i.top,strokeOpacity:l.top,strokeDasharray:g.top,strokeWidth:u.top}),o.default.createElement(s.default,{style:f,canvasClip:this.bottomClip,yAccessor:n,interpolation:r,baseAt:this.baseAt,fill:d.bottom,opacity:p.bottom,stroke:i.bottom,strokeOpacity:l.bottom,strokeDasharray:g.bottom,strokeWidth:u.bottom}))}}]),t}(a.Component);g.propTypes={stroke:i.default.shape({top:i.default.string,bottom:i.default.string}),strokeWidth:i.default.shape({top:i.default.number,bottom:i.default.number}),strokeOpacity:i.default.shape({top:i.default.number,bottom:i.default.number}),fill:i.default.shape({top:i.default.string,bottom:i.default.string}),fillOpacity:i.default.shape({top:i.default.number,bottom:i.default.number}),strokeDasharray:i.default.shape({top:i.default.oneOf(u.strokeDashTypes),bottom:i.default.oneOf(u.strokeDashTypes)}).isRequired,className:i.default.string,yAccessor:i.default.func.isRequired,baseAt:i.default.number.isRequired,interpolation:i.default.func},g.defaultProps={stroke:{top:"#38C172",bottom:"#E3342F"},strokeWidth:{top:2,bottom:2},strokeOpacity:{top:1,bottom:1},fill:{top:"#A2F5BF",bottom:"#EF5753"},fillOpacity:{top:.5,bottom:.5},strokeDasharray:{top:"Solid",bottom:"Solid"},className:"react-stockcharts-alternating-area"},t.default=g},2012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=g(a),i=g(n(2007)),s=n(7670),c=g(n(3765)),u=n(9285),l=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.yAccessor,a=n.defined,o=n.base,i=n.canvasGradient,c=this.props,u=c.fill,g=c.stroke,d=c.opacity,p=c.interpolation,h=c.canvasClip,f=t.xScale,I=t.chartConfig.yScale,C=t.plotData,m=t.xAccessor;h&&(e.save(),h(e,t)),e.fillStyle=null!=i?i(t,e):(0,l.hexToRGBA)(u,d),e.strokeStyle=g,e.beginPath();var v=(0,l.functor)(o),b=(0,s.area)().defined((function(e){return a(r(e))})).x((function(e){return Math.round(f(m(e)))})).y0((function(e){return v(I,e,t)})).y1((function(e){return Math.round(I(r(e)))})).context(e);(0,l.isDefined)(p)&&b.curve(p),b(C),e.fill(),h&&e.restore()}},{key:"renderSVG",value:function(e){var t=this.props,n=t.yAccessor,r=t.defined,a=t.base,i=t.style,c=this.props,u=c.stroke,g=c.fill,d=c.className,p=c.opacity,h=c.interpolation,f=e.xScale,I=e.chartConfig.yScale,C=e.plotData,m=e.xAccessor,v=(0,l.functor)(a),b=(0,s.area)().defined((function(e){return r(n(e))})).x((function(e){return Math.round(f(m(e)))})).y0((function(t){return v(I,t,e)})).y1((function(e){return Math.round(I(n(e)))}));(0,l.isDefined)(h)&&b.curve(h);var A=b(C),y=d.concat((0,l.isDefined)(u)?"":" line-stroke");return o.default.createElement("path",{style:i,d:A,stroke:u,fill:(0,l.hexToRGBA)(g,p),className:y})}},{key:"render",value:function(){return o.default.createElement(c.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:u.getAxisCanvas,drawOn:["pan"]})}}]),t}(a.Component);d.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,stroke:i.default.string,fill:i.default.string,opacity:i.default.number,defined:i.default.func,base:i.default.oneOfType([i.default.func,i.default.number]),interpolation:i.default.func,canvasClip:i.default.func,style:i.default.object,canvasGradient:i.default.func},d.defaultProps={className:"line ",fill:"none",opacity:1,defined:function(e){return!isNaN(e)},base:function(e){return(0,l.first)(e.range())}},t.default=d},4223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(2791)),a=c(n(2007)),o=c(n(7416)),i=c(n(2012)),s=n(5418);function c(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.yAccessor,n=e.baseAt,a=e.className,s=e.opacity,c=e.stroke,u=e.strokeWidth,l=e.strokeOpacity,g=e.strokeDasharray,d=e.canvasGradient,p=e.fill,h=e.interpolation,f=e.style,I=e.canvasClip;return r.default.createElement("g",{className:a},r.default.createElement(i.default,{yAccessor:t,interpolation:h,base:n,canvasGradient:d,fill:p,opacity:s,style:f,canvasClip:I,stroke:"none"}),r.default.createElement(o.default,{yAccessor:t,stroke:c,strokeWidth:u,strokeOpacity:l,strokeDasharray:g,interpolation:h,style:f,canvasClip:I,fill:"none",hoverHighlight:!1}))}u.propTypes={stroke:a.default.string,strokeWidth:a.default.number,canvasGradient:a.default.func,fill:a.default.string.isRequired,strokeOpacity:a.default.number.isRequired,opacity:a.default.number.isRequired,className:a.default.string,yAccessor:a.default.func.isRequired,baseAt:a.default.func,interpolation:a.default.func,canvasClip:a.default.func,style:a.default.object,strokeDasharray:a.default.oneOf(s.strokeDashTypes)},u.defaultProps={stroke:"#4682B4",strokeWidth:1,strokeOpacity:1,strokeDasharray:"Solid",opacity:.5,fill:"#4682B4",className:"react-stockcharts-area"},t.default=u},3105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=d(a),i=d(n(2007)),s=d(n(3765)),c=n(9285),u=n(250),l=d(u),g=n(5418);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){if(this.props.swapScales){var n=t.xAccessor;(0,u.drawOnCanvasHelper)(e,this.props,t,n,u.identityStack)}else{var r=h(this.props,t);(0,u.drawOnCanvas2)(this.props,e,r)}}},{key:"renderSVG",value:function(e){if(this.props.swapScales){var t=e.xAccessor;return o.default.createElement("g",null,(0,u.svgHelper)(this.props,e,t,u.identityStack))}var n=h(this.props,e);return o.default.createElement("g",null,(0,u.getBarsSVG2)(this.props,n))}},{key:"render",value:function(){var e=this.props.clip;return o.default.createElement(s.default,{clip:e,svgDraw:this.renderSVG,canvasToDraw:c.getAxisCanvas,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}}]),t}(a.Component);function h(e,t){var n=e.baseAt,r=e.fill,a=e.stroke,o=e.yAccessor,i=t.xScale,s=t.xAccessor,c=t.plotData,u=t.chartConfig.yScale,l=(0,g.functor)(r),d=(0,g.functor)(n),p=(0,g.functor)(e.width)(e,{xScale:i,xAccessor:s,plotData:c}),h=Math.floor(.5*p);return c.filter((function(e){return(0,g.isDefined)(o(e))})).map((function(e){var t=o(e),n=u(t),r=Math.round(i(s(e)))-h,c=d(i,u,e)-u(t);return c<0&&(n+=c,c=-c),{x:r,y:Math.round(n),height:Math.round(c),width:2*h,fill:l(e,0),stroke:a?l(e,0):"none"}}))}p.propTypes={baseAt:i.default.oneOfType([i.default.number,i.default.func]),stroke:i.default.bool,width:i.default.oneOfType([i.default.number,i.default.func]),yAccessor:i.default.func.isRequired,opacity:i.default.number,fill:i.default.oneOfType([i.default.func,i.default.string]),className:i.default.oneOfType([i.default.func,i.default.string]),clip:i.default.bool,swapScales:i.default.bool},p.defaultProps=l.default.defaultProps,t.default=p},2353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=u(a),i=u(n(2007)),s=u(n(7416)),c=u(n(2012));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.yAccessorForTop=n.yAccessorForTop.bind(n),n.yAccessorForMiddle=n.yAccessorForMiddle.bind(n),n.yAccessorForBottom=n.yAccessorForBottom.bind(n),n.yAccessorForScalledBottom=n.yAccessorForScalledBottom.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorForTop",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).top}},{key:"yAccessorForMiddle",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).middle}},{key:"yAccessorForBottom",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).bottom}},{key:"yAccessorForScalledBottom",value:function(e,t){var n=this.props.yAccessor;return e(n(t)&&n(t).bottom)}},{key:"render",value:function(){var e=this.props,t=e.areaClassName,n=e.className,r=e.opacity,a=this.props,i=a.stroke,u=a.fill;return o.default.createElement("g",{className:n},o.default.createElement(s.default,{yAccessor:this.yAccessorForTop,stroke:i.top,fill:"none"}),o.default.createElement(s.default,{yAccessor:this.yAccessorForMiddle,stroke:i.middle,fill:"none"}),o.default.createElement(s.default,{yAccessor:this.yAccessorForBottom,stroke:i.bottom,fill:"none"}),o.default.createElement(c.default,{className:t,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,stroke:"none",fill:u,opacity:r}))}}]),t}(a.Component);l.propTypes={yAccessor:i.default.func.isRequired,className:i.default.string,areaClassName:i.default.string,opacity:i.default.number,type:i.default.string,stroke:i.default.shape({top:i.default.string.isRequired,middle:i.default.string.isRequired,bottom:i.default.string.isRequired}).isRequired,fill:i.default.string.isRequired},l.defaultProps={className:"react-stockcharts-bollinger-band-series",areaClassName:"react-stockcharts-bollinger-band-series-area",opacity:.2},t.default=l},2463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3904),o=n(2791),i=g(o),s=g(n(2007)),c=g(n(3765)),u=n(9285),l=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){!function(e,t,n){var r=t.opacity,o=t.candleStrokeWidth,i=n.xScale,s=n.chartConfig.yScale,c=n.plotData,u=n.xAccessor,g=p(t,u,i,s,c);(0,a.nest)().key((function(e){return e.wick.stroke})).entries(g).forEach((function(t){var n=t.key,r=t.values;e.strokeStyle=n,e.fillStyle=n,r.forEach((function(t){var n=t.wick;e.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),e.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)}))})),(0,a.nest)().key((function(e){return e.stroke})).key((function(e){return e.fill})).entries(g).forEach((function(t){var n=t.key,a=t.values;"none"!==n&&(e.strokeStyle=n,e.lineWidth=o),a.forEach((function(t){var a=t.key,o=t.values,i=(0,l.head)(o).width<=1?a:(0,l.hexToRGBA)(a,r);e.fillStyle=i,o.forEach((function(t){t.width<=1?e.fillRect(t.x-.5,t.y,1,t.height):0===t.height?e.fillRect(t.x,t.y-.5,t.width,1):(e.fillRect(t.x,t.y,t.width,t.height),"none"!==n&&e.strokeRect(t.x,t.y,t.width,t.height))}))}))}))}(e,this.props,t)}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.wickClassName,a=t.candleClassName,o=e.xScale,s=e.chartConfig.yScale,c=e.plotData,u=e.xAccessor,l=p(this.props,u,o,s,c);return i.default.createElement("g",{className:n},i.default.createElement("g",{className:r,key:"wicks"},function(e){return e.map((function(e,t){var n=e.wick;return i.default.createElement("path",{key:t,className:e.className,stroke:n.stroke,d:"M"+n.x+","+n.y1+" L"+n.x+","+n.y2+" M"+n.x+","+n.y3+" L"+n.x+","+n.y4})}))}(l)),i.default.createElement("g",{className:a,key:"candles"},function(e,t){var n=e.opacity,r=e.candleStrokeWidth;return t.map((function(e,t){return e.width<=1?i.default.createElement("line",{className:e.className,key:t,x1:e.x,y1:e.y,x2:e.x,y2:e.y+e.height,stroke:e.fill}):0===e.height?i.default.createElement("line",{key:t,x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height,stroke:e.fill}):i.default.createElement("rect",{key:t,className:e.className,fillOpacity:n,x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:r})}))}(this.props,l)))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(c.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:u.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function p(e,t,n,r,a){for(var o=e.wickStroke,i=(0,l.functor)(o),s=e.classNames,c=e.fill,u=e.stroke,g=e.yAccessor,d=(0,l.functor)(s),p=(0,l.functor)(c),h=(0,l.functor)(u),f=.5*(0,l.functor)(e.width)(e,{xScale:n,xAccessor:t,plotData:a}),I=f>.7?Math.round(f):Math.floor(f),C=[],m=0;m<a.length;m++){var v=a[m];if((0,l.isDefined)(g(v).close)){var b=Math.round(n(t(v))),A=g(v),y=Math.round(r(Math.max(A.open,A.close))),k=Math.round(Math.abs(r(A.open)-r(A.close)));C.push({x:b-I,y:y,wick:{stroke:i(A),x:b,y1:Math.round(r(A.high)),y2:y,y3:y+k,y4:Math.round(r(A.low))},height:k,width:2*I,className:d(A),fill:p(A),stroke:h(A),direction:A.close-A.open})}}return C}d.propTypes={className:s.default.string,wickClassName:s.default.string,candleClassName:s.default.string,widthRatio:s.default.number,width:s.default.oneOfType([s.default.number,s.default.func]),classNames:s.default.oneOfType([s.default.func,s.default.string]),fill:s.default.oneOfType([s.default.func,s.default.string]),stroke:s.default.oneOfType([s.default.func,s.default.string]),wickStroke:s.default.oneOfType([s.default.func,s.default.string]),yAccessor:s.default.func,clip:s.default.bool},d.defaultProps={className:"react-stockcharts-candlestick",wickClassName:"react-stockcharts-candlestick-wick",candleClassName:"react-stockcharts-candlestick-candle",yAccessor:function(e){return{open:e.open,high:e.high,low:e.low,close:e.close}},classNames:function(e){return e.close>e.open?"up":"down"},width:l.plotDataLengthBarWidth,wickStroke:"#000000",fill:function(e){return e.close>e.open?"#6BA583":"#FF0000"},stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0},t.default=d},2840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2791)),a=i(n(2007)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.className,n=e.stroke,a=e.strokeWidth,i=e.opacity,s=e.fill,c=e.point,u=e.r,l=(0,o.functor)(u)(c.datum);return r.default.createElement("circle",{className:t,cx:c.x,cy:c.y,stroke:n,strokeWidth:a,fillOpacity:i,fill:s,r:l})}s.propTypes={stroke:a.default.string,fill:a.default.string.isRequired,opacity:a.default.number.isRequired,point:a.default.shape({x:a.default.number.isRequired,y:a.default.number.isRequired,datum:a.default.object.isRequired}).isRequired,className:a.default.string,strokeWidth:a.default.number,r:a.default.oneOfType([a.default.number,a.default.func]).isRequired},s.defaultProps={stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-circle"},s.drawOnCanvas=function(e,t,n){var r=e.stroke,a=e.fill,i=e.opacity,c=e.strokeWidth;n.strokeStyle=r,n.lineWidth=c,"none"!==a&&(n.fillStyle=(0,o.hexToRGBA)(a,i)),s.drawOnCanvasWithNoStateChange(e,t,n)},s.drawOnCanvasWithNoStateChange=function(e,t,n){var r=e.r,a=(0,o.functor)(r)(t.datum);n.moveTo(t.x,t.y),n.beginPath(),n.arc(t.x,t.y,a,0,2*Math.PI,!1),n.stroke(),n.fill()},t.default=s},8812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=u(a),i=u(n(2007)),s=u(n(2808)),c=u(n(4212));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fillForEachBar=n.fillForEachBar.bind(n),n.yAccessorTop=n.yAccessorTop.bind(n),n.yAccessorBullTop=n.yAccessorBullTop.bind(n),n.yAccessorBearTop=n.yAccessorBearTop.bind(n),n.yAccessorBullBottom=n.yAccessorBullBottom.bind(n),n.yAccessorBearBottom=n.yAccessorBearBottom.bind(n),n.yAccessorForBarBase=n.yAccessorForBarBase.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorTop",value:function(e){var t=this.props.yAccessor;return t(e)&&Math.max(t(e).bullPower,0)}},{key:"yAccessorBullTop",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bullPower>0?t(e).bullPower:void 0)}},{key:"yAccessorBearTop",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bearPower>0?t(e).bearPower:void 0)}},{key:"yAccessorBullBottom",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bullPower<0?0:void 0)}},{key:"yAccessorBearBottom",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bullPower<0||t(e).bullPower*t(e).bearPower<0?Math.min(0,t(e).bullPower):void 0)}},{key:"yAccessorForBarBase",value:function(e,t,n){var r=this.props.yAccessor;return t(r(n)&&Math.min(r(n).bearPower,0))}},{key:"fillForEachBar",value:function(e,t){var n=this.props,r=n.bullPowerFill,a=n.bearPowerFill;return t%2===0?r:a}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.opacity,r=e.stroke,a=e.straightLineStroke,i=e.straightLineOpacity,u=e.widthRatio,l=this.props.clip;return o.default.createElement("g",{className:t},o.default.createElement(s.default,{baseAt:this.yAccessorForBarBase,className:"react-stockcharts-elderray-bar",stroke:r,fill:this.fillForEachBar,opacity:n,widthRatio:u,clip:l,yAccessor:[this.yAccessorBullTop,this.yAccessorBearTop,this.yAccessorBullBottom,this.yAccessorBearBottom]}),o.default.createElement(c.default,{className:"react-stockcharts-elderray-straight-line",yValue:0,stroke:a,opacity:i}))}}]),t}(a.Component);l.propTypes={className:i.default.string,yAccessor:i.default.func,opacity:i.default.number,stroke:i.default.bool,bullPowerFill:i.default.string,bearPowerFill:i.default.string,straightLineStroke:i.default.string,straightLineOpacity:i.default.number,widthRatio:i.default.number,clip:i.default.bool.isRequired},l.defaultProps={className:"react-stockcharts-elderray-series",straightLineStroke:"#000000",straightLineOpacity:.3,opacity:.5,stroke:!0,bullPowerFill:"#6BA583",bearPowerFill:"#FF0000",widthRatio:.8,clip:!0},t.default=l},5001:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=d(o),s=d(n(2007)),c=d(n(3765)),u=n(9285),l=n(250),g=d(l);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor;(0,l.drawOnCanvasHelper)(e,this.props,t,n,l.identityStack,h)}},{key:"renderSVG",value:function(e){var t=e.xAccessor;return i.default.createElement("g",{className:"react-stockcharts-grouped-bar-series"},(0,l.svgHelper)(this.props,e,t,l.identityStack,h))}},{key:"render",value:function(){return i.default.createElement(c.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:u.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function h(e){return e.map((function(e){return r({},e,{x:e.x+e.offset-e.groupOffset,width:e.groupWidth})}))}p.propTypes={baseAt:s.default.oneOfType([s.default.number,s.default.func]).isRequired,direction:s.default.oneOf(["up","down"]).isRequired,stroke:s.default.bool.isRequired,widthRatio:s.default.number.isRequired,opacity:s.default.number.isRequired,fill:s.default.oneOfType([s.default.func,s.default.string]).isRequired,className:s.default.oneOfType([s.default.func,s.default.string]).isRequired,yAccessor:s.default.arrayOf(s.default.func)},p.defaultProps=r({},g.default.defaultProps,{widthRatio:.8,spaceBetweenBar:5}),t.default=p},9953:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=g(a),i=g(n(2007)),s=n(7670),c=g(n(3765)),u=n(9285),l=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor;!function(e,t,n,r){var a=t.stroke,o=t.strokeWidth,i=t.currentValueStroke,s=n.xScale,c=n.chartConfig.yScale,u=p(n.plotData,r),g=!0;u.forEach((function(t){e.strokeStyle=a[t.type],e.lineWidth=o,e.beginPath();var n=void 0;t.plot.forEach((function(t){var r=[s(t[0]),c(t[1])],a=r[0],o=r[1];g?(e.moveTo(a,o),g=!1):((0,l.isDefined)(n)&&e.lineTo(n,o),e.lineTo(a,o)),n=a})),e.stroke()}));var d=u[u.length-1].plot,h=d[d.length-1];e.beginPath(),e.lineWidth=1;var f=[s(h[0]),c(h[2]),c(h[3])],I=f[0],C=f[1],m=f[2];e.moveTo(I,C),e.lineTo(I+10,C),e.stroke(),e.beginPath(),e.strokeStyle=i,e.moveTo(I-10,m),e.lineTo(I,m),e.stroke()}(e,this.props,t,n)}},{key:"render",value:function(){return o.default.createElement(c.default,{svgDraw:this.renderSVG,canvasToDraw:u.getAxisCanvas,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.xAccessor,n=e.xScale,r=e.chartConfig.yScale,a=e.plotData,i=this.props,c=i.className,u=i.stroke,l=i.fill,g=i.strokeWidth,d=p(a,t).map((function(e,t){var a=(0,s.line)().x((function(e){return n(e[0])})).y((function(e){return r(e[1])})).curve(s.curveStepBefore);return a(e.plot),o.default.createElement("path",{key:t,d:a(e.plot),className:e.type,stroke:u[e.type],fill:l[e.type],strokeWidth:g})}));return o.default.createElement("g",{className:c},d)}}]),t}(a.Component);function p(e,t){for(var n=[],r={},a=e[0],o=t(a),i=0;i<e.length;i++)a=e[i],(0,l.isNotDefined)(a.close)||((0,l.isNotDefined)(r.type)&&(r.type=a.startAs),(0,l.isNotDefined)(r.plot)&&(r.plot=[]),o=t(a),r.plot.push([o,a.open]),(0,l.isDefined)(a.changeTo)&&(r.plot.push([o,a.changePoint]),r.added=!0,n.push(r),(r={type:a.changeTo,plot:[],added:!1}).plot.push([o,a.changePoint])));return r.added||(r.plot.push([o,a.close,a.current,a.reverseAt]),n.push(r)),n}d.propTypes={className:i.default.string,stroke:i.default.object,fill:i.default.object,strokeWidth:i.default.number.isRequired},d.defaultProps={className:"react-stockcharts-kagi",strokeWidth:2,stroke:{yang:"#6BA583",yin:"#E60000"},fill:{yang:"none",yin:"none"},currentValueStroke:"#000000"},t.default=d},7416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),s=p(i),c=p(n(2007)),u=n(7670),l=p(n(3765)),g=n(9285),d=n(5418);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n.isHover=n.isHover.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"isHover",value:function(e){var t=this.props,n=t.highlightOnHover,r=t.yAccessor,o=t.hoverTolerance;if(!n)return!1;var i=e.mouseXY,s=e.currentItem,c=e.xScale,u=e.plotData,l=e.chartConfig,g=l.yScale,p=l.origin,h=e.xAccessor,f=a(i,2),I=f[0],C=f[1],m=o,v=(0,d.getClosestItemIndexes)(u,c.invert(I),h),b=v.left,A=v.right;if(b===A){var y=g(r(s))+p[1],k=c(h(s))+p[0];return Math.pow(I-k,2)+Math.pow(C-y,2)<Math.pow(m,2)}var Z=u[b],S=u[A],w=c(h(Z))+p[0],B=g(r(Z))+p[1],G=c(h(S))+p[0],x=(g(r(S))+p[1]-B)/(G-w),R=-1*x*w+B,W=Math.round(x*I+R);return C>=W-m&&C<=W+m}},{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.yAccessor,a=n.stroke,o=n.strokeOpacity,i=n.strokeWidth,s=n.hoverStrokeWidth,c=n.defined,l=n.strokeDasharray,g=n.interpolation,p=n.canvasClip,h=this.props.connectNulls,f=t.xAccessor,I=t.xScale,C=t.chartConfig.yScale,m=t.plotData,v=t.hovering;p&&(e.save(),p(e,t)),e.lineWidth=v?s:i,e.strokeStyle=(0,d.hexToRGBA)(a,o),e.setLineDash((0,d.getStrokeDasharray)(l).split(","));var b=(0,u.line)().x((function(e){return Math.round(I(f(e)))})).y((function(e){return Math.round(C(r(e)))}));(0,d.isDefined)(g)&&b.curve(g),h||b.defined((function(e){return c(r(e))})),e.beginPath(),b.context(e)(m),e.stroke(),p&&e.restore()}},{key:"renderSVG",value:function(e){var t=this.props,n=t.yAccessor,r=t.stroke,a=t.strokeOpacity,o=t.strokeWidth,i=t.hoverStrokeWidth,c=t.defined,l=t.strokeDasharray,g=this.props.connectNulls,p=this.props,h=p.interpolation,f=p.style,I=e.xAccessor,C=e.chartConfig,m=e.xScale,v=e.plotData,b=e.hovering,A=C.yScale,y=(0,u.line)().x((function(e){return Math.round(m(I(e)))})).y((function(e){return Math.round(A(n(e)))}));(0,d.isDefined)(h)&&y.curve(h),g||y.defined((function(e){return c(n(e))}));var k=y(v),Z=this.props,S=Z.fill,w=Z.className;return s.default.createElement("path",{style:f,className:w+" "+(r?"":" line-stroke"),d:k,stroke:r,strokeOpacity:a,strokeWidth:b?i:o,strokeDasharray:(0,d.getStrokeDasharray)(l),fill:S})}},{key:"render",value:function(){var e=this.props,t=e.highlightOnHover,n=e.onHover,a=e.onUnHover,o=t||n||a?{isHover:this.isHover,drawOn:["mousemove","pan"],canvasToDraw:g.getMouseCanvas}:{drawOn:["pan"],canvasToDraw:g.getAxisCanvas};return s.default.createElement(l.default,r({svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,onClickWhenHover:this.props.onClick,onDoubleClickWhenHover:this.props.onDoubleClick,onContextMenuWhenHover:this.props.onContextMenu,onHover:this.props.onHover,onUnHover:this.props.onUnHover},o))}}]),t}(i.Component);h.propTypes={className:c.default.string,strokeWidth:c.default.number,strokeOpacity:c.default.number,stroke:c.default.string,hoverStrokeWidth:c.default.number,fill:c.default.string,defined:c.default.func,hoverTolerance:c.default.number,strokeDasharray:c.default.oneOf(d.strokeDashTypes),highlightOnHover:c.default.bool,onClick:c.default.func,onDoubleClick:c.default.func,onHover:c.default.func,onUnHover:c.default.func,onContextMenu:c.default.func,yAccessor:c.default.func,connectNulls:c.default.bool,interpolation:c.default.func,canvasClip:c.default.func,style:c.default.object},h.defaultProps={className:"line ",strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682B4",strokeDasharray:"Solid",defined:function(e){return!isNaN(e)},hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:function(e){console.log("Click",e)},onDoubleClick:function(e){console.log("Double Click",e)},onContextMenu:function(e){console.log("Right Click",e)}},t.default=h},8645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=l(a),i=l(n(2007)),s=l(n(3105)),c=l(n(7416)),u=l(n(4212));function l(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.yAccessorForMACD=n.yAccessorForMACD.bind(n),n.yAccessorForSignal=n.yAccessorForSignal.bind(n),n.yAccessorForDivergence=n.yAccessorForDivergence.bind(n),n.yAccessorForDivergenceBase=n.yAccessorForDivergenceBase.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorForMACD",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).macd}},{key:"yAccessorForSignal",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).signal}},{key:"yAccessorForDivergence",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).divergence}},{key:"yAccessorForDivergenceBase",value:function(e,t){return t(0)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.opacity,r=e.divergenceStroke,a=e.widthRatio,i=e.width,l=this.props,g=l.stroke,d=l.fill,p=this.props.clip,h=this.props,f=h.zeroLineStroke,I=h.zeroLineOpacity;return o.default.createElement("g",{className:t},o.default.createElement(s.default,{baseAt:this.yAccessorForDivergenceBase,className:"macd-divergence",width:i,widthRatio:a,stroke:r,fill:d.divergence,opacity:n,clip:p,yAccessor:this.yAccessorForDivergence}),o.default.createElement(c.default,{yAccessor:this.yAccessorForMACD,stroke:g.macd,fill:"none"}),o.default.createElement(c.default,{yAccessor:this.yAccessorForSignal,stroke:g.signal,fill:"none"}),o.default.createElement(u.default,{stroke:f,opacity:I,yValue:0}))}}]),t}(a.Component);g.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,opacity:i.default.number,divergenceStroke:i.default.bool,zeroLineStroke:i.default.string,zeroLineOpacity:i.default.number,clip:i.default.bool.isRequired,stroke:i.default.shape({macd:i.default.string.isRequired,signal:i.default.string.isRequired}).isRequired,fill:i.default.shape({divergence:i.default.oneOfType([i.default.string,i.default.func]).isRequired}).isRequired,widthRatio:i.default.number,width:s.default.propTypes.width},g.defaultProps={className:"react-stockcharts-macd-series",zeroLineStroke:"#000000",zeroLineOpacity:.3,opacity:.6,divergenceStroke:!1,clip:!0,widthRatio:.5,width:s.default.defaultProps.width},t.default=g},8029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3904),o=n(2791),i=g(o),s=g(n(2007)),c=g(n(3765)),u=n(9285),l=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props.yAccessor,r=t.xAccessor,o=t.xScale,i=t.chartConfig.yScale,s=t.plotData;!function(e,t){var n=t.strokeWidth,r=t.bars,o=(0,a.nest)().key((function(e){return e.stroke})).entries(r);e.lineWidth=n,o.forEach((function(t){var n=t.key,r=t.values;e.strokeStyle=n,r.forEach((function(t){e.beginPath(),e.moveTo(t.x,t.y1),e.lineTo(t.x,t.y2),e.moveTo(t.openX1,t.openY),e.lineTo(t.openX2,t.openY),e.moveTo(t.closeX1,t.closeY),e.lineTo(t.closeX2,t.closeY),e.stroke()}))}))}(e,p(this.props,r,n,o,i,s))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(c.default,{svgDraw:this.renderSVG,canvasToDraw:u.getAxisCanvas,canvasDraw:this.drawOnCanvas,clip:e,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.yAccessor,a=e.xAccessor,o=e.xScale,s=e.chartConfig.yScale,c=e.plotData,u=p(this.props,a,r,o,s,c),l=u.strokeWidth,g=u.bars;return i.default.createElement("g",{className:n},g.map((function(e,t){return i.default.createElement("path",{key:t,className:e.className,stroke:e.stroke,strokeWidth:l,d:"M"+e.openX1+" "+e.openY+" L"+e.openX2+" "+e.openY+" M"+e.x+" "+e.y1+" L"+e.x+" "+e.y2+" M"+e.closeX1+" "+e.closeY+" L"+e.closeX2+" "+e.closeY})})))}}]),t}(o.Component);function p(e,t,n,r,a,o){var i=e.classNames,s=e.stroke,c=(0,l.functor)(s),u=(0,l.functor)(i),g=r(t(o[o.length-1]))-r(t(o[0])),d=Math.max(1,Math.round(g/(o.length-1)/2)-1.5),p=Math.min(d,6),h=o.filter((function(e){return(0,l.isDefined)(n(e).close)})).map((function(e){var o=n(e),i=Math.round(r(t(e))),s=a(o.high),l=a(o.low),g=i-d,h=i+p/2,f=a(o.open),I=i-p/2,C=i+d,m=a(o.close),v=u(e);return{x:i,y1:s,y2:l,openX1:g,openX2:h,openY:f,closeX1:I,closeX2:C,closeY:m,stroke:c(e),className:v}}));return{barWidth:d,strokeWidth:p,bars:h}}d.propTypes={className:s.default.string,classNames:s.default.oneOfType([s.default.func,s.default.string]).isRequired,stroke:s.default.oneOfType([s.default.func,s.default.string]).isRequired,yAccessor:s.default.func.isRequired,clip:s.default.bool.isRequired},d.defaultProps={className:"react-stockcharts-ohlc",yAccessor:function(e){return{open:e.open,high:e.high,low:e.low,close:e.close}},classNames:function(e){return(0,l.isDefined)(e.absoluteChange)?e.absoluteChange>0?"up":"down":"firstbar"},stroke:function(e){return(0,l.isDefined)(e.absoluteChange)?e.absoluteChange>0?"#6BA583":"#FF0000":"#000000"},clip:!0},t.default=d},2808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6263),o=n(2791),i=d(o),s=d(n(2007)),c=d(n(3765)),u=n(9285),l=n(250),g=n(5418);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props.yAccessor,r=h(this.props,t,n);(0,l.drawOnCanvas2)(this.props,e,r)}},{key:"renderSVG",value:function(e){var t=this.props.yAccessor,n=h(this.props,e,t);return i.default.createElement("g",{className:"react-stockcharts-bar-series"},(0,l.getBarsSVG2)(this.props,n))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(c.default,{svgDraw:this.renderSVG,canvasToDraw:u.getAxisCanvas,canvasDraw:this.drawOnCanvas,clip:e,drawOn:["pan"]})}}]),t}(o.Component);function h(e,t,n){var r=t.xScale,o=t.xAccessor,i=t.chartConfig.yScale,s=t.plotData,c=e.baseAt,u=e.className,l=e.fill,d=e.stroke,p=(0,g.functor)(u),h=(0,g.functor)(l),f=(0,g.functor)(c),I=(0,g.functor)(e.width)(e,t),C=Math.floor(.5*I),m=s.map((function(e){for(var t=n.map((function(t,n){var a=t(e);if(!(0,g.isNotDefined)(a)){var s=o(e),c=Math.round(r(s))-C,u=i(a);return{width:2*C,x:c,y:u,className:p(e,n),stroke:d?h(e,n):"none",fill:h(e,n),i:n}}})).filter((function(e){return(0,g.isDefined)(e)})),a=f(r,i,e),s=void 0,c=t.length-1;c>=0;c--)(s=a-t[c].y)<0&&(t[c].y=a,s*=-1),t[c].height=s,a=t[c].y;return t}));return(0,a.merge)(m)}p.propTypes={baseAt:s.default.oneOfType([s.default.number,s.default.func]).isRequired,direction:s.default.oneOf(["up","down"]).isRequired,stroke:s.default.bool.isRequired,widthRatio:s.default.number.isRequired,opacity:s.default.number.isRequired,fill:s.default.oneOfType([s.default.func,s.default.string]).isRequired,className:s.default.oneOfType([s.default.func,s.default.string]).isRequired,xAccessor:s.default.func,yAccessor:s.default.arrayOf(s.default.func),xScale:s.default.func,yScale:s.default.func,plotData:s.default.array,clip:s.default.bool.isRequired},p.defaultProps={baseAt:function(e,t){return(0,g.first)(t.range())},direction:"up",className:"bar",stroke:!1,fill:"#4682B4",opacity:1,widthRatio:.5,width:g.plotDataLengthBarWidth,clip:!0},t.default=p},6730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=g(o),s=g(n(2007)),c=g(n(3765)),u=n(9285),l=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,a=p(t.xScale,n,t.chartConfig.yScale,t.plotData);!function(e,t,n){var a=t.stroke,o=t.fill,i=t.strokeWidth;e.lineWidth=i,n.forEach((function(t){var n=r(t.offset,2),i=n[0],s=n[1];t.boxes.forEach((function(n){if(t.direction>0)e.fillStyle=o.up,e.strokeStyle=a.up,e.beginPath(),e.moveTo(i,s+n.open),e.lineTo(i+n.columnWidth,s+n.close),e.moveTo(i,s+n.close),e.lineTo(i+n.columnWidth,s+n.open),e.stroke();else{e.fillStyle=o.down,e.strokeStyle=a.down,e.beginPath();var r=i+n.columnWidth/2,c=s+n.open+n.boxHeight/2,u=n.columnWidth/2,l=n.boxHeight/2;e.ellipse(r,c,u,l,0,0,2*Math.PI),e.stroke()}}))})),e.stroke()}(e,this.props,a)}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(c.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:u.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.xAccessor,n=e.xScale,r=e.chartConfig.yScale,a=e.plotData,o=this.props,s=o.stroke,c=o.fill,u=o.strokeWidth,l=o.className,g=p(n,t,r,a);return i.default.createElement("g",{className:l},g.map((function(e,t){return i.default.createElement("g",{key:t,className:e.className,transform:"translate("+e.offset[0]+", "+e.offset[1]+")"},e.boxes.map((function(n,r){return e.direction>0?i.default.createElement("g",{key:t+"-"+r},i.default.createElement("line",{className:"up",strokeWidth:u,stroke:s.up,fill:c.up,x1:0,y1:n.open,x2:n.columnWidth,y2:n.close}),i.default.createElement("line",{className:"up",strokeWidth:u,stroke:s.up,fill:c.up,x1:0,y1:n.close,x2:n.columnWidth,y2:n.open})):i.default.createElement("ellipse",{key:t+"-"+r,className:"down",strokeWidth:u,stroke:s.down,fill:c.down,cx:n.columnWidth/2,cy:(n.open+n.close)/2,rx:n.columnWidth/2,ry:n.boxHeight/2})})))})))}}]),t}(o.Component);function p(e,t,n,r){for(var a=(e(t(r[r.length-1]))-e(t(r[0])))/(r.length-1),o=void 0,i=0;(0,l.isNotDefined)(o)&&(0,l.isDefined)(r[i].close);)o=r[i].boxes[0],i++;var s=Math.abs(n(o.open)-n(o.close));return r.filter((function(e){return(0,l.isDefined)(e.close)})).map((function(r){var o=r.boxes.map((function(e){return{columnWidth:a,boxHeight:s,open:n(e.open),close:n(e.close)}})),i=e(t(r))-a/2;return{boxes:o,direction:r.direction,offset:[i,0]}}))}d.propTypes={className:s.default.string,strokeWidth:s.default.number.isRequired,stroke:s.default.object.isRequired,fill:s.default.object.isRequired,clip:s.default.bool.isRequired},d.defaultProps={className:"react-stockcharts-point-and-figure",strokeWidth:1,stroke:{up:"#6BA583",down:"#FF0000"},fill:{up:"none",down:"none"},clip:!0},t.default=d},3742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=g(a),i=g(n(2007)),s=g(n(7416)),c=g(n(4212)),u=g(n(139)),l=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.renderClip=n.renderClip.bind(n),n.topAndBottomClip=n.topAndBottomClip.bind(n),n.mainClip=n.mainClip.bind(n);var r=String(Math.round(1e4*Math.random()*1e4));n.clipPathId1="rsi-clip-"+r;var a=String(Math.round(1e4*Math.random()*1e4));return n.clipPathId2="rsi-clip-"+a,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"topAndBottomClip",value:function(e,t){var n=t.chartConfig,r=this.props,a=r.overSold,o=r.overBought,i=n.yScale,s=n.width;e.beginPath(),e.rect(0,i(a),s,i(o)-i(a)),e.clip()}},{key:"mainClip",value:function(e,t){var n=t.chartConfig,r=this.props,a=r.overSold,o=r.overBought,i=n.yScale,s=n.width,c=n.height;e.beginPath(),e.rect(0,0,s,i(a)),e.rect(0,i(o),s,c-i(o)),e.clip()}},{key:"renderClip",value:function(e){var t=e.chartConfig,n=this.props,r=n.overSold,a=n.overBought,i=t.yScale,s=t.width,c=t.height;return o.default.createElement("defs",null,o.default.createElement("clipPath",{id:this.clipPathId1},o.default.createElement("rect",{x:0,y:i(r),width:s,height:i(a)-i(r)})),o.default.createElement("clipPath",{id:this.clipPathId2},o.default.createElement("rect",{x:0,y:0,width:s,height:i(r)}),o.default.createElement("rect",{x:0,y:i(a),width:s,height:c-i(a)})))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.stroke,r=e.opacity,a=e.strokeDasharray,i=e.strokeWidth,l=this.props.yAccessor,g=this.props,d=g.overSold,p=g.middle,h=g.overBought,f={clipPath:"url(#"+this.clipPathId1+")"},I={clipPath:"url(#"+this.clipPathId2+")"};return o.default.createElement("g",{className:t},o.default.createElement(u.default,null,this.renderClip),o.default.createElement(c.default,{stroke:n.top,opacity:r.top,yValue:d,strokeDasharray:a.top,strokeWidth:i.top}),o.default.createElement(c.default,{stroke:n.middle,opacity:r.middle,yValue:p,strokeDasharray:a.middle,strokeWidth:i.middle}),o.default.createElement(c.default,{stroke:n.bottom,opacity:r.bottom,yValue:h,strokeDasharray:a.bottom,strokeWidth:i.bottom}),o.default.createElement(s.default,{style:f,canvasClip:this.topAndBottomClip,className:t,yAccessor:l,stroke:n.insideThreshold||n.line,strokeWidth:i.insideThreshold,strokeDasharray:a.line}),o.default.createElement(s.default,{style:I,canvasClip:this.mainClip,className:t,yAccessor:l,stroke:n.outsideThreshold||n.line,strokeWidth:i.outsideThreshold,strokeDasharray:a.line}))}}]),t}(a.Component);d.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,stroke:i.default.shape({top:i.default.string.isRequired,middle:i.default.string.isRequired,bottom:i.default.string.isRequired,outsideThreshold:i.default.string.isRequired,insideThreshold:i.default.string.isRequired}).isRequired,opacity:i.default.shape({top:i.default.number.isRequired,middle:i.default.number.isRequired,bottom:i.default.number.isRequired}).isRequired,strokeDasharray:i.default.shape({line:i.default.oneOf(l.strokeDashTypes),top:i.default.oneOf(l.strokeDashTypes),middle:i.default.oneOf(l.strokeDashTypes),bottom:i.default.oneOf(l.strokeDashTypes)}).isRequired,strokeWidth:i.default.shape({outsideThreshold:i.default.number.isRequired,insideThreshold:i.default.number.isRequired,top:i.default.number.isRequired,middle:i.default.number.isRequired,bottom:i.default.number.isRequired}).isRequired,overSold:i.default.number.isRequired,middle:i.default.number.isRequired,overBought:i.default.number.isRequired},d.defaultProps={className:"react-stockcharts-rsi-series",stroke:{line:"#000000",top:"#B8C2CC",middle:"#8795A1",bottom:"#B8C2CC",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:"ShortDash",middle:"ShortDash",bottom:"ShortDash"},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30},t.default=d},7656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=l(a),i=l(n(2007)),s=l(n(3765)),c=n(9285),u=n(5418);function l(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,r=t.xScale,a=t.chartConfig.yScale,o=t.plotData,i=this.props.yAccessor;!function(e,t){t.forEach((function(t){e.beginPath(),e.strokeStyle=t.stroke,e.fillStyle=t.fill,e.rect(t.x,t.y,t.width,t.height),e.closePath(),e.fill()}))}(e,d(this.props,o,r,n,a,i))}},{key:"render",value:function(){var e=this.props.clip;return o.default.createElement(s.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:c.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.xAccessor,n=e.xScale,r=e.chartConfig.yScale,a=e.plotData,i=this.props.yAccessor,s=d(this.props,a,n,t,r,i).map((function(e,t){return o.default.createElement("rect",{key:t,className:e.className,fill:e.fill,x:e.x,y:e.y,width:e.width,height:e.height})}));return o.default.createElement("g",null,o.default.createElement("g",{className:"candle"},s))}}]),t}(a.Component);function d(e,t,n,r,a,o){var i=e.classNames,s=e.fill,c=(n(r(t[t.length-1]))-n(r(t[0])))/(t.length-1);return t.filter((function(e){return(0,u.isDefined)(o(e).close)})).map((function(e){var t=o(e),u=n(r(e))-.5*c,l=a(Math.max(t.open,t.close)),g=Math.abs(a(t.open)-a(t.close));return{className:t.open<=t.close?i.up:i.down,fill:e.fullyFormed?t.open<=t.close?s.up:s.down:s.partial,x:u,y:l,height:g,width:c}}))}g.propTypes={classNames:i.default.shape({up:i.default.string,down:i.default.string}),stroke:i.default.shape({up:i.default.string,down:i.default.string}),fill:i.default.shape({up:i.default.string,down:i.default.string,partial:i.default.string}),yAccessor:i.default.func.isRequired,clip:i.default.bool.isRequired},g.defaultProps={classNames:{up:"up",down:"down"},stroke:{up:"none",down:"none"},fill:{up:"#6BA583",down:"#E60000",partial:"#4682B4"},yAccessor:function(e){return{open:e.open,high:e.high,low:e.low,close:e.close}},clip:!0},t.default=g},2313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=g(o),s=g(n(2007)),c=g(n(3765)),u=n(9285),l=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n.isHover=n.isHover.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"isHover",value:function(e){var t=e.mouseXY,n=e.currentItem,r=e.chartConfig.yScale,a=this.props.yAccessor,o=t[1],i=r(a(n));return o<i+5&&o>i-5}},{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.yAccessor,a=n.fill,o=n.opacity,i=t.xAccessor,s=t.plotData,c=t.xScale,u=t.chartConfig.yScale,g=t.hovering,d=(c(i((0,l.last)(s)))-c(i((0,l.first)(s))))/s.length*.5/2,p=Math.min(2,Math.max(.5,d))+(g?2:0);s.forEach((function(t){var n=c(i(t)),s=u(r(t)),g=r(t)>t.close?a.falling:a.rising;e.fillStyle=(0,l.hexToRGBA)(g,o),e.strokeStyle=g,e.beginPath(),e.ellipse(n,s,p,p,0,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}))}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.yAccessor,a=e.xAccessor,o=e.plotData,s=e.xScale,c=e.chartConfig.yScale;return i.default.createElement("g",{className:n},o.filter((function(e){return(0,l.isDefined)(r(e))})).map((function(e,t){return i.default.createElement("circle",{key:t,cx:s(a(e)),cy:c(r(e)),r:3,fill:"green"})})))}},{key:"render",value:function(){var e=this.props.highlightOnHover?{isHover:this.isHover,drawOn:["mousemove","pan"],canvasToDraw:u.getMouseCanvas}:{drawOn:["pan"],canvasToDraw:u.getAxisCanvas};return i.default.createElement(c.default,r({svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,onClickWhenHover:this.props.onClick,onDoubleClickWhenHover:this.props.onDoubleClick,onContextMenuWhenHover:this.props.onContextMenu},e))}}]),t}(o.Component);d.propTypes={className:s.default.string,fill:s.default.object.isRequired,yAccessor:s.default.func.isRequired,opacity:s.default.number.isRequired,onClick:s.default.func,onDoubleClick:s.default.func,onContextMenu:s.default.func,highlightOnHover:s.default.bool},d.defaultProps={className:"react-stockcharts-sar",fill:{falling:"#4682B4",rising:"#15EC2E"},highlightOnHover:!0,opacity:.2,onClick:function(e){console.log("Click",e)},onDoubleClick:function(e){console.log("Double Click",e)},onContextMenu:function(e){console.log("Right Click",e)}},t.default=d},139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=c(a),i=c(n(2007)),s=c(n(3765));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var g=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this.props.children;return o.default.createElement(s.default,{drawOn:[],svgDraw:e})}}]),t}(a.Component);g.propTypes={children:i.default.func.isRequired},t.default=g},9786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=d(o),s=d(n(2007)),c=n(3904),u=d(n(3765)),l=n(9285),g=n(5418);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,a=h(this.props,t,n);!function(e,t,n){var a=t.markerProps;(0,c.nest)().key((function(e){return e.fill})).key((function(e){return e.stroke})).entries(n).forEach((function(t){var n=t.key,o=t.values;"none"!==n&&(e.fillStyle=n),o.forEach((function(t){t.values.forEach((function(t){var o=t.marker;o.drawOnCanvas(r({},o.defaultProps,a,{fill:n}),t,e)}))}))}))}(e,this.props,a)}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,a=t.markerProps,o=e.xAccessor,s=h(this.props,e,o);return i.default.createElement("g",{className:n},s.map((function(e,t){var n=e.marker;return i.default.createElement(n,r({key:t},a,{point:e}))})))}},{key:"render",value:function(){return i.default.createElement(u.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:l.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function h(e,t,n){var a=e.yAccessor,o=e.markerProvider,i=e.markerProps,s=e.marker,c=t.xScale,u=t.chartConfig.yScale,l=t.plotData;if(!o&&!s)throw new Error("required prop, either marker or markerProvider missing");return l.map((function(e){o&&(s=o(e));var t=r({},s.defaultProps,i),l=(0,g.functor)(t.fill),d=(0,g.functor)(t.stroke);return{x:c(n(e)),y:u(a(e)),fill:(0,g.hexToRGBA)(l(e),t.opacity),stroke:d(e),datum:e,marker:s}}))}p.propTypes={className:s.default.string,yAccessor:s.default.func.isRequired,marker:s.default.func,markerProvider:s.default.func,markerProps:s.default.object},p.defaultProps={className:"react-stockcharts-scatter"},t.default=p},4739:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2791)),a=i(n(2007)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.className,n=e.stroke,a=e.strokeWidth,i=e.opacity,s=e.fill,c=e.point,u=e.width,l=(0,o.functor)(u)(c.datum),g=c.x-l/2,d=c.y-l/2;return r.default.createElement("rect",{className:t,x:g,y:d,stroke:n,strokeWidth:a,fillOpacity:i,fill:s,width:l,height:l})}s.propTypes={stroke:a.default.string,fill:a.default.string.isRequired,opacity:a.default.number.isRequired,point:a.default.shape({x:a.default.number.isRequired,y:a.default.number.isRequired,datum:a.default.object.isRequired}).isRequired,className:a.default.string,strokeWidth:a.default.number,width:a.default.oneOfType([a.default.number,a.default.func]).isRequired},s.defaultProps={stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-rect"},s.drawOnCanvas=function(e,t,n){var r=e.stroke,a=e.fill,i=e.opacity,c=e.strokeWidth;n.strokeStyle=r,n.lineWidth=c,"none"!==a&&(n.fillStyle=(0,o.hexToRGBA)(a,i)),s.drawOnCanvasWithNoStateChange(e,t,n)},s.drawOnCanvasWithNoStateChange=function(e,t,n){var r=e.width,a=(0,o.functor)(r)(t.datum),i=t.x-a/2,s=t.y-a/2;n.beginPath(),n.rect(i,s,a,a),n.stroke(),n.fill()},t.default=s},250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotateXY=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.identityStack=I,t.drawOnCanvasHelper=C,t.svgHelper=v,t.getBarsSVG2=y,t.drawOnCanvas2=k,t.getBars=Z;var o=n(2791),i=h(o),s=h(n(2007)),c=n(3904),u=n(6263),l=n(7670),g=h(n(3765)),d=n(9285),p=n(5418);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor;C(e,this.props,t,n,l.stack)}},{key:"renderSVG",value:function(e){var t=e.xAccessor;return i.default.createElement("g",null,v(this.props,e,t,l.stack))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(g.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:d.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function I(){var e=[];function t(t){return e.map((function(e,n){var r=t.map((function(t){var n=[0,t[e]];return n.data=t,n}));return r.key=e,r.index=n,r}))}return t.keys=function(n){return arguments.length?(e=n,t):e},t}function C(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.identity,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:A,s=n.xScale,c=n.chartConfig.yScale,u=n.plotData,l=b(t,r,u,s,c,a,i,o);k(t,e,l)}function m(e){return Array.isArray(e)?e:[e]}function v(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p.identity,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:A,i=t.xScale,s=t.chartConfig.yScale,c=t.plotData,u=b(e,n,c,i,s,r,o,a);return y(e,u)}function b(e,t,n,r,a,o,i,s){var c=e.yAccessor,u=e.swapScales;return Z(e,u?c:t,m(u?e.xAccessor:c),u?a:r,u?r:a,n,o,u?i:s)}f.propTypes={baseAt:s.default.oneOfType([s.default.number,s.default.func]).isRequired,direction:s.default.oneOf(["up","down"]).isRequired,stroke:s.default.bool.isRequired,width:s.default.oneOfType([s.default.number,s.default.func]).isRequired,opacity:s.default.number.isRequired,fill:s.default.oneOfType([s.default.func,s.default.string]).isRequired,className:s.default.oneOfType([s.default.func,s.default.string]).isRequired,clip:s.default.bool.isRequired},f.defaultProps={baseAt:function(e,t){return(0,p.head)(t.range())},direction:"up",className:"bar",stroke:!0,fill:"#4682B4",opacity:.5,width:p.plotDataLengthBarWidth,widthRatio:.8,clip:!0,swapScales:!1};var A=t.rotateXY=function(e){return e.map((function(e){return r({},e,{x:e.y,y:e.x,height:e.width,width:e.height})}))};function y(e,t){var n=e.opacity;return t.map((function(e,t){return e.width<=1?i.default.createElement("line",{key:t,className:e.className,stroke:e.fill,x1:e.x,y1:e.y,x2:e.x,y2:e.y+e.height}):i.default.createElement("rect",{key:t,className:e.className,stroke:e.stroke,fill:e.fill,x:e.x,y:e.y,width:e.width,fillOpacity:n,height:e.height})}))}function k(e,t,n){var r=e.stroke;(0,c.nest)().key((function(e){return e.fill})).entries(n).forEach((function(n){var a=n.key,o=n.values;(0,p.head)(o).width>1&&(t.strokeStyle=a);var i=(0,p.head)(o).width<=1?a:(0,p.hexToRGBA)(a,e.opacity);t.fillStyle=i,o.forEach((function(e){e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):(t.fillRect(e.x,e.y,e.width,e.height),r&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))}function Z(e,t,n,a,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:I,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:p.identity,l=e.baseAt,g=e.className,d=e.fill,h=e.stroke,f=e.spaceBetweenBar,C=void 0===f?0:f,m=(0,p.functor)(g),v=(0,p.functor)(d),b=(0,p.functor)(l),A=(0,p.functor)(e.width),y=A(e,{xScale:a,xAccessor:t,plotData:i}),k=Math.round(y),Z=(k-C*(n.length-1))/n.length,S=1===k?0:.5*y,w=i.map((function(e){var r={appearance:{},x:t(e)};return n.forEach((function(t,n){var a="y"+n;r[a]=t(e);var o={className:m(e,n),stroke:h?v(e,n):"none",fill:v(e,n)};r.appearance[a]=o})),r})),B=n.map((function(e,t){return"y"+t})),G=s().keys(B)(w),x=G.map((function(e,t){var n=e.key;return e.map((function(e){var r=[e[0],e[1]];return r.data={x:e.data.x,i:t,appearance:e.data.appearance[n]},r}))})),R=(0,u.merge)(x).map((function(e){var t=o(e[1]),n=b(a,o,e.data)-o(e[1]-e[0]);return n<0&&(t+=n,n=-n),r({},e.data.appearance,{x:Math.round(a(e.data.x)-y/2),y:t,groupOffset:Math.round(S-(e.data.i>0?(Z+C)*e.data.i:0)),groupWidth:Math.round(Z),offset:Math.round(S),height:n,width:k})})).filter((function(e){return!isNaN(e.y)}));return c(R)}t.default=f},5021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=u(a),i=u(n(2007)),s=u(n(7416)),c=u(n(4212));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.yAccessorForD=n.yAccessorForD.bind(n),n.yAccessorForK=n.yAccessorForK.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorForD",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).D}},{key:"yAccessorForK",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).K}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.stroke,r=e.refLineOpacity,a=this.props,i=a.overSold,u=a.middle,l=a.overBought;return o.default.createElement("g",{className:t},o.default.createElement(s.default,{yAccessor:this.yAccessorForD,stroke:n.dLine,fill:"none"}),o.default.createElement(s.default,{yAccessor:this.yAccessorForK,stroke:n.kLine,fill:"none"}),o.default.createElement(c.default,{stroke:n.top,opacity:r,yValue:i}),o.default.createElement(c.default,{stroke:n.middle,opacity:r,yValue:u}),o.default.createElement(c.default,{stroke:n.bottom,opacity:r,yValue:l}))}}]),t}(a.Component);l.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,stroke:i.default.shape({top:i.default.string.isRequired,middle:i.default.string.isRequired,bottom:i.default.string.isRequired,dLine:i.default.string.isRequired,kLine:i.default.string.isRequired}).isRequired,overSold:i.default.number.isRequired,middle:i.default.number.isRequired,overBought:i.default.number.isRequired,refLineOpacity:i.default.number.isRequired},l.defaultProps={className:"react-stockcharts-stochastic-series",stroke:{top:"#964B00",middle:"#000000",bottom:"#964B00",dLine:"#EA2BFF",kLine:"#74D400"},overSold:80,middle:50,overBought:20,refLineOpacity:.3},t.default=l},4212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=g(o),s=g(n(2007)),c=n(5418),u=g(n(3765)),l=n(9285);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.type,a=n.stroke,o=n.strokeWidth,i=n.opacity,s=n.strokeDasharray,u=this.props,l=u.yValue,g=u.xValue,d=t.xScale,h=t.chartConfig,f=h.yScale,I=h.width,C=h.height;e.beginPath(),e.strokeStyle=(0,c.hexToRGBA)(a,i),e.lineWidth=o;var m=p(r,d,f,g,l,I,C),v=m.x1,b=m.y1,A=m.x2,y=m.y2;e.setLineDash((0,c.getStrokeDasharray)(s).split(",")),e.moveTo(v,b),e.lineTo(A,y),e.stroke()}},{key:"render",value:function(){return i.default.createElement(u.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:l.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.width,n=e.height,a=e.xScale,o=e.chartConfig.yScale,s=this.props.className,u=this.props,l=u.type,g=u.stroke,d=u.strokeWidth,h=u.opacity,f=u.strokeDasharray,I=this.props,C=I.yValue,m=p(l,a,o,I.xValue,C,t,n);return i.default.createElement("line",r({className:s,strokeDasharray:(0,c.getStrokeDasharray)(f),stroke:g,strokeWidth:d,strokeOpacity:h},m))}}]),t}(o.Component);function p(e,t,n,r,a,o,i){return"horizontal"===e?{x1:0,y1:Math.round(n(a)),x2:o,y2:Math.round(n(a))}:{x1:Math.round(t(r)),y1:0,x2:Math.round(t(r)),y2:i}}d.propTypes={className:s.default.string,type:s.default.oneOf(["vertical","horizontal"]),stroke:s.default.string,strokeWidth:s.default.number,strokeDasharray:s.default.oneOf(c.strokeDashTypes),opacity:s.default.number.isRequired,yValue:function(e,t){return"vertical"===e.type&&(0,c.isDefined)(e[t])?new Error("Do not define `yValue` when type is `vertical`, define the `xValue` prop"):"horizontal"===e.type&&(0,c.isNotDefined)(e[t])?new Error("when type = `horizontal` `yValue` is required"):void 0},xValue:function(e,t){return"horizontal"===e.type&&(0,c.isDefined)(e[t])?new Error("Do not define `xValue` when type is `horizontal`, define the `yValue` prop"):"vertical"===e.type&&(0,c.isNotDefined)(e[t])?new Error("when type = `vertical` `xValue` is required"):void 0}},d.defaultProps={className:"line ",type:"horizontal",stroke:"#000000",opacity:.5,strokeWidth:1,strokeDasharray:"Solid"},t.default=d},118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2791)),a=i(n(2007)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.className,n=e.strokeWidth,a=e.opacity,i=e.point,s=e.width,l=u(e,i);if(null==l)return null;var g=function(e){var t=e.fill,n=e.point;return t instanceof Function?t(n.datum):t}(e),d=function(e){var t=e.stroke,n=e.point;return t instanceof Function?t(n.datum):t}(e),p=(0,o.functor)(s)(i.datum),h=i.x,f=i.y,I=c(p),C=I.innerOpposite,m="\n\t\t"+h+" "+(f-I.innerHypotenuse)+",\n\t\t"+(h+p/2)+" "+(f+C)+",\n\t\t"+(h-p/2)+" "+(f+C)+"\n\t";return r.default.createElement("polygon",{className:t,points:m,stroke:d,strokeWidth:n,fillOpacity:a,fill:g,transform:0!==l?"rotate("+l+", "+h+", "+f+")":null})}function c(e){var t=e/2*(1/Math.cos(30*Math.PI/180));return{innerOpposite:e/2*(1/Math.tan(60*Math.PI/180)),innerHypotenuse:t}}function u(e,t){var n=e.direction,r=n instanceof Function?n(t.datum):n;if("hide"===r)return null;var a=0;switch(r){case"bottom":a=180;break;case"left":a=-90;break;case"right":a=90}return a}s.propTypes={direction:a.default.oneOfType([a.default.oneOf(["top","bottom","left","right","hide"]),a.default.func]).isRequired,stroke:a.default.oneOfType([a.default.string,a.default.func]).isRequired,fill:a.default.oneOfType([a.default.string,a.default.func]).isRequired,opacity:a.default.number.isRequired,point:a.default.shape({x:a.default.number.isRequired,y:a.default.number.isRequired,datum:a.default.object.isRequired}).isRequired,className:a.default.string,strokeWidth:a.default.number,width:a.default.oneOfType([a.default.number,a.default.func]).isRequired},s.defaultProps={direction:"top",stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-triangle"},s.drawOnCanvas=function(e,t,n){var r=e.stroke,a=e.fill,i=e.opacity,c=e.strokeWidth;n.strokeStyle=r,n.lineWidth=c,"none"!==a&&(n.fillStyle=(0,o.hexToRGBA)(a,i)),s.drawOnCanvasWithNoStateChange(e,t,n)},s.drawOnCanvasWithNoStateChange=function(e,t,n){var r=e.width,a=(0,o.functor)(r)(t.datum),i=t.x,s=t.y,l=c(a),g=l.innerOpposite,d=l.innerHypotenuse,p=u(e,t);n.beginPath(),n.moveTo(i,s-d),n.lineTo(i+a/2,s+g),n.lineTo(i-a/2,s+g),n.stroke(),null!==p&&0!==p&&(n.save(),n.translate(i,s),n.rotate(p*Math.PI/180),n.fill(),n.restore()),n.fill()},t.default=s},3986:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),s=f(i),c=f(n(2007)),u=n(6263),l=n(3904),g=n(984),d=f(n(3765)),p=n(9285),h=n(5418);function f(e){return e&&e.__esModule?e:{default:e}}var I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,r=t.width,a=C(this.props,t,n,r),o=a.rects,i=a.sessionBg;!function(e,t,n,r){var a=t.opacity,o=t.sessionBackGround,i=t.sessionBackGroundOpacity;t.showSessionBackground&&(e.fillStyle=(0,h.hexToRGBA)(o,i),r.forEach((function(t){var n=t.x,r=t.y,a=t.height,o=t.width;e.beginPath(),e.rect(n,r,o,a),e.closePath(),e.fill()})));n.forEach((function(t){var n=t.x,r=t.y,o=t.height,i=t.w1,s=t.w2,c=t.stroke1,u=t.stroke2,l=t.fill1,g=t.fill2;i>0&&(e.fillStyle=(0,h.hexToRGBA)(l,a),"none"!==c&&(e.strokeStyle=c),e.beginPath(),e.rect(n,r,i,o),e.closePath(),e.fill(),"none"!==c&&e.stroke()),s>0&&(e.fillStyle=(0,h.hexToRGBA)(g,a),"none"!==u&&(e.strokeStyle=u),e.beginPath(),e.rect(n+i,r,s,o),e.closePath(),e.fill(),"none"!==u&&e.stroke())}))}(e,this.props,o,i)}},{key:"render",value:function(){return s.default.createElement(d.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:p.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.opacity,o=this.props,i=o.showSessionBackground,c=o.sessionBackGround,u=o.sessionBackGroundOpacity,l=e.xAccessor,g=e.width,d=C(this.props,e,l,g),p=d.rects,h=d.sessionBg,f=i?h.map((function(e,t){return s.default.createElement("rect",a({key:t},e,{opacity:u,fill:c}))})):null;return s.default.createElement("g",{className:n},f,p.map((function(e,t){return s.default.createElement("g",{key:t},s.default.createElement("rect",{x:e.x,y:e.y,width:e.w1,height:e.height,fill:e.fill1,stroke:e.stroke1,fillOpacity:r}),s.default.createElement("rect",{x:e.x+e.w1,y:e.y,width:e.w2,height:e.height,fill:e.fill2,stroke:e.stroke2,fillOpacity:r}))})))}}]),t}(i.Component);function C(e,t,n,o){var i=t.xScale,s=t.chartConfig.yScale,c=t.plotData,d=e.sessionStart,p=e.bySession,f=e.partialStartOK,I=e.partialEndOK,C=e.bins,m=e.maxProfileWidthPercent,v=e.source,b=e.volume,A=e.absoluteChange,y=e.orient,k=e.fill,Z=e.stroke,S=(0,h.accumulatingWindow)().discardTillStart(!f).discardTillEnd(!I).accumulateTill((function(e,n){return d(a({d:e,i:n},t))})).accumulator(h.identity),w=c.length>1?i(n(c[1]))-i(n((0,h.head)(c))):0,B=(p?S(c):[c]).map((function(e){var t=p?i(n((0,h.head)(e))):0,a=p?i(n((0,h.last)(e))):o,c=a-t+w,d=(0,u.histogram)().value(v).thresholds(C),f=(0,l.nest)().key((function(e){return e.direction})).sortKeys("right"===y?u.descending:u.ascending).rollup((function(e){return(0,u.sum)(e,(function(e){return e.volume}))})),I=d(e),S=I.map((function(e){return e.map((function(e){return A(e)>0?{direction:"up",volume:b(e)}:{direction:"down",volume:b(e)}}))})).map((function(e){return f.entries(e)})),B=S.map((function(e){return(0,u.sum)(e.map((function(e){return e.value})))})),G=r("right"===y?[t,t+c*m/100]:[a,a-c*(100-m)/100],2),x=G[0],R=G[1],W=(0,g.scaleLinear)().domain([0,(0,u.max)(B)]).range([x,R]),V=S.map((function(e){var t=(0,u.sum)(e,(function(e){return e.value})),n=W(t),r=function(e){return(0,h.head)(e.range())}(W)-n;return{x:r<0?n+r:n,ws:e.map((function(e){return{type:e.key,width:e.value*Math.abs(r)/t}})),totalVolumeX:n}})),N=(0,u.zip)(I,V).map((function(e){var t=r(e,2),n=t[0],a=t[1],i=a.x,c=a.ws,u=c[0]||{type:"up",width:0},l=c[1]||{type:"down",width:0};return{y:s(n.x1),height:s(n.x1)-s(n.x0),x:i,width:o,w1:u.width,w2:l.width,stroke1:(0,h.functor)(Z)(u),stroke2:(0,h.functor)(Z)(l),fill1:(0,h.functor)(k)(u),fill2:(0,h.functor)(k)(l)}}));return{rects:N,sessionBg:{x:t,y:(0,h.last)(N).y,height:(0,h.head)(N).y-(0,h.last)(N).y+(0,h.head)(N).height,width:c}}}));return{rects:(0,u.merge)(B.map((function(e){return e.rects}))),sessionBg:B.map((function(e){return e.sessionBg}))}}I.propTypes={className:c.default.string,opacity:c.default.number,showSessionBackground:c.default.bool,sessionBackGround:c.default.string,sessionBackGroundOpacity:c.default.number},I.defaultProps={className:"line ",bins:20,opacity:.5,maxProfileWidthPercent:50,fill:function(e){return"up"===e.type?"#6BA583":"#FF0000"},stroke:"#FFFFFF",showSessionBackground:!1,sessionBackGround:"#4682B4",sessionBackGroundOpacity:.3,source:function(e){return e.close},volume:function(e){return e.volume},absoluteChange:function(e){return e.absoluteChange},bySession:!1,sessionStart:function(e){var t=e.d,n=e.i,r=e.plotData;return n>0&&r[n-1].date.getMonth()!==t.date.getMonth()},orient:"left",partialStartOK:!0,partialEndOK:!0},t.default=I},919:function(e,t,n){"use strict";var r=n(4223);var a=n(5955);var o=n(2012);var i=n(9786);var s=n(2840);var c=n(118);var u=n(4739);var l=n(7416);var g=n(2463);Object.defineProperty(t,"$Y",{enumerable:!0,get:function(){return B(g).default}});var d=n(8029);var p=n(3105);var h=n(250);var f=n(5001);var I=n(9953);var C=n(6730);var m=n(7656);var v=n(8645);var b=n(2353);var A=n(3742);var y=n(5021);var k=n(8812);var Z=n(3986);var S=n(4212);var w=n(2313);function B(e){return e&&e.__esModule?e:{default:e}}},8779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(2791)),o=i(n(3289));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,o.default)(this.props,e)||!(0,o.default)(this.state,t)||!(0,o.default)(this.context,n)}}]),t}(a.default.Component);t.default=u},7706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.functor)(!1),t=r.default,n=a.default,i=!1,s=!1,c=function(r){var a=i?void 0:[],o=[],c=0,u=0;for(u=0;u<r.length;u++){var l=r[u];e(l,u,a||[])?(a&&a.length>0&&o.push(t(a,u,c++)),a=[n(l)]):a&&a.push(n(l))}return s||o.push(t(a,u,c)),o};return c.accumulateTill=function(t){return arguments.length?(e=(0,o.functor)(t),c):e},c.accumulator=function(e){return arguments.length?(t=e,c):t},c.value=function(e){return arguments.length?(n=e,c):n},c.discardTillStart=function(e){return arguments.length?(i=e,c):i},c.discardTillEnd=function(e){return arguments.length?(s=e,c):s},c};var r=i(n(1703)),a=i(n(1492)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}},2410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.plotDataLengthBarWidth=function(e,t){var n=e.widthRatio,a=t.xScale,o=a.range(),i=r(o,2),s=i[0],c=i[1],u=Math.abs(c-s);if(null!=a.invert){var l=a.domain(),g=r(l,2),d=g[0],p=g[1];return u/Math.abs(d-p)*n}return u/a.domain().length*n},t.timeIntervalBarWidth=function(e){return function(t,n){var r=t.widthRatio,o=n.xScale,i=n.xAccessor,s=n.plotData,c=i((0,a.head)(s));return Math.abs(o(e.offset(c,1))-o(c))*r}};var a=n(5418)},1492:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},5418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=t.first=t.overlayColors=t.TOUCHEND=t.TOUCHMOVE=t.MOUSEUP=t.MOUSEMOVE=t.MOUSELEAVE=t.MOUSEENTER=t.yes=t.PureComponent=t.accumulatingWindow=t.mappedSlidingWindow=t.shallowEqual=t.noop=t.identity=t.slidingWindow=t.merge=t.zipper=t.rebind=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(6930);Object.defineProperty(t,"rebind",{enumerable:!0,get:function(){return y(i).default}});var s=n(3288);Object.defineProperty(t,"zipper",{enumerable:!0,get:function(){return y(s).default}});var c=n(3834);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return y(c).default}});var u=n(4512);Object.defineProperty(t,"slidingWindow",{enumerable:!0,get:function(){return y(u).default}});var l=n(1492);Object.defineProperty(t,"identity",{enumerable:!0,get:function(){return y(l).default}});var g=n(1703);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return y(g).default}});var d=n(3289);Object.defineProperty(t,"shallowEqual",{enumerable:!0,get:function(){return y(d).default}});var p=n(2668);Object.defineProperty(t,"mappedSlidingWindow",{enumerable:!0,get:function(){return y(p).default}});var h=n(7706);Object.defineProperty(t,"accumulatingWindow",{enumerable:!0,get:function(){return y(h).default}});var f=n(8779);Object.defineProperty(t,"PureComponent",{enumerable:!0,get:function(){return y(f).default}});var I=n(2410);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}})}));var C=n(9009);Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}})})),t.getLogger=function(e){0;return b.default},t.sign=function(e){return(e>0)-(e<0)},t.path=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Array.isArray(e)?e:[e],n=t.length;return function(e,r){if(0===n)return w(e)?e:r;for(var a=0;null!=e&&a<n;)e=e[t[a++]];return a===n?e:r}},t.functor=function(e){return"function"===typeof e?e:function(){return e}},t.createVerticalLinearGradient=function(e){return function(t,n){var r=t.chartConfig.height,a=n.createLinearGradient(0,r,0,0);return e.forEach((function(e){a.addColorStop(e.stop,e.color)})),a}},t.getClosestItemIndexes2=function(e,t,n){var r=(0,v.bisector)(n).left(e,t);r=Math.max(r-1,0);var a=Math.min(r+1,e.length-1),o=n(e[r]);o>=t&&o<=t&&(a=r);return{left:r,right:a}},t.degrees=function(e){return 180*e/Math.PI},t.radians=function(e){return e*Math.PI/180},t.getClosestValue=function(e,t){var n=(B(e)?e:[e]).map((function(e){return e-t})).reduce((function(e,t){return Math.abs(e)<Math.abs(t)?e:t}));return t+n},t.find=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=0;r<e.length;++r)if(t.call(n,e[r],r,e))return e[r];return},t.d3Window=function(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)},t.getTouchProps=function(e){return e?{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY}:{}},t.getClosestItemIndexes=Z,t.getClosestItem=function(e,t,n,r){var a=Z(e,t,n,r),o=a.left,i=a.right;if(o===i)return e[o];var s=Math.abs(n(e[o])-t)<Math.abs(n(e[i])-t)?e[o]:e[i];r&&console.log(e[o],e[i],s,o,i);return s},t.head=S,t.tail=function(e,t){if(t&&e)return e.map(t).slice(1);return e?e.slice(1):void 0},t.last=function(e,t){if(t&&e){for(var n=void 0,r=e.length-1;r>=0;r--)if(n=e[r],w(t(n)))return n;return}var a=e?e.length:0;return a?e[a-1]:void 0},t.isDefined=w,t.isNotDefined=function(e){return!w(e)},t.isObject=function(e){return w(e)&&"object"===("undefined"===typeof e?"undefined":o(e))&&!Array.isArray(e)},t.touchPosition=function(e,t){var n=t.target,r=n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]},t.mousePosition=function(e,t){var n=e.currentTarget,r=t||n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]},t.clearCanvas=function(e,t){e.forEach((function(e){e.setTransform(1,0,0,1,0,0),e.clearRect(-1,-1,e.canvas.width+2,e.canvas.height+2),e.scale(t,t)}))},t.capitalizeFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},t.hexToRGBA=function(e,t){var n=e.replace("#","");if(e.indexOf("#")>-1&&(3===n.length||6===n.length)){var r=3===n.length?1:2,a=parseInt(n.substring(0,1*r),16),o=parseInt(n.substring(1*r,2*r),16),i=parseInt(n.substring(2*r,3*r),16);return"rgba("+a+", "+o+", "+i+", "+t+")"}return e},t.toObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.default;return e.reduce((function(e,n){var o=t(n),i=a(o,2),s=i[0],c=i[1];return r({},e,k({},s,c))}),{})},t.mapValue=function(e,t){e=Object(e);var n={};return Object.keys(e).forEach((function(r){var a=t(e[r],r,e);w(a)&&(n[r]=a)})),n},t.mapObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.default,n=Object.keys(e),r=new Array(n.length);return n.forEach((function(n,a){r[a]=t(e[n],n,e)})),r},t.replaceAtIndex=function(e,t,n){if(w(e)&&e.length>t)return e.slice(0,t).concat(n).concat(e.slice(t+1));return e},t.forOwn=function(e,t){var n=Object(e);Object.keys(n).forEach((function(e){return t(n[e],e,n)}))};var m=n(984),v=n(6263),b=y(g),A=y(l);function y(e){return e&&e.__esModule?e:{default:e}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.yes=function(){return!0};t.MOUSEENTER="mouseenter.interaction",t.MOUSELEAVE="mouseleave.interaction",t.MOUSEMOVE="mousemove.pan",t.MOUSEUP="mouseup.pan",t.TOUCHMOVE="touchmove.pan",t.TOUCHEND="touchend.pan touchcancel.pan";function Z(e,t,n,r){for(var a=0,o=e.length-1;o-a>1;){var i=Math.round((a+o)/2);n(e[i])<=t?a=i:o=i}return n(e[a]).valueOf()===t.valueOf()&&(o=a),n(e[o]).valueOf()===t.valueOf()&&(a=o),n(e[a])<t&&n(e[o])<t&&(a=o),n(e[a])>t&&n(e[o])>t&&(o=a),{left:a,right:o}}t.overlayColors=(0,m.scaleOrdinal)(m.schemeCategory10);function S(e,t){if(!t||!e)return e?e[0]:void 0;for(var n=void 0,r=0;r<e.length;r++)if(w(t(n=e[r])))return n}t.first=S;function w(e){return null!==e&&"undefined"!=typeof e}var B=t.isArray=Array.isArray},2668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=void 0,t=10,n=r.default,i=a.default,s=0,c=function(r){var a=(0,o.functor)(t).apply(this,arguments),c=[],u=0,l=(0,o.functor)(e),g=[];return r.forEach((function(e,t){var r=void 0;if(t<s+a-1)return r=l(e,t),g.push(r),void c.push(r);t>=s+a&&c.shift(),c.push(i(e,t)),r=n(c,t,u++),g.push(r),c.pop(),c.push(r)})),g};return c.undefinedValue=function(t){return arguments.length?(e=t,c):e},c.windowSize=function(e){return arguments.length?(t=e,c):t},c.accumulator=function(e){return arguments.length?(n=e,c):n},c.skipInitial=function(e){return arguments.length?(s=e,c):s},c.source=function(e){return arguments.length?(i=e,c):i},c};var r=i(n(1703)),a=i(n(1492)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}},3834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=r.default,t=!0,n=o.default;function s(r){return(0,a.default)().combine((function(e,r){var a=t&&(0,i.isNotDefined)(r)?e:n(e,r);return(0,i.isNotDefined)(a)?e:a}))(r,e(r))}return s.algorithm=function(t){return arguments.length?(e=t,s):e},s.merge=function(e){return arguments.length?(n=e,s):n},s.skipUndefined=function(e){return arguments.length?(t=e,s):t},s};var r=s(n(1492)),a=s(n(3288)),o=s(n(1703)),i=n(5418);function s(e){return e&&e.__esModule?e:{default:e}}},1703:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},6930:function(e,t){"use strict";function n(e,t,n){var r=t[n];if("function"!==typeof r)throw new Error("Attempt to rebind "+n+" which isn't a function on the source object");return function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var i=r.apply(t,a);return i===t?e:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var i=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var g=u.value;e[g]=n(e,t,g)}}catch(d){s=!0,c=d}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return e}},3289:function(e,t){"use strict";function n(e){return"[object Date]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;var r=0,a=0,o=void 0;for(o in t)if(a++,t.hasOwnProperty(o)&&!e.hasOwnProperty(o)||(i=e[o],s=t[o],!(n(i)&&n(s)?i.getTime()===s.getTime():i===s)))return!1;var i,s;for(o in e)r++;return r===a}},4512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=void 0,t=10,n=o.default,r=void 0,a=void 0,s=0,c=void 0,u=function(o){var u=a||(0,i.path)(r),l=(0,i.functor)(t).apply(this,arguments),g=o.slice(s,l+s).map(u),d=0,p=(0,i.functor)(e);return o.map((function(e,t){return t<s+l-1?p(u(e),t,c):(t>=s+l&&(g.shift(),g.push(u(e,t))),n(g,t,d++,c))}))};return u.undefinedValue=function(t){return arguments.length?(e=t,u):e},u.windowSize=function(e){return arguments.length?(t=e,u):t},u.misc=function(e){return arguments.length?(c=e,u):c},u.accumulator=function(e){return arguments.length?(n=e,u):n},u.skipInitial=function(e){return arguments.length?(s=e,u):s},u.sourcePath=function(e){return arguments.length?(r=e,u):r},u.source=function(e){return arguments.length?(a=e,u):a},u};var r,a=n(1703),o=(r=a)&&r.__esModule?r:{default:r},i=n(5418)},9009:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStrokeDasharrayCanvas=function(e){var t=n(e).split(",");return 1===t.length?[]:t.map((function(e){return Number(e)}))};t.strokeDashTypes=["Solid","ShortDash","ShortDash2","ShortDot","ShortDashDot","ShortDashDotDot","Dot","Dash","LongDash","DashDot","LongDashDot","LongDashDotDot"];var n=t.getStrokeDasharray=function(e){switch(e){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"8, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}}},3288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=i.default;function t(){var t=arguments.length;if(!t)return[];var r=(0,a.min)(arguments,n),o=void 0,i=new Array(r);for(o=-1;++o<r;){for(var s=-1,c=i[o]=new Array(t);++s<t;)c[s]=arguments[s][o];i[o]=e.apply(this,i[o])}return i}function n(e){return e.length}return t.combine=function(n){return arguments.length?(e=n,t):e},t};var r,a=n(6263),o=n(1492),i=(r=o)&&r.__esModule?r:{default:r}},6263:function(e,t,n){"use strict";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function a(e){var t;return 1===e.length&&(t=e,e=function(e,n){return r(t(e),n)}),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)<0?r=o+1:a=o}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)>0?a=o:r=o+1}return r}}}n.r(t),n.d(t,{ascending:function(){return r},bisect:function(){return c},bisectLeft:function(){return s},bisectRight:function(){return i},bisector:function(){return a},cross:function(){return g},descending:function(){return d},deviation:function(){return f},extent:function(){return I},histogram:function(){return R},max:function(){return X},mean:function(){return J},median:function(){return F},merge:function(){return E},min:function(){return T},pairs:function(){return u},permute:function(){return Y},quantile:function(){return W},range:function(){return y},scan:function(){return H},shuffle:function(){return M},sum:function(){return D},thresholdFreedmanDiaconis:function(){return V},thresholdScott:function(){return N},thresholdSturges:function(){return x},tickIncrement:function(){return B},tickStep:function(){return G},ticks:function(){return w},transpose:function(){return K},variance:function(){return h},zip:function(){return L}});var o=a(r),i=o.right,s=o.left,c=i;function u(e,t){null==t&&(t=l);for(var n=0,r=e.length-1,a=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(a,a=e[++n]);return o}function l(e,t){return[e,t]}function g(e,t,n){var r,a,o,i,s=e.length,c=t.length,u=new Array(s*c);for(null==n&&(n=l),r=o=0;r<s;++r)for(i=e[r],a=0;a<c;++a,++o)u[o]=n(i,t[a]);return u}function d(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function p(e){return null===e?NaN:+e}function h(e,t){var n,r,a=e.length,o=0,i=-1,s=0,c=0;if(null==t)for(;++i<a;)isNaN(n=p(e[i]))||(c+=(r=n-s)*(n-(s+=r/++o)));else for(;++i<a;)isNaN(n=p(t(e[i],i,e)))||(c+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return c/(o-1)}function f(e,t){var n=h(e,t);return n?Math.sqrt(n):n}function I(e,t){var n,r,a,o=e.length,i=-1;if(null==t){for(;++i<o;)if(null!=(n=e[i])&&n>=n)for(r=a=n;++i<o;)null!=(n=e[i])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++i<o;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=a=n;++i<o;)null!=(n=t(e[i],i,e))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}var C=Array.prototype,m=C.slice,v=C.map;function b(e){return function(){return e}}function A(e){return e}function y(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++r<a;)o[r]=e+r*n;return o}var k=Math.sqrt(50),Z=Math.sqrt(10),S=Math.sqrt(2);function w(e,t,n){var r,a,o,i,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(i=B(e,t,n))||!isFinite(i))return[];if(i>0)for(e=Math.ceil(e/i),t=Math.floor(t/i),o=new Array(a=Math.ceil(t-e+1));++s<a;)o[s]=(e+s)*i;else for(e=Math.floor(e*i),t=Math.ceil(t*i),o=new Array(a=Math.ceil(e-t+1));++s<a;)o[s]=(e-s)/i;return r&&o.reverse(),o}function B(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return a>=0?(o>=k?10:o>=Z?5:o>=S?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=k?10:o>=Z?5:o>=S?2:1)}function G(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=k?a*=10:o>=Z?a*=5:o>=S&&(a*=2),t<e?-a:a}function x(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function R(){var e=A,t=I,n=x;function r(r){var a,o,i=r.length,s=new Array(i);for(a=0;a<i;++a)s[a]=e(r[a],a,r);var u=t(s),l=u[0],g=u[1],d=n(s,l,g);Array.isArray(d)||(d=G(l,g,d),d=y(Math.ceil(l/d)*d,g,d));for(var p=d.length;d[0]<=l;)d.shift(),--p;for(;d[p-1]>g;)d.pop(),--p;var h,f=new Array(p+1);for(a=0;a<=p;++a)(h=f[a]=[]).x0=a>0?d[a-1]:l,h.x1=a<p?d[a]:g;for(a=0;a<i;++a)l<=(o=s[a])&&o<=g&&f[c(d,o,0,p)].push(r[a]);return f}return r.value=function(t){return arguments.length?(e="function"===typeof t?t:b(t),r):e},r.domain=function(e){return arguments.length?(t="function"===typeof e?e:b([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"===typeof e?e:Array.isArray(e)?b(m.call(e)):b(e),r):n},r}function W(e,t,n){if(null==n&&(n=p),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),i=+n(e[o],o,e);return i+(+n(e[o+1],o+1,e)-i)*(a-o)}}function V(e,t,n){return e=v.call(e,p).sort(r),Math.ceil((n-t)/(2*(W(e,.75)-W(e,.25))*Math.pow(e.length,-1/3)))}function N(e,t,n){return Math.ceil((n-t)/(3.5*f(e)*Math.pow(e.length,-1/3)))}function X(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r}function J(e,t){var n,r=e.length,a=r,o=-1,i=0;if(null==t)for(;++o<r;)isNaN(n=p(e[o]))?--a:i+=n;else for(;++o<r;)isNaN(n=p(t(e[o],o,e)))?--a:i+=n;if(a)return i/a}function F(e,t){var n,a=e.length,o=-1,i=[];if(null==t)for(;++o<a;)isNaN(n=p(e[o]))||i.push(n);else for(;++o<a;)isNaN(n=p(t(e[o],o,e)))||i.push(n);return W(i.sort(r),.5)}function E(e){for(var t,n,r,a=e.length,o=-1,i=0;++o<a;)i+=e[o].length;for(n=new Array(i);--a>=0;)for(t=(r=e[a]).length;--t>=0;)n[--i]=r[t];return n}function T(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r}function Y(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}function H(e,t){if(n=e.length){var n,a,o=0,i=0,s=e[i];for(null==t&&(t=r);++o<n;)(t(a=e[o],s)<0||0!==t(s,s))&&(s=a,i=o);return 0===t(s,s)?i:void 0}}function M(e,t,n){for(var r,a,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)a=Math.random()*o--|0,r=e[o+t],e[o+t]=e[a+t],e[a+t]=r;return e}function D(e,t){var n,r=e.length,a=-1,o=0;if(null==t)for(;++a<r;)(n=+e[a])&&(o+=n);else for(;++a<r;)(n=+t(e[a],a,e))&&(o+=n);return o}function K(e){if(!(a=e.length))return[];for(var t=-1,n=T(e,z),r=new Array(n);++t<n;)for(var a,o=-1,i=r[t]=new Array(a);++o<a;)i[o]=e[o][t];return r}function z(e){return e.length}function L(){return K(arguments)}},3135:function(e,t,n){"use strict";function r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}n.d(t,{Z:function(){return r}})},984:function(e,t,n){"use strict";n.r(t),n.d(t,{interpolateCool:function(){return Lr},interpolateCubehelixDefault:function(){return Kr},interpolateInferno:function(){return Qr},interpolateMagma:function(){return jr},interpolatePlasma:function(){return qr},interpolateRainbow:function(){return _r},interpolateViridis:function(){return Ur},interpolateWarm:function(){return zr},scaleBand:function(){return l},scaleIdentity:function(){return Ne},scaleImplicit:function(){return c},scaleLinear:function(){return Ve},scaleLog:function(){return Me},scaleOrdinal:function(){return u},scalePoint:function(){return d},scalePow:function(){return Ke},scaleQuantile:function(){return Le},scaleQuantize:function(){return Pe},scaleSequential:function(){return $r},scaleSqrt:function(){return ze},scaleThreshold:function(){return _e},scaleTime:function(){return fr},scaleUtc:function(){return yr},schemeCategory10:function(){return Zr},schemeCategory20:function(){return Br},schemeCategory20b:function(){return Sr},schemeCategory20c:function(){return wr}});var r=n(6263),a=n(3904),o=Array.prototype,i=o.map,s=o.slice,c={name:"implicit"};function u(e){var t=(0,a.map)(),n=[],r=c;function o(a){var o=a+"",i=t.get(o);if(!i){if(r!==c)return r;t.set(o,i=n.push(a))}return e[(i-1)%e.length]}return e=null==e?[]:s.call(e),o.domain=function(e){if(!arguments.length)return n.slice();n=[],t=(0,a.map)();for(var r,i,s=-1,c=e.length;++s<c;)t.has(i=(r=e[s])+"")||t.set(i,n.push(r));return o},o.range=function(t){return arguments.length?(e=s.call(t),o):e.slice()},o.unknown=function(e){return arguments.length?(r=e,o):r},o.copy=function(){return u().domain(n).range(e).unknown(r)},o}function l(){var e,t,n=u().unknown(void 0),a=n.domain,o=n.range,i=[0,1],s=!1,c=0,g=0,d=.5;function p(){var n=a().length,u=i[1]<i[0],l=i[u-0],p=i[1-u];e=(p-l)/Math.max(1,n-c+2*g),s&&(e=Math.floor(e)),l+=(p-l-e*(n-c))*d,t=e*(1-c),s&&(l=Math.round(l),t=Math.round(t));var h=(0,r.range)(n).map((function(t){return l+e*t}));return o(u?h.reverse():h)}return delete n.unknown,n.domain=function(e){return arguments.length?(a(e),p()):a()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],p()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],s=!0,p()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,p()):s},n.padding=function(e){return arguments.length?(c=g=Math.max(0,Math.min(1,e)),p()):c},n.paddingInner=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),p()):c},n.paddingOuter=function(e){return arguments.length?(g=Math.max(0,Math.min(1,e)),p()):g},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),p()):d},n.copy=function(){return l().domain(a()).range(i).round(s).paddingInner(c).paddingOuter(g).align(d)},p()}function g(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return g(t())},e}function d(){return g(l().paddingInner(1))}var p=n(3135);function h(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function f(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function I(){}var C=.7,m=1/C,v="\\s*([+-]?\\d+)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",A="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y=/^#([0-9a-f]{3,8})$/,k=new RegExp("^rgb\\("+[v,v,v]+"\\)$"),Z=new RegExp("^rgb\\("+[A,A,A]+"\\)$"),S=new RegExp("^rgba\\("+[v,v,v,b]+"\\)$"),w=new RegExp("^rgba\\("+[A,A,A,b]+"\\)$"),B=new RegExp("^hsl\\("+[b,A,A]+"\\)$"),G=new RegExp("^hsla\\("+[b,A,A,b]+"\\)$"),x={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function R(){return this.rgb().formatHex()}function W(){return this.rgb().formatRgb()}function V(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=y.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?N(t):3===n?new E(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?X(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?X(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=k.exec(e))?new E(t[1],t[2],t[3],1):(t=Z.exec(e))?new E(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=S.exec(e))?X(t[1],t[2],t[3],t[4]):(t=w.exec(e))?X(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=B.exec(e))?M(t[1],t[2]/100,t[3]/100,1):(t=G.exec(e))?M(t[1],t[2]/100,t[3]/100,t[4]):x.hasOwnProperty(e)?N(x[e]):"transparent"===e?new E(NaN,NaN,NaN,0):null}function N(e){return new E(e>>16&255,e>>8&255,255&e,1)}function X(e,t,n,r){return r<=0&&(e=t=n=NaN),new E(e,t,n,r)}function J(e){return e instanceof I||(e=V(e)),e?new E((e=e.rgb()).r,e.g,e.b,e.opacity):new E}function F(e,t,n,r){return 1===arguments.length?J(e):new E(e,t,n,null==r?1:r)}function E(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function T(){return"#"+H(this.r)+H(this.g)+H(this.b)}function Y(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function H(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function M(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new K(e,t,n,r)}function D(e){if(e instanceof K)return new K(e.h,e.s,e.l,e.opacity);if(e instanceof I||(e=V(e)),!e)return new K;if(e instanceof K)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,c=(o+a)/2;return s?(i=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=c<.5?o+a:2-o-a,i*=60):s=c>0&&c<1?0:i,new K(i,s,c,e.opacity)}function K(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function z(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function L(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}function P(e){return function(){return e}}function _(e,t){return function(n){return e+n*t}}function O(e){return 1===(e=+e)?U:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):P(isNaN(t)?n:t)}}function U(e,t){var n=t-e;return n?_(e,n):P(isNaN(e)?t:e)}h(I,V,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:R,formatHex:R,formatHsl:function(){return D(this).formatHsl()},formatRgb:W,toString:W}),h(E,F,f(I,{brighter:function(e){return e=null==e?m:Math.pow(m,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?C:Math.pow(C,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:Y,toString:Y})),h(K,(function(e,t,n,r){return 1===arguments.length?D(e):new K(e,t,n,null==r?1:r)}),f(I,{brighter:function(e){return e=null==e?m:Math.pow(m,e),new K(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?C:Math.pow(C,e),new K(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new E(z(e>=240?e-240:e+120,a,r),z(e,a,r),z(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var j=function e(t){var n=O(t);function r(e,t){var r=n((e=F(e)).r,(t=F(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=U(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Q(e){return function(t){var n,r,a=t.length,o=new Array(a),i=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=F(t[n]),o[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return o=e(o),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=s(e),r+""}}}Q((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,s=r<t-1?e[r+2]:2*o-a;return L((n-r/t)*t,i,a,o,s)}})),Q((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return L((n-r/t)*t,a,o,i,s)}}));function q(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=oe(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function $(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ee(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=oe(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ne=new RegExp(te.source,"g");function re(e,t){var n,r,a,o=te.lastIndex=ne.lastIndex=0,i=-1,s=[],c=[];for(e+="",t+="";(n=te.exec(e))&&(r=ne.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),s[i]?s[i]+=a:s[++i]=a),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,c.push({i:i,x:(0,p.Z)(n,r)})),o=ne.lastIndex;return o<t.length&&(a=t.slice(o),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)s[(n=c[r]).i]=n.x(e);return s.join("")})}function ae(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function oe(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?P(t):("number"===a?p.Z:"string"===a?(n=V(t))?(t=n,j):re:t instanceof V?j:t instanceof Date?$:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?q:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?ee:p.Z:ae))(e,t)}function ie(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function se(e){return function(){return e}}function ce(e){return+e}var ue=[0,1];function le(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:se(t)}function ge(e,t,n,r){var a=e[0],o=e[1],i=t[0],s=t[1];return o<a?(a=n(o,a),i=r(s,i)):(a=n(a,o),i=r(i,s)),function(e){return i(a(e))}}function de(e,t,n,a){var o=Math.min(e.length,t.length)-1,i=new Array(o),s=new Array(o),c=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<o;)i[c]=n(e[c],e[c+1]),s[c]=a(t[c],t[c+1]);return function(t){var n=(0,r.bisect)(e,t,1,o)-1;return s[n](i[n](t))}}function pe(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function he(e,t){var n,r,a,o=ue,c=ue,u=oe,l=!1;function g(){return n=Math.min(o.length,c.length)>2?de:ge,r=a=null,d}function d(t){return(r||(r=n(o,c,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,u)))(+t)}return d.invert=function(e){return(a||(a=n(c,o,le,l?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},d.domain=function(e){return arguments.length?(o=i.call(e,ce),g()):o.slice()},d.range=function(e){return arguments.length?(c=s.call(e),g()):c.slice()},d.rangeRound=function(e){return c=s.call(e),u=ie,g()},d.clamp=function(e){return arguments.length?(l=!!e,g()):l},d.interpolate=function(e){return arguments.length?(u=e,g()):u},g()}var fe,Ie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ce(e){if(!(t=Ie.exec(e)))throw new Error("invalid format: "+e);var t;return new me({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function me(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ve(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function be(e){return(e=ve(Math.abs(e)))?e[1]:NaN}function Ae(e,t){var n=ve(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}Ce.prototype=me.prototype,me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ye={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Ae(100*e,t)},r:Ae,s:function(e,t){var n=ve(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(fe=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ve(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function ke(e){return e}var Ze,Se,we,Be=Array.prototype.map,Ge=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function xe(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?ke:(t=Be.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,o=[],i=0,s=t[0],c=0;a>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(e.substring(a-=s,a+s)),!((c+=s+1)>r));)s=t[i=(i+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?ke:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Be.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"-":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function g(e){var t=(e=Ce(e)).fill,n=e.align,g=e.sign,d=e.symbol,p=e.zero,h=e.width,f=e.comma,I=e.precision,C=e.trim,m=e.type;"n"===m?(f=!0,m="g"):ye[m]||(void 0===I&&(I=12),C=!0,m="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var v="$"===d?a:"#"===d&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===d?o:/[%p]/.test(m)?c:"",A=ye[m],y=/[defgprs%]/.test(m);function k(e){var a,o,c,d=v,k=b;if("c"===m)k=A(e)+k,e="";else{var Z=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:A(Math.abs(e),I),C&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),Z&&0===+e&&"+"!==g&&(Z=!1),d=(Z?"("===g?g:u:"-"===g||"("===g?"":g)+d,k=("s"===m?Ge[8+fe/3]:"")+k+(Z&&"("===g?")":""),y)for(a=-1,o=e.length;++a<o;)if(48>(c=e.charCodeAt(a))||c>57){k=(46===c?i+e.slice(a+1):e.slice(a))+k,e=e.slice(0,a);break}}f&&!p&&(e=r(e,1/0));var S=d.length+e.length+k.length,w=S<h?new Array(h-S+1).join(t):"";switch(f&&p&&(e=r(w+e,w.length?h-k.length:1/0),w=""),n){case"<":e=d+e+k+w;break;case"=":e=d+w+e+k;break;case"^":e=w.slice(0,S=w.length>>1)+d+e+k+w.slice(S);break;default:e=w+d+e+k}return s(e)}return I=void 0===I?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I)),k.toString=function(){return e+""},k}return{format:g,formatPrefix:function(e,t){var n=g(((e=Ce(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(be(t)/3))),a=Math.pow(10,-r),o=Ge[8+r/3];return function(e){return n(a*e)+o}}}}function Re(e,t,n){var a,o=e[0],i=e[e.length-1],s=(0,r.tickStep)(o,i,null==t?10:t);switch((n=Ce(null==n?",f":n)).type){case"s":var c=Math.max(Math.abs(o),Math.abs(i));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(be(t)/3)))-be(Math.abs(e)))}(s,c))||(n.precision=a),we(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,be(t)-be(e))+1}(s,Math.max(Math.abs(o),Math.abs(i))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-be(Math.abs(e)))}(s))||(n.precision=a-2*("%"===n.type))}return Se(n)}function We(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,r.ticks)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Re(t(),e,n)},e.nice=function(n){null==n&&(n=10);var a,o=t(),i=0,s=o.length-1,c=o[i],u=o[s];return u<c&&(a=c,c=u,u=a,a=i,i=s,s=a),(a=(0,r.tickIncrement)(c,u,n))>0?(c=Math.floor(c/a)*a,u=Math.ceil(u/a)*a,a=(0,r.tickIncrement)(c,u,n)):a<0&&(c=Math.ceil(c*a)/a,u=Math.floor(u*a)/a,a=(0,r.tickIncrement)(c,u,n)),a>0?(o[i]=Math.floor(c/a)*a,o[s]=Math.ceil(u/a)*a,t(o)):a<0&&(o[i]=Math.ceil(c*a)/a,o[s]=Math.floor(u*a)/a,t(o)),e},e}function Ve(){var e=he(le,p.Z);return e.copy=function(){return pe(e,Ve())},We(e)}function Ne(){var e=[0,1];function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=i.call(n,ce),t):e.slice()},t.copy=function(){return Ne().domain(e)},We(t)}function Xe(e,t){var n,r=0,a=(e=e.slice()).length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}function Je(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:se(t)}function Fe(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function Ee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Te(e){return 10===e?Ee:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function Ye(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function He(e){return function(t){return-e(-t)}}function Me(){var e=he(Je,Fe).domain([1,10]),t=e.domain,n=10,a=Ye(10),o=Te(10);function i(){return a=Ye(n),o=Te(n),t()[0]<0&&(a=He(a),o=He(o)),e}return e.base=function(e){return arguments.length?(n=+e,i()):n},e.domain=function(e){return arguments.length?(t(e),i()):t()},e.ticks=function(e){var i,s=t(),c=s[0],u=s[s.length-1];(i=u<c)&&(p=c,c=u,u=p);var l,g,d,p=a(c),h=a(u),f=null==e?10:+e,I=[];if(!(n%1)&&h-p<f){if(p=Math.round(p)-1,h=Math.round(h)+1,c>0){for(;p<h;++p)for(g=1,l=o(p);g<n;++g)if(!((d=l*g)<c)){if(d>u)break;I.push(d)}}else for(;p<h;++p)for(g=n-1,l=o(p);g>=1;--g)if(!((d=l*g)<c)){if(d>u)break;I.push(d)}}else I=(0,r.ticks)(p,h,Math.min(h-p,f)).map(o);return i?I.reverse():I},e.tickFormat=function(t,r){if(null==r&&(r=10===n?".0e":","),"function"!==typeof r&&(r=Se(r)),t===1/0)return r;null==t&&(t=10);var i=Math.max(1,n*t/e.ticks().length);return function(e){var t=e/o(Math.round(a(e)));return t*n<n-.5&&(t*=n),t<=i?r(e):""}},e.nice=function(){return t(Xe(t(),{floor:function(e){return o(Math.floor(a(e)))},ceil:function(e){return o(Math.ceil(a(e)))}}))},e.copy=function(){return pe(e,Me().base(n))},e}function De(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function Ke(){var e=1,t=he((function(t,n){return(n=De(n,e)-(t=De(t,e)))?function(r){return(De(r,e)-t)/n}:se(n)}),(function(t,n){return n=De(n,e)-(t=De(t,e)),function(r){return De(t+n*r,1/e)}})),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return pe(t,Ke().exponent(e))},We(t)}function ze(){return Ke().exponent(.5)}function Le(){var e=[],t=[],n=[];function a(){var a=0,i=Math.max(1,t.length);for(n=new Array(i-1);++a<i;)n[a-1]=(0,r.quantile)(e,a/i);return o}function o(e){if(!isNaN(e=+e))return t[(0,r.bisect)(n,e)]}return o.invertExtent=function(r){var a=t.indexOf(r);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,o=0,i=t.length;o<i;++o)null==(n=t[o])||isNaN(n=+n)||e.push(n);return e.sort(r.ascending),a()},o.range=function(e){return arguments.length?(t=s.call(e),a()):t.slice()},o.quantiles=function(){return n.slice()},o.copy=function(){return Le().domain(e).range(t)},o}function Pe(){var e=0,t=1,n=1,a=[.5],o=[0,1];function i(e){if(e<=e)return o[(0,r.bisect)(a,e,0,n)]}function c(){var r=-1;for(a=new Array(n);++r<n;)a[r]=((r+1)*t-(r-n)*e)/(n+1);return i}return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[1],c()):[e,t]},i.range=function(e){return arguments.length?(n=(o=s.call(e)).length-1,c()):o.slice()},i.invertExtent=function(r){var i=o.indexOf(r);return i<0?[NaN,NaN]:i<1?[e,a[0]]:i>=n?[a[n-1],t]:[a[i-1],a[i]]},i.copy=function(){return Pe().domain([e,t]).range(o)},We(i)}function _e(){var e=[.5],t=[0,1],n=1;function a(a){if(a<=a)return t[(0,r.bisect)(e,a,0,n)]}return a.domain=function(r){return arguments.length?(e=s.call(r),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(r){return arguments.length?(t=s.call(r),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(n){var r=t.indexOf(n);return[e[r-1],e[r]]},a.copy=function(){return _e().domain(e).range(t)},a}Ze=xe({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Se=Ze.format,we=Ze.formatPrefix;var Oe=new Date,Ue=new Date;function je(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,o){var i,s=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(i=new Date(+n)),t(n,o),e(n)}while(i<n&&n<r);return s},a.filter=function(n){return je((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Oe.setTime(+t),Ue.setTime(+r),e(Oe),e(Ue),Math.floor(n(Oe,Ue))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var Qe=je((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Qe.every=function(e){return isFinite(e=Math.floor(e))&&e>0?je((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var qe=Qe,$e=(Qe.range,je((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),et=$e,tt=($e.range,1e3),nt=6e4,rt=36e5,at=864e5,ot=6048e5;function it(e){return je((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nt)/ot}))}var st=it(0),ct=it(1),ut=it(2),lt=it(3),gt=it(4),dt=it(5),pt=it(6),ht=(st.range,ct.range,ut.range,lt.range,gt.range,dt.range,pt.range,je((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nt)/at}),(function(e){return e.getDate()-1}))),ft=ht,It=(ht.range,je((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tt-e.getMinutes()*nt)}),(function(e,t){e.setTime(+e+t*rt)}),(function(e,t){return(t-e)/rt}),(function(e){return e.getHours()}))),Ct=It,mt=(It.range,je((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tt)}),(function(e,t){e.setTime(+e+t*nt)}),(function(e,t){return(t-e)/nt}),(function(e){return e.getMinutes()}))),vt=mt,bt=(mt.range,je((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*tt)}),(function(e,t){return(t-e)/tt}),(function(e){return e.getUTCSeconds()}))),At=bt,yt=(bt.range,je((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));yt.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?je((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):yt:null};var kt=yt;yt.range;function Zt(e){return je((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/ot}))}var St=Zt(0),wt=Zt(1),Bt=Zt(2),Gt=Zt(3),xt=Zt(4),Rt=Zt(5),Wt=Zt(6),Vt=(St.range,wt.range,Bt.range,Gt.range,xt.range,Rt.range,Wt.range,je((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/at}),(function(e){return e.getUTCDate()-1}))),Nt=Vt,Xt=(Vt.range,je((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Xt.every=function(e){return isFinite(e=Math.floor(e))&&e>0?je((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Jt=Xt;Xt.range;function Ft(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Et(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Tt(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Yt,Ht,Mt,Dt={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,zt=/^%/,Lt=/[\\^$*+?|[\]().{}]/g;function Pt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function _t(e){return e.replace(Lt,"\\$&")}function Ot(e){return new RegExp("^(?:"+e.map(_t).join("|")+")","i")}function Ut(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function jt(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Qt(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function qt(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function $t(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function en(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function tn(e,t,n){var r=Kt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function nn(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function rn(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function an(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function on(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sn(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function cn(e,t,n){var r=Kt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function un(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ln(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function gn(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function dn(e,t,n){var r=Kt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function pn(e,t,n){var r=Kt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hn(e,t,n){var r=zt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fn(e,t,n){var r=Kt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function In(e,t,n){var r=Kt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Cn(e,t){return Pt(e.getDate(),t,2)}function mn(e,t){return Pt(e.getHours(),t,2)}function vn(e,t){return Pt(e.getHours()%12||12,t,2)}function bn(e,t){return Pt(1+ft.count(qe(e),e),t,3)}function An(e,t){return Pt(e.getMilliseconds(),t,3)}function yn(e,t){return An(e,t)+"000"}function kn(e,t){return Pt(e.getMonth()+1,t,2)}function Zn(e,t){return Pt(e.getMinutes(),t,2)}function Sn(e,t){return Pt(e.getSeconds(),t,2)}function wn(e){var t=e.getDay();return 0===t?7:t}function Bn(e,t){return Pt(st.count(qe(e)-1,e),t,2)}function Gn(e){var t=e.getDay();return t>=4||0===t?gt(e):gt.ceil(e)}function xn(e,t){return e=Gn(e),Pt(gt.count(qe(e),e)+(4===qe(e).getDay()),t,2)}function Rn(e){return e.getDay()}function Wn(e,t){return Pt(ct.count(qe(e)-1,e),t,2)}function Vn(e,t){return Pt(e.getFullYear()%100,t,2)}function Nn(e,t){return Pt((e=Gn(e)).getFullYear()%100,t,2)}function Xn(e,t){return Pt(e.getFullYear()%1e4,t,4)}function Jn(e,t){var n=e.getDay();return Pt((e=n>=4||0===n?gt(e):gt.ceil(e)).getFullYear()%1e4,t,4)}function Fn(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pt(t/60|0,"0",2)+Pt(t%60,"0",2)}function En(e,t){return Pt(e.getUTCDate(),t,2)}function Tn(e,t){return Pt(e.getUTCHours(),t,2)}function Yn(e,t){return Pt(e.getUTCHours()%12||12,t,2)}function Hn(e,t){return Pt(1+Nt.count(Jt(e),e),t,3)}function Mn(e,t){return Pt(e.getUTCMilliseconds(),t,3)}function Dn(e,t){return Mn(e,t)+"000"}function Kn(e,t){return Pt(e.getUTCMonth()+1,t,2)}function zn(e,t){return Pt(e.getUTCMinutes(),t,2)}function Ln(e,t){return Pt(e.getUTCSeconds(),t,2)}function Pn(e){var t=e.getUTCDay();return 0===t?7:t}function _n(e,t){return Pt(St.count(Jt(e)-1,e),t,2)}function On(e){var t=e.getUTCDay();return t>=4||0===t?xt(e):xt.ceil(e)}function Un(e,t){return e=On(e),Pt(xt.count(Jt(e),e)+(4===Jt(e).getUTCDay()),t,2)}function jn(e){return e.getUTCDay()}function Qn(e,t){return Pt(wt.count(Jt(e)-1,e),t,2)}function qn(e,t){return Pt(e.getUTCFullYear()%100,t,2)}function $n(e,t){return Pt((e=On(e)).getUTCFullYear()%100,t,2)}function er(e,t){return Pt(e.getUTCFullYear()%1e4,t,4)}function tr(e,t){var n=e.getUTCDay();return Pt((e=n>=4||0===n?xt(e):xt.ceil(e)).getUTCFullYear()%1e4,t,4)}function nr(){return"+0000"}function rr(){return"%"}function ar(e){return+e}function or(e){return Math.floor(+e/1e3)}!function(e){Yt=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,u=Ot(a),l=Ut(a),g=Ot(o),d=Ut(o),p=Ot(i),h=Ut(i),f=Ot(s),I=Ut(s),C=Ot(c),m=Ut(c),v={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Cn,e:Cn,f:yn,g:Nn,G:Jn,H:mn,I:vn,j:bn,L:An,m:kn,M:Zn,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ar,s:or,S:Sn,u:wn,U:Bn,V:xn,w:Rn,W:Wn,x:null,X:null,y:Vn,Y:Xn,Z:Fn,"%":rr},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:En,e:En,f:Dn,g:$n,G:tr,H:Tn,I:Yn,j:Hn,L:Mn,m:Kn,M:zn,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ar,s:or,S:Ln,u:Pn,U:_n,V:Un,w:jn,W:Qn,x:null,X:null,y:qn,Y:er,Z:nr,"%":rr},A={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=C.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=I[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return Z(e,t,n,r)},d:sn,e:sn,f:pn,g:nn,G:tn,H:un,I:un,j:cn,L:dn,m:on,M:ln,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:an,Q:fn,s:In,S:gn,u:Qt,U:qt,V:$t,w:jt,W:en,x:function(e,t,r){return Z(e,n,t,r)},X:function(e,t,n){return Z(e,r,t,n)},y:nn,Y:tn,Z:rn,"%":hn};function y(e,t){return function(n){var r,a,o,i=[],s=-1,c=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(i.push(e.slice(c,s)),null!=(a=Dt[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),c=s+1);return i.push(e.slice(c,s)),i.join("")}}function k(e,t){return function(n){var r,a,o=Tt(1900,void 0,1);if(Z(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(r=Et(Tt(o.y,0,1))).getUTCDay(),r=a>4||0===a?wt.ceil(r):wt(r),r=Nt.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(a=(r=Ft(Tt(o.y,0,1))).getDay(),r=a>4||0===a?ct.ceil(r):ct(r),r=ft.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Et(Tt(o.y,0,1)).getUTCDay():Ft(Tt(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Et(o)):Ft(o)}}function Z(e,t,n,r){for(var a,o,i=0,s=t.length,c=n.length;i<s;){if(r>=c)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=A[a in Dt?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return v.x=y(n,v),v.X=y(r,v),v.c=y(t,v),b.x=y(n,b),b.X=y(r,b),b.c=y(t,b),{format:function(e){var t=y(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=y(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}(e),Ht=Yt.format,Yt.parse,Mt=Yt.utcFormat,Yt.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ir=1e3,sr=6e4,cr=36e5,ur=864e5,lr=2592e6,gr=31536e6;function dr(e){return new Date(e)}function pr(e){return e instanceof Date?+e:+new Date(+e)}function hr(e,t,n,a,o,s,c,u,l){var g=he(le,p.Z),d=g.invert,h=g.domain,f=l(".%L"),I=l(":%S"),C=l("%I:%M"),m=l("%I %p"),v=l("%a %d"),b=l("%b %d"),A=l("%B"),y=l("%Y"),k=[[c,1,ir],[c,5,5e3],[c,15,15e3],[c,30,3e4],[s,1,sr],[s,5,3e5],[s,15,9e5],[s,30,18e5],[o,1,cr],[o,3,108e5],[o,6,216e5],[o,12,432e5],[a,1,ur],[a,2,1728e5],[n,1,6048e5],[t,1,lr],[t,3,7776e6],[e,1,gr]];function Z(r){return(c(r)<r?f:s(r)<r?I:o(r)<r?C:a(r)<r?m:t(r)<r?n(r)<r?v:b:e(r)<r?A:y)(r)}function S(t,n,a,o){if(null==t&&(t=10),"number"===typeof t){var i=Math.abs(a-n)/t,s=(0,r.bisector)((function(e){return e[2]})).right(k,i);s===k.length?(o=(0,r.tickStep)(n/gr,a/gr,t),t=e):s?(o=(s=k[i/k[s-1][2]<k[s][2]/i?s-1:s])[1],t=s[0]):(o=Math.max((0,r.tickStep)(n,a,t),1),t=u)}return null==o?t:t.every(o)}return g.invert=function(e){return new Date(d(e))},g.domain=function(e){return arguments.length?h(i.call(e,pr)):h().map(dr)},g.ticks=function(e,t){var n,r=h(),a=r[0],o=r[r.length-1],i=o<a;return i&&(n=a,a=o,o=n),n=(n=S(e,a,o,t))?n.range(a,o+1):[],i?n.reverse():n},g.tickFormat=function(e,t){return null==t?Z:l(t)},g.nice=function(e,t){var n=h();return(e=S(e,n[0],n[n.length-1],t))?h(Xe(n,e)):g},g.copy=function(){return pe(g,hr(e,t,n,a,o,s,c,u,l))},g}function fr(){return hr(qe,et,st,ft,Ct,vt,At,kt,Ht).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}var Ir=je((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),Cr=Ir,mr=(Ir.range,je((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*rt)}),(function(e,t){return(t-e)/rt}),(function(e){return e.getUTCHours()}))),vr=mr,br=(mr.range,je((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*nt)}),(function(e,t){return(t-e)/nt}),(function(e){return e.getUTCMinutes()}))),Ar=br;br.range;function yr(){return hr(Jt,Cr,St,Nt,vr,Ar,At,kt,Mt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function kr(e){return e.match(/.{6}/g).map((function(e){return"#"+e}))}var Zr=kr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Sr=kr("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),wr=kr("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Br=kr("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Gr=Math.PI/180,xr=180/Math.PI,Rr=-.14861,Wr=1.78277,Vr=-.29227,Nr=-.90649,Xr=1.97294,Jr=Xr*Nr,Fr=Xr*Wr,Er=Wr*Vr-Nr*Rr;function Tr(e){if(e instanceof Hr)return new Hr(e.h,e.s,e.l,e.opacity);e instanceof E||(e=J(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(Er*r+Jr*t-Fr*n)/(Er+Jr-Fr),o=r-a,i=(Xr*(n-a)-Vr*o)/Nr,s=Math.sqrt(i*i+o*o)/(Xr*a*(1-a)),c=s?Math.atan2(i,o)*xr-120:NaN;return new Hr(c<0?c+360:c,s,a,e.opacity)}function Yr(e,t,n,r){return 1===arguments.length?Tr(e):new Hr(e,t,n,null==r?1:r)}function Hr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Mr(e){return function t(n){function r(t,r){var a=e((t=Yr(t)).h,(r=Yr(r)).h),o=U(t.s,r.s),i=U(t.l,r.l),s=U(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=o(e),t.l=i(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}h(Hr,Yr,f(I,{brighter:function(e){return e=null==e?m:Math.pow(m,e),new Hr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?C:Math.pow(C,e),new Hr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Gr,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new E(255*(t+n*(Rr*r+Wr*a)),255*(t+n*(Vr*r+Nr*a)),255*(t+n*(Xr*r)),this.opacity)}}));Mr((function(e,t){var n=t-e;return n?_(e,n>180||n<-180?n-360*Math.round(n/360):n):P(isNaN(e)?t:e)}));var Dr=Mr(U),Kr=Dr(Yr(300,.5,0),Yr(-240,.5,1)),zr=Dr(Yr(-100,.75,.35),Yr(80,1.5,.8)),Lr=Dr(Yr(260,.75,.35),Yr(80,1.5,.8)),Pr=Yr();function _r(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Pr.h=360*e-100,Pr.s=1.5-1.5*t,Pr.l=.8-.9*t,Pr+""}function Or(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var Ur=Or(kr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),jr=Or(kr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Qr=Or(kr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),qr=Or(kr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function $r(e){var t=0,n=1,r=!1;function a(a){var o=(a-t)/(n-t);return e(r?Math.max(0,Math.min(1,o)):o)}return a.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],a):[t,n]},a.clamp=function(e){return arguments.length?(r=!!e,a):r},a.interpolator=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return $r(e).domain([t,n]).clamp(r)},We(a)}},5452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=c(n(2791)),o=c(n(1694)),i=c(n(7689)),s=c(n(8478));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var l=function(){return{}};t.default={data:[],loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null===t||void 0===t?"":t,(e="string"===typeof(e=null===e||void 0===e?"":e)?e.toLowerCase():e)>(t="string"===typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:l,getTableProps:l,getTheadGroupProps:l,getTheadGroupTrProps:l,getTheadGroupThProps:l,getTheadProps:l,getTheadTrProps:l,getTheadThProps:l,getTheadFilterProps:l,getTheadFilterTrProps:l,getTheadFilterThProps:l,getTbodyProps:l,getTrGroupProps:l,getTrProps:l,getTdProps:l,getTfootProps:l,getTfootTrProps:l,getTfootTdProps:l,getPaginationProps:l,getLoadingProps:l,getNoDataProps:l,getResizerProps:l,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,className:"",style:{},getProps:l,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:l,footerClassName:"",footerStyle:{},getFooterProps:l,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",TableComponent:i.default.makeTemplateComponent("rt-table","Table"),TheadComponent:i.default.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:i.default.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:i.default.makeTemplateComponent("rt-tr-group","TrGroup"),TrComponent:i.default.makeTemplateComponent("rt-tr","Tr"),ThComponent:function(e){var t=e.toggleSort,n=e.className,i=e.children,s=u(e,["toggleSort","className","children"]);return a.default.createElement("div",r({className:(0,o.default)(n,"rt-th"),onClick:function(e){t&&t(e)}},s),i)},TdComponent:i.default.makeTemplateComponent("rt-td","Td"),TfootComponent:i.default.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange;return a.default.createElement("input",{type:"text",style:{width:"100%"},value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return a.default.createElement("div",{className:(0,o.default)("rt-expander",t&&"-open")},"\u2022")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return a.default.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter((function(e){return"undefined"!==typeof e[n.id]})).map((function(e,r){return a.default.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")}));return a.default.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:s.default,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,i=e.loadingText,s=u(e,["className","loading","loadingText"]);return a.default.createElement("div",r({className:(0,o.default)("-loading",{"-active":n},t)},s),a.default.createElement("div",{className:"-loading-inner"},i))},NoDataComponent:i.default.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:i.default.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return a.default.createElement("span",null,"\xa0")}}},6883:function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),s=h(i),c=h(n(1694)),u=h(n(7689)),l=h(n(3823)),g=h(n(7970)),d=h(n(5452)),p=h(n(8461));function h(e){return e&&e.__esModule?e:{default:e}}d.default;var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:0,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,o=t.className,i=t.style,l=t.getProps,g=t.getTableProps,p=t.getTheadGroupProps,h=t.getTheadGroupTrProps,f=t.getTheadGroupThProps,I=t.getTheadProps,C=t.getTheadTrProps,m=t.getTheadThProps,v=t.getTheadFilterProps,b=t.getTheadFilterTrProps,A=t.getTheadFilterThProps,y=t.getTbodyProps,k=t.getTrGroupProps,Z=t.getTrProps,S=t.getTdProps,w=t.getTfootProps,B=t.getTfootTrProps,G=t.getTfootTdProps,x=t.getPaginationProps,R=t.getLoadingProps,W=t.getNoDataProps,V=t.getResizerProps,N=t.showPagination,X=t.showPaginationTop,J=t.showPaginationBottom,F=t.manual,E=t.loadingText,T=t.noDataText,Y=t.sortable,H=t.resizable,M=t.filterable,D=t.pivotIDKey,K=t.pivotValKey,z=t.pivotBy,L=t.subRowsKey,P=t.aggregatedKey,_=t.originalKey,O=t.indexKey,U=t.groupedByPivotKey,j=t.loading,Q=t.pageSize,q=t.page,$=t.sorted,ee=t.filtered,te=t.resized,ne=t.expanded,re=t.pages,ae=t.onExpandedChange,oe=t.TableComponent,ie=t.TheadComponent,se=t.TbodyComponent,ce=t.TrGroupComponent,ue=t.TrComponent,le=t.ThComponent,ge=t.TdComponent,de=t.TfootComponent,pe=t.PaginationComponent,he=t.LoadingComponent,fe=t.SubComponent,Ie=t.NoDataComponent,Ce=t.ResizerComponent,me=t.ExpanderComponent,ve=t.PivotValueComponent,be=t.PivotComponent,Ae=t.AggregatedComponent,ye=t.FilterComponent,ke=t.PadRowComponent,Ze=t.resolvedData,Se=t.allVisibleColumns,we=t.headerGroups,Be=t.hasHeaderGroups,Ge=t.sortedData,xe=t.currentlyResizing,Re=Q*q,We=Re+Q,Ve=F?Ze:Ge.slice(Re,We),Ne=this.getMinRows(),Xe=u.default.range(Math.max(Ne-Ve.length,0)),Je=Se.some((function(e){return e.Footer})),Fe=M||Se.some((function(e){return e.filterable})),Ee=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map((function(t,i){o++;var s=a({},t,{_viewIndex:o}),c=n.concat([i]);if(s[L]&&u.default.get(ne,c)){var l=e(s[L],c,o),g=r(l,2);s[L]=g[0],o=g[1]}return s})),o]}(Ve),Te=r(Ee,1);Ve=Te[0];var Ye=q>0,He=q+1<re,Me=u.default.sum(Se.map((function(e){var t=te.find((function(t){return t.id===e.id}))||{};return u.default.getFirstDefined(t.value,e.width,e.minWidth)}))),De=-1,Ke=a({},t,{startRow:Re,endRow:We,pageRows:Ve,minRows:Ne,padRows:Xe,hasColumnFooter:Je,canPrevious:Ye,canNext:He,rowMinWidth:Me}),ze=function(t,n){var r=function(e){return(te.find((function(t){return t.id===e.id}))||{}).value},o=u.default.sum(t.columns.map((function(e){return e.width||r(e)?0:e.minWidth}))),i=u.default.sum(t.columns.map((function(e){return u.default.getFirstDefined(r(e),e.width,e.minWidth)}))),l=u.default.sum(t.columns.map((function(e){return u.default.getFirstDefined(r(e),e.width,e.maxWidth)}))),g=u.default.splitProps(f(Ke,void 0,t,e)),d=u.default.splitProps(t.getHeaderProps(Ke,void 0,t,e)),p=[t.headerClassName,g.className,d.className],h=a({},t.headerStyle,g.style,d.style),I=a({},g.rest,d.rest),C={flex:o+" 0 auto",width:u.default.asPx(i),maxWidth:u.default.asPx(l)};return s.default.createElement(le,a({key:n+"-"+t.id,className:(0,c.default)(p),style:a({},h,C)},I),u.default.normalizeComponent(t.Header,{data:Ge,column:t}))},Le=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o=$.find((function(e){return e.id===t.id})),i="function"===typeof t.show?t.show():t.show,l=u.default.getFirstDefined(r.value,t.width,t.minWidth),g=u.default.getFirstDefined(r.value,t.width,t.maxWidth),d=u.default.splitProps(m(Ke,void 0,t,e)),p=u.default.splitProps(t.getHeaderProps(Ke,void 0,t,e)),h=[t.headerClassName,d.className,p.className],f=a({},t.headerStyle,d.style,p.style),I=a({},d.rest,p.rest),C=u.default.getFirstDefined(t.resizable,H,!1),v=C?s.default.createElement(Ce,a({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},nt)):null,b=u.default.getFirstDefined(t.sortable,Y,!1);return s.default.createElement(le,a({key:n+"-"+t.id,className:(0,c.default)(h,C&&"rt-resizable-header",o?o.desc?"-sort-desc":"-sort-asc":"",b&&"-cursor-pointer",!i&&"-hidden",z&&z.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:a({},f,{flex:l+" 0 auto",width:u.default.asPx(l),maxWidth:u.default.asPx(g)}),toggleSort:function(n){b&&e.sortColumn(t,n.shiftKey)}},I),s.default.createElement("div",{className:(0,c.default)(C&&"rt-resizable-header-content")},u.default.normalizeComponent(t.Header,{data:Ge,column:t})),v)},Pe=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o=u.default.getFirstDefined(r.value,t.width,t.minWidth),i=u.default.getFirstDefined(r.value,t.width,t.maxWidth),l=u.default.splitProps(A(Ke,void 0,t,e)),g=u.default.splitProps(t.getHeaderProps(Ke,void 0,t,e)),p=[t.headerClassName,l.className,g.className],h=a({},t.headerStyle,l.style,g.style),f=a({},l.rest,g.rest),I=ee.find((function(e){return e.id===t.id})),C=t.Filter||ye,m=u.default.getFirstDefined(t.filterable,M,!1);return s.default.createElement(le,a({key:n+"-"+t.id,className:(0,c.default)(p),style:a({},h,{flex:o+" 0 auto",width:u.default.asPx(o),maxWidth:u.default.asPx(i)})},f),m?u.default.normalizeComponent(C,{column:t,filter:I,onChange:function(n){return e.filterColumn(t,n)}},d.default.column.Filter):null)},_e=function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={original:n[_],row:n,index:n[O],viewIndex:++De,pageSize:Q,page:q,level:o.length,nestingPath:o.concat([r]),aggregated:n[P],groupedByPivot:n[U],subRows:n[L]},l=u.default.get(ne,i.nestingPath),g=k(Ke,i,void 0,e),d=u.default.splitProps(Z(Ke,i,void 0,e));return s.default.createElement(ce,a({key:i.nestingPath.join("_")},g),s.default.createElement(ue,a({className:(0,c.default)(d.className,n._viewIndex%2?"-even":"-odd"),style:d.style},d.rest),Se.map((function(t,r){var o=te.find((function(e){return e.id===t.id}))||{},g="function"===typeof t.show?t.show():t.show,d=u.default.getFirstDefined(o.value,t.width,t.minWidth),p=u.default.getFirstDefined(o.value,t.width,t.maxWidth),h=u.default.splitProps(S(Ke,i,t,e)),f=u.default.splitProps(t.getProps(Ke,i,t,e)),I=[h.className,t.className,f.className],C=a({},h.style,t.style,f.style),m=a({},i,{isExpanded:l,column:a({},t),value:i.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:te,show:g,width:d,maxWidth:p,tdProps:h,columnProps:f,classes:I,styles:C}),v=m.value,b=void 0,A=void 0,y=void 0,k=u.default.normalizeComponent(t.Cell,m,v),Z=t.Aggregated||(t.aggregate?t.Cell:Ae),w=t.Expander||me,B=t.PivotValue||ve,G=be||function(e){return s.default.createElement("div",null,s.default.createElement(w,e),s.default.createElement(B,e))},x=t.Pivot||G;(m.pivoted||m.expander)&&(m.expandable=!0,b=!0,!m.pivoted||m.subRows||fe||(m.expandable=!1)),m.pivoted?(A=i.row[D]===t.id&&m.subRows,y=z.indexOf(t.id)>z.indexOf(i.row[D])&&m.subRows,k=A?u.default.normalizeComponent(x,a({},m,{value:n[K]}),n[K]):y?u.default.normalizeComponent(Z,m,v):null):m.aggregated&&(k=u.default.normalizeComponent(Z,m,v)),m.expander&&(k=u.default.normalizeComponent(w,m,n[K]),z&&(m.groupedByPivot&&(k=null),m.subRows||fe||(k=null)));var R=b?function(t){var n=u.default.clone(ne);return n=l?u.default.set(n,m.nestingPath,!1):u.default.set(n,m.nestingPath,{}),e.setStateWithData({expanded:n},(function(){ae&&ae(n,m.nestingPath,t)}))}:function(){},W={onClick:R};return h.rest.onClick&&(W.onClick=function(e){h.rest.onClick(e,(function(){return R(e)}))}),f.rest.onClick&&(W.onClick=function(e){f.rest.onClick(e,(function(){return R(e)}))}),s.default.createElement(ge,a({key:r+"-"+t.id,className:(0,c.default)(I,!g&&"hidden",m.expandable&&"rt-expandable",(A||y)&&"rt-pivot"),style:a({},C,{flex:d+" 0 auto",width:u.default.asPx(d),maxWidth:u.default.asPx(p)})},h.rest,f.rest,W),k)}))),i.subRows&&l&&i.subRows.map((function(e,n){return t(e,n,i.nestingPath)})),fe&&!i.subRows&&l&&fe(i))},Oe=function(t,n){var r=k(Ke,void 0,void 0,e),o=u.default.splitProps(Z(Ke,void 0,void 0,e));return s.default.createElement(ce,a({key:n},r),s.default.createElement(ue,{className:(0,c.default)("-padRow",(Ve.length+n)%2?"-even":"-odd",o.className),style:o.style||{}},Se.map(Ue)))},Ue=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o="function"===typeof t.show?t.show():t.show,i=u.default.getFirstDefined(r.value,t.width,t.minWidth),l=i,g=u.default.getFirstDefined(r.value,t.width,t.maxWidth),d=u.default.splitProps(S(Ke,void 0,t,e)),p=u.default.splitProps(t.getProps(Ke,void 0,t,e)),h=[d.className,t.className,p.className],f=a({},d.style,t.style,p.style);return s.default.createElement(ge,a({key:n+"-"+t.id,className:(0,c.default)(h,!o&&"hidden"),style:a({},f,{flex:l+" 0 auto",width:u.default.asPx(i),maxWidth:u.default.asPx(g)})},d.rest),u.default.normalizeComponent(ke))},je=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o="function"===typeof t.show?t.show():t.show,i=u.default.getFirstDefined(r.value,t.width,t.minWidth),l=u.default.getFirstDefined(r.value,t.width,t.maxWidth),g=u.default.splitProps(G(Ke,void 0,void 0,e)),d=u.default.splitProps(t.getProps(Ke,void 0,t,e)),p=u.default.splitProps(t.getFooterProps(Ke,void 0,t,e)),h=[g.className,t.className,d.className,p.className],f=a({},g.style,t.style,d.style,p.style);return s.default.createElement(ge,a({key:n+"-"+t.id,className:(0,c.default)(h,!o&&"hidden"),style:a({},f,{flex:i+" 0 auto",width:u.default.asPx(i),maxWidth:u.default.asPx(l)})},d.rest,g.rest,p.rest),u.default.normalizeComponent(t.Footer,{data:Ge,column:t}))},Qe=u.default.splitProps(l(Ke,void 0,void 0,this)),qe=u.default.splitProps(g(Ke,void 0,void 0,this)),$e=u.default.splitProps(y(Ke,void 0,void 0,this)),et=R(Ke,void 0,void 0,this),tt=W(Ke,void 0,void 0,this),nt=V(Ke,void 0,void 0,this),rt=function(){var n=function(){var n=u.default.splitProps(x(Ke,void 0,void 0,e));return s.default.createElement(pe,a({},t,{pages:re,canPrevious:Ye,canNext:He,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:n.className,style:n.style},n.rest))}();return s.default.createElement("div",a({className:(0,c.default)("ReactTable",o,Qe.className),style:a({},i,Qe.style)},Qe.rest),N&&X?s.default.createElement("div",{className:"pagination-top"},n):null,s.default.createElement(oe,a({className:(0,c.default)(qe.className,xe?"rt-resizing":""),style:qe.style},qe.rest),Be?function(){var t=u.default.splitProps(p(Ke,void 0,void 0,e)),n=u.default.splitProps(h(Ke,void 0,void 0,e));return s.default.createElement(ie,a({className:(0,c.default)("-headerGroups",t.className),style:a({},t.style,{minWidth:Me+"px"})},t.rest),s.default.createElement(ue,a({className:n.className,style:n.style},n.rest),we.map(ze)))}():null,function(){var t=u.default.splitProps(I(Ke,void 0,void 0,e)),n=u.default.splitProps(C(Ke,void 0,void 0,e));return s.default.createElement(ie,a({className:(0,c.default)("-header",t.className),style:a({},t.style,{minWidth:Me+"px"})},t.rest),s.default.createElement(ue,a({className:n.className,style:n.style},n.rest),Se.map(Le)))}(),Fe?function(){var t=u.default.splitProps(v(Ke,void 0,void 0,e)),n=u.default.splitProps(b(Ke,void 0,void 0,e));return s.default.createElement(ie,a({className:(0,c.default)("-filters",t.className),style:a({},t.style,{minWidth:Me+"px"})},t.rest),s.default.createElement(ue,a({className:n.className,style:n.style},n.rest),Se.map(Pe)))}():null,s.default.createElement(se,a({className:(0,c.default)($e.className),style:a({},$e.style,{minWidth:Me+"px"})},$e.rest),Ve.map((function(e,t){return _e(e,t)})),Xe.map(Oe)),Je?function(){var t=w(Ke,void 0,void 0,e),n=u.default.splitProps(B(Ke,void 0,void 0,e));return s.default.createElement(de,a({className:t.className,style:a({},t.style,{minWidth:Me+"px"})},t.rest),s.default.createElement(ue,a({className:(0,c.default)(n.className),style:n.style},n.rest),Se.map(je)))}():null),N&&J?s.default.createElement("div",{className:"pagination-bottom"},n):null,!Ve.length&&s.default.createElement(Ie,tt,u.default.normalizeComponent(T)),s.default.createElement(he,a({loading:j,loadingText:E},et)))};return n?n(Ke,rt,this):rt()}}]),t}((0,g.default)((0,l.default)(i.Component)));f.propTypes=p.default,f.defaultProps=d.default},3823:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=function(e){return function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState()))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach((function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])}));["sortable","filterable","resizable"].forEach((function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",a="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[a]}})),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),a=this.getResolvedState({},e),o=a.freezeWhenExpanded;if(a.frozen=!1,o)for(var i=Object.keys(a.expanded),s=0;s<i.length;s++)if(a.expanded[i[s]]){a.frozen=!0;break}return(r.frozen&&!a.frozen||r.sorted!==a.sorted||r.filtered!==a.filtered||r.showFilters!==a.showFilters||!a.frozen&&r.resolvedData!==a.resolvedData)&&((r.sorted!==a.sorted&&this.props.collapseOnSortingChange||r.filtered!==a.filtered||r.showFilters!==a.showFilters||r.sortedData&&!a.frozen&&r.resolvedData!==a.resolvedData&&this.props.collapseOnDataChange)&&(a.expanded={}),Object.assign(a,this.getSortedData(a))),r.filtered!==a.filtered&&(a.page=0),a.sortedData&&(a.pages=a.manual?a.pages:Math.ceil(a.sortedData.length/a.pageSize),a.page=Math.max(a.page>=a.pages?a.pages-1:a.page,0)),this.setState(a,(function(){t&&t(),r.page===a.page&&r.pageSize===a.pageSize&&r.sorted===a.sorted&&r.filtered===a.filtered||n.fireFetchData()}))}}]),t}(e)}},7970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=u(n(2791)),c=u(n(7689));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=function(e){return function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getResolvedState",value:function(e,t){return o({},c.default.compactObject(this.state),c.default.compactObject(this.props),c.default.compactObject(t),c.default.compactObject(e))}},{key:"getDataModel",value:function(e){var t=this,n=e.columns,i=e.pivotBy,u=void 0===i?[]:i,d=e.data,p=e.pivotIDKey,h=e.pivotValKey,f=e.subRowsKey,I=e.aggregatedKey,C=e.nestingLevelKey,m=e.originalKey,v=e.indexKey,b=e.groupedByPivotKey,A=e.SubComponent,y=!1;n.forEach((function(e){e.columns&&(y=!0)}));var k=[].concat(g(n)),Z=n.find((function(e){return e.expander||e.columns&&e.columns.some((function(e){return e.expander}))}));Z&&!Z.expander&&(Z=Z.columns.find((function(e){return e.expander}))),A&&!Z&&(k=[Z={expander:!0}].concat(g(k)));var S=function(e,n){var r=function(e,n){var r=void 0;if((r=e.expander?o({},t.props.column,t.props.expanderDefaults,e):o({},t.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),n&&(r.parentColumn=n),"string"===typeof r.accessor){var i=function(){r.id=r.id||r.accessor;var e=r.accessor;return r.accessor=function(t){return c.default.get(t,e)},{v:r}}();if("object"===("undefined"===typeof i?"undefined":a(i)))return i.v}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(e){}),r}(e,n);return w.push(r),r},w=[],B=k.map((function(e,t){return e.columns?o({},e,{columns:e.columns.map((function(t){return S(t,e)}))}):S(e)})).slice(),G=[],x=(B=(B=B.map((function(e,t){if(e.columns){var n=e.columns.filter((function(e){return!(u.indexOf(e.id)>-1)&&c.default.getFirstDefined(e.show,!0)}));return o({},e,{columns:n})}return e}))).filter((function(e){return e.columns?e.columns.length:!(u.indexOf(e.id)>-1)&&c.default.getFirstDefined(e.show,!0)}))).findIndex((function(e){return e.pivot}));u.length&&function(){var e=[];u.forEach((function(t){var n=w.find((function(e){return e.id===t}));n&&e.push(n)}));var n=e.reduce((function(e,t){return e&&e===t.parentColumn&&t.parentColumn}),e[0].parentColumn),r=y&&n.Header,a={Header:r=r||function(){return s.default.createElement("strong",null,"Pivoted")},columns:e.map((function(e){return o({},t.props.pivotDefaults,e,{pivoted:!0})}))};x>=0?(a=o({},B[x],a),B.splice(x,1,a)):B.unshift(a)}();var R=[],W=[],V=function(e,n){R.push(o({},t.props.column,n,{columns:e})),W=[]};B.forEach((function(e,t){if(e.columns)return G=G.concat(e.columns),W.length>0&&V(W),void V(e.columns,e);G.push(e),W.push(e)})),y&&W.length>0&&V(W);var N=function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(l(r={},m,t),l(r,v,n),l(r,f,t[f]),l(r,C,a),r);return w.forEach((function(e){e.expander||(o[e.id]=e.accessor(t))})),o[f]&&(o[f]=o[f].map((function(t,n){return e(t,n,a+1)}))),o},X=d.map((function(e,t){return N(e,t)})),J=function(e){var t={};return F.forEach((function(n){var r=e.map((function(e){return e[n.id]}));t[n.id]=n.aggregate(r,e)})),t},F=G.filter((function(e){return!e.expander&&e.aggregate}));return u.length&&(X=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a===n.length)return t;var i=Object.entries(c.default.groupBy(t,n[a])).map((function(e){var t,o=r(e,2),i=o[0],s=o[1];return l(t={},p,n[a]),l(t,h,i),l(t,n[a],i),l(t,f,s),l(t,C,a),l(t,b,!0),t}));return i=i.map((function(t){var r,i=e(t[f],n,a+1);return o({},t,(l(r={},f,i),l(r,I,!0),r),J(i))}))}(X,u)),o({},e,{resolvedData:X,allVisibleColumns:G,headerGroups:R,allDecoratedColumns:w,hasHeaderGroups:y})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,a=e.defaultFilterMethod,o=e.resolvedData,i=e.allVisibleColumns,s=e.allDecoratedColumns,c={};return s.filter((function(e){return e.sortMethod})).forEach((function(e){c[e.id]=e.sortMethod})),{sortedData:t?o:this.sortData(this.filterData(o,r,a,i),n,c)}}},{key:"fireFetchData",value:function(){this.props.onFetchData(this.getResolvedState(),this)}},{key:"getPropOrState",value:function(e){return c.default.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return c.default.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var a=this,i=e;return t.length&&(i=(i=t.reduce((function(e,t){var a=r.find((function(e){return e.id===t.id}));if(!a||!1===a.filterable)return e;var o=a.filterMethod||n;return a.filterAll?o(t,e,a):e.filter((function(e){return o(t,e,a)}))}),i)).map((function(e){return e[a.props.subRowsKey]?o({},e,l({},a.props.subRowsKey,a.filterData(e[a.props.subRowsKey],t,n,r))):e})).filter((function(e){return!e[a.props.subRowsKey]||e[a.props.subRowsKey].length>0}))),i}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var a=(this.props.orderByMethod||c.default.orderBy)(e,t.map((function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}})),t.map((function(e){return!e.desc})),this.props.indexKey);return a.forEach((function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))})),a}},{key:"getMinRows",value:function(){return c.default.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,a={page:e};r&&(a.expanded={}),this.setStateWithData(a,(function(){n&&n(e)}))}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,a=Math.floor(r/e);this.setStateWithData({pageSize:e,page:a},(function(){t&&t(e,a)}))}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,a=n.skipNextSort,o=n.defaultSortDesc,i=e.hasOwnProperty("defaultSortDesc")?e.defaultSortDesc:o,s=!i;if(a)this.setStateWithData({skipNextSort:!1});else{var u=this.props.onSortedChange,l=c.default.clone(r||[]).map((function(e){return e.desc=c.default.isSortingDesc(e),e}));if(c.default.isArray(e))!function(){var n=l.findIndex((function(t){return t.id===e[0].id}));n>-1?(l[n].desc===s?t?l.splice(n,e.length):e.forEach((function(e,t){l[n+t].desc=i})):e.forEach((function(e,t){l[n+t].desc=s})),t||(l=l.slice(n,e.length))):l=t?l.concat(e.map((function(e){return{id:e.id,desc:i}}))):e.map((function(e){return{id:e.id,desc:i}}))}();else{var g=l.findIndex((function(t){return t.id===e.id}));if(g>-1){var d=l[g];d.desc===s?t?l.splice(g,1):(d.desc=i,l=[d]):(d.desc=s,t||(l=[d]))}else t?l.push({id:e.id,desc:i}):l=[{id:e.id,desc:i}]}this.setStateWithData({page:!r.length&&l.length||!t?0:this.state.page,sorted:l},(function(){u&&u(l,e,t)}))}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,a=(n||[]).filter((function(t){if(t.id!==e.id)return!0}));""!==t&&a.push({id:e.id,value:t}),this.setStateWithData({filtered:a},(function(){r&&r(a,e,t)}))}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var a=e.target.parentElement.getBoundingClientRect().width,o=void 0;o=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:o,parentWidth:a}},(function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))}))}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props.onResizedChange,n=this.getResolvedState(),r=n.resized,a=n.currentlyResizing,o=r.filter((function(e){return e.id!==a.id})),i=void 0;"touchmove"===e.type?i=e.changedTouches[0].pageX:"mousemove"===e.type&&(i=e.pageX);var s=Math.max(a.parentWidth+i-a.startX,11);o.push({id:a.id,value:s}),this.setStateWithData({resized:o},(function(){t&&t(o,e)}))}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),t}(e)}},8478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2791),i=c(o),s=c(n(1694));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return i.default.createElement("button",a({type:"button"},e,{className:"-btn"}),e.children)},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,a=t.showPageSizeOptions,o=t.pageSizeOptions,c=t.pageSize,l=t.showPageJump,g=t.canPrevious,d=t.canNext,p=t.onPageSizeChange,h=t.className,f=t.PreviousComponent,I=void 0===f?u:f,C=t.NextComponent,m=void 0===C?u:C;return i.default.createElement("div",{className:(0,s.default)(h,"-pagination"),style:this.props.paginationStyle},i.default.createElement("div",{className:"-previous"},i.default.createElement(I,{onClick:function(t){g&&e.changePage(r-1)},disabled:!g},this.props.previousText)),i.default.createElement("div",{className:"-center"},i.default.createElement("span",{className:"-pageInfo"},this.props.pageText," ",l?i.default.createElement("div",{className:"-pageJump"},i.default.createElement("input",{type:""===this.state.page?"text":"number",onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},value:""===this.state.page?"":this.state.page+1,onBlur:this.applyPage,onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()}})):i.default.createElement("span",{className:"-currentPage"},r+1)," ",this.props.ofText," ",i.default.createElement("span",{className:"-totalPages"},n||1)),a&&i.default.createElement("span",{className:"select-wrap -pageSizeOptions"},i.default.createElement("select",{onChange:function(e){return p(Number(e.target.value))},value:c},o.map((function(t,n){return i.default.createElement("option",{key:n,value:t},t," ",e.props.rowsText)}))))),i.default.createElement("div",{className:"-next"},i.default.createElement(m,{onClick:function(t){d&&e.changePage(r+1)},disabled:!d},this.props.nextText)))}}]),t}(o.Component);t.default=l},8461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(2007),o=(r=a)&&r.__esModule?r:{default:r};t.default={data:o.default.array,loading:o.default.bool,showPagination:o.default.bool,showPaginationTop:o.default.bool,showPaginationBottom:o.default.bool,showPageSizeOptions:o.default.bool,pageSizeOptions:o.default.array,defaultPageSize:o.default.number,showPageJump:o.default.bool,collapseOnSortingChange:o.default.bool,collapseOnPageChange:o.default.bool,collapseOnDataChange:o.default.bool,freezeWhenExpanded:o.default.bool,sortable:o.default.bool,resizable:o.default.bool,filterable:o.default.bool,defaultSortDesc:o.default.bool,defaultSorted:o.default.array,defaultFiltered:o.default.array,defaultResized:o.default.array,defaultExpanded:o.default.object,defaultFilterMethod:o.default.func,defaultSortMethod:o.default.func,onPageChange:o.default.func,onPageSizeChange:o.default.func,onSortedChange:o.default.func,onFilteredChange:o.default.func,onResizedChange:o.default.func,onExpandedChange:o.default.func,pivotBy:o.default.array,pivotValKey:o.default.string,pivotIDKey:o.default.string,subRowsKey:o.default.string,aggregatedKey:o.default.string,nestingLevelKey:o.default.string,originalKey:o.default.string,indexKey:o.default.string,groupedByPivotKey:o.default.string,onFetchData:o.default.func,className:o.default.string,style:o.default.object,getProps:o.default.object,getTableProps:o.default.object,getTheadGroupProps:o.default.object,getTheadGroupTrProps:o.default.object,getTheadGroupThProps:o.default.object,getTheadProps:o.default.object,getTheadTrProps:o.default.object,getTheadThProps:o.default.object,getTheadFilterProps:o.default.object,getTheadFilterTrProps:o.default.object,getTheadFilterThProps:o.default.object,getTbodyProps:o.default.object,getTrGroupProps:o.default.object,getTrProps:o.default.object,getTdProps:o.default.object,getTfootProps:o.default.object,getTfootTrProps:o.default.object,getTfootTdProps:o.default.object,getPaginationProps:o.default.object,getLoadingProps:o.default.object,getNoDataProps:o.default.object,getResizerProps:o.default.object,columns:o.default.shape({Cell:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Header:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Footer:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Aggregated:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Pivot:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),PivotValue:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Expander:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Filter:o.default.oneOfType([o.default.element,o.default.func]),sortable:o.default.bool,resizable:o.default.bool,filterable:o.default.bool,show:o.default.bool,minWidth:o.default.number,className:o.default.string,style:o.default.object,getProps:o.default.object,aggregate:o.default.func,headerClassName:o.default.string,headerStyle:o.default.object,getHeaderProps:o.default.object,footerClassName:o.default.string,footerStyle:o.default.object,getFooterProps:o.default.object,filterMethod:o.default.func,filterAll:o.default.bool,sortMethod:o.default.func}),expanderDefaults:o.default.shape({sortable:o.default.bool,resizable:o.default.bool,filterable:o.default.bool,width:o.default.number}),pivotDefaults:o.default.object,previousText:o.default.string,nextText:o.default.string,loadingText:o.default.string,noDataText:o.default.string,pageText:o.default.string,ofText:o.default.string,rowsText:o.default.string,TableComponent:o.default.element,TheadComponent:o.default.element,TbodyComponent:o.default.element,TrGroupComponent:o.default.element,TrComponent:o.default.element,ThComponent:o.default.element,TdComponent:o.default.element,TfootComponent:o.default.element,FilterComponent:o.default.element,ExpanderComponent:o.default.element,PivotValueComponent:o.default.element,AggregatedComponent:o.default.element,PivotComponent:o.default.element,PaginationComponent:o.default.element,PreviousComponent:o.default.element,NextComponent:o.default.element,LoadingComponent:o.default.element,NoDataComponent:o.default.element,ResizerComponent:o.default.element,PadRowComponent:o.default.element}},7689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=i(n(2791)),o=i(n(1694));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e){return Array.isArray(e)}function u(e){return l(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(c(e))for(var n=0;n<e.length;n++)l(e[n],t);else t.push(e);return t}t.default={get:function(e,t,n){if(!t)return e;var r=u(t),a=void 0;try{a=r.reduce((function(e,t){return e[t]}),e)}catch(o){}return"undefined"!==typeof a?a:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=u(t),a=void 0,o=e;for(;(a=r.shift())&&r.length;)o[a]||(o[a]={}),o=o[a];return o[a]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort((function(e,a){for(var o=0;o<t.length;o++){var i=t[o],s=!1===n[o]||"desc"===n[o],c=i(e,a);if(c)return s?-c:c}return n[0]?e[r]-a[r]:a[r]-e[r]}))},range:function(e){for(var t=[],n=0;n<e;n++)t.push(e);return t},remove:function(e,t){return e.filter((function(n,r){return!!t(n)&&(e.splice(r,1),!0)}))},clone:function(e){try{return JSON.parse(JSON.stringify(e,(function(e,t){return"function"===typeof t?t.toString():t})))}catch(t){return e}},getFirstDefined:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)if("undefined"!==typeof t[r])return t[r]},sum:function(e){return e.reduce((function(e,t){return e+t}),0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,i=t.className,c=s(t,["children","className"]);return a.default.createElement("div",r({className:(0,o.default)(e,i)},c),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce((function(e,n,r){var a="function"===typeof t?t(n,r):n[t];return e[a]=c(e[a])?e[a]:[],e[a].push(n),e}),{})},isArray:c,splitProps:function(e){var t=e.className,n=e.style,r=s(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&"undefined"!==typeof e[n]&&(t[n]=e[n]);return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"===typeof e?Object.getPrototypeOf(e).isReactComponent?a.default.createElement(e,t):e(t):n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}}},97:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var c=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,o=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||o)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/o,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var i=this.ctx,s=this.canvas;return i&&s&&(n.mirrored&&(i.translate(s.width,0),i.scale(-1,1)),i.imageSmoothingEnabled=n.imageSmoothing,i.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(i.scale(-1,1),i.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var o={video:"undefined"===typeof a||a};n.audio&&(o.audio="undefined"===typeof r||r),e.requestUserMediaId++;var i=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(o).then((function(n){e.unmounted||i!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},o=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,i=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(i=e.id)}));var s=o(n.audioConstraints);s&&(t=s);var c=o(n.videoConstraints);c&&(i=c),r(a(t),a(i))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),c=n.style,u=void 0===c?{}:c,l=n.children,g=i(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),d=s?o(o({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",o({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:d},g)),l&&l(p))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=c},react:function(t,n){t.exports=e}}).default},e.exports=r(n(2791))},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;a=o("react.element"),t.Fragment=o("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:l,props:o,_owner:i.current}}t.jsx=u,t.jsxs=u},9117:function(e,t,n){"use strict";var r=n(1725),a=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,s=60110,c=60112;t.Suspense=60113;var u=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var g=Symbol.for;a=g("react.element"),o=g("react.portal"),t.Fragment=g("react.fragment"),t.StrictMode=g("react.strict_mode"),t.Profiler=g("react.profiler"),i=g("react.provider"),s=g("react.context"),c=g("react.forward_ref"),t.Suspense=g("react.suspense"),u=g("react.memo"),l=g("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f={};function I(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}function C(){}function m(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}I.prototype.isReactComponent={},I.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},I.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},C.prototype=I.prototype;var v=m.prototype=new C;v.constructor=m,r(v,I.prototype),v.isPureReactComponent=!0;var b={current:null},A=Object.prototype.hasOwnProperty,y={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,o={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)A.call(t,r)&&!y.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:a,type:e,key:i,ref:s,props:o,_owner:b.current}}function Z(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function w(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function B(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case a:case o:c=!0}}if(c)return i=i(c=e),e=""===r?"."+w(c,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),B(i,t,n,"",(function(e){return e}))):null!=i&&(Z(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=r+w(s=e[u],u);c+=B(s,t,n,l,i)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=B(s=s.value,t,n,l=r+w(s,u++),i);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function G(e,t,n){if(null==e)return e;var r=[],a=0;return B(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function x(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function W(){var e=R.current;if(null===e)throw Error(p(321));return e}var V={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:G,forEach:function(e,t,n){G(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return G(e,(function(){t++})),t},toArray:function(e){return G(e,(function(e){return e}))||[]},only:function(e){if(!Z(e))throw Error(p(143));return e}},t.Component=I,t.PureComponent=m,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),i=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=b.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)A.call(t,l)&&!y.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){u=Array(l);for(var g=0;g<l;g++)u[g]=arguments[g+2];o.children=u}return{$$typeof:a,type:e.type,key:i,ref:s,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=Z,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return W().useCallback(e,t)},t.useContext=function(e,t){return W().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return W().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return W().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return W().useLayoutEffect(e,t)},t.useMemo=function(e,t){return W().useMemo(e,t)},t.useReducer=function(e,t,n){return W().useReducer(e,t,n)},t.useRef=function(e){return W().useRef(e)},t.useState=function(e){return W().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(W){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof I?t:I,o=Object.create(a.prototype),i=new G(r||[]);return o._invoke=function(e,t,n){var r=g;return function(a,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return R()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===g)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:d,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,i),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(W){return{type:"throw",arg:W}}}e.wrap=u;var g="suspendedStart",d="suspendedYield",p="executing",h="completed",f={};function I(){}function C(){}function m(){}var v={};c(v,o,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(x([])));A&&A!==n&&r.call(A,o)&&(v=A);var y=m.prototype=I.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function Z(e,t){function n(a,o,i,s){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,g=u.value;return g&&"object"===typeof g&&r.call(g,"__await")?t.resolve(g.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(g).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function G(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:t,done:!0}}return C.prototype=m,c(y,"constructor",m),c(m,"constructor",C),C.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},k(Z.prototype),c(Z.prototype,i,(function(){return this})),e.AsyncIterator=Z,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new Z(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(y),c(y,s,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;B(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},8688:function(e,t,n){"use strict";var r=n(7800);function a(e,t,n,a,o){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),i+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(a?a.id:"-")+" "+s+"\r\n";i+="a="+c,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),i}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},a=function(e,t,n,a){var o=r(e.parameters.apt,n),i=r(t.parameters.apt,a);return o&&i&&o.name.toLowerCase()===i.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var i=t.codecs[o];if(r.name.toLowerCase()===i.name.toLowerCase()&&r.clockRate===i.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&i.parameters.apt&&!a(r,i,e.codecs,t.codecs))continue;(i=JSON.parse(JSON.stringify(i))).numChannels=Math.min(r.numChannels,i.numChannels),n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var a=t.headerExtensions[r];if(e.uri===a.uri){n.headerExtensions.push(a);break}}})),n}function i(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,a){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=a,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var l=function(n){var a=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){a[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"===typeof r;return a&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=a?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var i=n.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();r.iceTransport=a.iceTransport,r.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var a=0;a<this.transceivers.length;a++)this.transceivers[a].track||this.transceivers[a].kind!==t.kind||(r=this.transceivers[a]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var a=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(a,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;a.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},a.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),a},l.prototype._gather=function(t,n){var a=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var i=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(a.usingBundle&&n>0)){var i=new Event("icecandidate");i.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);i.candidate=Object.assign(i.candidate,r.parseCandidate(u)),i.candidate.candidate=u,i.candidate.toJSON=function(){return{candidate:i.candidate.candidate,sdpMid:i.candidate.sdpMid,sdpMLineIndex:i.candidate.sdpMLineIndex,usernameFragment:i.candidate.usernameFragment}}}var l=r.getMediaSections(a._localDescription.sdp);l[i.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+i.candidate.candidate+"\r\n",a._localDescription.sdp=r.getDescription(a._localDescription.sdp)+l.join("");var g=a.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==a.iceGatheringState&&(a.iceGatheringState="gathering",a._emitGatheringStateChange()),c||a._dispatchEvent("icecandidate",i),g&&(a._dispatchEvent("icecandidate",new Event("icecandidate")),a.iceGatheringState="complete",a._emitGatheringStateChange())}},e.setTimeout((function(){i.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,a){var i=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),a&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},l.prototype.setLocalDescription=function(e){var t,n,a=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!i("setLocalDescription",e.type,a.signalingState)||a._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+a.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);a.transceivers[t].localCapabilities=n})),a.transceivers.forEach((function(e,t){a._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(a._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var i=a.transceivers[t],c=i.iceGatherer,u=i.iceTransport,l=i.dtlsTransport,g=i.localCapabilities,d=i.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!i.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);s&&(h.role="server"),a.usingBundle&&0!==t||(a._gather(i.mid,t),"new"===u.state&&u.start(c,p,s?"controlling":"controlled"),"new"===l.state&&l.start(h));var f=o(g,d);a._transceive(i,f.codecs.length>0,!1)}}))}return a._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?a._updateSignalingState("have-local-offer"):a._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(a){var l=this;if(-1===["offer","answer"].indexOf(a.type))return Promise.reject(c("TypeError",'Unsupported type "'+a.type+'"'));if(!i("setRemoteDescription",a.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+a.type+" in state "+l.signalingState));var g={};l.remoteStreams.forEach((function(e){g[e.id]=e}));var d=[],p=r.splitSections(a.sdp),h=p.shift(),f=r.matchPrefix(h,"a=ice-lite").length>0,I=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=I;var C=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!C&&C.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(i,c){var u=r.splitLines(i),p=r.getKind(i),C=r.isRejected(i)&&0===r.matchPrefix(i,"a=bundle-only").length,m=u[0].substr(2).split(" ")[2],v=r.getDirection(i,h),b=r.parseMsid(i),A=r.getMid(i)||r.generateIdentifier();if(C||"application"===p&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m))l.transceivers[c]={mid:A,kind:p,protocol:m,rejected:!0};else{var y,k,Z,S,w,B,G,x,R;!C&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(p,!0));var W,V,N=r.parseRtpParameters(i);C||(W=r.getIceParameters(i,h),(V=r.getDtlsParameters(i,h)).role="client"),G=r.parseRtpEncodingParameters(i);var X=r.parseRtcpParameters(i),J=r.matchPrefix(i,"a=end-of-candidates",h).length>0,F=r.matchPrefix(i,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===a.type||"answer"===a.type)&&!C&&I&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==a.type||C){if("answer"===a.type&&!C){k=(y=l.transceivers[c]).iceGatherer,Z=y.iceTransport,S=y.dtlsTransport,w=y.rtpReceiver,B=y.sendEncodingParameters,x=y.localCapabilities,l.transceivers[c].recvEncodingParameters=G,l.transceivers[c].remoteCapabilities=N,l.transceivers[c].rtcpParameters=X,F.length&&"new"===Z.state&&(!f&&!J||I&&0!==c?F.forEach((function(e){s(y.iceTransport,e)})):Z.setRemoteCandidates(F)),I&&0!==c||("new"===Z.state&&Z.start(k,W,"controlling"),"new"===S.state&&S.start(V)),!o(y.localCapabilities,y.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,l._transceive(y,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!w||"sendrecv"!==v&&"sendonly"!==v?delete y.rtpReceiver:(R=w.track,b?(g[b.stream]||(g[b.stream]=new e.MediaStream),n(R,g[b.stream]),d.push([R,w,g[b.stream]])):(g.default||(g.default=new e.MediaStream),n(R,g.default),d.push([R,w,g.default])))}}else{(y=l.transceivers[c]||l._createTransceiver(p)).mid=A,y.iceGatherer||(y.iceGatherer=l._createIceGatherer(c,I)),F.length&&"new"===y.iceTransport.state&&(!J||I&&0!==c?F.forEach((function(e){s(y.iceTransport,e)})):y.iceTransport.setRemoteCandidates(F)),x=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(x.codecs=x.codecs.filter((function(e){return"rtx"!==e.name}))),B=y.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var E,T=!1;if("sendrecv"===v||"sendonly"===v){if(T=!y.rtpReceiver,w=y.rtpReceiver||new e.RTCRtpReceiver(y.dtlsTransport,p),T)R=w.track,b&&"-"===b.stream||(b?(g[b.stream]||(g[b.stream]=new e.MediaStream,Object.defineProperty(g[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(R,"id",{get:function(){return b.track}}),E=g[b.stream]):(g.default||(g.default=new e.MediaStream),E=g.default)),E&&(n(R,E),y.associatedRemoteMediaStreams.push(E)),d.push([R,w,E])}else y.rtpReceiver&&y.rtpReceiver.track&&(y.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===y.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),y.associatedRemoteMediaStreams=[]);y.localCapabilities=x,y.remoteCapabilities=N,y.rtpReceiver=w,y.rtcpParameters=X,y.sendEncodingParameters=B,y.recvEncodingParameters=G,l._transceive(l.transceivers[c],!1,T)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===a.type?"active":"passive"),l._remoteDescription={type:a.type,sdp:a.sdp},"offer"===a.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(g).forEach((function(t){var n=g[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}d.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),d.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,i=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(i=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)}));o>0||i>0;)o>0&&(n._createTransceiver("audio"),o--),i>0&&(n._createTransceiver("video"),i--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(a,o){var i=a.track,s=a.kind,c=a.mid||r.generateIdentifier();a.mid=c,a.iceGatherer||(a.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),a.remoteCapabilities&&a.remoteCapabilities.codecs&&a.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(a.remoteCapabilities&&a.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=a.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];i&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),a.wantReceive&&(a.rtpReceiver=new e.RTCRtpReceiver(a.dtlsTransport,s)),a.localCapabilities=u,a.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=a(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var i=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(i+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=a(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:i});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(a,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var i=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){i=u;break}var l=n.transceivers[i];if(!l)return o(c("OperationError","Can not add ICE candidate"));if(l.rejected)return a();var g=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===g.protocol&&(0===g.port||9===g.port))return a();if(g.component&&1!==g.component)return a();if((0===i||i>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!s(l.iceTransport,g))return o(c("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[i]+="a="+(g.type?d:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);a()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var g=["createOffer","createAnswer"];return g.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},207:function(e,t){"use strict";var n;!function(){var r=t||{}||this||window;void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n),r.default=r;var a="http://www.w3.org/2000/xmlns/",o="http://www.w3.org/2000/svg",i=/url\(["']?(.+?)["']?\)/,s={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},c=function(e){return e instanceof HTMLElement||e instanceof SVGElement},u=function(e){if(!c(e))throw new Error("an HTMLElement or SVGElement is required; got "+e)},l=function(e){return new Promise((function(t,n){c(e)?t(e):n(new Error("an HTMLElement or SVGElement is required; got "+e))}))},g=function(e){var t=Object.keys(s).filter((function(t){return e.indexOf("."+t)>0})).map((function(e){return s[e]}));return t?t[0]:(console.error("Unknown font format for "+e+". Fonts may not be working correctly."),"application/octet-stream")},d=function(e,t,n){var r=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[n]||null!==t.getAttribute(n)&&!t.getAttribute(n).match(/%$/)&&parseInt(t.getAttribute(n))||e.getBoundingClientRect()[n]||parseInt(t.style[n])||parseInt(window.getComputedStyle(e).getPropertyValue(n));return"undefined"===typeof r||null===r||isNaN(parseFloat(r))?0:r},p=function(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r),o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return new Blob([r],{type:n})},h=function(e){return Promise.all(Array.from(e.querySelectorAll("image")).map((function(e){var t,n=e.getAttributeNS("http://www.w3.org/1999/xlink","href")||e.getAttribute("href");return n?((t=n)&&0===t.lastIndexOf("http",0)&&-1===t.lastIndexOf(window.location.host)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+(new Date).valueOf()),new Promise((function(t,r){var a=document.createElement("canvas"),o=new Image;o.crossOrigin="anonymous",o.src=n,o.onerror=function(){return r(new Error("Could not load "+n))},o.onload=function(){a.width=o.width,a.height=o.height,a.getContext("2d").drawImage(o,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",a.toDataURL("image/png")),t(!0)}}))):Promise.resolve(null)})))},f={},I=function(e){return Promise.all(e.map((function(e){return new Promise((function(t,n){if(f[e.url])return t(f[e.url]);var r=new XMLHttpRequest;r.addEventListener("load",(function(){var n=function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)}(r.response),a=e.text.replace(i,'url("data:'+e.format+";base64,"+n+'")')+"\n";f[e.url]=a,t(a)})),r.addEventListener("error",(function(n){console.warn("Failed to load font from: "+e.url,n),f[e.url]=null,t(null)})),r.addEventListener("abort",(function(n){console.warn("Aborted loading font from: "+e.url,n),t(null)})),r.open("GET",e.url),r.responseType="arraybuffer",r.send()}))}))).then((function(e){return e.filter((function(e){return e})).join("")}))},C=null,m=function(e,t){var n=t||{},r=n.selectorRemap,a=n.modifyStyle,o=n.modifyCss,s=n.fonts,c=n.excludeUnusedCss,u=o||function(e,t){return(r?r(e):e)+"{"+(a?a(t):t)+"}\n"},l=[],d="undefined"===typeof s,p=s||[];return(C||(C=Array.from(document.styleSheets).map((function(e){try{return{rules:e.cssRules,href:e.href}}catch(t){return console.warn("Stylesheet could not be loaded: "+e.href,t),{}}})))).forEach((function(t){var n=t.rules,r=t.href;n&&Array.from(n).forEach((function(t){if("undefined"!=typeof t.style)if(function(e,t){if(t)try{return e.querySelector(t)||e.parentNode&&e.parentNode.querySelector(t)}catch(n){console.warn('Invalid CSS selector "'+t+'"',n)}}(e,t.selectorText))l.push(u(t.selectorText,t.style.cssText));else if(d&&t.cssText.match(/^@font-face/)){var n=function(e,t){var n=e.cssText.match(i),r=n&&n[1]||"";if(r&&!r.match(/^data:/)&&"about:blank"!==r){var a=r.startsWith("../")?t+"/../"+r:r.startsWith("./")?t+"/."+r:r;return{text:e.cssText,format:g(a),url:a}}}(t,r);n&&p.push(n)}else c||l.push(t.cssText)}))})),I(p).then((function(e){return l.join("\n")+e}))},v=function(){if(!navigator.msSaveOrOpenBlob&&!("download"in document.createElement("a")))return{popup:window.open()}};r.prepareSvg=function(e,t,n){u(e);var r=t||{},i=r.left,s=void 0===i?0:i,c=r.top,l=void 0===c?0:c,g=r.width,p=r.height,f=r.scale,I=void 0===f?1:f,C=r.responsive,v=void 0!==C&&C,b=r.excludeCss,A=void 0!==b&&b;return h(e).then((function(){var r=e.cloneNode(!0);r.style.backgroundColor=(t||{}).backgroundColor||e.style.backgroundColor;var i=function(e,t,n,r){if("svg"===e.tagName)return{width:n||d(e,t,"width"),height:r||d(e,t,"height")};if(e.getBBox){var a=e.getBBox(),o=a.x,i=a.y;return{width:o+a.width,height:i+a.height}}}(e,r,g,p),c=i.width,u=i.height;if("svg"!==e.tagName){if(!e.getBBox)return void console.error("Attempted to render non-SVG element",e);null!=r.getAttribute("transform")&&r.setAttribute("transform",r.getAttribute("transform").replace(/translate\(.*?\)/,""));var h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.appendChild(r),r=h}if(r.setAttribute("version","1.1"),r.setAttribute("viewBox",[s,l,c,u].join(" ")),r.getAttribute("xmlns")||r.setAttributeNS(a,"xmlns",o),r.getAttribute("xmlns:xlink")||r.setAttributeNS(a,"xmlns:xlink","http://www.w3.org/1999/xlink"),v?(r.removeAttribute("width"),r.removeAttribute("height"),r.setAttribute("preserveAspectRatio","xMinYMin meet")):(r.setAttribute("width",c*I),r.setAttribute("height",u*I)),Array.from(r.querySelectorAll("foreignObject > *")).forEach((function(e){e.setAttributeNS(a,"xmlns","svg"===e.tagName?o:"http://www.w3.org/1999/xhtml")})),!A)return m(e,t).then((function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="<![CDATA[\n"+e+"\n]]>";var a=document.createElement("defs");a.appendChild(t),r.insertBefore(a,r.firstChild);var o=document.createElement("div");o.appendChild(r);var i=o.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if("function"!==typeof n)return{src:i,width:c,height:u};n(i,c,u)}));var f=document.createElement("div");f.appendChild(r);var C=f.innerHTML;if("function"!==typeof n)return{src:C,width:c,height:u};n(C,c,u)}))},r.svgAsDataUri=function(e,t,n){return u(e),r.prepareSvg(e,t).then((function(e){var t=e.src,r=e.width,a=e.height,o="data:image/svg+xml;base64,"+window.btoa(decodeURIComponent(encodeURIComponent('<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+t).replace(/%([0-9A-F]{2})/g,(function(e,t){var n=String.fromCharCode("0x"+t);return"%"===n?"%25":n}))));return"function"===typeof n&&n(o,r,a),o}))},r.svgAsPngUri=function(e,t,n){u(e);var a=t||{},o=a.encoderType,i=void 0===o?"image/png":o,s=a.encoderOptions,c=void 0===s?.8:s,l=a.canvg,g=function(e){var t=e.src,r=e.width,a=e.height,o=document.createElement("canvas"),s=o.getContext("2d"),u=window.devicePixelRatio||1;o.width=r*u,o.height=a*u,o.style.width=o.width+"px",o.style.height=o.height+"px",s.setTransform(u,0,0,u,0,0),l?l(o,t):s.drawImage(t,0,0);var g=void 0;try{g=o.toDataURL(i,c)}catch(d){if("undefined"!==typeof SecurityError&&d instanceof SecurityError||"SecurityError"===d.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw d}return"function"===typeof n&&n(g,o.width,o.height),Promise.resolve(g)};return l?r.prepareSvg(e,t).then(g):r.svgAsDataUri(e,t).then((function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(g({src:r,width:r.width,height:r.height}))},r.onerror=function(){n("There was an error loading the data URI as an image on the following SVG\n"+window.atob(e.slice(26))+"Open the following link to see browser's diagnosis\n"+e)},r.src=e}))}))},r.download=function(e,t,n){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(p(t),e);else{var r=document.createElement("a");if("download"in r){r.download=e,r.style.display="none",document.body.appendChild(r);try{var a=p(t),o=URL.createObjectURL(a);r.href=o,r.onclick=function(){return requestAnimationFrame((function(){return URL.revokeObjectURL(o)}))}}catch(i){console.error(i),console.warn("Error while getting object URL. Falling back to string URL."),r.href=t}r.click(),document.body.removeChild(r)}else n&&n.popup&&(n.popup.document.title=e,n.popup.location.replace(t))}},r.saveSvg=function(e,t,n){var a=v();return l(e).then((function(e){return r.svgAsDataUri(e,n||{})})).then((function(e){return r.download(t,e,a)}))},r.saveSvgAsPng=function(e,t,n){var a=v();return l(e).then((function(e){return r.svgAsPngUri(e,n||{})})).then((function(e){return r.download(t,e,a)}))}}()},6813:function(e,t){"use strict";var n,r,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,l=null,g=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(g,0))},r=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var h=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var f=!1,I=null,C=-1,m=5,v=0;t.unstable_shouldYield=function(){return t.unstable_now()>=v},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,A=b.port2;b.port1.onmessage=function(){if(null!==I){var e=t.unstable_now();v=e+m;try{I(!0,e)?A.postMessage(null):(f=!1,I=null)}catch(n){throw A.postMessage(null),n}}else f=!1},n=function(e){I=e,f||(f=!0,A.postMessage(null))},r=function(e,n){C=d((function(){e(t.unstable_now())}),n)},a=function(){p(C),C=-1}}function y(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<S(a,t)))break e;e[r]=t,e[n]=a,n=r}}function k(e){return void 0===(e=e[0])?null:e}function Z(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],s=o+1,c=e[s];if(void 0!==i&&0>S(i,n))void 0!==c&&0>S(c,i)?(e[r]=c,e[s]=n,r=s):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==c&&0>S(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var w=[],B=[],G=1,x=null,R=3,W=!1,V=!1,N=!1;function X(e){for(var t=k(B);null!==t;){if(null===t.callback)Z(B);else{if(!(t.startTime<=e))break;Z(B),t.sortIndex=t.expirationTime,y(w,t)}t=k(B)}}function J(e){if(N=!1,X(e),!V)if(null!==k(w))V=!0,n(F);else{var t=k(B);null!==t&&r(J,t.startTime-e)}}function F(e,n){V=!1,N&&(N=!1,a()),W=!0;var o=R;try{for(X(n),x=k(w);null!==x&&(!(x.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=x.callback;if("function"===typeof i){x.callback=null,R=x.priorityLevel;var s=i(x.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?x.callback=s:x===k(w)&&Z(w),X(n)}else Z(w);x=k(w)}if(null!==x)var c=!0;else{var u=k(B);null!==u&&r(J,u.startTime-n),c=!1}return c}finally{x=null,R=o,W=!1}}var E=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){V||W||(V=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return k(w)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=E,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:G++,callback:o,priorityLevel:e,startTime:i,expirationTime:c=i+c,sortIndex:-1},i>s?(e.sortIndex=i,y(B,e),null===k(w)&&e===k(B)&&(N?a():N=!0,r(J,i-s))):(e.sortIndex=c,y(w,e),V||W||(V=!0,n(F))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},7800:function(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),a=0;a<r.length;a++)n[(t=r[a].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],a=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&a?{usernameFragment:r.substr(12),password:a.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),a=3;a<r.length;a++){var o=r[a],i=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(i){var s=t.parseRtpMap(i),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var a=0;return n.codecs.forEach((function(e){e.maxptime>a&&(a=e.maxptime)})),a>0&&(r+="a=maxptime:"+a+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],a=t.parseRtpParameters(e),o=-1!==a.fecMechanisms.indexOf("RED"),i=-1!==a.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),a.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var a=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=0===a.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return a.length>0?{stream:(n=a[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),a=t.matchPrefix(e,"a=max-message-size:");a.length>0&&(n=parseInt(a[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var i=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var a=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+a+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,a){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var i="msid:"+a.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+i,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),a=0;a<r.length;a++)switch(r[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[a].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},6699:function(e,t,n){var r=n(2501),a=n(9112),o=n(2132),i=n(890),s=n(4113),c=n(1350),u=n(3411);u.alea=r,u.xor128=a,u.xorwow=o,u.xorshift7=i,u.xor4096=s,u.tychei=c,e.exports=u},2501:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.alea=c}(0,e=n.nmd(e),n.amdD)},1350:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.tychei=c}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor128=c}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),a=0,o=-32;o<c;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor4096=c}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorshift7=c}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorwow=c}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,o){var i,s=this,c=256,u=o.pow(c,6),l=o.pow(2,52),g=2*l,d=255;function p(e,t,n){var r=[],d=C(I((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(a)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(c):(e=new Uint8Array(c),(s.crypto||s.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,m(a)]}}():e,3),r),p=new h(r),v=function(){for(var e=p.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=p.g(1);for(;e>=g;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|p.g(4)},v.quick=function(){return p.g(4)/4294967296},v.double=v,C(m(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&f(r,p),e.state=function(){return f(p,{})}),n?(o.random=e,t):e})(v,d,"global"in t?t.global:this==o,t.state)}function h(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<c;)i[a]=a++;for(a=0;a<c;a++)i[a]=i[o=d&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=d&a+1],n=n*c+i[d&(i[a]=i[o=d&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(c)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function I(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(I(e[n],t-1))}catch(o){}return r.length?r:"string"==a?e:e+"\0"}function C(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(o.seedrandom=p,C(o.random(),a),e.exports){e.exports=p;try{i=n(5042)}catch(v){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},9613:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!s(u))return!1;var l=e[u],g=t[u];if(!1===(a=n?n.call(r,l,g,u):void 0)||void 0===a&&l!==g)return!1}return!0}},845:function(e){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},499:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},9481:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ie}});var r={};n.r(r),n.d(r,{fixNegotiationNeeded:function(){return N},shimAddTrackRemoveTrack:function(){return W},shimAddTrackRemoveTrackWithNative:function(){return R},shimGetDisplayMedia:function(){return Z},shimGetSendersWithDtmf:function(){return B},shimGetStats:function(){return G},shimGetUserMedia:function(){return k},shimMediaStream:function(){return S},shimOnTrack:function(){return w},shimPeerConnection:function(){return V},shimSenderReceiverGetStats:function(){return x}});var a={};n.r(a),n.d(a,{shimGetDisplayMedia:function(){return E},shimGetUserMedia:function(){return F},shimPeerConnection:function(){return T},shimReplaceTrack:function(){return Y}});var o={};n.r(o),n.d(o,{shimAddTransceiver:function(){return O},shimCreateAnswer:function(){return Q},shimCreateOffer:function(){return j},shimGetDisplayMedia:function(){return M},shimGetParameters:function(){return U},shimGetUserMedia:function(){return H},shimOnTrack:function(){return D},shimPeerConnection:function(){return K},shimRTCDataChannel:function(){return _},shimReceiverGetStats:function(){return L},shimRemoveStream:function(){return P},shimSenderGetStats:function(){return z}});var i={};n.r(i),n.d(i,{shimAudioContext:function(){return ie},shimCallbacksAPI:function(){return ee},shimConstraints:function(){return ne},shimCreateOfferLegacy:function(){return oe},shimGetUserMedia:function(){return te},shimLocalStreamsAPI:function(){return q},shimRTCIceServerUrls:function(){return re},shimRemoteStreamsAPI:function(){return $},shimTrackEventTransceiver:function(){return ae}});var s={};n.r(s),n.d(s,{removeExtmapAllowMixed:function(){return pe},shimAddIceCandidateNullOrEmpty:function(){return he},shimConnectionState:function(){return de},shimMaxMessageSize:function(){return le},shimRTCIceCandidate:function(){return ue},shimSendThrowTypeError:function(){return ge}});var c=n(4942),u=!0,l=!0;function g(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function d(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return a.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),a.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function p(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(l=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function f(){if("object"===typeof window){if(u)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function I(e,t){l&&console.warn(e+" is deprecated, please use "+t+" instead.")}function C(e){var t={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=g(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=g(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=g(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=g(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e){return m(e)?Object.keys(e).reduce((function(t,n){var r=m(e[n]),a=r?v(e[n]):e[n],o=r&&!Object.keys(a).length;return void 0===a||o?t:Object.assign(t,(0,c.Z)({},n,a))}),{}):e}function b(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?b(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){b(e,e.get(t),n)}))})))}function A(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(null===t)return a;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&b(e,n,a)}))})),a}var y=f;function k(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);var a=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"===typeof r.ideal?(o[a("min",n)]=r.ideal,t.optional.push(o),(o={})[a("max",n)]=r.ideal,t.optional.push(o)):(o[a("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[a("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[a(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(t.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){var i=e.video.facingMode;i=i&&("object"===typeof i?i:{ideal:i});var s,c=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?s=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(s=["front"]),s)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=i.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),y("chrome: "+JSON.stringify(e)),a(e)}));e.video=r(e.video)}return y("chrome: "+JSON.stringify(e)),a(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){a(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return i(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(o(e))}))}))}}}}function Z(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,a=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),a&&(n.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function S(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function w(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var a;a=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var a;a=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=a,o.transceiver={receiver:a},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else d(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function B(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var a=n.apply(this,arguments);return a||(a=t(this,e),this._senders.push(a)),a};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var i=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function G(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],a=n[1],o=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var i=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){a(s(i(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(i(e)))},r])})).then(a,o)}}}function x(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return A(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),d(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return A(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}}}function R(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var a=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(a)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),a.apply(this,arguments)}}function W(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return R(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var a=new e.MediaStream(t.getTracks());this._streams[t.id]=a,this._reverseStreams[a.id]=t,t=a}r.apply(this,[t])};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var a=[].slice.call(arguments,1);if(1!==a.length||!a[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,c.Z)({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var i=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=i.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(a.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),a.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function V(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,c.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function N(e,t){d(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var X=n(8688),J=n.n(X);function F(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}function E(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function T(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=J()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&I("RTCIceServer.url","RTCIceServer.urls");var r="string"===typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),f("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function Y(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function H(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){I("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===typeof e&&"object"===typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var i=r.prototype.getSettings;r.prototype.getSettings=function(){var e=i.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===typeof e&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function M(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function D(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function K(e,t){if("object"===typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,c.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),a=e[0],o=e[1],i=e[2];return r.apply(this,[a||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,i)}}}function z(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function L(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),d(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function P(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;I("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function _(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function O(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var a=r.sender,o=a.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,a.sendEncodings=e.sendEncodings,this.setParametersPromises.push(a.setParameters(o).then((function(){delete a.sendEncodings})).catch((function(){delete a.sendEncodings}))))}return r})}}function U(e){if("object"===typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function j(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Q(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function q(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a&&a.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function $(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function ee(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,a=t.setLocalDescription,o=t.setRemoteDescription,i=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],a=n.apply(this,[r]);return t?(a.then(e,t),Promise.resolve()):a},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],a=r.apply(this,[n]);return t?(a.then(e,t),Promise.resolve()):a};var s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function te(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(ne(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ne(e){return e&&void 0!==e.video?Object.assign({},e,{video:v(e.video)}):e}function re(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],a=0;a<e.iceServers.length;a++){var o=e.iceServers[a];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(I("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[a])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function ae(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function oe(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function ie(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var se=n(7800),ce=n.n(se);function ue(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ce().parseCandidate(e.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,d(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function le(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=ce().splitSections(e.sdp);return t.shift(),t.some((function(e){var t=ce().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},a=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var a=ce().matchPrefix(e.sdp,"a=max-message-size:");return a.length>0?r=parseInt(a[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),s=e.sdpSemantics;"plan-b"===s&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var c,u=r(arguments[0]),l=a(u),g=o(arguments[0],u);c=0===l&&0===g?Number.POSITIVE_INFINITY:0===l||0===g?Math.max(l,g):Math.min(l,g);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return c}}),this._sctp=d}return i.apply(this,arguments)}}}function ge(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},d(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],a=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&a>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function de(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function pe(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function he(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},c=f,u=C(t),l={browserDetails:u,commonShim:s,extractVersion:g,disableLog:p,disableWarnings:h};switch(u.browser){case"chrome":if(!r||!V||!n.shimChrome)return c("Chrome shim is not included in this adapter release."),l;if(null===u.version)return c("Chrome shim can not determine version, not shimming."),l;c("adapter.js shimming chrome."),l.browserShim=r,he(t,u),k(t,u),S(t),V(t,u),w(t),W(t,u),B(t),G(t),x(t),N(t,u),ue(t),de(t),le(t,u),ge(t),pe(t,u);break;case"firefox":if(!o||!K||!n.shimFirefox)return c("Firefox shim is not included in this adapter release."),l;c("adapter.js shimming firefox."),l.browserShim=o,he(t,u),H(t,u),K(t,u),D(t),P(t),z(t),L(t),_(t),O(t),U(t),j(t),Q(t),ue(t),de(t),le(t,u),ge(t);break;case"edge":if(!a||!T||!n.shimEdge)return c("MS edge shim is not included in this adapter release."),l;c("adapter.js shimming edge."),l.browserShim=a,F(t),E(t),T(t,u),Y(t),le(t,u),ge(t);break;case"safari":if(!i||!n.shimSafari)return c("Safari shim is not included in this adapter release."),l;c("adapter.js shimming safari."),l.browserShim=i,he(t,u),re(t),oe(t),ee(t),q(t),$(t),ae(t),te(t),ie(t),ue(t),le(t,u),ge(t),pe(t,u);break;default:c("Unsupported browser!")}return l}({window:"undefined"===typeof window?void 0:window}),Ie=fe},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},2480:function(){},5042:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,c,"next",e)}function c(e){r(i,a,o,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return a}})},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3878);var a=n(181),o=n(5267);function i(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){s=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(e,t)||(0,a.Z)(e,t)||(0,o.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var a=n(9199),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},7478:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var a=Object.create(null);__webpack_require__.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){o[e]=function(){return n[e]}}));return o.default=function(){return n},__webpack_require__.d(a,o),a}}(),__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".bedb50ca.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="fyp:";__webpack_require__.l=function(n,r,a,o){if(e[n])e[n].push(r);else{var i,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+a){i=l;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",t+a),i.src=n),e[n]=[r];var g=function(t,r){i.onerror=i.onload=null,clearTimeout(d);var a=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(r)})),t)return t(r)},d=setTimeout(g.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=g.bind(null,i.onerror),i.onload=g.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/",function(){var e={179:0};__webpack_require__.f.j=function(t,n){var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((function(n,a){r=e[t]=[n,a]}));n.push(r[2]=a);var o=__webpack_require__.p+__webpack_require__.u(t),i=new Error;__webpack_require__.l(o,(function(n){if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,r[1](i)}}),"chunk-"+t,t)}};var t=function(t,n){var r,a,o=n[0],i=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)__webpack_require__.o(i,r)&&(__webpack_require__.m[r]=i[r]);if(s)s(__webpack_require__)}for(t&&t(n);c<o.length;c++)a=o[c],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkfyp=self.webpackChunkfyp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__={};!function(){"use strict";var e,t=__webpack_require__(2791),n=__webpack_require__.t(t,2),r=__webpack_require__(4164),a=__webpack_require__(9439),o=__webpack_require__(9008),i=__webpack_require__.n(o),s=__webpack_require__(3292),c=__webpack_require__.n(s),u=__webpack_require__(741),l=__webpack_require__(7462);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var g=function(e){return e};var d="beforeunload",p="popstate";function h(e){e.preventDefault(),e.returnValue=""}function f(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function I(){return Math.random().toString(36).substr(2,8)}function C(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,o=e.hash,i=void 0===o?"":o;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),i&&"#"!==i&&(n+="#"===i.charAt(0)?i:"#"+i),n}function m(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t){if(!e)throw new Error(t)}var b=(0,t.createContext)(null);var A=(0,t.createContext)(null);var y=(0,t.createContext)({outlet:null,matches:[]});function k(e){return function(e){var n=(0,t.useContext)(y).outlet;if(n)return(0,t.createElement)(W.Provider,{value:e},n);return n}(e.context)}function Z(e){v(!1)}function S(n){var r=n.basename,a=void 0===r?"/":r,o=n.children,i=void 0===o?null:o,s=n.location,c=n.navigationType,u=void 0===c?e.Pop:c,l=n.navigator,g=n.static,d=void 0!==g&&g;G()&&v(!1);var p=z(a),h=(0,t.useMemo)((function(){return{basename:p,navigator:l,static:d}}),[p,l,d]);"string"===typeof s&&(s=m(s));var f=s,I=f.pathname,C=void 0===I?"/":I,y=f.search,k=void 0===y?"":y,Z=f.hash,S=void 0===Z?"":Z,w=f.state,B=void 0===w?null:w,x=f.key,R=void 0===x?"default":x,W=(0,t.useMemo)((function(){var e=D(C,p);return null==e?null:{pathname:e,search:k,hash:S,state:B,key:R}}),[p,C,k,S,B,R]);return null==W?null:(0,t.createElement)(b.Provider,{value:h},(0,t.createElement)(A.Provider,{children:i,value:{location:W,navigationType:u}}))}function w(e){var n=e.children,r=e.location;return function(e,n){G()||v(!1);var r=(0,t.useContext)(y).matches,a=r[r.length-1],o=a?a.params:{},i=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;0;var s,c=x();if(n){var u,l="string"===typeof n?m(n):n;"/"===i||(null==(u=l.pathname)?void 0:u.startsWith(i))||v(!1),s=l}else s=c;var g=s.pathname||"/",d="/"===i?g:g.slice(i.length)||"/",p=function(e,t,n){void 0===n&&(n="/");var r=D(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;var a=X(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var o=null,i=0;null==o&&i<a.length;++i)o=T(a[i],r);return o}(e,{pathname:d});0;return Y(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:K([i,e.pathname]),pathnameBase:"/"===e.pathnameBase?i:K([i,e.pathnameBase])})})),r)}(N(n),r)}function B(e){G()||v(!1);var n=(0,t.useContext)(b),r=n.basename,a=n.navigator,o=V(e),i=o.hash,s=o.pathname,c=o.search,u=s;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?m(e).pathname:e.pathname}(e),g=null!=l&&l.endsWith("/");u="/"===s?r+(g?"/":""):K([r,s])}return a.createHref({pathname:u,search:c,hash:i})}function G(){return null!=(0,t.useContext)(A)}function x(){return G()||v(!1),(0,t.useContext)(A).location}function R(){G()||v(!1);var e=(0,t.useContext)(b),n=e.basename,r=e.navigator,a=(0,t.useContext)(y).matches,o=x().pathname,i=JSON.stringify(a.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);return(0,t.useEffect)((function(){s.current=!0})),(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var a=M(e,JSON.parse(i),o);"/"!==n&&(a.pathname=K([n,a.pathname])),(t.replace?r.replace:r.push)(a,t.state)}else r.go(e)}),[n,r,i,o])}var W=(0,t.createContext)(null);function V(e){var n=(0,t.useContext)(y).matches,r=x().pathname,a=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return M(e,JSON.parse(a),r)}),[e,a,r])}function N(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==Z&&v(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=N(e.props.children)),n.push(r)}else n.push.apply(n,N(e.props.children))})),n}function X(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||v(!1),o.relativePath=o.relativePath.slice(r.length));var i=K([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(!0===e.index&&v(!1),X(e.children,t,s,i)),(null!=e.path||e.index)&&t.push({path:i,score:E(i,e.index),routesMeta:s})})),t}var J=/^:\w+$/,F=function(e){return"*"===e};function E(e,t){var n=e.split("/"),r=n.length;return n.some(F)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!F(e)})).reduce((function(e,t){return e+(J.test(t)?3:""===t?1:10)}),r)}function T(e,t){for(var n=e.routesMeta,r={},a="/",o=[],i=0;i<n.length;++i){var s=n[i],c=i===n.length-1,u="/"===a?t:t.slice(a.length)||"/",l=H({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},u);if(!l)return null;Object.assign(r,l.params);var g=s.route;o.push({params:r,pathname:K([a,l.pathname]),pathnameBase:K([a,l.pathnameBase]),route:g}),"/"!==l.pathnameBase&&(a=K([a,l.pathnameBase]))}return o}function Y(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,a,o){return(0,t.createElement)(y.Provider,{children:void 0!==a.route.element?a.route.element:(0,t.createElement)(k,null),value:{outlet:r,matches:n.concat(e.slice(0,o+1))}})}),null)}function H(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=t.match(o);if(!s)return null;var c=s[0],u=c.replace(/(.)\/+$/,"$1"),l=s.slice(1),g=i.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=c.slice(0,c.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{});return{params:g,pathname:c,pathnameBase:u,pattern:e}}function M(e,t,n){var r,a="string"===typeof e?m(e):e,o=""===e||""===a.pathname?"/":a.pathname;if(null==o)r=n;else{var i=t.length-1;if(o.startsWith("..")){for(var s=o.split("/");".."===s[0];)s.shift(),i-=1;a.pathname=s.join("/")}r=i>=0?t[i]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?m(e):e,r=n.pathname,a=n.search,o=void 0===a?"":a,i=n.hash,s=void 0===i?"":i,c=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:c,search:L(o),hash:P(s)}}(a,r);return o&&"/"!==o&&o.endsWith("/")&&!c.pathname.endsWith("/")&&(c.pathname+="/"),c}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var K=function(e){return e.join("/").replace(/\/\/+/g,"/")},z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},L=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},P=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},_=__webpack_require__(184),O=function(){var e=R(),n=(0,t.useState)(""),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(""),u=(0,a.Z)(s,2),l=(u[0],u[1],(0,t.useRef)(null)),g=(0,t.useState)({position:"absolute",width:"20%",height:"20%",top:"20%",left:"0",display:"none"}),d=(0,a.Z)(g,2),p=d[0];d[1];return(0,_.jsx)("div",{className:"qrcodeContainer",children:(0,_.jsxs)("div",{className:"qrcodeButtonContainer",children:[(0,_.jsx)("button",{className:"qrcodeButton openFile",onClick:function(){l.current.openImageDialog()},children:(0,_.jsx)("i",{className:"fas fa-qrcode fa-2x"})}),(0,_.jsxs)("div",{style:p,children:[o,(0,_.jsx)(c(),{ref:l,delay:300,style:{width:"100%"},onError:function(e){console.log(e)},onScan:function(t){t&&(i(t),e("/dashboard?id=".concat(t)))},legacyMode:!0})]})]})})},U=function(){return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"fish",children:[(0,_.jsx)("div",{className:"fin"}),(0,_.jsx)("div",{className:"mouth"}),(0,_.jsx)("div",{className:"eye",children:(0,_.jsx)("div",{className:"m"})}),(0,_.jsx)("div",{className:"g"}),(0,_.jsx)("div",{className:"tail1"}),(0,_.jsx)("div",{className:"tail2"})]})})};function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}__webpack_require__(6883);var Q=__webpack_require__(7441),q=__webpack_require__(9613),$=__webpack_require__.n(q);var ee=function(e){function t(e,r,c,u,d){for(var p,h,f,I,b,y=0,k=0,Z=0,S=0,w=0,V=0,X=f=p=0,F=0,E=0,T=0,Y=0,H=c.length,M=H-1,D="",K="",z="",L="";F<H;){if(h=c.charCodeAt(F),F===M&&0!==k+S+Z+y&&(0!==k&&(h=47===k?10:47),S=Z=y=0,H++,M++),0===k+S+Z+y){if(F===M&&(0<E&&(D=D.replace(g,"")),0<D.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:D+=c.charAt(F)}h=59}switch(h){case 123:for(p=(D=D.trim()).charCodeAt(0),f=1,Y=++F;F<H;){switch(h=c.charCodeAt(F)){case 123:f++;break;case 125:f--;break;case 47:switch(h=c.charCodeAt(F+1)){case 42:case 47:e:{for(X=F+1;X<M;++X)switch(c.charCodeAt(X)){case 47:if(42===h&&42===c.charCodeAt(X-1)&&F+2!==X){F=X+1;break e}break;case 10:if(47===h){F=X+1;break e}}F=X}}break;case 91:h++;case 40:h++;case 34:case 39:for(;F++<M&&c.charCodeAt(F)!==h;);}if(0===f)break;F++}if(f=c.substring(Y,F),0===p&&(p=(D=D.replace(l,"").trim()).charCodeAt(0)),64===p){switch(0<E&&(D=D.replace(g,"")),h=D.charCodeAt(1)){case 100:case 109:case 115:case 45:E=r;break;default:E=W}if(Y=(f=t(r,E,f,h,d+1)).length,0<N&&(b=s(3,f,E=n(W,D,T),r,G,B,Y,h,d,u),D=E.join(""),void 0!==b&&0===(Y=(f=b.trim()).length)&&(h=0,f="")),0<Y)switch(h){case 115:D=D.replace(A,i);case 100:case 109:case 45:f=D+"{"+f+"}";break;case 107:f=(D=D.replace(C,"$1 $2"))+"{"+f+"}",f=1===R||2===R&&o("@"+f,3)?"@-webkit-"+f+"@"+f:"@"+f;break;default:f=D+f,112===u&&(K+=f,f="")}else f=""}else f=t(r,n(r,D,T),f,u,d+1);z+=f,f=T=E=X=p=0,D="",h=c.charCodeAt(++F);break;case 125:case 59:if(1<(Y=(D=(0<E?D.replace(g,""):D).trim()).length))switch(0===X&&(p=D.charCodeAt(0),45===p||96<p&&123>p)&&(Y=(D=D.replace(" ",":")).length),0<N&&void 0!==(b=s(1,D,r,e,G,B,K.length,u,d,u))&&0===(Y=(D=b.trim()).length)&&(D="\0\0"),p=D.charCodeAt(0),h=D.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){L+=D+c.charAt(F);break}default:58!==D.charCodeAt(Y-1)&&(K+=a(D,p,h,D.charCodeAt(2)))}T=E=X=p=0,D="",h=c.charCodeAt(++F)}}switch(h){case 13:case 10:47===k?k=0:0===1+p&&107!==u&&0<D.length&&(E=1,D+="\0"),0<N*J&&s(0,D,r,e,G,B,K.length,u,d,u),B=1,G++;break;case 59:case 125:if(0===k+S+Z+y){B++;break}default:switch(B++,I=c.charAt(F),h){case 9:case 32:if(0===S+y+k)switch(w){case 44:case 58:case 9:case 32:I="";break;default:32!==h&&(I=" ")}break;case 0:I="\\0";break;case 12:I="\\f";break;case 11:I="\\v";break;case 38:0===S+k+y&&(E=T=1,I="\f"+I);break;case 108:if(0===S+k+y+x&&0<X)switch(F-X){case 2:112===w&&58===c.charCodeAt(F-3)&&(x=w);case 8:111===V&&(x=V)}break;case 58:0===S+k+y&&(X=F);break;case 44:0===k+Z+S+y&&(E=1,I+="\r");break;case 34:case 39:0===k&&(S=S===h?0:0===S?h:S);break;case 91:0===S+k+Z&&y++;break;case 93:0===S+k+Z&&y--;break;case 41:0===S+k+y&&Z--;break;case 40:if(0===S+k+y){if(0===p)if(2*w+3*V===533);else p=1;Z++}break;case 64:0===k+Z+S+y+X+f&&(f=1);break;case 42:case 47:if(!(0<S+y+Z))switch(k){case 0:switch(2*h+3*c.charCodeAt(F+1)){case 235:k=47;break;case 220:Y=F,k=42}break;case 42:47===h&&42===w&&Y+2!==F&&(33===c.charCodeAt(Y+2)&&(K+=c.substring(Y,F+1)),I="",k=0)}}0===k&&(D+=I)}V=w,w=h,F++}if(0<(Y=K.length)){if(E=r,0<N&&(void 0!==(b=s(2,K,E,e,G,B,Y,u,d,u))&&0===(K=b).length))return L+K+z;if(K=E.join(",")+"{"+K+"}",0!==R*x){switch(2!==R||o(K,2)||(x=0),x){case 111:K=K.replace(v,":-moz-$1")+K;break;case 112:K=K.replace(m,"::-webkit-input-$1")+K.replace(m,"::-moz-$1")+K.replace(m,":-ms-input-$1")+K}x=0}}return L+K+z}function n(e,t,n){var a=t.trim().split(f);t=a;var o=a.length,i=e.length;switch(i){case 0:case 1:var s=0;for(e=0===i?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var c=s=0;for(t=[];s<o;++s)for(var u=0;u<i;++u)t[c++]=r(e[u]+" ",a[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(I,"$1"+e.trim());case 58:return e.trim()+t.replace(I,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(I,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var i=e+";",s=2*t+3*n+4*r;if(944===s){e=i.indexOf(":",9)+1;var c=i.substring(e,i.length-1).trim();return c=i.substring(0,e).trim()+c+";",1===R||2===R&&o(c,1)?"-webkit-"+c+c:c}if(0===R||2===R&&!o(i,1))return i;switch(s){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(w,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(c=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+c+i;case 1005:return p.test(i)?i.replace(d,":-webkit-")+i.replace(d,":-moz-")+i:i;case 1e3:switch(t=(c=i.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(t)){case 226:c=i.replace(b,"tb");break;case 232:c=i.replace(b,"tb-rl");break;case 220:c=i.replace(b,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+c+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(t=(i=e).length-10,s=(c=(33===i.charCodeAt(t)?i.substring(0,t):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:i=i.replace(c,"-webkit-"+c)+";"+i;break;case 207:case 102:i=i.replace(c,"-webkit-"+(102<s?"inline-":"")+"box")+";"+i.replace(c,"-webkit-"+c)+";"+i.replace(c,"-ms-"+c+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return c=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+c+"-ms-flex-"+c+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(k,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(k,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):i.replace(c,"-webkit-"+c)+i.replace(c,"-moz-"+c.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===n+r&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+i}return i}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),X(2!==t?r:r.replace(Z,"$1"),n,t)}function i(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(y," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,o,i,s,c,l){for(var g,d=0,p=t;d<N;++d)switch(g=V[d].call(u,e,p,n,r,a,o,i,s,c,l)){case void 0:case!1:case!0:case null:break;default:p=g}if(p!==t)return p}function c(e){return void 0!==(e=e.prefix)&&(X=null,e?"function"!==typeof e?R=1:(R=2,X=e):R=0),c}function u(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<N){var a=s(-1,n,r,r,G,B,0,0,0,0);void 0!==a&&"string"===typeof a&&(n=a)}var o=t(W,r,n,0,0);return 0<N&&(void 0!==(a=s(-2,o,r,r,G,B,o.length,0,0,0))&&(o=a)),"",x=0,B=G=1,o}var l=/^\0+/g,g=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,f=/,\r+?/g,I=/([\t\r\n ])*\f?&/g,C=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,v=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,A=/\(\s*(.*)\s*\)/g,y=/([\s\S]*?);/g,k=/-self|flex-/g,Z=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,w=/([^-])(image-set\()/,B=1,G=1,x=0,R=1,W=[],V=[],N=0,X=null,J=0;return u.use=function e(t){switch(t){case void 0:case null:N=V.length=0;break;default:if("function"===typeof t)V[N++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else J=0|!!t}return e},u.set=c,void 0!==e&&c(e),u},te=__webpack_require__(3840),ne=__webpack_require__(620),re=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ae=(0,ne.Z)((function(e){return re.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),oe=__webpack_require__(2110),ie=__webpack_require__.n(oe);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ce=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},ue=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,Q.typeOf)(e)},le=Object.freeze([]),ge=Object.freeze({});function de(e){return"function"==typeof e}function pe(e){return e.displayName||e.name||"Component"}function he(e){return e&&"string"==typeof e.styledComponentId}var fe="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.SC_ATTR)||"data-styled",Ie="undefined"!=typeof window&&"HTMLElement"in window,Ce=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://localhost:5000/"}.SC_DISABLE_SPEEDY));function me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var ve=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&me(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),s=0,c=t.length;s<c;s++)this.tag.insertRule(i,t[s])&&(this.groupSizes[e]++,i++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,o=r;o<a;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),be=new Map,Ae=new Map,ye=1,ke=function(e){if(be.has(e))return be.get(e);for(;Ae.has(ye);)ye++;var t=ye++;return be.set(e,t),Ae.set(t,e),t},Ze=function(e){return Ae.get(e)},Se=function(e,t){t>=ye&&(ye=t+1),be.set(e,t),Ae.set(t,e)},we="style["+fe+'][data-styled-version="5.3.3"]',Be=new RegExp("^"+fe+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Ge=function(e,t,n){for(var r,a=n.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(t,r)},xe=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,o=n.length;a<o;a++){var i=n[a].trim();if(i){var s=i.match(Be);if(s){var c=0|parseInt(s[1],10),u=s[2];0!==c&&(Se(u,c),Ge(e,u,s[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(i)}}},Re=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},We=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(fe))return r}}(n),o=void 0!==a?a.nextSibling:null;r.setAttribute(fe,"active"),r.setAttribute("data-styled-version","5.3.3");var i=Re();return i&&r.setAttribute("nonce",i),n.insertBefore(r,o),r},Ve=function(){function e(e){var t=this.element=We(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}me(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Ne=function(){function e(e){var t=this.element=We(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Xe=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Je=Ie,Fe={isServer:!Ie,useCSSOMInjection:!Ce},Ee=function(){function e(e,t,n){void 0===e&&(e=ge),void 0===t&&(t={}),this.options=se({},Fe,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Ie&&Je&&(Je=!1,function(e){for(var t=document.querySelectorAll(we),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(fe)&&(xe(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return ke(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(se({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new Xe(a):r?new Ve(a):new Ne(a),new ve(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(ke(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(ke(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(ke(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var o=Ze(a);if(void 0!==o){var i=e.names.get(o),s=t.getGroup(a);if(i&&s&&i.size){var c=fe+".g"+a+'[id="'+o+'"]',u="";void 0!==i&&i.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+s+c+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),Te=/(a)(d)/gi,Ye=function(e){return String.fromCharCode(e+(e>25?39:97))};function He(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Ye(t%52)+n;return(Ye(t%52)+n).replace(Te,"$1-$2")}var Me=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},De=function(e){return Me(5381,e)};function Ke(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(de(n)&&!he(n))return!1}return!0}var ze=De("5.3.3"),Le=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Ke(e),this.componentId=t,this.baseHash=Me(ze,t),this.baseStyle=n,Ee.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var o=ut(this.rules,e,t,n).join(""),i=He(Me(this.baseHash,o)>>>0);if(!t.hasNameForId(r,i)){var s=n(o,"."+i,void 0,r);t.insertRules(r,i,s)}a.push(i),this.staticRulesId=i}else{for(var c=this.rules.length,u=Me(this.baseHash,n.hash),l="",g=0;g<c;g++){var d=this.rules[g];if("string"==typeof d)l+=d;else if(d){var p=ut(d,e,t,n),h=Array.isArray(p)?p.join(""):p;u=Me(u,h+g),l+=h}}if(l){var f=He(u>>>0);if(!t.hasNameForId(r,f)){var I=n(l,"."+f,void 0,r);t.insertRules(r,f,I)}a.push(f)}}return a.join(" ")},e}(),Pe=/^\s*\/\/.*$/gm,_e=[":","[",".","#"];function Oe(e){var t,n,r,a,o=void 0===e?ge:e,i=o.options,s=void 0===i?ge:i,c=o.plugins,u=void 0===c?le:c,l=new ee(s),g=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,o,i,s,c,u,l,g){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(a[0]+r),"";default:return r+(0===g?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){g.push(e)})),p=function(e,r,o){return 0===r&&-1!==_e.indexOf(o[n.length])||o.match(a)?e:"."+t};function h(e,o,i,s){void 0===s&&(s="&");var c=e.replace(Pe,""),u=o&&i?i+" "+o+" { "+c+" }":c;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),l(i||!o?"":o,u)}return l.use([].concat(u,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,p))},d,function(e){if(-2===e){var t=g;return g=[],t}}])),h.hash=u.length?u.reduce((function(e,t){return t.name||me(15),Me(e,t.name)}),5381).toString():"",h}var Ue=t.createContext(),je=(Ue.Consumer,t.createContext()),Qe=(je.Consumer,new Ee),qe=Oe();function $e(){return(0,t.useContext)(Ue)||Qe}function et(){return(0,t.useContext)(je)||qe}function tt(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],a=n[1],o=$e(),i=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,t.useMemo)((function(){return Oe({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){$()(r,e.stylisPlugins)||a(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(Ue.Provider,{value:i},t.createElement(je.Provider,{value:s},e.children))}var nt=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=qe);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return me(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=qe),this.name+e.hash},e}(),rt=/([A-Z])/,at=/([A-Z])/g,ot=/^ms-/,it=function(e){return"-"+e.toLowerCase()};function st(e){return rt.test(e)?e.replace(at,it).replace(ot,"-ms-"):e}var ct=function(e){return null==e||!1===e||""===e};function ut(e,t,n,r){if(Array.isArray(e)){for(var a,o=[],i=0,s=e.length;i<s;i+=1)""!==(a=ut(e[i],t,n,r))&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));return o}return ct(e)?"":he(e)?"."+e.styledComponentId:de(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t?e:ut(e(t),t,n,r):e instanceof nt?n?(e.inject(n,r),e.getName(r)):e:ue(e)?function e(t,n){var r,a,o=[];for(var i in t)t.hasOwnProperty(i)&&!ct(t[i])&&(Array.isArray(t[i])&&t[i].isCss||de(t[i])?o.push(st(i)+":",t[i],";"):ue(t[i])?o.push.apply(o,e(t[i],i)):o.push(st(i)+": "+(r=i,(null==(a=t[i])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in te.Z?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var c}var lt=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return de(e)||ue(e)?lt(ut(ce(le,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:lt(ut(ce(e,n)))}new Set;var dt=function(e,t,n){return void 0===n&&(n=ge),e.theme!==n.theme&&e.theme||t||n.theme},pt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ht=/(^-|-$)/g;function ft(e){return e.replace(pt,"-").replace(ht,"")}var It=function(e){return He(De(e)>>>0)};function Ct(e){return"string"==typeof e&&!0}var mt=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},vt=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function bt(e,t,n){var r=e[n];mt(t)&&mt(r)?At(r,t):e[n]=t}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var i=o[a];if(mt(i))for(var s in i)vt(s)&&bt(e,i[s],s)}return e}var yt=t.createContext();yt.Consumer;var kt={};function Zt(e,n,r){var a=he(e),o=!Ct(e),i=n.attrs,s=void 0===i?le:i,c=n.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":ft(e);kt[n]=(kt[n]||0)+1;var r=n+"-"+It("5.3.3"+n+kt[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):c,l=n.displayName,g=void 0===l?function(e){return Ct(e)?"styled."+e:"Styled("+pe(e)+")"}(e):l,d=n.displayName&&n.componentId?ft(n.displayName)+"-"+n.componentId:n.componentId||u,p=a&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,h=n.shouldForwardProp;a&&e.shouldForwardProp&&(h=n.shouldForwardProp?function(t,r,a){return e.shouldForwardProp(t,r,a)&&n.shouldForwardProp(t,r,a)}:e.shouldForwardProp);var f,I=new Le(r,d,a?e.componentStyle:void 0),C=I.isStatic&&0===s.length,m=function(e,n){return function(e,n,r,a){var o=e.attrs,i=e.componentStyle,s=e.defaultProps,c=e.foldedComponentIds,u=e.shouldForwardProp,l=e.styledComponentId,g=e.target,d=function(e,t,n){void 0===e&&(e=ge);var r=se({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,o,i=e;for(t in de(i)&&(i=i(r)),i)r[t]=a[t]="className"===t?(n=a[t],o=i[t],n&&o?n+" "+o:n||o):i[t]})),[r,a]}(dt(n,(0,t.useContext)(yt),s)||ge,n,o),p=d[0],h=d[1],f=function(e,t,n,r){var a=$e(),o=et();return t?e.generateAndInjectStyles(ge,a,o):e.generateAndInjectStyles(n,a,o)}(i,a,p),I=r,C=h.$as||n.$as||h.as||n.as||g,m=Ct(C),v=h!==n?se({},n,{},h):n,b={};for(var A in v)"$"!==A[0]&&"as"!==A&&("forwardedAs"===A?b.as=v[A]:(u?u(A,ae,C):!m||ae(A))&&(b[A]=v[A]));return n.style&&h.style!==n.style&&(b.style=se({},n.style,{},h.style)),b.className=Array.prototype.concat(c,l,f!==l?f:null,n.className,h.className).filter(Boolean).join(" "),b.ref=I,(0,t.createElement)(C,b)}(f,e,n,C)};return m.displayName=g,(f=t.forwardRef(m)).attrs=p,f.componentStyle=I,f.displayName=g,f.shouldForwardProp=h,f.foldedComponentIds=a?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):le,f.styledComponentId=d,f.target=a?e.target:e,f.withComponent=function(e){var t=n.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["componentId"]),o=t&&t+"-"+(Ct(e)?e:ft(pe(e)));return Zt(e,se({},a,{attrs:p,componentId:o}),r)},Object.defineProperty(f,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=a?At({},e.defaultProps,t):t}}),f.toString=function(){return"."+f.styledComponentId},o&&ie()(f,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),f}var St=function(e){return function e(t,n,r){if(void 0===r&&(r=ge),!(0,Q.isValidElementType)(n))return me(1,String(n));var a=function(){return t(n,r,gt.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,se({},r,{},a))},a.attrs=function(a){return e(t,n,se({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(Zt,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){St[e]=St(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Ke(e),Ee.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var a=r(ut(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Ee.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Re();return"<style "+[n&&'nonce="'+n+'"',fe+'="true"','data-styled-version="5.3.3"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?me(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return me(2);var r=((n={})[fe]="",n["data-styled-version"]="5.3.3",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),a=Re();return a&&(r.nonce=a),[t.createElement("style",se({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Ee({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?me(2):t.createElement(tt,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return me(3)}}();var wt,Bt,Gt=St,xt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=gt.apply(void 0,[e].concat(n)).join(""),o=It(a);return new nt(o,a)}(wt||(wt=j(["\n    0%{opacity:0; transform : translateY(-100px) skewY(10deg) skewX(10deg) rotateZ(30deg);filter:blur(10px);}\n    100%{opacity:1;transform : translateY(0px) skewY(0deg) skewX(0deg) rotateZ(0deg);filter:blur(0px);}\n    "]))),Rt=Gt.div(Bt||(Bt=j(["\n    display:block;\n    text-align:center;\n    font-size:5vw;\n    span{\n        display:inline-block;\n        opacity:0;\n        animation-name:",";\n        animation-duration:2s;\n        animation-fill-mode:forwards;\n        \n        animation-timing-function: cubic-bezier (0.075,0.82,0.165,1);\n    }\n    span:nth-child(1){\n        animation-delay:0.1s;\n    }\n    span:nth-child(2){\n        animation-delay:0.2s;\n    }\n    span:nth-child(3){\n        animation-delay:0.3s;\n    }\n    span:nth-child(4){\n        animation-delay:0.4s;\n    }\n    span:nth-child(5){\n        animation-delay:0.5s;\n    }\n    span:nth-child(6){\n        animation-delay:0.6s;\n    }\n    span:nth-child(7){\n        animation-delay:0.7s;\n    }\n    span:nth-child(8){\n        animation-delay:0.8s;\n    }\n    span:nth-child(9){\n        animation-delay:0.9s;\n    }\n    span:nth-child(10){\n        animation-delay:1s;\n    }\n    \n"])),xt),Wt=function(e){var t=e.text.split("");return(0,_.jsx)(Rt,{children:t.map((function(e,t){return(0,_.jsx)("span",{children:e},t)}))})},Vt=__webpack_require__(3366),Nt=__webpack_require__(8182),Xt=__webpack_require__(767),Jt=__webpack_require__(6248),Ft=__webpack_require__(9217),Et=__webpack_require__(1046),Tt=__webpack_require__(4942),Yt=__webpack_require__(3433),Ht=__webpack_require__(2466),Mt=__webpack_require__(6189),Dt=__webpack_require__(7563),Kt=__webpack_require__(7979),zt=__webpack_require__(3981),Lt=__webpack_require__(5721),Pt=["onChange","maxRows","minRows","style","value"];function _t(e,t){return parseInt(e[t],10)||0}var Ot={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Ut=t.forwardRef((function(e,n){var r=e.onChange,o=e.maxRows,i=e.minRows,s=void 0===i?1:i,c=e.style,u=e.value,g=(0,Vt.Z)(e,Pt),d=t.useRef(null!=u).current,p=t.useRef(null),h=(0,Dt.Z)(n,p),f=t.useRef(null),I=t.useRef(0),C=t.useState({}),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=t.useCallback((function(){var t=p.current,n=(0,Kt.Z)(t).getComputedStyle(t);if("0px"!==n.width){var r=f.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],i=_t(n,"padding-bottom")+_t(n,"padding-top"),c=_t(n,"border-bottom-width")+_t(n,"border-top-width"),u=r.scrollHeight;r.value="x";var l=r.scrollHeight,g=u;s&&(g=Math.max(Number(s)*l,g)),o&&(g=Math.min(Number(o)*l,g));var d=(g=Math.max(g,l))+("border-box"===a?i+c:0),h=Math.abs(g-u)<=1;b((function(e){return I.current<20&&(d>0&&Math.abs((e.outerHeightStyle||0)-d)>1||e.overflow!==h)?(I.current+=1,{overflow:h,outerHeightStyle:d}):e}))}}),[o,s,e.placeholder]);t.useEffect((function(){var e,t=(0,zt.Z)((function(){I.current=0,A()})),n=(0,Kt.Z)(p.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(p.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}}),[A]),(0,Lt.Z)((function(){A()})),t.useEffect((function(){I.current=0}),[u]);return(0,_.jsxs)(t.Fragment,{children:[(0,_.jsx)("textarea",(0,l.Z)({value:u,onChange:function(e){I.current=0,d||A(),r&&r(e)},ref:h,rows:s,style:(0,l.Z)({height:v.outerHeightStyle,overflow:v.overflow?"hidden":null},c)},g)),(0,_.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:(0,l.Z)({},Ot,c,{padding:0})})]})})),jt=Ut;var Qt=function(e){return"string"===typeof e};function qt(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var $t=t.createContext();function en(){return t.useContext($t)}var tn=__webpack_require__(4036),nn=__webpack_require__(2071),rn=__webpack_require__(162),an=(__webpack_require__(76),__webpack_require__(1688)),on=__webpack_require__(5438),sn=__webpack_require__(4804),cn=n.useInsertionEffect?n.useInsertionEffect:t.useLayoutEffect,un=(0,an.w)((function(e,n){var r=e.styles,a=(0,sn.O)([r],void 0,(0,t.useContext)(an.T)),o=(0,t.useRef)();return cn((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+a.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),t.hydrate([i])),o.current=[t,r],function(){t.flush()}}),[n]),cn((function(){var e=o.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==a.next&&(0,on.My)(n,a.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",a,t,!1)}}),[n,a.name]),null}));function ln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,sn.O)(t)}var gn=function(){var e=ln.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function dn(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,a="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,_.jsx)(un,{styles:a})}var pn=__webpack_require__(4591);var hn=function(e){return(0,_.jsx)(dn,(0,l.Z)({},e,{defaultTheme:pn.Z}))};function fn(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function In(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(fn(e.value)&&""!==e.value||t&&fn(e.defaultValue)&&""!==e.defaultValue)}var Cn=__webpack_require__(5159),mn=__webpack_require__(208);function vn(e){return(0,Cn.Z)("MuiInputBase",e)}var bn=(0,mn.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),An=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],yn=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,tn.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},kn=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Zn=(0,Ft.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:yn})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},t.typography.body1,(0,Tt.Z)({color:t.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(bn.disabled),{color:t.palette.text.disabled,cursor:"default"}),n.multiline&&(0,l.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Sn=(0,Ft.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:kn})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode,o={color:"currentColor",opacity:a?.42:.5,transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},i={opacity:"0 !important"},s={opacity:a?.42:.5};return(0,l.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,Tt.Z)(t,"label[data-shrink=false] + .".concat(bn.formControl," &"),{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s}),(0,Tt.Z)(t,"&.".concat(bn.disabled),{opacity:1,WebkitTextFillColor:n.palette.text.disabled}),(0,Tt.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),wn=(0,_.jsx)(hn,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Bn=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiInputBase"}),o=r["aria-describedby"],i=r.autoComplete,s=r.autoFocus,c=r.className,u=r.components,g=void 0===u?{}:u,d=r.componentsProps,p=void 0===d?{}:d,h=r.defaultValue,f=r.disabled,I=r.disableInjectingGlobalStyles,C=r.endAdornment,m=r.fullWidth,v=void 0!==m&&m,b=r.id,A=r.inputComponent,y=void 0===A?"input":A,k=r.inputProps,Z=void 0===k?{}:k,S=r.inputRef,w=r.maxRows,B=r.minRows,G=r.multiline,x=void 0!==G&&G,R=r.name,W=r.onBlur,V=r.onChange,N=r.onClick,X=r.onFocus,J=r.onKeyDown,F=r.onKeyUp,E=r.placeholder,T=r.readOnly,Y=r.renderSuffix,H=r.rows,M=r.startAdornment,D=r.type,K=void 0===D?"text":D,z=r.value,L=(0,Vt.Z)(r,An),P=null!=Z.value?Z.value:z,O=t.useRef(null!=P).current,U=t.useRef(),j=t.useCallback((function(e){0}),[]),Q=(0,nn.Z)(Z.ref,j),q=(0,nn.Z)(S,Q),$=(0,nn.Z)(U,q),ee=t.useState(!1),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],ae=en();var oe=qt({props:r,muiFormControl:ae,states:["color","disabled","error","hiddenLabel","size","required","filled"]});oe.focused=ae?ae.focused:ne,t.useEffect((function(){!ae&&f&&ne&&(re(!1),W&&W())}),[ae,f,ne,W]);var ie=ae&&ae.onFilled,se=ae&&ae.onEmpty,ce=t.useCallback((function(e){In(e)?ie&&ie():se&&se()}),[ie,se]);(0,rn.Z)((function(){O&&ce({value:P})}),[P,ce,O]);t.useEffect((function(){ce(U.current)}),[]);var ue=y,le=Z;x&&"input"===ue&&(le=H?(0,l.Z)({type:void 0,minRows:H,maxRows:H},le):(0,l.Z)({type:void 0,maxRows:w,minRows:B},le),ue=jt);t.useEffect((function(){ae&&ae.setAdornedStart(Boolean(M))}),[ae,M]);var ge=(0,l.Z)({},r,{color:oe.color||"primary",disabled:oe.disabled,endAdornment:C,error:oe.error,focused:oe.focused,formControl:ae,fullWidth:v,hiddenLabel:oe.hiddenLabel,multiline:x,size:oe.size,startAdornment:M,type:K}),de=function(e){var t=e.classes,n=e.color,r=e.disabled,a=e.error,o=e.endAdornment,i=e.focused,s=e.formControl,c=e.fullWidth,u=e.hiddenLabel,l=e.multiline,g=e.size,d=e.startAdornment,p=e.type,h={root:["root","color".concat((0,tn.Z)(n)),r&&"disabled",a&&"error",c&&"fullWidth",i&&"focused",s&&"formControl","small"===g&&"sizeSmall",l&&"multiline",d&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",l&&"inputMultiline","small"===g&&"inputSizeSmall",u&&"inputHiddenLabel",d&&"inputAdornedStart",o&&"inputAdornedEnd"]};return(0,Xt.Z)(h,vn,t)}(ge),pe=g.Root||Zn,he=p.root||{},fe=g.Input||Sn;return le=(0,l.Z)({},le,p.input),(0,_.jsxs)(t.Fragment,{children:[!I&&wn,(0,_.jsxs)(pe,(0,l.Z)({},he,!Qt(pe)&&{ownerState:(0,l.Z)({},ge,he.ownerState)},{ref:n,onClick:function(e){U.current&&e.currentTarget===e.target&&U.current.focus(),N&&N(e)}},L,{className:(0,Nt.Z)(de.root,he.className,c),children:[M,(0,_.jsx)($t.Provider,{value:null,children:(0,_.jsx)(fe,(0,l.Z)({ownerState:ge,"aria-invalid":oe.error,"aria-describedby":o,autoComplete:i,autoFocus:s,defaultValue:h,disabled:oe.disabled,id:b,onAnimationStart:function(e){ce("mui-auto-fill-cancel"===e.animationName?U.current:{value:"x"})},name:R,placeholder:E,readOnly:T,required:oe.required,rows:H,value:P,onKeyDown:J,onKeyUp:F,type:K},le,!Qt(fe)&&{as:ue,ownerState:(0,l.Z)({},ge,le.ownerState)},{ref:$,className:(0,Nt.Z)(de.input,le.className),onBlur:function(e){W&&W(e),Z.onBlur&&Z.onBlur(e),ae&&ae.onBlur?ae.onBlur(e):re(!1)},onChange:function(e){if(!O){var t=e.target||U.current;if(null==t)throw new Error((0,Mt.Z)(1));ce({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];Z.onChange&&Z.onChange.apply(Z,[e].concat(r)),V&&V.apply(void 0,[e].concat(r))},onFocus:function(e){oe.disabled?e.stopPropagation():(X&&X(e),Z.onFocus&&Z.onFocus(e),ae&&ae.onFocus?ae.onFocus(e):re(!0))}}))}),C,Y?Y((0,l.Z)({},oe,{startAdornment:M})):null]}))]})})),Gn=Bn;function xn(e){return(0,Cn.Z)("MuiInput",e)}var Rn=(0,l.Z)({},bn,(0,mn.Z)("MuiInput",["root","underline","input"])),Wn=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],Vn=(0,Ft.ZP)(Zn,{shouldForwardProp:function(e){return(0,Ft.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,Yt.Z)(yn(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,l.Z)({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat(n.palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,Tt.Z)(t,"&.".concat(Rn.focused,":after"),{transform:"scaleX(1)"}),(0,Tt.Z)(t,"&.".concat(Rn.error,":after"),{borderBottomColor:n.palette.error.main,transform:"scaleX(1)"}),(0,Tt.Z)(t,"&:before",{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,Tt.Z)(t,"&:hover:not(.".concat(Rn.disabled,"):before"),{borderBottom:"2px solid ".concat(n.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}}),(0,Tt.Z)(t,"&.".concat(Rn.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),Nn=(0,Ft.ZP)(Sn,{name:"MuiInput",slot:"Input",overridesResolver:kn})({}),Xn=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiInput"}),r=n.disableUnderline,a=n.components,o=void 0===a?{}:a,i=n.componentsProps,s=n.fullWidth,c=void 0!==s&&s,u=n.inputComponent,g=void 0===u?"input":u,d=n.multiline,p=void 0!==d&&d,h=n.type,f=void 0===h?"text":h,I=(0,Vt.Z)(n,Wn),C=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,Xt.Z)(n,xn,t);return(0,l.Z)({},t,r)}(n),m={root:{ownerState:{disableUnderline:r}}},v=i?(0,Ht.Z)(i,m):m;return(0,_.jsx)(Gn,(0,l.Z)({components:(0,l.Z)({Root:Vn,Input:Nn},o),componentsProps:v,fullWidth:c,inputComponent:g,multiline:p,ref:t,type:f},I,{classes:C}))}));Xn.muiName="Input";var Jn=Xn;function Fn(e){return(0,Cn.Z)("MuiFilledInput",e)}var En=(0,l.Z)({},bn,(0,mn.Z)("MuiFilledInput",["root","underline","input"])),Tn=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],Yn=(0,Ft.ZP)(Zn,{shouldForwardProp:function(e){return(0,Ft.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,Yt.Z)(yn(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,r=e.theme,a=e.ownerState,o="light"===r.palette.mode,i=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,l.Z)((t={position:"relative",backgroundColor:s,borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:s}}},(0,Tt.Z)(t,"&.".concat(En.focused),{backgroundColor:s}),(0,Tt.Z)(t,"&.".concat(En.disabled),{backgroundColor:o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}),t),!a.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(r.palette[a.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"}},(0,Tt.Z)(n,"&.".concat(En.focused,":after"),{transform:"scaleX(1)"}),(0,Tt.Z)(n,"&.".concat(En.error,":after"),{borderBottomColor:r.palette.error.main,transform:"scaleX(1)"}),(0,Tt.Z)(n,"&:before",{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"}),(0,Tt.Z)(n,"&:hover:not(.".concat(En.disabled,"):before"),{borderBottom:"1px solid ".concat(r.palette.text.primary)}),(0,Tt.Z)(n,"&.".concat(En.disabled,":before"),{borderBottomStyle:"dotted"}),n),a.startAdornment&&{paddingLeft:12},a.endAdornment&&{paddingRight:12},a.multiline&&(0,l.Z)({padding:"25px 12px 8px"},"small"===a.size&&{paddingTop:21,paddingBottom:4},a.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Hn=(0,Ft.ZP)(Sn,{name:"MuiFilledInput",slot:"Input",overridesResolver:kn})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),Mn=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiFilledInput"}),r=n.components,a=void 0===r?{}:r,o=n.componentsProps,i=n.fullWidth,s=void 0!==i&&i,c=n.inputComponent,u=void 0===c?"input":c,g=n.multiline,d=void 0!==g&&g,p=n.type,h=void 0===p?"text":p,f=(0,Vt.Z)(n,Tn),I=(0,l.Z)({},n,{fullWidth:s,inputComponent:u,multiline:d,type:h}),C=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,Xt.Z)(n,Fn,t);return(0,l.Z)({},t,r)}(n),m={root:{ownerState:I},input:{ownerState:I}},v=o?(0,Ht.Z)(o,m):m;return(0,_.jsx)(Gn,(0,l.Z)({components:(0,l.Z)({Root:Yn,Input:Hn},a),componentsProps:v,fullWidth:s,inputComponent:u,multiline:d,ref:t,type:h},f,{classes:C}))}));Mn.muiName="Input";var Dn,Kn=Mn,zn=["children","classes","className","label","notched"],Ln=(0,Ft.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Pn=(0,Ft.ZP)("legend")((function(e){var t=e.ownerState,n=e.theme;return(0,l.Z)({float:"unset",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,l.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function _n(e){return(0,Cn.Z)("MuiOutlinedInput",e)}var On=(0,l.Z)({},bn,(0,mn.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),Un=["components","fullWidth","inputComponent","label","multiline","notched","type"],jn=(0,Ft.ZP)(Zn,{shouldForwardProp:function(e){return(0,Ft.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:yn})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,l.Z)((t={position:"relative",borderRadius:n.shape.borderRadius},(0,Tt.Z)(t,"&:hover .".concat(On.notchedOutline),{borderColor:n.palette.text.primary}),(0,Tt.Z)(t,"@media (hover: none)",(0,Tt.Z)({},"&:hover .".concat(On.notchedOutline),{borderColor:a})),(0,Tt.Z)(t,"&.".concat(On.focused," .").concat(On.notchedOutline),{borderColor:n.palette[r.color].main,borderWidth:2}),(0,Tt.Z)(t,"&.".concat(On.error," .").concat(On.notchedOutline),{borderColor:n.palette.error.main}),(0,Tt.Z)(t,"&.".concat(On.disabled," .").concat(On.notchedOutline),{borderColor:n.palette.action.disabled}),t),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&(0,l.Z)({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),Qn=(0,Ft.ZP)((function(e){var t=e.className,n=e.label,r=e.notched,a=(0,Vt.Z)(e,zn),o=null!=n&&""!==n,i=(0,l.Z)({},e,{notched:r,withLabel:o});return(0,_.jsx)(Ln,(0,l.Z)({"aria-hidden":!0,className:t,ownerState:i},a,{children:(0,_.jsx)(Pn,{ownerState:i,children:o?(0,_.jsx)("span",{children:n}):Dn||(Dn=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){return{borderColor:"light"===e.theme.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}})),qn=(0,Ft.ZP)(Sn,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:kn})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),$n=t.forwardRef((function(e,n){var r,a=(0,Et.Z)({props:e,name:"MuiOutlinedInput"}),o=a.components,i=void 0===o?{}:o,s=a.fullWidth,c=void 0!==s&&s,u=a.inputComponent,g=void 0===u?"input":u,d=a.label,p=a.multiline,h=void 0!==p&&p,f=a.notched,I=a.type,C=void 0===I?"text":I,m=(0,Vt.Z)(a,Un),v=function(e){var t=e.classes,n=(0,Xt.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},_n,t);return(0,l.Z)({},t,n)}(a),b=qt({props:a,muiFormControl:en(),states:["required"]});return(0,_.jsx)(Gn,(0,l.Z)({components:(0,l.Z)({Root:jn,Input:qn},i),renderSuffix:function(e){return(0,_.jsx)(Qn,{className:v.notchedOutline,label:null!=d&&""!==d&&b.required?r||(r=(0,_.jsxs)(t.Fragment,{children:[d,"\xa0","*"]})):d,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:c,inputComponent:g,multiline:h,ref:n,type:C},m,{classes:(0,l.Z)({},v,{notchedOutline:null})}))}));$n.muiName="Input";var er=$n;function tr(e){return(0,Cn.Z)("MuiFormLabel",e)}var nr=(0,mn.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),rr=["children","className","color","component","disabled","error","filled","focused","required"],ar=(0,Ft.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,l.Z)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({color:n.palette.text.secondary},n.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,Tt.Z)(t,"&.".concat(nr.focused),{color:n.palette[r.color].main}),(0,Tt.Z)(t,"&.".concat(nr.disabled),{color:n.palette.text.disabled}),(0,Tt.Z)(t,"&.".concat(nr.error),{color:n.palette.error.main}),t))})),or=(0,Ft.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,Tt.Z)({},"&.".concat(nr.error),{color:t.palette.error.main})})),ir=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiFormLabel"}),r=n.children,a=n.className,o=n.component,i=void 0===o?"label":o,s=(0,Vt.Z)(n,rr),c=qt({props:n,muiFormControl:en(),states:["color","required","focused","disabled","error","filled"]}),u=(0,l.Z)({},n,{color:c.color||"primary",component:i,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),g=function(e){var t=e.classes,n=e.color,r=e.focused,a=e.disabled,o=e.error,i=e.filled,s=e.required,c={root:["root","color".concat((0,tn.Z)(n)),a&&"disabled",o&&"error",i&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return(0,Xt.Z)(c,tr,t)}(u);return(0,_.jsxs)(ar,(0,l.Z)({as:i,ownerState:u,className:(0,Nt.Z)(g.root,a),ref:t},s,{children:[r,c.required&&(0,_.jsxs)(or,{ownerState:u,"aria-hidden":!0,className:g.asterisk,children:["\u2009","*"]})]}))})),sr=ir;function cr(e){return(0,Cn.Z)("MuiInputLabel",e)}(0,mn.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var ur=["disableAnimation","margin","shrink","variant"],lr=(0,Ft.ZP)(sr,{shouldForwardProp:function(e){return(0,Ft.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,Tt.Z)({},"& .".concat(nr.asterisk),t.asterisk),t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,l.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,l.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,l.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),gr=t.forwardRef((function(e,t){var n=(0,Et.Z)({name:"MuiInputLabel",props:e}),r=n.disableAnimation,a=void 0!==r&&r,o=n.shrink,i=(0,Vt.Z)(n,ur),s=en(),c=o;"undefined"===typeof c&&s&&(c=s.filled||s.focused||s.adornedStart);var u=qt({props:n,muiFormControl:s,states:["size","variant","required"]}),g=(0,l.Z)({},n,{disableAnimation:a,formControl:s,shrink:c,size:u.size,variant:u.variant,required:u.required}),d=function(e){var t=e.classes,n=e.formControl,r=e.size,a=e.shrink,o={root:["root",n&&"formControl",!e.disableAnimation&&"animated",a&&"shrink","small"===r&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},i=(0,Xt.Z)(o,cr,t);return(0,l.Z)({},t,i)}(g);return(0,_.jsx)(lr,(0,l.Z)({"data-shrink":c,ownerState:g,ref:t},i,{classes:d}))})),dr=__webpack_require__(9103);function pr(e){return(0,Cn.Z)("MuiFormControl",e)}(0,mn.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var hr=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],fr=(0,Ft.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,l.Z)({},t.root,t["margin".concat((0,tn.Z)(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Ir=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiFormControl"}),o=r.children,i=r.className,s=r.color,c=void 0===s?"primary":s,u=r.component,g=void 0===u?"div":u,d=r.disabled,p=void 0!==d&&d,h=r.error,f=void 0!==h&&h,I=r.focused,C=r.fullWidth,m=void 0!==C&&C,v=r.hiddenLabel,b=void 0!==v&&v,A=r.margin,y=void 0===A?"none":A,k=r.required,Z=void 0!==k&&k,S=r.size,w=void 0===S?"medium":S,B=r.variant,G=void 0===B?"outlined":B,x=(0,Vt.Z)(r,hr),R=(0,l.Z)({},r,{color:c,component:g,disabled:p,error:f,fullWidth:m,hiddenLabel:b,margin:y,required:Z,size:w,variant:G}),W=function(e){var t=e.classes,n=e.margin,r=e.fullWidth,a={root:["root","none"!==n&&"margin".concat((0,tn.Z)(n)),r&&"fullWidth"]};return(0,Xt.Z)(a,pr,t)}(R),V=t.useState((function(){var e=!1;return o&&t.Children.forEach(o,(function(t){if((0,dr.Z)(t,["Input","Select"])){var n=(0,dr.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),N=(0,a.Z)(V,2),X=N[0],J=N[1],F=t.useState((function(){var e=!1;return o&&t.Children.forEach(o,(function(t){(0,dr.Z)(t,["Input","Select"])&&In(t.props,!0)&&(e=!0)})),e})),E=(0,a.Z)(F,2),T=E[0],Y=E[1],H=t.useState(!1),M=(0,a.Z)(H,2),D=M[0],K=M[1];p&&D&&K(!1);var z=void 0===I||p?D:I,L=t.useCallback((function(){Y(!0)}),[]),P={adornedStart:X,setAdornedStart:J,color:c,disabled:p,error:f,filled:T,focused:z,fullWidth:m,hiddenLabel:b,size:w,onBlur:function(){K(!1)},onEmpty:t.useCallback((function(){Y(!1)}),[]),onFilled:L,onFocus:function(){K(!0)},registerEffect:undefined,required:Z,variant:G};return(0,_.jsx)($t.Provider,{value:P,children:(0,_.jsx)(fr,(0,l.Z)({as:g,ownerState:R,className:(0,Nt.Z)(W.root,i),ref:n},x,{children:o}))})})),Cr=Ir;function mr(e){return(0,Cn.Z)("MuiFormHelperText",e)}var vr,br=(0,mn.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Ar=["children","className","component","disabled","error","filled","focused","margin","required","variant"],yr=(0,Ft.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat((0,tn.Z)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({color:n.palette.text.secondary},n.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,Tt.Z)(t,"&.".concat(br.disabled),{color:n.palette.text.disabled}),(0,Tt.Z)(t,"&.".concat(br.error),{color:n.palette.error.main}),t),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),kr=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiFormHelperText"}),r=n.children,a=n.className,o=n.component,i=void 0===o?"p":o,s=(0,Vt.Z)(n,Ar),c=qt({props:n,muiFormControl:en(),states:["variant","size","disabled","error","filled","focused","required"]}),u=(0,l.Z)({},n,{component:i,contained:"filled"===c.variant||"outlined"===c.variant,variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),g=function(e){var t=e.classes,n=e.contained,r=e.size,a=e.disabled,o=e.error,i=e.filled,s=e.focused,c=e.required,u={root:["root",a&&"disabled",o&&"error",r&&"size".concat((0,tn.Z)(r)),n&&"contained",s&&"focused",i&&"filled",c&&"required"]};return(0,Xt.Z)(u,mr,t)}(u);return(0,_.jsx)(yr,(0,l.Z)({as:i,ownerState:u,className:(0,Nt.Z)(g.root,a),ref:t},s,{children:" "===r?vr||(vr=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),Zr=(__webpack_require__(8457),__webpack_require__(8301));var Sr=t.createContext({});function wr(e){return(0,Cn.Z)("MuiList",e)}(0,mn.Z)("MuiList",["root","padding","dense","subheader"]);var Br=["children","className","component","dense","disablePadding","subheader"],Gr=(0,Ft.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,l.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),xr=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiList"}),a=r.children,o=r.className,i=r.component,s=void 0===i?"ul":i,c=r.dense,u=void 0!==c&&c,g=r.disablePadding,d=void 0!==g&&g,p=r.subheader,h=(0,Vt.Z)(r,Br),f=t.useMemo((function(){return{dense:u}}),[u]),I=(0,l.Z)({},r,{component:s,dense:u,disablePadding:d}),C=function(e){var t=e.classes,n={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,Xt.Z)(n,wr,t)}(I);return(0,_.jsx)(Sr.Provider,{value:f,children:(0,_.jsxs)(Gr,(0,l.Z)({as:s,className:(0,Nt.Z)(C.root,o),ref:n,ownerState:I},h,{children:[p,a]}))})}));function Rr(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var Wr=Rr,Vr=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Nr(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Xr(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Jr(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Fr(e,t,n,r,a,o){for(var i=!1,s=a(e,t,!!t&&n);s;){if(s===e.firstChild){if(i)return!1;i=!0}var c=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Jr(s,o)&&!c)return s.focus(),!0;s=a(e,s,n)}return!1}var Er=t.forwardRef((function(e,n){var r=e.actions,a=e.autoFocus,o=void 0!==a&&a,i=e.autoFocusItem,s=void 0!==i&&i,c=e.children,u=e.className,g=e.disabledItemsFocusable,d=void 0!==g&&g,p=e.disableListWrap,h=void 0!==p&&p,f=e.onKeyDown,I=e.variant,C=void 0===I?"selectedMenu":I,m=(0,Vt.Z)(e,Vr),v=t.useRef(null),b=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,rn.Z)((function(){o&&v.current.focus()}),[o]),t.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!v.current.style.width;if(e.clientHeight<v.current.clientHeight&&n){var r="".concat(Wr((0,Zr.Z)(e)),"px");v.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,v.current.style.width="calc(100% + ".concat(r,")")}return v.current}}}),[]);var A=(0,nn.Z)(v,n),y=-1;t.Children.forEach(c,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===C&&e.props.selected||-1===y)&&(y=n))}));var k=t.Children.map(c,(function(e,n){if(n===y){var r={};return s&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===C&&(r.tabIndex=0),t.cloneElement(e,r)}return e}));return(0,_.jsx)(xr,(0,l.Z)({role:"menu",ref:A,className:u,onKeyDown:function(e){var t=v.current,n=e.key,r=(0,Zr.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Fr(t,r,h,d,Nr);else if("ArrowUp"===n)e.preventDefault(),Fr(t,r,h,d,Xr);else if("Home"===n)e.preventDefault(),Fr(t,null,h,d,Nr);else if("End"===n)e.preventDefault(),Fr(t,null,h,d,Xr);else if(1===n.length){var a=b.current,o=n.toLowerCase(),i=performance.now();a.keys.length>0&&(i-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&o!==a.keys[0]&&(a.repeating=!1)),a.lastTime=i,a.keys.push(o);var s=r&&!a.repeating&&Jr(r,a);a.previousKeyMatched&&(s||Fr(t,r,!1,d,Nr,a))?e.preventDefault():a.previousKeyMatched=!1}f&&f(e)},tabIndex:o?0:-1},m,{children:k}))})),Tr=Er,Yr=__webpack_require__(2065);function Hr(e){return(0,Cn.Z)("MuiPaper",e)}(0,mn.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var Mr=["className","component","elevation","square","variant"],Dr=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},Kr=(0,Ft.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat(t.palette.divider)},"elevation"===n.variant&&(0,l.Z)({boxShadow:t.shadows[n.elevation]},"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Yr.Fq)("#fff",Dr(n.elevation)),", ").concat((0,Yr.Fq)("#fff",Dr(n.elevation)),")")}))})),zr=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiPaper"}),r=n.className,a=n.component,o=void 0===a?"div":a,i=n.elevation,s=void 0===i?1:i,c=n.square,u=void 0!==c&&c,g=n.variant,d=void 0===g?"elevation":g,p=(0,Vt.Z)(n,Mr),h=(0,l.Z)({},n,{component:o,elevation:s,square:u,variant:d}),f=function(e){var t=e.square,n=e.elevation,r=e.variant,a=e.classes,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,Xt.Z)(o,Hr,a)}(h);return(0,_.jsx)(Kr,(0,l.Z)({as:o,ownerState:h,className:(0,Nt.Z)(f.root,r),ref:t},p))})),Lr=__webpack_require__(3199),Pr=__webpack_require__(7602),_r=__webpack_require__(9611);function Or(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,_r.Z)(e,t)}var Ur=!1,jr=t.createContext(null),Qr="unmounted",qr="exited",$r="entering",ea="entered",ta="exiting",na=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var a,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a=qr,r.appearStatus=$r):a=ea:a=t.unmountOnExit||t.mountOnEnter?Qr:qr,r.state={status:a},r.nextCallback=null,r}Or(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Qr?{status:qr}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==$r&&n!==ea&&(t=$r):n!==$r&&n!==ea||(t=ta)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===$r?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===qr&&this.setState({status:Qr})},a.performEnter=function(e){var t=this,n=this.props.enter,a=this.context?this.context.isMounting:e,o=this.props.nodeRef?[a]:[r.findDOMNode(this),a],i=o[0],s=o[1],c=this.getTimeouts(),u=a?c.appear:c.enter;!e&&!n||Ur?this.safeSetState({status:ea},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,s),this.safeSetState({status:$r},(function(){t.props.onEntering(i,s),t.onTransitionEnd(u,(function(){t.safeSetState({status:ea},(function(){t.props.onEntered(i,s)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),a=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!Ur?(this.props.onExit(a),this.safeSetState({status:ta},(function(){e.props.onExiting(a),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:qr},(function(){e.props.onExited(a)}))}))}))):this.safeSetState({status:qr},(function(){e.props.onExited(a)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(n&&!a){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],s=o[1];this.props.addEndListener(i,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===Qr)return null;var n=this.props,r=n.children,a=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Vt.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(jr.Provider,{value:null},"function"===typeof r?r(e,a):t.cloneElement(t.Children.only(r),a))},n}(t.Component);function ra(){}na.contextType=jr,na.propTypes={},na.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ra,onEntering:ra,onEntered:ra,onExit:ra,onExiting:ra,onExited:ra},na.UNMOUNTED=Qr,na.EXITED=qr,na.ENTERING=$r,na.ENTERED=ea,na.EXITING=ta;var aa=na,oa=__webpack_require__(418);function ia(){return(0,oa.Z)(pn.Z)}var sa=function(e){return e.scrollTop};function ca(e,t){var n,r,a=e.timeout,o=e.easing,i=e.style,s=void 0===i?{}:i;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof a?a:a[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}var ua=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function la(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var ga={entering:{opacity:1,transform:la(1)},entered:{opacity:1,transform:"none"}},da="undefined"!==typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&/version\/15\.[4-9]/i.test(navigator.userAgent),pa=t.forwardRef((function(e,n){var r=e.addEndListener,a=e.appear,o=void 0===a||a,i=e.children,s=e.easing,c=e.in,u=e.onEnter,g=e.onEntered,d=e.onEntering,p=e.onExit,h=e.onExited,f=e.onExiting,I=e.style,C=e.timeout,m=void 0===C?"auto":C,v=e.TransitionComponent,b=void 0===v?aa:v,A=(0,Vt.Z)(e,ua),y=t.useRef(),k=t.useRef(),Z=ia(),S=t.useRef(null),w=(0,nn.Z)(i.ref,n),B=(0,nn.Z)(S,w),G=function(e){return function(t){if(e){var n=S.current;void 0===t?e(n):e(n,t)}}},x=G(d),R=G((function(e,t){sa(e);var n,r=ca({style:I,timeout:m,easing:s},{mode:"enter"}),a=r.duration,o=r.delay,i=r.easing;"auto"===m?(n=Z.transitions.getAutoHeightDuration(e.clientHeight),k.current=n):n=a,e.style.transition=[Z.transitions.create("opacity",{duration:n,delay:o}),Z.transitions.create("transform",{duration:da?n:.666*n,delay:o,easing:i})].join(","),u&&u(e,t)})),W=G(g),V=G(f),N=G((function(e){var t,n=ca({style:I,timeout:m,easing:s},{mode:"exit"}),r=n.duration,a=n.delay,o=n.easing;"auto"===m?(t=Z.transitions.getAutoHeightDuration(e.clientHeight),k.current=t):t=r,e.style.transition=[Z.transitions.create("opacity",{duration:t,delay:a}),Z.transitions.create("transform",{duration:da?t:.666*t,delay:da?a:a||.333*t,easing:o})].join(","),e.style.opacity=0,e.style.transform=la(.75),p&&p(e)})),X=G(h);return t.useEffect((function(){return function(){clearTimeout(y.current)}}),[]),(0,_.jsx)(b,(0,l.Z)({appear:o,in:c,nodeRef:S,onEnter:R,onEntered:W,onEntering:x,onExit:N,onExited:X,onExiting:V,addEndListener:function(e){"auto"===m&&(y.current=setTimeout(e,k.current||0)),r&&r(S.current,e)},timeout:"auto"===m?null:m},A,{children:function(e,n){return t.cloneElement(i,(0,l.Z)({style:(0,l.Z)({opacity:0,transform:la(.75),visibility:"exited"!==e||c?void 0:"hidden"},ga[e],I,i.props.style),ref:B},n))}}))}));pa.muiSupportAuto=!0;var ha=pa,fa=__webpack_require__(9723),Ia=__webpack_require__(8956),Ca=__webpack_require__(8949),ma=__webpack_require__(2971);var va=t.forwardRef((function(e,n){var o=e.children,i=e.container,s=e.disablePortal,c=void 0!==s&&s,u=t.useState(null),l=(0,a.Z)(u,2),g=l[0],d=l[1],p=(0,Dt.Z)(t.isValidElement(o)?o.ref:null,n);return(0,Lt.Z)((function(){c||d(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,c]),(0,Lt.Z)((function(){if(g&&!c)return(0,ma.Z)(n,g),function(){(0,ma.Z)(n,null)}}),[n,g,c]),c?t.isValidElement(o)?t.cloneElement(o,{ref:p}):o:g?r.createPortal(o,g):g})),ba=__webpack_require__(5671),Aa=__webpack_require__(3144);function ya(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function ka(e){return parseInt((0,Kt.Z)(e).getComputedStyle(e).paddingRight,10)||0}function Za(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,o=[t,n].concat((0,Yt.Z)(r)),i=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){-1===o.indexOf(e)&&-1===i.indexOf(e.tagName)&&ya(e,a)}))}function Sa(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function wa(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,fa.Z)(e);return t.body===e?(0,Kt.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var a=Rr((0,fa.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(ka(r)+a,"px");var o=(0,fa.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(ka(e)+a,"px")}))}var i=r.parentElement,s=(0,Kt.Z)(r),c="HTML"===(null==i?void 0:i.nodeName)&&"scroll"===s.getComputedStyle(i).overflowY?i:r;n.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var Ba=function(){function e(){(0,ba.Z)(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,Aa.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&ya(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Za(t,e.mount,e.modalRef,r,!0);var a=Sa(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=Sa(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=wa(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=Sa(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&ya(e.modalRef,!0),Za(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&ya(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),Ga=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function xa(e){var t=[],n=[];return Array.from(e.querySelectorAll(Ga)).forEach((function(e,r){var a=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==a&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===a?t.push(e):n.push({documentOrder:r,tabIndex:a,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function Ra(){return!0}var Wa=function(e){var n=e.children,r=e.disableAutoFocus,a=void 0!==r&&r,o=e.disableEnforceFocus,i=void 0!==o&&o,s=e.disableRestoreFocus,c=void 0!==s&&s,u=e.getTabbable,l=void 0===u?xa:u,g=e.isEnabled,d=void 0===g?Ra:g,p=e.open,h=t.useRef(),f=t.useRef(null),I=t.useRef(null),C=t.useRef(null),m=t.useRef(null),v=t.useRef(!1),b=t.useRef(null),A=(0,Dt.Z)(n.ref,b),y=t.useRef(null);t.useEffect((function(){p&&b.current&&(v.current=!a)}),[a,p]),t.useEffect((function(){if(p&&b.current){var e=(0,fa.Z)(b.current);return b.current.contains(e.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex",-1),v.current&&b.current.focus()),function(){c||(C.current&&C.current.focus&&(h.current=!0,C.current.focus()),C.current=null)}}}),[p]),t.useEffect((function(){if(p&&b.current){var e=(0,fa.Z)(b.current),t=function(t){var n=b.current;if(null!==n)if(e.hasFocus()&&!i&&d()&&!h.current){if(!n.contains(e.activeElement)){if(t&&m.current!==t.target||e.activeElement!==m.current)m.current=null;else if(null!==m.current)return;if(!v.current)return;var r=[];if(e.activeElement!==f.current&&e.activeElement!==I.current||(r=l(b.current)),r.length>0){var a,o,s=Boolean((null==(a=y.current)?void 0:a.shiftKey)&&"Tab"===(null==(o=y.current)?void 0:o.key)),c=r[0],u=r[r.length-1];s?u.focus():c.focus()}else n.focus()}}else h.current=!1},n=function(t){y.current=t,!i&&d()&&"Tab"===t.key&&e.activeElement===b.current&&t.shiftKey&&(h.current=!0,I.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){"BODY"===e.activeElement.tagName&&t()}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[a,i,c,d,p,l]);var k=function(e){null===C.current&&(C.current=e.relatedTarget),v.current=!0};return(0,_.jsxs)(t.Fragment,{children:[(0,_.jsx)("div",{tabIndex:0,onFocus:k,ref:f,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:A,onFocus:function(e){null===C.current&&(C.current=e.relatedTarget),v.current=!0,m.current=e.target;var t=n.props.onFocus;t&&t(e)}}),(0,_.jsx)("div",{tabIndex:0,onFocus:k,ref:I,"data-test":"sentinelEnd"})]})};function Va(e){return(0,Cn.Z)("MuiModal",e)}(0,mn.Z)("MuiModal",["root","hidden"]);var Na=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];var Xa=new Ba,Ja=t.forwardRef((function(e,n){var r=e.BackdropComponent,o=e.BackdropProps,i=e.children,s=e.classes,c=e.className,u=e.closeAfterTransition,g=void 0!==u&&u,d=e.component,p=void 0===d?"div":d,h=e.components,f=void 0===h?{}:h,I=e.componentsProps,C=void 0===I?{}:I,m=e.container,v=e.disableAutoFocus,b=void 0!==v&&v,A=e.disableEnforceFocus,y=void 0!==A&&A,k=e.disableEscapeKeyDown,Z=void 0!==k&&k,S=e.disablePortal,w=void 0!==S&&S,B=e.disableRestoreFocus,G=void 0!==B&&B,x=e.disableScrollLock,R=void 0!==x&&x,W=e.hideBackdrop,V=void 0!==W&&W,N=e.keepMounted,X=void 0!==N&&N,J=e.manager,F=void 0===J?Xa:J,E=e.onBackdropClick,T=e.onClose,Y=e.onKeyDown,H=e.open,M=e.theme,D=e.onTransitionEnter,K=e.onTransitionExited,z=(0,Vt.Z)(e,Na),L=t.useState(!0),P=(0,a.Z)(L,2),O=P[0],U=P[1],j=t.useRef({}),Q=t.useRef(null),q=t.useRef(null),$=(0,Dt.Z)(q,n),ee=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),te=function(){return j.current.modalRef=q.current,j.current.mountNode=Q.current,j.current},ne=function(){F.mount(te(),{disableScrollLock:R}),q.current.scrollTop=0},re=(0,Ia.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(m)||(0,fa.Z)(Q.current).body;F.add(te(),e),q.current&&ne()})),ae=t.useCallback((function(){return F.isTopModal(te())}),[F]),oe=(0,Ia.Z)((function(e){Q.current=e,e&&(H&&ae()?ne():ya(q.current,!0))})),ie=t.useCallback((function(){F.remove(te())}),[F]);t.useEffect((function(){return function(){ie()}}),[ie]),t.useEffect((function(){H?re():ee&&g||ie()}),[H,ie,ee,g,re]);var se=(0,l.Z)({},e,{classes:s,closeAfterTransition:g,disableAutoFocus:b,disableEnforceFocus:y,disableEscapeKeyDown:Z,disablePortal:w,disableRestoreFocus:G,disableScrollLock:R,exited:O,hideBackdrop:V,keepMounted:X}),ce=function(e){var t=e.open,n=e.exited,r=e.classes,a={root:["root",!t&&n&&"hidden"]};return(0,Xt.Z)(a,Va,r)}(se);if(!X&&!H&&(!ee||O))return null;var ue={};void 0===i.props.tabIndex&&(ue.tabIndex="-1"),ee&&(ue.onEnter=(0,Ca.Z)((function(){U(!1),D&&D()}),i.props.onEnter),ue.onExited=(0,Ca.Z)((function(){U(!0),K&&K(),g&&ie()}),i.props.onExited));var le=f.Root||p,ge=C.root||{};return(0,_.jsx)(va,{ref:oe,container:m,disablePortal:w,children:(0,_.jsxs)(le,(0,l.Z)({role:"presentation"},ge,!Qt(le)&&{as:p,ownerState:(0,l.Z)({},se,ge.ownerState),theme:M},z,{ref:$,onKeyDown:function(e){Y&&Y(e),"Escape"===e.key&&ae()&&(Z||(e.stopPropagation(),T&&T(e,"escapeKeyDown")))},className:(0,Nt.Z)(ce.root,ge.className,c),children:[!V&&r?(0,_.jsx)(r,(0,l.Z)({"aria-hidden":!0,open:H,onClick:function(e){e.target===e.currentTarget&&(E&&E(e),T&&T(e,"backdropClick"))}},o)):null,(0,_.jsx)(Wa,{disableEnforceFocus:y,disableAutoFocus:b,disableRestoreFocus:G,isEnabled:ae,open:H,children:t.cloneElement(i,ue)})]}))})})),Fa=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Ea={entering:{opacity:1},entered:{opacity:1}},Ta=t.forwardRef((function(e,n){var r=ia(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},o=e.addEndListener,i=e.appear,s=void 0===i||i,c=e.children,u=e.easing,g=e.in,d=e.onEnter,p=e.onEntered,h=e.onEntering,f=e.onExit,I=e.onExited,C=e.onExiting,m=e.style,v=e.timeout,b=void 0===v?a:v,A=e.TransitionComponent,y=void 0===A?aa:A,k=(0,Vt.Z)(e,Fa),Z=t.useRef(null),S=(0,nn.Z)(c.ref,n),w=(0,nn.Z)(Z,S),B=function(e){return function(t){if(e){var n=Z.current;void 0===t?e(n):e(n,t)}}},G=B(h),x=B((function(e,t){sa(e);var n=ca({style:m,timeout:b,easing:u},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),d&&d(e,t)})),R=B(p),W=B(C),V=B((function(e){var t=ca({style:m,timeout:b,easing:u},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),f&&f(e)})),N=B(I);return(0,_.jsx)(y,(0,l.Z)({appear:s,in:g,nodeRef:Z,onEnter:x,onEntered:R,onEntering:G,onExit:V,onExited:N,onExiting:W,addEndListener:function(e){o&&o(Z.current,e)},timeout:b},k,{children:function(e,n){return t.cloneElement(c,(0,l.Z)({style:(0,l.Z)({opacity:0,visibility:"exited"!==e||g?void 0:"hidden"},Ea[e],m,c.props.style),ref:w},n))}}))})),Ya=Ta;function Ha(e){return(0,Cn.Z)("MuiBackdrop",e)}(0,mn.Z)("MuiBackdrop",["root","invisible"]);var Ma=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],Da=(0,Ft.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,l.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),Ka=t.forwardRef((function(e,t){var n,r,a=(0,Et.Z)({props:e,name:"MuiBackdrop"}),o=a.children,i=a.component,s=void 0===i?"div":i,c=a.components,u=void 0===c?{}:c,g=a.componentsProps,d=void 0===g?{}:g,p=a.className,h=a.invisible,f=void 0!==h&&h,I=a.open,C=a.transitionDuration,m=a.TransitionComponent,v=void 0===m?Ya:m,b=(0,Vt.Z)(a,Ma),A=(0,l.Z)({},a,{component:s,invisible:f}),y=function(e){var t=e.classes,n={root:["root",e.invisible&&"invisible"]};return(0,Xt.Z)(n,Ha,t)}(A);return(0,_.jsx)(v,(0,l.Z)({in:I,timeout:C},b,{children:(0,_.jsx)(Da,{"aria-hidden":!0,as:null!=(n=u.Root)?n:s,className:(0,Nt.Z)(y.root,p),ownerState:(0,l.Z)({},A,null==(r=d.root)?void 0:r.ownerState),classes:y,ref:t,children:o})}))})),za=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],La=(0,Ft.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Pa=(0,Ft.ZP)(Ka,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),_a=t.forwardRef((function(e,n){var r,o=(0,Et.Z)({name:"MuiModal",props:e}),i=o.BackdropComponent,s=void 0===i?Pa:i,c=o.closeAfterTransition,u=void 0!==c&&c,g=o.children,d=o.components,p=void 0===d?{}:d,h=o.componentsProps,f=void 0===h?{}:h,I=o.disableAutoFocus,C=void 0!==I&&I,m=o.disableEnforceFocus,v=void 0!==m&&m,b=o.disableEscapeKeyDown,A=void 0!==b&&b,y=o.disablePortal,k=void 0!==y&&y,Z=o.disableRestoreFocus,S=void 0!==Z&&Z,w=o.disableScrollLock,B=void 0!==w&&w,G=o.hideBackdrop,x=void 0!==G&&G,R=o.keepMounted,W=void 0!==R&&R,V=(0,Vt.Z)(o,za),N=t.useState(!0),X=(0,a.Z)(N,2),J=X[0],F=X[1],E={closeAfterTransition:u,disableAutoFocus:C,disableEnforceFocus:v,disableEscapeKeyDown:A,disablePortal:k,disableRestoreFocus:S,disableScrollLock:B,hideBackdrop:x,keepMounted:W},T=function(e){return e.classes}((0,l.Z)({},o,E,{exited:J}));return(0,_.jsx)(Ja,(0,l.Z)({components:(0,l.Z)({Root:La},p),componentsProps:{root:(0,l.Z)({},f.root,(!p.Root||!Qt(p.Root))&&{ownerState:(0,l.Z)({},null==(r=f.root)?void 0:r.ownerState)})},BackdropComponent:s,onTransitionEnter:function(){return F(!1)},onTransitionExited:function(){return F(!0)},ref:n},V,{classes:T},E,{children:g}))}));function Oa(e){return(0,Cn.Z)("MuiPopover",e)}(0,mn.Z)("MuiPopover",["root","paper"]);var Ua=["onEntering"],ja=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function Qa(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function qa(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function $a(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function eo(e){return"function"===typeof e?e():e}var to=(0,Ft.ZP)(_a,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),no=(0,Ft.ZP)(zr,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),ro=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiPopover"}),a=r.action,o=r.anchorEl,i=r.anchorOrigin,s=void 0===i?{vertical:"top",horizontal:"left"}:i,c=r.anchorPosition,u=r.anchorReference,g=void 0===u?"anchorEl":u,d=r.children,p=r.className,h=r.container,f=r.elevation,I=void 0===f?8:f,C=r.marginThreshold,m=void 0===C?16:C,v=r.open,b=r.PaperProps,A=void 0===b?{}:b,y=r.transformOrigin,k=void 0===y?{vertical:"top",horizontal:"left"}:y,Z=r.TransitionComponent,S=void 0===Z?ha:Z,w=r.transitionDuration,B=void 0===w?"auto":w,G=r.TransitionProps,x=(G=void 0===G?{}:G).onEntering,R=(0,Vt.Z)(r.TransitionProps,Ua),W=(0,Vt.Z)(r,ja),V=t.useRef(),N=(0,nn.Z)(V,A.ref),X=(0,l.Z)({},r,{anchorOrigin:s,anchorReference:g,elevation:I,marginThreshold:m,PaperProps:A,transformOrigin:k,TransitionComponent:S,transitionDuration:B,TransitionProps:R}),J=function(e){var t=e.classes;return(0,Xt.Z)({root:["root"],paper:["paper"]},Oa,t)}(X),F=t.useCallback((function(){if("anchorPosition"===g)return c;var e=eo(o),t=(e&&1===e.nodeType?e:(0,Zr.Z)(V.current).body).getBoundingClientRect();return{top:t.top+Qa(t,s.vertical),left:t.left+qa(t,s.horizontal)}}),[o,s.horizontal,s.vertical,c,g]),E=t.useCallback((function(e){return{vertical:Qa(e,k.vertical),horizontal:qa(e,k.horizontal)}}),[k.horizontal,k.vertical]),T=t.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=E(t);if("none"===g)return{top:null,left:null,transformOrigin:$a(n)};var r=F(),a=r.top-n.vertical,i=r.left-n.horizontal,s=a+t.height,c=i+t.width,u=(0,Pr.Z)(eo(o)),l=u.innerHeight-m,d=u.innerWidth-m;if(a<m){var p=a-m;a-=p,n.vertical+=p}else if(s>l){var h=s-l;a-=h,n.vertical+=h}if(i<m){var f=i-m;i-=f,n.horizontal+=f}else if(c>d){var I=c-d;i-=I,n.horizontal+=I}return{top:"".concat(Math.round(a),"px"),left:"".concat(Math.round(i),"px"),transformOrigin:$a(n)}}),[o,g,F,E,m]),Y=t.useCallback((function(){var e=V.current;if(e){var t=T(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[T]);t.useEffect((function(){v&&Y()})),t.useImperativeHandle(a,(function(){return v?{updatePosition:function(){Y()}}:null}),[v,Y]),t.useEffect((function(){if(v){var e=(0,Lr.Z)((function(){Y()})),t=(0,Pr.Z)(o);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[o,v,Y]);var H=B;"auto"!==B||S.muiSupportAuto||(H=void 0);var M=h||(o?(0,Zr.Z)(eo(o)).body:void 0);return(0,_.jsx)(to,(0,l.Z)({BackdropProps:{invisible:!0},className:(0,Nt.Z)(J.root,p),container:M,open:v,ref:n,ownerState:X},W,{children:(0,_.jsx)(S,(0,l.Z)({appear:!0,in:v,onEntering:function(e,t){x&&x(e,t),Y()},timeout:H},R,{children:(0,_.jsx)(no,(0,l.Z)({elevation:I},A,{ref:N,className:(0,Nt.Z)(J.paper,A.className),children:d}))}))}))})),ao=ro;function oo(e){return(0,Cn.Z)("MuiMenu",e)}(0,mn.Z)("MuiMenu",["root","paper","list"]);var io=["onEntering"],so=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],co={vertical:"top",horizontal:"right"},uo={vertical:"top",horizontal:"left"},lo=(0,Ft.ZP)(ao,{shouldForwardProp:function(e){return(0,Ft.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),go=(0,Ft.ZP)(zr,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),po=(0,Ft.ZP)(Tr,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),ho=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiMenu"}),a=r.autoFocus,o=void 0===a||a,i=r.children,s=r.disableAutoFocusItem,c=void 0!==s&&s,u=r.MenuListProps,g=void 0===u?{}:u,d=r.onClose,p=r.open,h=r.PaperProps,f=void 0===h?{}:h,I=r.PopoverClasses,C=r.transitionDuration,m=void 0===C?"auto":C,v=r.TransitionProps,b=(v=void 0===v?{}:v).onEntering,A=r.variant,y=void 0===A?"selectedMenu":A,k=(0,Vt.Z)(r.TransitionProps,io),Z=(0,Vt.Z)(r,so),S=ia(),w="rtl"===S.direction,B=(0,l.Z)({},r,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:g,onEntering:b,PaperProps:f,transitionDuration:m,TransitionProps:k,variant:y}),G=function(e){var t=e.classes;return(0,Xt.Z)({root:["root"],paper:["paper"],list:["list"]},oo,t)}(B),x=o&&!c&&p,R=t.useRef(null),W=-1;return t.Children.map(i,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===W)&&(W=n))})),(0,_.jsx)(lo,(0,l.Z)({classes:I,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:w?"right":"left"},transformOrigin:w?co:uo,PaperProps:(0,l.Z)({component:go},f,{classes:(0,l.Z)({},f.classes,{root:G.paper})}),className:G.root,open:p,ref:n,transitionDuration:m,TransitionProps:(0,l.Z)({onEntering:function(e,t){R.current&&R.current.adjustStyleForScrollbar(e,S),b&&b(e,t)}},k),ownerState:B},Z,{children:(0,_.jsx)(po,(0,l.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:R,autoFocus:o&&(-1===W||c),autoFocusItem:x,variant:y},g,{className:(0,Nt.Z)(G.list,g.className),children:i}))}))})),fo=ho;function Io(e){return(0,Cn.Z)("MuiNativeSelect",e)}var Co=(0,mn.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),mo=["className","disabled","IconComponent","inputRef","variant"],vo=function(e){var t,n=e.ownerState,r=e.theme;return(0,l.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"}},(0,Tt.Z)(t,"&.".concat(Co.disabled),{cursor:"default"}),(0,Tt.Z)(t,"&[multiple]",{height:"auto"}),(0,Tt.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:r.palette.background.paper}),(0,Tt.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:r.shape.borderRadius,"&:focus":{borderRadius:r.shape.borderRadius},"&&&":{paddingRight:32}})},bo=(0,Ft.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ft.FO,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],(0,Tt.Z)({},"&.".concat(Co.multiple),t.multiple)]}})(vo),Ao=function(e){var t=e.ownerState,n=e.theme;return(0,l.Z)((0,Tt.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:n.palette.action.active},"&.".concat(Co.disabled),{color:n.palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},yo=(0,Ft.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,tn.Z)(n.variant))],n.open&&t.iconOpen]}})(Ao),ko=t.forwardRef((function(e,n){var r=e.className,a=e.disabled,o=e.IconComponent,i=e.inputRef,s=e.variant,c=void 0===s?"standard":s,u=(0,Vt.Z)(e,mo),g=(0,l.Z)({},e,{disabled:a,variant:c}),d=function(e){var t=e.classes,n=e.variant,r=e.disabled,a=e.multiple,o=e.open,i={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon","icon".concat((0,tn.Z)(n)),o&&"iconOpen",r&&"disabled"]};return(0,Xt.Z)(i,Io,t)}(g);return(0,_.jsxs)(t.Fragment,{children:[(0,_.jsx)(bo,(0,l.Z)({ownerState:g,className:(0,Nt.Z)(d.select,r),disabled:a,ref:i||n},u)),e.multiple?null:(0,_.jsx)(yo,{as:o,ownerState:g,className:d.icon})]})})),Zo=__webpack_require__(8278);function So(e){return(0,Cn.Z)("MuiSelect",e)}var wo,Bo=(0,mn.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Go=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],xo=(0,Ft.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[(0,Tt.Z)({},"&.".concat(Bo.select),t.select),(0,Tt.Z)({},"&.".concat(Bo.select),t[n.variant]),(0,Tt.Z)({},"&.".concat(Bo.multiple),t.multiple)]}})(vo,(0,Tt.Z)({},"&.".concat(Bo.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),Ro=(0,Ft.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,tn.Z)(n.variant))],n.open&&t.iconOpen]}})(Ao),Wo=(0,Ft.ZP)("input",{shouldForwardProp:function(e){return(0,Ft.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Vo(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function No(e){return null==e||"string"===typeof e&&!e.trim()}var Xo,Jo,Fo=t.forwardRef((function(e,n){var r=e["aria-describedby"],o=e["aria-label"],i=e.autoFocus,s=e.autoWidth,c=e.children,u=e.className,g=e.defaultOpen,d=e.defaultValue,p=e.disabled,h=e.displayEmpty,f=e.IconComponent,I=e.inputRef,C=e.labelId,m=e.MenuProps,v=void 0===m?{}:m,b=e.multiple,A=e.name,y=e.onBlur,k=e.onChange,Z=e.onClose,S=e.onFocus,w=e.onOpen,B=e.open,G=e.readOnly,x=e.renderValue,R=e.SelectDisplayProps,W=void 0===R?{}:R,V=e.tabIndex,N=e.value,X=e.variant,J=void 0===X?"standard":X,F=(0,Vt.Z)(e,Go),E=(0,Zo.Z)({controlled:N,default:d,name:"Select"}),T=(0,a.Z)(E,2),Y=T[0],H=T[1],M=(0,Zo.Z)({controlled:B,default:g,name:"Select"}),D=(0,a.Z)(M,2),K=D[0],z=D[1],L=t.useRef(null),P=t.useRef(null),O=t.useState(null),U=(0,a.Z)(O,2),j=U[0],Q=U[1],q=t.useRef(null!=B).current,$=t.useState(),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],re=(0,nn.Z)(n,I),ae=t.useCallback((function(e){P.current=e,e&&Q(e)}),[]);t.useImperativeHandle(re,(function(){return{focus:function(){P.current.focus()},node:L.current,value:Y}}),[Y]),t.useEffect((function(){g&&K&&j&&!q&&(ne(s?null:j.clientWidth),P.current.focus())}),[j,s]),t.useEffect((function(){i&&P.current.focus()}),[i]),t.useEffect((function(){if(C){var e=(0,Zr.Z)(P.current).getElementById(C);if(e){var t=function(){getSelection().isCollapsed&&P.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[C]);var oe,ie,se=function(e,t){e?w&&w(t):Z&&Z(t),q||(ne(s?null:j.clientWidth),z(e))},ce=t.Children.toArray(c),ue=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(Y)?Y.slice():[];var r=Y.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),Y!==n&&(H(n),k)){var a=t.nativeEvent||t,o=new a.constructor(a.type,a);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:A}}),k(o,e)}b||se(!1,t)}}},le=null!==j&&K;delete F["aria-invalid"];var ge=[],de=!1;(In({value:Y})||h)&&(x?oe=x(Y):de=!0);var pe=ce.map((function(e){if(!t.isValidElement(e))return null;var n;if(b){if(!Array.isArray(Y))throw new Error((0,Mt.Z)(2));n=Y.some((function(t){return Vo(t,e.props.value)})),n&&de&&ge.push(e.props.children)}else(n=Vo(Y,e.props.value))&&de&&(ie=e.props.children);return n&&!0,t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:ue(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));de&&(oe=b?0===ge.length?null:ge.reduce((function(e,t,n){return e.push(t),n<ge.length-1&&e.push(", "),e}),[]):ie);var he,fe=te;!s&&q&&j&&(fe=j.clientWidth),he="undefined"!==typeof V?V:p?null:0;var Ie=W.id||(A?"mui-component-select-".concat(A):void 0),Ce=(0,l.Z)({},e,{variant:J,value:Y,open:le}),me=function(e){var t=e.classes,n=e.variant,r=e.disabled,a=e.multiple,o=e.open,i={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon","icon".concat((0,tn.Z)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,Xt.Z)(i,So,t)}(Ce);return(0,_.jsxs)(t.Fragment,{children:[(0,_.jsx)(xo,(0,l.Z)({ref:ae,tabIndex:he,role:"button","aria-disabled":p?"true":void 0,"aria-expanded":le?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[C,Ie].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:function(e){if(!G){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),se(!0,e))}},onMouseDown:p||G?null:function(e){0===e.button&&(e.preventDefault(),P.current.focus(),se(!0,e))},onBlur:function(e){!le&&y&&(Object.defineProperty(e,"target",{writable:!0,value:{value:Y,name:A}}),y(e))},onFocus:S},W,{ownerState:Ce,className:(0,Nt.Z)(me.select,u,W.className),id:Ie,children:No(oe)?wo||(wo=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"})):oe})),(0,_.jsx)(Wo,(0,l.Z)({value:Array.isArray(Y)?Y.join(","):Y,name:A,ref:L,"aria-hidden":!0,onChange:function(e){var t=ce.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ce[t];H(n.props.value),k&&k(e,n)}},tabIndex:-1,disabled:p,className:me.nativeInput,autoFocus:i,ownerState:Ce},F)),(0,_.jsx)(Ro,{as:f,className:me.icon,ownerState:Ce}),(0,_.jsx)(fo,(0,l.Z)({id:"menu-".concat(A||""),anchorEl:j,open:le,onClose:function(e){se(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:(0,l.Z)({"aria-labelledby":C,role:"listbox",disableListWrap:!0},v.MenuListProps),PaperProps:(0,l.Z)({},v.PaperProps,{style:(0,l.Z)({minWidth:fe},null!=v.PaperProps?v.PaperProps.style:null)}),children:pe}))]})})),Eo=Fo,To=__webpack_require__(9201),Yo=(0,To.Z)((0,_.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Ho=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Mo={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,Ft.FO)(e)&&"variant"!==e},slot:"Root"},Do=(0,Ft.ZP)(Jn,Mo)(""),Ko=(0,Ft.ZP)(er,Mo)(""),zo=(0,Ft.ZP)(Kn,Mo)(""),Lo=t.forwardRef((function(e,n){var r=(0,Et.Z)({name:"MuiSelect",props:e}),a=r.autoWidth,o=void 0!==a&&a,i=r.children,s=r.classes,c=void 0===s?{}:s,u=r.className,g=r.defaultOpen,d=void 0!==g&&g,p=r.displayEmpty,h=void 0!==p&&p,f=r.IconComponent,I=void 0===f?Yo:f,C=r.id,m=r.input,v=r.inputProps,b=r.label,A=r.labelId,y=r.MenuProps,k=r.multiple,Z=void 0!==k&&k,S=r.native,w=void 0!==S&&S,B=r.onClose,G=r.onOpen,x=r.open,R=r.renderValue,W=r.SelectDisplayProps,V=r.variant,N=void 0===V?"outlined":V,X=(0,Vt.Z)(r,Ho),J=w?ko:Eo,F=qt({props:r,muiFormControl:en(),states:["variant"]}).variant||N,E=m||{standard:Xo||(Xo=(0,_.jsx)(Do,{})),outlined:(0,_.jsx)(Ko,{label:b}),filled:Jo||(Jo=(0,_.jsx)(zo,{}))}[F],T=function(e){return e.classes}((0,l.Z)({},r,{variant:F,classes:c})),Y=(0,nn.Z)(n,E.ref);return t.cloneElement(E,(0,l.Z)({inputComponent:J,inputProps:(0,l.Z)({children:i,IconComponent:I,variant:F,type:void 0,multiple:Z},w?{id:C}:{autoWidth:o,defaultOpen:d,displayEmpty:h,labelId:A,MenuProps:y,onClose:B,onOpen:G,open:x,renderValue:R,SelectDisplayProps:(0,l.Z)({id:C},W)},v,{classes:v?(0,Ht.Z)(T,v.classes):T},m?m.props.inputProps:{})},Z&&w&&"outlined"===F?{notched:!0}:{},{ref:Y,className:(0,Nt.Z)(E.props.className,u),variant:F},X))}));Lo.muiName="Select";var Po=Lo;function _o(e){return(0,Cn.Z)("MuiTextField",e)}(0,mn.Z)("MuiTextField",["root"]);var Oo=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Uo={standard:Jn,filled:Kn,outlined:er},jo=(0,Ft.ZP)(Cr,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Qo=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiTextField"}),r=n.autoComplete,a=n.autoFocus,o=void 0!==a&&a,i=n.children,s=n.className,c=n.color,u=void 0===c?"primary":c,g=n.defaultValue,d=n.disabled,p=void 0!==d&&d,h=n.error,f=void 0!==h&&h,I=n.FormHelperTextProps,C=n.fullWidth,m=void 0!==C&&C,v=n.helperText,b=n.id,A=n.InputLabelProps,y=n.inputProps,k=n.InputProps,Z=n.inputRef,S=n.label,w=n.maxRows,B=n.minRows,G=n.multiline,x=void 0!==G&&G,R=n.name,W=n.onBlur,V=n.onChange,N=n.onFocus,X=n.placeholder,J=n.required,F=void 0!==J&&J,E=n.rows,T=n.select,Y=void 0!==T&&T,H=n.SelectProps,M=n.type,D=n.value,K=n.variant,z=void 0===K?"outlined":K,L=(0,Vt.Z)(n,Oo),P=(0,l.Z)({},n,{autoFocus:o,color:u,disabled:p,error:f,fullWidth:m,multiline:x,required:F,select:Y,variant:z}),O=function(e){var t=e.classes;return(0,Xt.Z)({root:["root"]},_o,t)}(P);var U={};"outlined"===z&&(A&&"undefined"!==typeof A.shrink&&(U.notched=A.shrink),U.label=S),Y&&(H&&H.native||(U.id=void 0),U["aria-describedby"]=void 0);var j=(0,Jt.Z)(b),Q=v&&j?"".concat(j,"-helper-text"):void 0,q=S&&j?"".concat(j,"-label"):void 0,$=Uo[z],ee=(0,_.jsx)($,(0,l.Z)({"aria-describedby":Q,autoComplete:r,autoFocus:o,defaultValue:g,fullWidth:m,multiline:x,name:R,rows:E,maxRows:w,minRows:B,type:M,value:D,id:j,inputRef:Z,onBlur:W,onChange:V,onFocus:N,placeholder:X,inputProps:y},U,k));return(0,_.jsxs)(jo,(0,l.Z)({className:(0,Nt.Z)(O.root,s),disabled:p,error:f,fullWidth:m,ref:t,required:F,color:u,variant:z,ownerState:P},L,{children:[null!=S&&""!==S&&(0,_.jsx)(gr,(0,l.Z)({htmlFor:j,id:q},A,{children:S})),Y?(0,_.jsx)(Po,(0,l.Z)({"aria-describedby":Q,id:j,labelId:q,value:D,input:ee},H,{children:i})):ee,v&&(0,_.jsx)(kr,(0,l.Z)({id:Q},I,{children:v}))]}))})),qo=Qo,$o=__webpack_require__(9683),ei=__webpack_require__(3031),ti=__webpack_require__(7326);function ni(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function ri(e,t,n){return null!=n[t]?n[t]:e.props[t]}function ai(e,n,r){var a=ni(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),o=[];for(var i in e)i in t?o.length&&(a[i]=o,o=[]):o.push(i);var s={};for(var c in t){if(a[c])for(r=0;r<a[c].length;r++){var u=a[c][r];s[a[c][r]]=n(u)}s[c]=n(c)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,a);return Object.keys(o).forEach((function(i){var s=o[i];if((0,t.isValidElement)(s)){var c=i in n,u=i in a,l=n[i],g=(0,t.isValidElement)(l)&&!l.props.in;!u||c&&!g?u||!c||g?u&&c&&(0,t.isValidElement)(l)&&(o[i]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:l.props.in,exit:ri(s,"exit",e),enter:ri(s,"enter",e)})):o[i]=(0,t.cloneElement)(s,{in:!1}):o[i]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:ri(s,"exit",e),enter:ri(s,"enter",e)})}})),o}var oi=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ii=function(e){function n(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind((0,ti.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Or(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,a,o=n.children,i=n.handleExited;return{children:n.firstRender?(r=e,a=i,ni(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:a.bind(null,e),in:!0,appear:ri(e,"appear",r),enter:ri(e,"enter",r),exit:ri(e,"exit",r)})}))):ai(e,o,i),firstRender:!1}},r.handleExited=function(e,t){var n=ni(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,l.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,a=(0,Vt.Z)(e,["component","childFactory"]),o=this.state.contextValue,i=oi(this.state.children).map(r);return delete a.appear,delete a.enter,delete a.exit,null===n?t.createElement(jr.Provider,{value:o},i):t.createElement(jr.Provider,{value:o},t.createElement(n,a,i))},n}(t.Component);ii.propTypes={},ii.defaultProps={component:"div",childFactory:function(e){return e}};var si=ii;var ci=function(e){var n=e.className,r=e.classes,o=e.pulsate,i=void 0!==o&&o,s=e.rippleX,c=e.rippleY,u=e.rippleSize,l=e.in,g=e.onExited,d=e.timeout,p=t.useState(!1),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,Nt.Z)(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),m={width:u,height:u,top:-u/2+c,left:-u/2+s},v=(0,Nt.Z)(r.child,f&&r.childLeaving,i&&r.childPulsate);return l||f||I(!0),t.useEffect((function(){if(!l&&null!=g){var e=setTimeout(g,d);return function(){clearTimeout(e)}}}),[g,l,d]),(0,_.jsx)("span",{className:C,style:m,children:(0,_.jsx)("span",{className:v})})};var ui,li,gi,di,pi,hi,fi,Ii,Ci=(0,mn.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),mi=["center","classes","className"],vi=gn(pi||(pi=ui||(ui=j(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),bi=gn(hi||(hi=li||(li=j(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Ai=gn(fi||(fi=gi||(gi=j(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),yi=(0,Ft.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ki=(0,Ft.ZP)(ci,{name:"MuiTouchRipple",slot:"Ripple"})(Ii||(Ii=di||(di=j(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Ci.rippleVisible,vi,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ci.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Ci.child,Ci.childLeaving,bi,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ci.childPulsate,Ai,(function(e){return e.theme.transitions.easing.easeInOut})),Zi=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiTouchRipple"}),o=r.center,i=void 0!==o&&o,s=r.classes,c=void 0===s?{}:s,u=r.className,g=(0,Vt.Z)(r,mi),d=t.useState([]),p=(0,a.Z)(d,2),h=p[0],f=p[1],I=t.useRef(0),C=t.useRef(null);t.useEffect((function(){C.current&&(C.current(),C.current=null)}),[h]);var m=t.useRef(!1),v=t.useRef(null),b=t.useRef(null),A=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var y=t.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,a=e.rippleSize,o=e.cb;f((function(e){return[].concat((0,Yt.Z)(e),[(0,_.jsx)(ki,{classes:{ripple:(0,Nt.Z)(c.ripple,Ci.ripple),rippleVisible:(0,Nt.Z)(c.rippleVisible,Ci.rippleVisible),ripplePulsate:(0,Nt.Z)(c.ripplePulsate,Ci.ripplePulsate),child:(0,Nt.Z)(c.child,Ci.child),childLeaving:(0,Nt.Z)(c.childLeaving,Ci.childLeaving),childPulsate:(0,Nt.Z)(c.childPulsate,Ci.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:a},I.current)])})),I.current+=1,C.current=o}),[c]),k=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,a=void 0!==r&&r,o=t.center,s=void 0===o?i||t.pulsate:o,c=t.fakeElement,u=void 0!==c&&c;if("mousedown"===e.type&&m.current)m.current=!1;else{"touchstart"===e.type&&(m.current=!0);var l,g,d,p=u?null:A.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(h.width/2),g=Math.round(h.height/2);else{var f=e.touches?e.touches[0]:e,I=f.clientX,C=f.clientY;l=Math.round(I-h.left),g=Math.round(C-h.top)}if(s)(d=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(d+=1);else{var k=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,Z=2*Math.max(Math.abs((p?p.clientHeight:0)-g),g)+2;d=Math.sqrt(Math.pow(k,2)+Math.pow(Z,2))}e.touches?null===b.current&&(b.current=function(){y({pulsate:a,rippleX:l,rippleY:g,rippleSize:d,cb:n})},v.current=setTimeout((function(){b.current&&(b.current(),b.current=null)}),80)):y({pulsate:a,rippleX:l,rippleY:g,rippleSize:d,cb:n})}}),[i,y]),Z=t.useCallback((function(){k({},{pulsate:!0})}),[k]),S=t.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===e.type&&b.current)return b.current(),b.current=null,void(v.current=setTimeout((function(){S(e,t)})));b.current=null,f((function(e){return e.length>0?e.slice(1):e})),C.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:Z,start:k,stop:S}}),[Z,k,S]),(0,_.jsx)(yi,(0,l.Z)({className:(0,Nt.Z)(c.root,Ci.root,u),ref:A},g,{children:(0,_.jsx)(si,{component:null,exit:!0,children:h})}))})),Si=Zi;function wi(e){return(0,Cn.Z)("MuiButtonBase",e)}var Bi,Gi=(0,mn.Z)("MuiButtonBase",["root","disabled","focusVisible"]),xi=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Ri=(0,Ft.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Bi={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,Tt.Z)(Bi,"&.".concat(Gi.disabled),{pointerEvents:"none",cursor:"default"}),(0,Tt.Z)(Bi,"@media print",{colorAdjust:"exact"}),Bi)),Wi=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiButtonBase"}),o=r.action,i=r.centerRipple,s=void 0!==i&&i,c=r.children,u=r.className,g=r.component,d=void 0===g?"button":g,p=r.disabled,h=void 0!==p&&p,f=r.disableRipple,I=void 0!==f&&f,C=r.disableTouchRipple,m=void 0!==C&&C,v=r.focusRipple,b=void 0!==v&&v,A=r.LinkComponent,y=void 0===A?"a":A,k=r.onBlur,Z=r.onClick,S=r.onContextMenu,w=r.onDragLeave,B=r.onFocus,G=r.onFocusVisible,x=r.onKeyDown,R=r.onKeyUp,W=r.onMouseDown,V=r.onMouseLeave,N=r.onMouseUp,X=r.onTouchEnd,J=r.onTouchMove,F=r.onTouchStart,E=r.tabIndex,T=void 0===E?0:E,Y=r.TouchRippleProps,H=r.touchRippleRef,M=r.type,D=(0,Vt.Z)(r,xi),K=t.useRef(null),z=t.useRef(null),L=(0,nn.Z)(z,H),P=(0,ei.Z)(),O=P.isFocusVisibleRef,U=P.onFocus,j=P.onBlur,Q=P.ref,q=t.useState(!1),$=(0,a.Z)(q,2),ee=$[0],te=$[1];h&&ee&&te(!1),t.useImperativeHandle(o,(function(){return{focusVisible:function(){te(!0),K.current.focus()}}}),[]);var ne=t.useState(!1),re=(0,a.Z)(ne,2),ae=re[0],oe=re[1];t.useEffect((function(){oe(!0)}),[]);var ie=ae&&!I&&!h;function se(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return(0,$o.Z)((function(r){return t&&t(r),!n&&z.current&&z.current[e](r),!0}))}t.useEffect((function(){ee&&b&&!I&&ae&&z.current.pulsate()}),[I,b,ee,ae]);var ce=se("start",W),ue=se("stop",S),le=se("stop",w),ge=se("stop",N),de=se("stop",(function(e){ee&&e.preventDefault(),V&&V(e)})),pe=se("start",F),he=se("stop",X),fe=se("stop",J),Ie=se("stop",(function(e){j(e),!1===O.current&&te(!1),k&&k(e)}),!1),Ce=(0,$o.Z)((function(e){K.current||(K.current=e.currentTarget),U(e),!0===O.current&&(te(!0),G&&G(e)),B&&B(e)})),me=function(){var e=K.current;return d&&"button"!==d&&!("A"===e.tagName&&e.href)},ve=t.useRef(!1),be=(0,$o.Z)((function(e){b&&!ve.current&&ee&&z.current&&" "===e.key&&(ve.current=!0,z.current.stop(e,(function(){z.current.start(e)}))),e.target===e.currentTarget&&me()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&me()&&"Enter"===e.key&&!h&&(e.preventDefault(),Z&&Z(e))})),Ae=(0,$o.Z)((function(e){b&&" "===e.key&&z.current&&ee&&!e.defaultPrevented&&(ve.current=!1,z.current.stop(e,(function(){z.current.pulsate(e)}))),R&&R(e),Z&&e.target===e.currentTarget&&me()&&" "===e.key&&!e.defaultPrevented&&Z(e)})),ye=d;"button"===ye&&(D.href||D.to)&&(ye=y);var ke={};"button"===ye?(ke.type=void 0===M?"button":M,ke.disabled=h):(D.href||D.to||(ke.role="button"),h&&(ke["aria-disabled"]=h));var Ze=(0,nn.Z)(Q,K),Se=(0,nn.Z)(n,Ze);var we=(0,l.Z)({},r,{centerRipple:s,component:d,disabled:h,disableRipple:I,disableTouchRipple:m,focusRipple:b,tabIndex:T,focusVisible:ee}),Be=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,a=e.classes,o={root:["root",t&&"disabled",n&&"focusVisible"]},i=(0,Xt.Z)(o,wi,a);return n&&r&&(i.root+=" ".concat(r)),i}(we);return(0,_.jsxs)(Ri,(0,l.Z)({as:ye,className:(0,Nt.Z)(Be.root,u),ownerState:we,onBlur:Ie,onClick:Z,onContextMenu:ue,onFocus:Ce,onKeyDown:be,onKeyUp:Ae,onMouseDown:ce,onMouseLeave:de,onMouseUp:ge,onDragLeave:le,onTouchEnd:he,onTouchMove:fe,onTouchStart:pe,ref:Se,tabIndex:h?-1:T,type:M},ke,D,{children:[c,ie?(0,_.jsx)(Si,(0,l.Z)({ref:L,center:s},Y)):null]}))})),Vi=Wi;function Ni(e){return(0,Cn.Z)("MuiIconButton",e)}var Xi=(0,mn.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Ji=["edge","children","className","color","disabled","disableFocusRipple","size"],Fi=(0,Ft.ZP)(Vi,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,tn.Z)(n.color))],n.edge&&t["edge".concat((0,tn.Z)(n.edge))],t["size".concat((0,tn.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:(0,Yr.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,l.Z)({color:t.palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:(0,Yr.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,Tt.Z)({},"&.".concat(Xi.disabled),{backgroundColor:"transparent",color:t.palette.action.disabled}))})),Ei=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiIconButton"}),r=n.edge,a=void 0!==r&&r,o=n.children,i=n.className,s=n.color,c=void 0===s?"default":s,u=n.disabled,g=void 0!==u&&u,d=n.disableFocusRipple,p=void 0!==d&&d,h=n.size,f=void 0===h?"medium":h,I=(0,Vt.Z)(n,Ji),C=(0,l.Z)({},n,{edge:a,color:c,disabled:g,disableFocusRipple:p,size:f}),m=function(e){var t=e.classes,n=e.disabled,r=e.color,a=e.edge,o=e.size,i={root:["root",n&&"disabled","default"!==r&&"color".concat((0,tn.Z)(r)),a&&"edge".concat((0,tn.Z)(a)),"size".concat((0,tn.Z)(o))]};return(0,Xt.Z)(i,Ni,t)}(C);return(0,_.jsx)(Fi,(0,l.Z)({className:(0,Nt.Z)(m.root,i),centerRipple:!0,focusRipple:!p,disabled:g,ref:t,ownerState:C},I,{children:o}))})),Ti=Ei,Yi=__webpack_require__(5403),Hi=__webpack_require__(6001),Mi=["sx"];function Di(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){Hi.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}((0,Vt.Z)(e,Mi)),a=r.systemProps,o=r.otherProps;return t=Array.isArray(n)?[a].concat((0,Yt.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,Ht.P)(e)?(0,l.Z)({},a,e):a}:(0,l.Z)({},a,n),(0,l.Z)({},o,{sx:t})}function Ki(e){return(0,Cn.Z)("MuiTypography",e)}(0,mn.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var zi=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Li=(0,Ft.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,tn.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Pi={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},_i={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Oi=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiTypography"}),r=function(e){return _i[e]||e}(n.color),a=Di((0,l.Z)({},n,{color:r})),o=a.align,i=void 0===o?"inherit":o,s=a.className,c=a.component,u=a.gutterBottom,g=void 0!==u&&u,d=a.noWrap,p=void 0!==d&&d,h=a.paragraph,f=void 0!==h&&h,I=a.variant,C=void 0===I?"body1":I,m=a.variantMapping,v=void 0===m?Pi:m,b=(0,Vt.Z)(a,zi),A=(0,l.Z)({},a,{align:i,color:r,className:s,component:c,gutterBottom:g,noWrap:p,paragraph:f,variant:C,variantMapping:v}),y=c||(f?"p":v[C]||Pi[C])||"span",k=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,a=e.paragraph,o=e.variant,i=e.classes,s={root:["root",o,"inherit"!==e.align&&"align".concat((0,tn.Z)(t)),n&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return(0,Xt.Z)(s,Ki,i)}(A);return(0,_.jsx)(Li,(0,l.Z)({as:y,ref:t,ownerState:A,className:(0,Nt.Z)(k.root,s)},b))})),Ui=Oi;function ji(e){return(0,Cn.Z)("MuiInputAdornment",e)}var Qi,qi=(0,mn.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),$i=["children","className","component","disablePointerEvents","disableTypography","position","variant"],es=(0,Ft.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,tn.Z)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:t.palette.action.active},"filled"===n.variant&&(0,Tt.Z)({},"&.".concat(qi.positionStart,"&:not(.").concat(qi.hiddenLabel,")"),{marginTop:16}),"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),ts=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiInputAdornment"}),a=r.children,o=r.className,i=r.component,s=void 0===i?"div":i,c=r.disablePointerEvents,u=void 0!==c&&c,g=r.disableTypography,d=void 0!==g&&g,p=r.position,h=r.variant,f=(0,Vt.Z)(r,$i),I=en()||{},C=h;h&&I.variant,I&&!C&&(C=I.variant);var m=(0,l.Z)({},r,{hiddenLabel:I.hiddenLabel,size:I.size,disablePointerEvents:u,position:p,variant:C}),v=function(e){var t=e.classes,n=e.disablePointerEvents,r=e.hiddenLabel,a=e.position,o=e.size,i=e.variant,s={root:["root",n&&"disablePointerEvents",a&&"position".concat((0,tn.Z)(a)),i,r&&"hiddenLabel",o&&"size".concat((0,tn.Z)(o))]};return(0,Xt.Z)(s,ji,t)}(m);return(0,_.jsx)($t.Provider,{value:null,children:(0,_.jsx)(es,(0,l.Z)({as:s,ownerState:m,className:(0,Nt.Z)(v.root,o),ref:n},f,{children:"string"!==typeof a||d?(0,_.jsxs)(t.Fragment,{children:["start"===p?Qi||(Qi=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"})):null,a]}):(0,_.jsx)(Ui,{color:"text.secondary",children:a})}))})})),ns=function(e){var n=e.placeholder,r=(e.data,(0,t.useState)("")),o=(0,a.Z)(r,2),i=o[0],s=o[1],c=R();return(0,_.jsx)("div",{className:"search",children:(0,_.jsx)("div",{className:"searchInputs",children:(0,_.jsx)(qo,{fullWidth:!0,label:n,value:i,variant:"outlined",onChange:function(e){return s(e.target.value)},InputProps:{endAdornment:(0,_.jsx)(ts,{position:"end",children:(0,_.jsx)(Ti,{onClick:function(){c("/dashboard?id=".concat(i))},sx:{p:"10px"},"aria-label":"search",children:(0,_.jsx)(Yi.Z,{fontSize:"large",color:"info"})})})}})})})},rs=function(){return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(U,{}),(0,_.jsx)(Wt,{text:"Monitoring"}),(0,_.jsx)(Wt,{text:"System"}),(0,_.jsx)(ns,{placeholder:"Enter a fishponds ID..."}),(0,_.jsx)(O,{})]})},as=__webpack_require__(5861),os=__webpack_require__(7757),is=__webpack_require__.n(os);function ss(){return ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ss.apply(this,arguments)}function cs(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var us=["onClick","reloadDocument","replace","state","target","to"];function ls(n){var r=n.basename,o=n.children,i=n.window,s=(0,t.useRef)();null==s.current&&(s.current=function(t){void 0===t&&(t={});var n=t.window,r=void 0===n?document.defaultView:n,a=r.history;function o(){var e=r.location,t=e.pathname,n=e.search,o=e.hash,i=a.state||{};return[i.idx,g({pathname:t,search:n,hash:o,state:i.usr||null,key:i.key||"default"})]}var i=null;r.addEventListener(p,(function(){if(i)A.call(i),i=null;else{var t=e.Pop,n=o(),r=n[0],a=n[1];if(A.length){if(null!=r){var s=u-r;s&&(i={action:t,location:a,retry:function(){B(-1*s)}},B(s))}}else w(t)}}));var s=e.Pop,c=o(),u=c[0],v=c[1],b=f(),A=f();function y(e){return"string"===typeof e?e:C(e)}function k(e,t){return void 0===t&&(t=null),g((0,l.Z)({pathname:v.pathname,hash:"",search:""},"string"===typeof e?m(e):e,{state:t,key:I()}))}function Z(e,t){return[{usr:e.state,key:e.key,idx:t},y(e)]}function S(e,t,n){return!A.length||(A.call({action:e,location:t,retry:n}),!1)}function w(e){s=e;var t=o();u=t[0],v=t[1],b.call({action:s,location:v})}function B(e){a.go(e)}null==u&&(u=0,a.replaceState((0,l.Z)({},a.state,{idx:u}),""));var G={get action(){return s},get location(){return v},createHref:y,push:function t(n,o){var i=e.Push,s=k(n,o);if(S(i,s,(function(){t(n,o)}))){var c=Z(s,u+1),l=c[0],g=c[1];try{a.pushState(l,"",g)}catch(d){r.location.assign(g)}w(i)}},replace:function t(n,r){var o=e.Replace,i=k(n,r);if(S(o,i,(function(){t(n,r)}))){var s=Z(i,u),c=s[0],l=s[1];a.replaceState(c,"",l),w(o)}},go:B,back:function(){B(-1)},forward:function(){B(1)},listen:function(e){return b.push(e)},block:function(e){var t=A.push(e);return 1===A.length&&r.addEventListener(d,h),function(){t(),A.length||r.removeEventListener(d,h)}}};return G}({window:i}));var c=s.current,u=(0,t.useState)({action:c.action,location:c.location}),v=(0,a.Z)(u,2),b=v[0],A=v[1];return(0,t.useLayoutEffect)((function(){return c.listen(A)}),[c]),(0,t.createElement)(S,{basename:r,children:o,location:b.location,navigationType:b.action,navigator:c})}var gs=(0,t.forwardRef)((function(e,n){var r=e.onClick,a=e.reloadDocument,o=e.replace,i=void 0!==o&&o,s=e.state,c=e.target,u=e.to,l=cs(e,us),g=B(u),d=function(e,n){var r=void 0===n?{}:n,a=r.target,o=r.replace,i=r.state,s=R(),c=x(),u=V(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!a||"_self"===a)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!o||C(c)===C(u);s(e,{replace:n,state:i})}}),[c,s,u,o,i,a,e])}(u,{replace:i,state:s,target:c});return(0,t.createElement)("a",ss({},l,{href:g,onClick:function(e){r&&r(e),e.defaultPrevented||a||d(e)},ref:n,target:c}))}));var ds=["btn--primary","btn--outline","btn--test"],ps=["btn--medium","btn--large"],hs=function(e){var t=e.children,n=e.type,r=e.onClick,a=e.buttonStyle,o=e.buttonSize,i=e.path,s=ds.includes(a)?a:ds[0],c=ps.includes(o)?o:ps[0];return(0,_.jsx)(gs,{to:i,className:"btn-mobile",children:(0,_.jsx)("button",{className:"btn ".concat(s," ").concat(c),onClick:r,type:n,children:t})})},fs="token",Is=function(e){localStorage.setItem(fs,e)},Cs=function(){return localStorage.getItem(fs)},ms=function(){var e=(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/refresh"),{method:"GET",credentials:"include"}).then((function(e){return e.json()}));case 3:1==(t=e.sent).ok?Is(t.newToken):Is(""),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();var vs=function(){var e=(0,t.useState)(!1),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(!0),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(R(),function(){return o(!1)}),g=x(),d=Cs(),p=(0,t.useState)(!1),h=(0,a.Z)(p,2),f=h[0],I=h[1];(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:d}}).then((function(e){return e.json()}));case 3:e.sent.ok?I(!0):I(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[g.pathname]);var C=function(){window.innerWidth<=960?u(!1):u(!0)};return(0,t.useEffect)((function(){C()}),[]),window.addEventListener("resize",C),(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("nav",{className:"navbar",children:(0,_.jsxs)("div",{className:"navbar-container",children:[(0,_.jsx)(gs,{to:"/",className:"navbar-logo",onClick:l,children:"AquaMon"}),(0,_.jsx)("div",{className:"menu-icon",onClick:function(){return o(!r)},children:(0,_.jsx)("i",{className:r?"fas fa-times":"fas fa-bars"})}),(0,_.jsxs)("ul",{className:r?"nav-menu active":"nav-menu",children:[(0,_.jsx)("li",{className:"nav-item",children:(0,_.jsx)(gs,{to:"/",className:"nav-links",onClick:l,children:"Home"})}),f?(0,_.jsx)("li",{className:"nav-item",children:(0,_.jsx)(gs,{to:"/userlist",className:"nav-links",onClick:l,children:"Accounts"})}):null,f?(0,_.jsx)("li",{className:"nav-item",children:(0,_.jsx)(gs,{to:"/fishpondsmanagement",className:"nav-links",onClick:l,children:"Management"})}):null,(0,_.jsx)("li",{className:"nav-item",children:(0,_.jsx)(gs,{to:"/fishponds",className:"nav-links",onClick:l,children:"Fishponds"})}),f?(0,_.jsx)("li",{children:(0,_.jsx)(gs,{to:"/logout",className:"nav-links-mobile",onClick:l,children:"Logout"})}):(0,_.jsx)("li",{children:(0,_.jsx)(gs,{to:"/login",className:"nav-links-mobile",onClick:l,children:"Login"})})]}),c&&(f?(0,_.jsx)(hs,{path:"/logout",buttonStyle:"btn--outline",children:"Logout"}):(0,_.jsx)(hs,{path:"/login",buttonStyle:"btn--outline",children:"Login"}))]})})})};function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach((function(t){(0,Tt.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ys=function(e,t){return function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}(e.length).map((function(n){return{Header:e[n],accessor:t[n]}}))},ks=function(e){var t=e.data,n=e.header,r=e.accessor,a=e.link,o=R();return 0===t.length?(0,_.jsx)("div",{style:{textAlign:"center"},children:"No record"}):(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("table",{className:"table table-striped table-hover",children:[(0,_.jsx)("thead",{children:(0,_.jsx)("tr",{children:n.map((function(e,t){return(0,_.jsx)("th",{scope:"col",children:e},t)}))})}),(0,_.jsx)("tbody",{children:t.map((function(e,t){return(0,_.jsxs)("tr",{onClick:function(){return o("".concat(a[0],"?id=").concat(e[a[1]]))},children:[(0,_.jsx)("th",{scope:"row",children:t}),r.map((function(t,n){return(0,_.jsx)("td",{children:e[t]?e[t]:e[t.split(".")[0]][t.split(".")[1]]},n)}))]},t)}))})]})})};var Zs=function(){var e=(0,t.useState)([]),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)([]),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(["periodId","updatedAt","fishtype.fishtype"]),g=(0,a.Z)(l,2),d=g[0],p=(g[1],(0,t.useState)(["Period ID","Last Update","Fish Type"])),h=(0,a.Z)(p,2),f=h[0],I=(h[1],(0,t.useState)(ys(f,d))),C=(0,a.Z)(I,2),m=(C[0],C[1],(0,t.useState)(["/dashboard","periodId"])),v=(0,a.Z)(m,2),b=v[0];return v[1],R(),(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/period/query"));case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t=[];case 13:u(t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})}))),o(t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})));case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),(0,_.jsxs)("div",{children:[(0,_.jsx)("input",{className:"search-box",placeholder:"Search...",onInput:function(e){var t=e.target.value.toLowerCase(),n=c.filter((function(e){return"".concat(e.periodId," ").concat(e.updatedAt," ").concat(e.fishtype.fishtype).toLowerCase().includes(t)}));o(n)}}),(0,_.jsx)(ks,{data:r,header:f,accessor:d,link:b}),(0,_.jsx)("br",{})]})},Ss=__webpack_require__(4245);var ws=function(e){return(0,_.jsxs)("div",{className:"card",children:[(0,_.jsx)("img",{src:e.src,className:"card__img"}),(0,_.jsxs)("div",{className:"card__body",children:[(0,_.jsx)("h2",{className:"card__title",children:e.title}),(0,_.jsx)("p",{className:"card__description",children:e.description}),(0,_.jsx)("h3",{className:"card__price",children:e.price}),(0,_.jsxs)("button",{onClick:e.handleClick,className:"card__btn",children:[(0,_.jsx)("i",{className:"fas fa-qrcode"}),"  QRCode"]})]})]})},Bs=function(e){var t=e.location;return(0,_.jsx)("div",{className:"location",children:(0,_.jsxs)("p",{children:[t[0].value,t[0].value>t[1].value?(0,_.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):(0,_.jsx)("i",{className:"fas fa-arrow-down",style:{color:"red"}})]})})},Gs=function(e){var t=e.updatedAt;return(0,_.jsx)("div",{className:"phoneNumber",children:(0,_.jsxs)("p",{children:["last check ",t]})})},xs=function(e){var t=e.userData,n=R(),r=new Date;return(0,_.jsxs)("div",{className:"box",onClick:function(){n("/sensorDetails?sensortype=".concat(t[0].sensortype.sensortype,"&periodid=").concat(t[0].period.periodId))},children:[(0,_.jsx)("div",{className:"box__title",children:t[0].sensortype.sensortype}),(0,_.jsxs)("div",{className:"box__body",children:[(0,_.jsx)(Bs,{location:t}),(0,_.jsx)(Gs,{updatedAt:r.toLocaleDateString()+" - "+r.toLocaleTimeString()}),(0,_.jsx)("div",{className:"box__image",children:(0,_.jsx)("img",{src:"/sensor.jpg",style:{width:"10vh",height:"10vh"}})})]})]})},Rs=function(e){e.fishtankId;var n=(0,t.useState)([]),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(!0),c=(0,a.Z)(s,2),u=c[0],l=c[1];return(0,t.useEffect)((function(){var e=function(){var e=(0,as.Z)(is().mark((function e(){var t,n,r,a,o,s,c,u;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=pH%20value").then((function(e){return e.json()}));case 3:return(t=e.sent).ok&&t.data.length>1?(t.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),t.data=[t.data[0],t.data[1]]):t.ok=0,e.next=7,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=Water%20temperature").then((function(e){return e.json()}));case 7:return(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok=0,e.next=11,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=Oxidation-reduction%20potential(ORP)").then((function(e){return e.json()}));case 11:return(r=e.sent).ok&&r.data.length>1?(r.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),r.data=[r.data[0],r.data[1]]):r.ok=0,e.next=15,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=Dissolved%20Oxygen").then((function(e){return e.json()}));case 15:return(a=e.sent).ok&&a.data.length>1?(a.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),a.data=[a.data[0],a.data[1]]):a.ok=0,e.next=19,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=Total%20Dissolved%20Solids").then((function(e){return e.json()}));case 19:return(o=e.sent).ok&&o.data.length>1?(o.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),o.data=[a.data[0],a.data[1]]):o.ok=0,e.next=23,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=Ammonium%20concentration").then((function(e){return e.json()}));case 23:return(s=e.sent).ok&s.data.length>1?(s.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),s.data=[s.data[0],s.data[1]]):s.ok=0,e.next=27,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=Nitrates%20concentration").then((function(e){return e.json()}));case 27:return(c=e.sent).ok&&c.data.length>1?(c.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),c.data=[c.data[0],c.data[1]]):c.ok=0,e.next=31,fetch("http://localhost:5000/api/sensorrecord/query?periodid=FP-001-001&sensortype=Chlorophyll").then((function(e){return e.json()}));case 31:(u=e.sent).ok&&u.data.length>1?(u.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),u.data=[u.data[0],u.data[1]]):u.ok=0,i([t.ok?t.data:null,n.ok?n.data:null,r.ok?r.data:null,a.ok?a.data:null,o.ok?o.data:null,s.ok?s.data:null,c.ok?c.data:null,u.ok?u.data:null]),l(!1),e.next=40;break;case 37:e.prev=37,e.t0=e.catch(0),l(!1);case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(){return e.apply(this,arguments)}}(),t=setInterval((function(){e()}),6e4);return function(){return clearInterval(t)}}),[]),(0,_.jsxs)("div",{className:"DashboardBox",children:[(0,_.jsx)("h1",{children:"Sensor"}),(0,_.jsxs)("div",{className:"cards-container",children:[u?(0,_.jsx)("div",{children:"Loading..."}):0===o.length?(0,_.jsx)("div",{children:"empty"}):null,o.map((function(e,t){return null!=e?(0,_.jsx)(xs,{userData:e},t):null}))]})]})},Ws=function(){return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{children:"404"}),(0,_.jsx)("div",{children:"Not Found"}),(0,_.jsx)(gs,{to:"/",children:"Back to Home page "})]})},Vs=function(){var e=x().search,n=Ss.parse(e).id,r=(0,t.useState)(),o=(0,a.Z)(r,2),i=o[0],s=o[1],c=(0,t.useState)(),l=(0,a.Z)(c,2),g=l[0],d=l[1],p=(0,t.useState)(n),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,t.useState)({display:"none"}),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=(0,t.useState)(!0),y=(0,a.Z)(A,2),k=y[0],Z=y[1];(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,r;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/period/query?periodid=").concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:t=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Z(!0),t=[];case 13:t.ok?(s(t.data[0].fishtype.fishtype),d(t.data[0].updatedAt.split("T")[0]),Z(!1)):Z(!0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.toDataURL(n);case 3:t=e.sent,I(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);return k?(0,_.jsx)(Ws,{}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"wrapper",children:[k?null:(0,_.jsx)(ws,{src:"jadePerch.jpg",title:n,description:i,price:g,handleClick:function(){"none"===v.display?b({display:"block"}):b({display:"none"})}}),(0,_.jsx)("div",{className:"qrcode-contaniner",style:v,children:f?(0,_.jsx)("a",{href:f,download:!0,children:(0,_.jsx)("img",{src:f,alt:"qrcode"})}):null})]}),k?null:(0,_.jsx)("div",{className:"cards-container",children:(0,_.jsx)(Rs,{fishtankId:n})})]})},Ns=__webpack_require__(6048),Xs=__webpack_require__.n(Ns),Js=function(){R();return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{children:"Login Required"}),(0,_.jsx)(gs,{to:"/login",replace:!0,children:"Go to Login Page"})]})},Fs=function(){var e=x(),n=(0,t.useState)(10),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(["#","username","createdAt","isAdmin"]),c=(0,a.Z)(s,2),u=c[0],l=(c[1],(0,t.useState)(["username","createdAt","Admin"])),g=(0,a.Z)(l,2),d=g[0],p=(g[1],(0,t.useState)([])),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,t.useState)([]),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=(0,t.useState)([]),y=(0,a.Z)(A,2),k=y[0],Z=y[1],S=(0,t.useState)(["".concat(e.pathname,"/edit"),"_id"]),w=(0,a.Z)(S,2),B=w[0],G=(w[1],(0,t.useState)(!0)),W=(0,a.Z)(G,2),V=W[0],N=W[1],X=R(),J=Cs();(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n,r;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:J}}).then((function(e){return e.json()}));case 3:return n=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/user"),{method:"GET",headers:{token:"".concat(J)}}).then((function(e){return e.json()}));case 6:(r=e.sent).ok&&n.ok&&((t=r).data=t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0],createdAt:e.updatedAt.split("T")[0]})})),t.data.map((function(e){e.Admin=e.isAdmin?"Yes":"No"})),I(t.data),b(t.data),N(!1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t=[];case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),(0,t.useEffect)((function(){i(Math.ceil(v.length/10)),Z(v.slice(0,10))}),[v]);return V?(0,_.jsx)(Js,{}):(0,_.jsxs)("div",{className:"container",children:[(0,_.jsx)(Xs(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:o,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(v.length),console.log(e.selected),Z(v.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,_.jsxs)("div",{className:"searchbar-container",children:[(0,_.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(e.pathname,"/add"))},children:"Add"}),"  ",(0,_.jsx)("input",{className:"searchbar",placeholder:"search...",onChange:function(e){var t=e.target.value.toLowerCase(),n=f.filter((function(e){return"".concat(d.map((function(t,n){return e[t]+""}))).toLowerCase().includes(t)}));b(n)}})]}),(0,_.jsx)(ks,{accessor:d,header:u,data:k,link:B})]})};function Es(e){return(0,Cn.Z)("MuiFormControlLabel",e)}var Ts=(0,mn.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),Ys=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],Hs=(0,Ft.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,Tt.Z)({},"& .".concat(Ts.label),t.label),t.root,t["labelPlacement".concat((0,tn.Z)(n.labelPlacement))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)((0,Tt.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(Ts.disabled),{cursor:"default"}),"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,Tt.Z)({},"& .".concat(Ts.label),(0,Tt.Z)({},"&.".concat(Ts.disabled),{color:t.palette.text.disabled})))})),Ms=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiFormControlLabel"}),a=r.className,o=r.componentsProps,i=void 0===o?{}:o,s=r.control,c=r.disabled,u=r.disableTypography,g=r.label,d=r.labelPlacement,p=void 0===d?"end":d,h=(0,Vt.Z)(r,Ys),f=en(),I=c;"undefined"===typeof I&&"undefined"!==typeof s.props.disabled&&(I=s.props.disabled),"undefined"===typeof I&&f&&(I=f.disabled);var C={disabled:I};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof s.props[e]&&"undefined"!==typeof r[e]&&(C[e]=r[e])}));var m=qt({props:r,muiFormControl:f,states:["error"]}),v=(0,l.Z)({},r,{disabled:I,labelPlacement:p,error:m.error}),b=function(e){var t=e.classes,n=e.disabled,r=e.labelPlacement,a=e.error,o={root:["root",n&&"disabled","labelPlacement".concat((0,tn.Z)(r)),a&&"error"],label:["label",n&&"disabled"]};return(0,Xt.Z)(o,Es,t)}(v),A=g;return null==A||A.type===Ui||u||(A=(0,_.jsx)(Ui,(0,l.Z)({component:"span",className:b.label},i.typography,{children:A}))),(0,_.jsxs)(Hs,(0,l.Z)({className:(0,Nt.Z)(b.root,a),ownerState:v,ref:n},h,{children:[t.cloneElement(s,C),A]}))})),Ds=Ms;function Ks(e){return(0,Cn.Z)("PrivateSwitchBase",e)}(0,mn.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var zs=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ls=(0,Ft.ZP)(Vi)((function(e){var t=e.ownerState;return(0,l.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),Ps=(0,Ft.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),_s=t.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,o=e.checkedIcon,i=e.className,s=e.defaultChecked,c=e.disabled,u=e.disableFocusRipple,g=void 0!==u&&u,d=e.edge,p=void 0!==d&&d,h=e.icon,f=e.id,I=e.inputProps,C=e.inputRef,m=e.name,v=e.onBlur,b=e.onChange,A=e.onFocus,y=e.readOnly,k=e.required,Z=e.tabIndex,S=e.type,w=e.value,B=(0,Vt.Z)(e,zs),G=(0,Zo.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),x=(0,a.Z)(G,2),R=x[0],W=x[1],V=en(),N=c;V&&"undefined"===typeof N&&(N=V.disabled);var X="checkbox"===S||"radio"===S,J=(0,l.Z)({},e,{checked:R,disabled:N,disableFocusRipple:g,edge:p}),F=function(e){var t=e.classes,n=e.checked,r=e.disabled,a=e.edge,o={root:["root",n&&"checked",r&&"disabled",a&&"edge".concat((0,tn.Z)(a))],input:["input"]};return(0,Xt.Z)(o,Ks,t)}(J);return(0,_.jsxs)(Ls,(0,l.Z)({component:"span",className:(0,Nt.Z)(F.root,i),centerRipple:!0,focusRipple:!g,disabled:N,tabIndex:null,role:void 0,onFocus:function(e){A&&A(e),V&&V.onFocus&&V.onFocus(e)},onBlur:function(e){v&&v(e),V&&V.onBlur&&V.onBlur(e)},ownerState:J,ref:t},B,{children:[(0,_.jsx)(Ps,(0,l.Z)({autoFocus:n,checked:r,defaultChecked:s,className:F.input,disabled:N,id:X&&f,name:m,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;W(t),b&&b(e,t)}},readOnly:y,ref:C,required:k,ownerState:J,tabIndex:Z,type:S},"checkbox"===S&&void 0===w?{}:{value:w},I)),R?o:h]}))})),Os=_s;function Us(e){return(0,Cn.Z)("MuiSwitch",e)}var js=(0,mn.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Qs=["className","color","edge","size","sx"],qs=(0,Ft.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat((0,tn.Z)(n.edge))],t["size".concat((0,tn.Z)(n.size))]]}})((function(e){var t,n=e.ownerState;return(0,l.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(t={width:40,height:24,padding:7},(0,Tt.Z)(t,"& .".concat(js.thumb),{width:16,height:16}),(0,Tt.Z)(t,"& .".concat(js.switchBase),(0,Tt.Z)({padding:4},"&.".concat(js.checked),{transform:"translateX(16px)"})),t))})),$s=(0,Ft.ZP)(Os,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,(0,Tt.Z)({},"& .".concat(js.input),t.input),"default"!==n.color&&t["color".concat((0,tn.Z)(n.color))]]}})((function(e){var t,n=e.theme;return t={position:"absolute",top:0,left:0,zIndex:1,color:"light"===n.palette.mode?n.palette.common.white:n.palette.grey[300],transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},(0,Tt.Z)(t,"&.".concat(js.checked),{transform:"translateX(20px)"}),(0,Tt.Z)(t,"&.".concat(js.disabled),{color:"light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600]}),(0,Tt.Z)(t,"&.".concat(js.checked," + .").concat(js.track),{opacity:.5}),(0,Tt.Z)(t,"&.".concat(js.disabled," + .").concat(js.track),{opacity:"light"===n.palette.mode?.12:.2}),(0,Tt.Z)(t,"& .".concat(js.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({"&:hover":{backgroundColor:(0,Yr.Fq)(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(t={},(0,Tt.Z)(t,"&.".concat(js.checked),(0,Tt.Z)({color:n.palette[r.color].main,"&:hover":{backgroundColor:(0,Yr.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(js.disabled),{color:"light"===n.palette.mode?(0,Yr.$n)(n.palette[r.color].main,.62):(0,Yr._j)(n.palette[r.color].main,.55)})),(0,Tt.Z)(t,"&.".concat(js.checked," + .").concat(js.track),{backgroundColor:n.palette[r.color].main}),t))})),ec=(0,Ft.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:"light"===t.palette.mode?t.palette.common.black:t.palette.common.white,opacity:"light"===t.palette.mode?.38:.3}})),tc=(0,Ft.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){return{boxShadow:e.theme.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),nc=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiSwitch"}),r=n.className,a=n.color,o=void 0===a?"primary":a,i=n.edge,s=void 0!==i&&i,c=n.size,u=void 0===c?"medium":c,g=n.sx,d=(0,Vt.Z)(n,Qs),p=(0,l.Z)({},n,{color:o,edge:s,size:u}),h=function(e){var t=e.classes,n=e.edge,r=e.size,a=e.color,o=e.checked,i=e.disabled,s={root:["root",n&&"edge".concat((0,tn.Z)(n)),"size".concat((0,tn.Z)(r))],switchBase:["switchBase","color".concat((0,tn.Z)(a)),o&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=(0,Xt.Z)(s,Us,t);return(0,l.Z)({},t,c)}(p),f=(0,_.jsx)(tc,{className:h.thumb,ownerState:p});return(0,_.jsxs)(qs,{className:(0,Nt.Z)(h.root,r),sx:g,ownerState:p,children:[(0,_.jsx)($s,(0,l.Z)({type:"checkbox",icon:f,checkedIcon:f,ref:t,ownerState:p},d,{classes:(0,l.Z)({},h,{root:h.switchBase})})),(0,_.jsx)(ec,{className:h.track,ownerState:p})]})})),rc=nc,ac=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(""),f=(0,a.Z)(h,2),I=f[0],C=f[1],m=(0,t.useState)(!1),v=(0,a.Z)(m,2),b=v[0],A=v[1],y=(0,t.useState)(""),k=(0,a.Z)(y,2),Z=k[0],S=k[1],w=Cs();return(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:w}}).then((function(e){return e.json()}));case 3:e.sent.ok&&o(!1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),(0,t.useEffect)((function(){console.log(b)}),[b]),(0,t.useEffect)((function(){console.log(d)}),[d]),r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsxs)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),console.log(d),console.log(c,d,I,b),""!=c&&""!=d&&""!=I&&""!=b?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/register"),{method:"POST",headers:{token:"".concat(w),"Content-type":"application/json"},body:JSON.stringify({username:c,password:d,email:I,isAdmin:b})}).then((function(e){return e.json()}));case 3:t=e.sent,S(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:[(0,_.jsx)("div",{}),(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("div",{}),(0,_.jsx)("h2",{children:"Add User"}),Z,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"username",value:c,label:"Username",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"password",value:d,type:"password",label:"Password",variant:"outlined",onChange:function(e){return p(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"email",value:I,type:"email",label:"E-mail",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(Ds,{control:(0,_.jsx)(rc,{checked:b,onChange:function(e){return A(!b)}}),label:"Admin"})}),(0,_.jsx)("div",{className:"addbtn-container",children:(0,_.jsx)("input",{className:"add",type:"submit",value:"Add"})})]})]})})},oc=__webpack_require__(9704),ic=__webpack_require__.n(oc),sc=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(""),f=(0,a.Z)(h,2),I=f[0],C=f[1],m=(0,t.useState)(!1),v=(0,a.Z)(m,2),b=v[0],A=v[1],y=(0,t.useState)(""),k=(0,a.Z)(y,2),Z=k[0],S=k[1],w=(0,t.useState)({}),B=(0,a.Z)(w,2),G=(B[0],B[1]),R=x().search,W=Ss.parse(R).id,V=Cs();(0,t.useEffect)((function(){null!=W&&(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:V}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/user/query?_id=").concat(W),{headers:{token:"".concat(V)}}).then((function(e){return e.json()}));case 6:n=e.sent,t.ok&&n.ok&&(u(n.data[0].username),p(ic().AES.decrypt(n.data[0].password,"FishFarming").toString(ic().enc.Utf8)),C(n.data[0].email),A(n.data[0].isAdmin),G(n.data[0]),o(!1)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);return r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsxs)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=d&&""!=I&&""!=b?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/user/").concat(W),{method:"PUT",headers:{token:"".concat(V),"Content-type":"application/json"},body:JSON.stringify({username:c,password:d,email:I,isAdmin:b})}).then((function(e){return e.json()}));case 3:t=e.sent,S(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:[(0,_.jsx)("div",{}),(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("div",{}),(0,_.jsx)("h2",{children:"Edit User"}),Z,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"username",value:c,label:"Username",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"password",value:d,type:"password",label:"Password",variant:"outlined",onChange:function(e){return p(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"email",value:I,type:"email",label:"E-mail",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(Ds,{control:(0,_.jsx)(rc,{checked:b,onChange:function(e){return A(!b)}}),label:"Admin"})}),(0,_.jsxs)("div",{className:"addbtn-container",children:[(0,_.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,_.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/user/").concat(W),{method:"DELETE",headers:{token:"".concat(V),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,S(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})]})})},cc=function(){return(0,_.jsx)("div",{className:"main-footer",children:(0,_.jsx)("div",{className:"footer-container",children:(0,_.jsxs)("div",{className:"footer-row",children:[(0,_.jsxs)("div",{className:"footer-col",children:[(0,_.jsx)("h4",{children:"company"}),(0,_.jsxs)("ul",{className:"list-unstyled",children:[(0,_.jsx)("li",{children:"about us"}),(0,_.jsx)("li",{children:"our services"}),(0,_.jsx)("li",{children:"privacy policy"}),(0,_.jsx)("li",{})]})]}),(0,_.jsxs)("div",{className:"footer-col",children:[(0,_.jsx)("h4",{children:"get help"}),(0,_.jsxs)("ul",{className:"list-unstyled",children:[(0,_.jsx)("li",{children:"FAQ"}),(0,_.jsx)("li",{children:"Shipping"}),(0,_.jsx)("li",{children:"returns"}),(0,_.jsx)("li",{children:"payment options"})]})]}),(0,_.jsxs)("div",{className:"footer-col",children:[(0,_.jsx)("h4",{children:"online shop"}),(0,_.jsxs)("ul",{className:"list-unstyled",children:[(0,_.jsx)("li",{children:"watch"}),(0,_.jsx)("li",{children:"bag"}),(0,_.jsx)("li",{children:"shoes"}),(0,_.jsx)("li",{children:"dress"})]})]}),(0,_.jsxs)("div",{className:"footer-col",children:[(0,_.jsx)("h4",{children:"follow us"}),(0,_.jsxs)("ul",{className:"social-links",children:[(0,_.jsx)("li",{children:(0,_.jsx)("i",{className:"fab fa-facebook-f"})}),(0,_.jsx)("li",{children:(0,_.jsx)("i",{className:"fab fa-twitter"})}),(0,_.jsx)("li",{children:(0,_.jsx)("i",{className:"fab fa-instagram"})}),(0,_.jsx)("li",{children:(0,_.jsx)("i",{className:"fab fa-linkedin-in"})})]})]})]})})})},uc=(__webpack_require__(4115),__webpack_require__(2007)),lc=__webpack_require__.n(uc);function gc(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dc(e){var t=e,n=e,r=e;function a(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==n(t,t))return o;do{var i=a+o>>>1;r(e[i],t)<0?a=i+1:o=i}while(a<o)}return a}return 2!==e.length&&(t=function(t,n){return e(t)-n},n=gc,r=function(t,n){return gc(e(t),n)}),{left:a,center:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=a(e,n,r,o-1);return i>r&&t(e[i-1],n)>-t(e[i],n)?i-1:i},right:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==n(t,t))return o;do{var i=a+o>>>1;r(e[i],t)<=0?a=i+1:o=i}while(a<o)}return a}}}var pc=Math.sqrt(50),hc=Math.sqrt(10),fc=Math.sqrt(2);function Ic(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=pc?a*=10:o>=hc?a*=5:o>=fc&&(a*=2),t<e?-a:a}var Cc=1e3,mc=6e4,vc=36e5,bc=864e5,Ac=6048e5,yc=2592e6,kc=31536e6,Zc=new Date,Sc=new Date;function wc(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,o){var i,s=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(i=new Date(+n)),t(n,o),e(n)}while(i<n&&n<r);return s},a.filter=function(n){return wc((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Zc.setTime(+t),Sc.setTime(+r),e(Zc),e(Sc),Math.floor(n(Zc,Sc))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var Bc=wc((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Bc.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?wc((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Bc:null};var Gc=Bc,xc=(Bc.range,wc((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Cc)}),(function(e,t){return(t-e)/Cc}),(function(e){return e.getUTCSeconds()}))),Rc=xc,Wc=(xc.range,wc((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cc)}),(function(e,t){e.setTime(+e+t*mc)}),(function(e,t){return(t-e)/mc}),(function(e){return e.getMinutes()}))),Vc=Wc,Nc=(Wc.range,wc((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cc-e.getMinutes()*mc)}),(function(e,t){e.setTime(+e+t*vc)}),(function(e,t){return(t-e)/vc}),(function(e){return e.getHours()}))),Xc=Nc,Jc=(Nc.range,wc((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mc)/bc}),(function(e){return e.getDate()-1}))),Fc=Jc;Jc.range;function Ec(e){return wc((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mc)/Ac}))}var Tc=Ec(0),Yc=Ec(1),Hc=Ec(2),Mc=Ec(3),Dc=Ec(4),Kc=Ec(5),zc=Ec(6),Lc=(Tc.range,Yc.range,Hc.range,Mc.range,Dc.range,Kc.range,zc.range,wc((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Pc=Lc,_c=(Lc.range,wc((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));_c.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wc((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Oc=_c,Uc=(_c.range,wc((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*mc)}),(function(e,t){return(t-e)/mc}),(function(e){return e.getUTCMinutes()}))),jc=Uc,Qc=(Uc.range,wc((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*vc)}),(function(e,t){return(t-e)/vc}),(function(e){return e.getUTCHours()}))),qc=Qc,$c=(Qc.range,wc((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/bc}),(function(e){return e.getUTCDate()-1}))),eu=$c;$c.range;function tu(e){return wc((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Ac}))}var nu=tu(0),ru=tu(1),au=tu(2),ou=tu(3),iu=tu(4),su=tu(5),cu=tu(6),uu=(nu.range,ru.range,au.range,ou.range,iu.range,su.range,cu.range,wc((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),lu=uu,gu=(uu.range,wc((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));gu.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wc((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var du=gu;gu.range;function pu(e,t,n,r,o,i){var s=[[Rc,1,Cc],[Rc,5,5e3],[Rc,15,15e3],[Rc,30,3e4],[i,1,mc],[i,5,3e5],[i,15,9e5],[i,30,18e5],[o,1,vc],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,bc],[r,2,1728e5],[n,1,Ac],[t,1,yc],[t,3,7776e6],[e,1,kc]];function c(t,n,r){var o=Math.abs(n-t)/r,i=dc((function(e){return(0,a.Z)(e,3)[2]})).right(s,o);if(i===s.length)return e.every(Ic(t/kc,n/kc,r));if(0===i)return Gc.every(Math.max(Ic(t,n,r),1));var c=(0,a.Z)(s[o/s[i-1][2]<s[i][2]/o?i-1:i],2),u=c[0],l=c[1];return u.every(l)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var o=n&&"function"===typeof n.range?n:c(e,t,n),i=o?o.range(e,+t+1):[];return r?i.reverse():i},c]}var hu=pu(du,lu,nu,eu,qc,jc),fu=(0,a.Z)(hu,2),Iu=(fu[0],fu[1],pu(Oc,Pc,Tc,Fc,Xc,Vc)),Cu=(0,a.Z)(Iu,2),mu=Cu[0],vu=Cu[1];function bu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Au(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yu(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var ku,Zu,Su={"-":"",_:" ",0:"0"},wu=/^\s*\d+/,Bu=/^%/,Gu=/[\\^$*+?|[\]().{}]/g;function xu(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function Ru(e){return e.replace(Gu,"\\$&")}function Wu(e){return new RegExp("^(?:"+e.map(Ru).join("|")+")","i")}function Vu(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function Nu(e,t,n){var r=wu.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Xu(e,t,n){var r=wu.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ju(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Fu(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Eu(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Tu(e,t,n){var r=wu.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yu(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hu(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Mu(e,t,n){var r=wu.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Du(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ku(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function zu(e,t,n){var r=wu.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Lu(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Pu(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _u(e,t,n){var r=wu.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Ou(e,t,n){var r=wu.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Uu(e,t,n){var r=wu.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ju(e,t,n){var r=Bu.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Qu(e,t,n){var r=wu.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function qu(e,t,n){var r=wu.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function $u(e,t){return xu(e.getDate(),t,2)}function el(e,t){return xu(e.getHours(),t,2)}function tl(e,t){return xu(e.getHours()%12||12,t,2)}function nl(e,t){return xu(1+Fc.count(Oc(e),e),t,3)}function rl(e,t){return xu(e.getMilliseconds(),t,3)}function al(e,t){return rl(e,t)+"000"}function ol(e,t){return xu(e.getMonth()+1,t,2)}function il(e,t){return xu(e.getMinutes(),t,2)}function sl(e,t){return xu(e.getSeconds(),t,2)}function cl(e){var t=e.getDay();return 0===t?7:t}function ul(e,t){return xu(Tc.count(Oc(e)-1,e),t,2)}function ll(e){var t=e.getDay();return t>=4||0===t?Dc(e):Dc.ceil(e)}function gl(e,t){return e=ll(e),xu(Dc.count(Oc(e),e)+(4===Oc(e).getDay()),t,2)}function dl(e){return e.getDay()}function pl(e,t){return xu(Yc.count(Oc(e)-1,e),t,2)}function hl(e,t){return xu(e.getFullYear()%100,t,2)}function fl(e,t){return xu((e=ll(e)).getFullYear()%100,t,2)}function Il(e,t){return xu(e.getFullYear()%1e4,t,4)}function Cl(e,t){var n=e.getDay();return xu((e=n>=4||0===n?Dc(e):Dc.ceil(e)).getFullYear()%1e4,t,4)}function ml(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xu(t/60|0,"0",2)+xu(t%60,"0",2)}function vl(e,t){return xu(e.getUTCDate(),t,2)}function bl(e,t){return xu(e.getUTCHours(),t,2)}function Al(e,t){return xu(e.getUTCHours()%12||12,t,2)}function yl(e,t){return xu(1+eu.count(du(e),e),t,3)}function kl(e,t){return xu(e.getUTCMilliseconds(),t,3)}function Zl(e,t){return kl(e,t)+"000"}function Sl(e,t){return xu(e.getUTCMonth()+1,t,2)}function wl(e,t){return xu(e.getUTCMinutes(),t,2)}function Bl(e,t){return xu(e.getUTCSeconds(),t,2)}function Gl(e){var t=e.getUTCDay();return 0===t?7:t}function xl(e,t){return xu(nu.count(du(e)-1,e),t,2)}function Rl(e){var t=e.getUTCDay();return t>=4||0===t?iu(e):iu.ceil(e)}function Wl(e,t){return e=Rl(e),xu(iu.count(du(e),e)+(4===du(e).getUTCDay()),t,2)}function Vl(e){return e.getUTCDay()}function Nl(e,t){return xu(ru.count(du(e)-1,e),t,2)}function Xl(e,t){return xu(e.getUTCFullYear()%100,t,2)}function Jl(e,t){return xu((e=Rl(e)).getUTCFullYear()%100,t,2)}function Fl(e,t){return xu(e.getUTCFullYear()%1e4,t,4)}function El(e,t){var n=e.getUTCDay();return xu((e=n>=4||0===n?iu(e):iu.ceil(e)).getUTCFullYear()%1e4,t,4)}function Tl(){return"+0000"}function Yl(){return"%"}function Hl(e){return+e}function Ml(e){return Math.floor(+e/1e3)}ku=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,u=Wu(a),l=Vu(a),g=Wu(o),d=Vu(o),p=Wu(i),h=Vu(i),f=Wu(s),I=Vu(s),C=Wu(c),m=Vu(c),v={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:$u,e:$u,f:al,g:fl,G:Cl,H:el,I:tl,j:nl,L:rl,m:ol,M:il,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Hl,s:Ml,S:sl,u:cl,U:ul,V:gl,w:dl,W:pl,x:null,X:null,y:hl,Y:Il,Z:ml,"%":Yl},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:vl,e:vl,f:Zl,g:Jl,G:El,H:bl,I:Al,j:yl,L:kl,m:Sl,M:wl,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Hl,s:Ml,S:Bl,u:Gl,U:xl,V:Wl,w:Vl,W:Nl,x:null,X:null,y:Xl,Y:Fl,Z:Tl,"%":Yl},A={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=C.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=I.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return Z(e,t,n,r)},d:Ku,e:Ku,f:Uu,g:Yu,G:Tu,H:Lu,I:Lu,j:zu,L:Ou,m:Du,M:Pu,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:Mu,Q:Qu,s:qu,S:_u,u:Xu,U:Ju,V:Fu,w:Nu,W:Eu,x:function(e,t,r){return Z(e,n,t,r)},X:function(e,t,n){return Z(e,r,t,n)},y:Yu,Y:Tu,Z:Hu,"%":ju};function y(e,t){return function(n){var r,a,o,i=[],s=-1,c=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(i.push(e.slice(c,s)),null!=(a=Su[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),c=s+1);return i.push(e.slice(c,s)),i.join("")}}function k(e,t){return function(n){var r,a,o=yu(1900,void 0,1);if(Z(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(r=Au(yu(o.y,0,1))).getUTCDay(),r=a>4||0===a?ru.ceil(r):ru(r),r=eu.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(a=(r=bu(yu(o.y,0,1))).getDay(),r=a>4||0===a?Yc.ceil(r):Yc(r),r=Fc.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Au(yu(o.y,0,1)).getUTCDay():bu(yu(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Au(o)):bu(o)}}function Z(e,t,n,r){for(var a,o,i=0,s=t.length,c=n.length;i<s;){if(r>=c)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=A[a in Su?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return v.x=y(n,v),v.X=y(r,v),v.c=y(t,v),b.x=y(n,b),b.X=y(r,b),b.c=y(t,b),{format:function(e){var t=y(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=y(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Zu=ku.format,ku.parse,ku.utcFormat,ku.utcParse;__webpack_require__(7762);var Dl=dc(gc),Kl=Dl.right,zl=(Dl.left,dc((function(e){return null===e?NaN:+e})).center,Kl);function Ll(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _l(){}var Ol=.7,Ul=1/Ol,jl="\\s*([+-]?\\d+)\\s*",Ql="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ql="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$l=/^#([0-9a-f]{3,8})$/,eg=new RegExp("^rgb\\("+[jl,jl,jl]+"\\)$"),tg=new RegExp("^rgb\\("+[ql,ql,ql]+"\\)$"),ng=new RegExp("^rgba\\("+[jl,jl,jl,Ql]+"\\)$"),rg=new RegExp("^rgba\\("+[ql,ql,ql,Ql]+"\\)$"),ag=new RegExp("^hsl\\("+[Ql,ql,ql]+"\\)$"),og=new RegExp("^hsla\\("+[Ql,ql,ql,Ql]+"\\)$"),ig={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function sg(){return this.rgb().formatHex()}function cg(){return this.rgb().formatRgb()}function ug(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$l.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?lg(t):3===n?new hg(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?gg(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?gg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=eg.exec(e))?new hg(t[1],t[2],t[3],1):(t=tg.exec(e))?new hg(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ng.exec(e))?gg(t[1],t[2],t[3],t[4]):(t=rg.exec(e))?gg(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ag.exec(e))?mg(t[1],t[2]/100,t[3]/100,1):(t=og.exec(e))?mg(t[1],t[2]/100,t[3]/100,t[4]):ig.hasOwnProperty(e)?lg(ig[e]):"transparent"===e?new hg(NaN,NaN,NaN,0):null}function lg(e){return new hg(e>>16&255,e>>8&255,255&e,1)}function gg(e,t,n,r){return r<=0&&(e=t=n=NaN),new hg(e,t,n,r)}function dg(e){return e instanceof _l||(e=ug(e)),e?new hg((e=e.rgb()).r,e.g,e.b,e.opacity):new hg}function pg(e,t,n,r){return 1===arguments.length?dg(e):new hg(e,t,n,null==r?1:r)}function hg(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function fg(){return"#"+Cg(this.r)+Cg(this.g)+Cg(this.b)}function Ig(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Cg(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function mg(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bg(e,t,n,r)}function vg(e){if(e instanceof bg)return new bg(e.h,e.s,e.l,e.opacity);if(e instanceof _l||(e=ug(e)),!e)return new bg;if(e instanceof bg)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,c=(o+a)/2;return s?(i=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=c<.5?o+a:2-o-a,i*=60):s=c>0&&c<1?0:i,new bg(i,s,c,e.opacity)}function bg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ag(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function yg(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}Ll(_l,ug,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:sg,formatHex:sg,formatHsl:function(){return vg(this).formatHsl()},formatRgb:cg,toString:cg}),Ll(hg,pg,Pl(_l,{brighter:function(e){return e=null==e?Ul:Math.pow(Ul,e),new hg(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Ol:Math.pow(Ol,e),new hg(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fg,formatHex:fg,formatRgb:Ig,toString:Ig})),Ll(bg,(function(e,t,n,r){return 1===arguments.length?vg(e):new bg(e,t,n,null==r?1:r)}),Pl(_l,{brighter:function(e){return e=null==e?Ul:Math.pow(Ul,e),new bg(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ol:Math.pow(Ol,e),new bg(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new hg(Ag(e>=240?e-240:e+120,a,r),Ag(e,a,r),Ag(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var kg=function(e){return function(){return e}};function Zg(e,t){return function(n){return e+n*t}}function Sg(e){return 1===(e=+e)?wg:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):kg(isNaN(t)?n:t)}}function wg(e,t){var n=t-e;return n?Zg(e,n):kg(isNaN(e)?t:e)}var Bg=function e(t){var n=Sg(t);function r(e,t){var r=n((e=pg(e)).r,(t=pg(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=wg(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Gg(e){return function(t){var n,r,a=t.length,o=new Array(a),i=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=pg(t[n]),o[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return o=e(o),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=s(e),r+""}}}Gg((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,s=r<t-1?e[r+2]:2*o-a;return yg((n-r/t)*t,i,a,o,s)}})),Gg((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return yg((n-r/t)*t,a,o,i,s)}}));function xg(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=Eg(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function Rg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Wg(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Vg(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Eg(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var Ng=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xg=new RegExp(Ng.source,"g");function Jg(e,t){var n,r,a,o=Ng.lastIndex=Xg.lastIndex=0,i=-1,s=[],c=[];for(e+="",t+="";(n=Ng.exec(e))&&(r=Xg.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),s[i]?s[i]+=a:s[++i]=a),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,c.push({i:i,x:Wg(n,r)})),o=Xg.lastIndex;return o<t.length&&(a=t.slice(o),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)s[(n=c[r]).i]=n.x(e);return s.join("")})}function Fg(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function Eg(e,t){var n,r=typeof t;return null==t||"boolean"===r?kg(t):("number"===r?Wg:"string"===r?(n=ug(t))?(t=n,Bg):Jg:t instanceof ug?Bg:t instanceof Date?Rg:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Fg:Array.isArray(t)?xg:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Vg:Wg)(e,t)}function Tg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Yg(e){return+e}var Hg=[0,1];function Mg(e){return e}function Dg(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Kg(e,t,n){var r=e[0],a=e[1],o=t[0],i=t[1];return a<r?(r=Dg(a,r),o=n(i,o)):(r=Dg(r,a),o=n(o,i)),function(e){return o(r(e))}}function zg(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),o=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=Dg(e[i],e[i+1]),o[i]=n(t[i],t[i+1]);return function(t){var n=zl(e,t,1,r)-1;return o[n](a[n](t))}}function Lg(){var e,t,n,r,a,o,i=Hg,s=Hg,c=Eg,u=Mg;function l(){var e=Math.min(i.length,s.length);return u!==Mg&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),r=e>2?zg:Kg,a=o=null,g}function g(t){return null==t||isNaN(t=+t)?n:(a||(a=r(i.map(e),s,c)))(e(u(t)))}return g.invert=function(n){return u(t((o||(o=r(s,i.map(e),Wg)))(n)))},g.domain=function(e){return arguments.length?(i=Array.from(e,Yg),l()):i.slice()},g.range=function(e){return arguments.length?(s=Array.from(e),l()):s.slice()},g.rangeRound=function(e){return s=Array.from(e),c=Tg,l()},g.clamp=function(e){return arguments.length?(u=!!e||Mg,l()):u!==Mg},g.interpolate=function(e){return arguments.length?(c=e,l()):c},g.unknown=function(e){return arguments.length?(n=e,g):n},function(n,r){return e=n,t=r,l()}}function Pg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function _g(e){return new Date(e)}function Og(e){return e instanceof Date?+e:+new Date(+e)}function Ug(e,t,n,r,a,o,i,s,c,u){var l=Lg()(Mg,Mg),g=l.invert,d=l.domain,p=u(".%L"),h=u(":%S"),f=u("%I:%M"),I=u("%I %p"),C=u("%a %d"),m=u("%b %d"),v=u("%B"),b=u("%Y");function A(e){return(c(e)<e?p:s(e)<e?h:i(e)<e?f:o(e)<e?I:r(e)<e?a(e)<e?C:m:n(e)<e?v:b)(e)}return l.invert=function(e){return new Date(g(e))},l.domain=function(e){return arguments.length?d(Array.from(e,Og)):d().map(_g)},l.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?A:u(t)},l.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(function(e,t){var n,r=0,a=(e=e.slice()).length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}(n,e)):l},l.copy=function(){return g=l,Ug(e,t,n,r,a,o,i,s,c,u).domain(g.domain()).range(g.range()).interpolate(g.interpolate()).clamp(g.clamp()).unknown(g.unknown());var g},l}function jg(){return Pg.apply(Ug(mu,vu,Oc,Pc,Tc,Fc,Xc,Vc,Rc,Zu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Qg=__webpack_require__(6263),qg=__webpack_require__(984),$g=function(){},ed=function(e){return e};function td(e){return"[object Date]"===Object.prototype.toString.call(e)}function nd(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;var n,r,a=0,o=0,i=void 0;for(i in t)if(o++,t.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(n=e[i],r=t[i],!(td(n)&&td(r)?n.getTime()===r.getTime():n===r)))return!1;for(i in e)a++;return a===o}var rd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ad(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function od(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var id=function(e){function t(){return ad(this,t),od(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rd(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return!nd(this.props,e)||!nd(this.state,t)||!nd(this.context,n)}}]),t}(t.Component),sd=id;Object.assign;var cd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function ud(e){return $g}function ld(e){return"function"===typeof e?e:function(){return e}}function gd(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=0;r<e.length;++r)if(t.call(n,e[r],r,e))return e[r]}function dd(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}var pd="mouseenter.interaction",hd="mouseleave.interaction",fd="mousemove.pan",Id="mouseup.pan",Cd="touchmove.pan",md="touchend.pan touchcancel.pan";function vd(e){return e?{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY}:{}}function bd(e,t,n,r){for(var a=0,o=e.length-1;o-a>1;){var i=Math.round((a+o)/2);n(e[i])<=t?a=i:o=i}return n(e[a]).valueOf()===t.valueOf()&&(o=a),n(e[o]).valueOf()===t.valueOf()&&(a=o),n(e[a])<t&&n(e[o])<t&&(a=o),n(e[a])>t&&n(e[o])>t&&(o=a),{left:a,right:o}}(0,qg.scaleOrdinal)(qg.schemeCategory10);function Ad(e,t){if(!t||!e)return e?e[0]:void 0;for(var n=void 0,r=0;r<e.length;r++)if(kd(t(n=e[r])))return n}function yd(e,t){if(!t||!e){var n=e?e.length:0;return n?e[n-1]:void 0}for(var r=void 0,a=e.length-1;a>=0;a--)if(kd(t(r=e[a])))return r}function kd(e){return null!==e&&"undefined"!=typeof e}function Zd(e){return!kd(e)}Array.isArray;function Sd(e,t){var n=t.target,r=n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]}function wd(e,t){var n=e.currentTarget,r=t||n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]}function Bd(e,t){e.forEach((function(e){e.setTransform(1,0,0,1,0,0),e.clearRect(-1,-1,e.canvas.width+2,e.canvas.height+2),e.scale(t,t)}))}function Gd(e,t){var n=e.replace("#","");if(e.indexOf("#")>-1&&(3===n.length||6===n.length)){var r=3===n.length?1:2;return"rgba("+parseInt(n.substring(0,1*r),16)+", "+parseInt(n.substring(1*r,2*r),16)+", "+parseInt(n.substring(2*r,3*r),16)+", "+t+")"}return e}var xd=__webpack_require__(3904),Rd=__webpack_require__(1596),Wd=__webpack_require__.n(Rd),Vd=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Nd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Xd=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.yScale=r.yScale.bind(r),r.listener=r.listener.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),Nd(n,[{key:"componentWillMount",value:function(){var e=this.props.id;(0,this.context.subscribe)("chart_"+e,{listener:this.listener})}},{key:"componentWillUnmount",value:function(){var e=this.props.id;(0,this.context.unsubscribe)("chart_"+e)}},{key:"listener",value:function(e,t,n,r){var a=this.props,o=a.id,i=a.onContextMenu;"contextmenu"===e&&(t.currentCharts.indexOf(o)>-1&&i(t,r))}},{key:"yScale",value:function(){var e=this;return gd(this.context.chartConfig,(function(t){return t.id===e.props.id})).yScale.copy()}},{key:"getChildContext",value:function(){var e=this.props.id,t=gd(this.context.chartConfig,(function(t){return t.id===e}));return{chartId:e,chartConfig:t}}},{key:"render",value:function(){var e=this,n=gd(this.context.chartConfig,(function(t){return t.id===e.props.id})).origin,r=Vd(n,2),a=r[0],o=r[1];return t.createElement("g",{transform:"translate("+a+", "+o+")"},this.props.children)}}]),n}(sd);Xd.propTypes={height:lc().number,origin:lc().oneOfType([lc().array,lc().func]),id:lc().oneOfType([lc().number,lc().string]).isRequired,yExtents:lc().oneOfType([lc().array,lc().func]),yExtentsCalculator:function(e,t,n){if(Zd(e.yExtents)&&"function"!==typeof e.yExtentsCalculator)return new Error("yExtents or yExtentsCalculator must be present on "+n+". Validation failed.")},onContextMenu:lc().func,yScale:lc().func,flipYScale:lc().bool,padding:lc().oneOfType([lc().number,lc().shape({top:lc().number,bottom:lc().number})]),children:lc().node},Xd.defaultProps={id:0,origin:[0,0],padding:0,yScale:(0,qg.scaleLinear)(),flipYScale:!1,yPan:!0,yPanEnabled:!1,onContextMenu:$g},Xd.contextTypes={chartConfig:lc().array,subscribe:lc().func.isRequired,unsubscribe:lc().func.isRequired},Xd.childContextTypes={chartConfig:lc().object.isRequired,chartId:lc().oneOfType([lc().number,lc().string]).isRequired};var Jd=Xd,Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ed=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function Td(e,t){var n=e.width,r=e.height;return{availableHeight:r,width:n,height:t.height||r}}function Yd(e){return function(t){var n=e(t);return function(e){return kd(e)&&"object"===("undefined"===typeof e?"undefined":cd(e))&&!Array.isArray(e)}(n)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ed,n=Object.keys(e),r=new Array(n.length);return n.forEach((function(n,a){r[a]=t(e[n],n,e)})),r}(n):n}}function Hd(e){if(Array.isArray(e)&&2===e.length){var t=Ed(e,2),n=t[0],r=t[1];return"number"==typeof n&&"number"==typeof r}return!1}function Md(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.Children.map(n,(function(t){if(t&&t.type.toString()===Jd.toString()){var n=Fd({},Jd.defaultProps,t.props),a=n.id,o=n.origin,i=n.padding,s=n.yExtents,c=n.yScale,u=n.flipYScale,l=n.yExtentsCalculator,g=c.copy(),d=Td(e,n),p=d.width,h=d.height,f=d.availableHeight,I=n.yPan,C=n.yPanEnabled,m=kd(s)?(Array.isArray(s)?s:[s]).map(ld):void 0,v=gd(r,(function(e){return e.id===a}));if(Hd(s))if(kd(v)&&v.yPan&&v.yPanEnabled&&I&&C&&nd(v.originalYExtentsProp,s))g.domain(v.yScale.domain());else{var b=Ed(s,2),A=b[0],y=b[1];g.domain([A,y])}else kd(v)&&v.yPanEnabled&&(Hd(v.originalYExtentsProp)||(g.domain(v.yScale.domain()),C=!0));return{id:a,origin:ld(o)(p,f),padding:i,originalYExtentsProp:s,yExtents:m,yExtentsCalculator:l,flipYScale:u,yScale:g,yPan:I,yPanEnabled:C,width:p,height:h}}})).filter((function(e){return kd(e)}))}function Dd(e,t){var n=e.filter((function(e){var n=e.origin[1],r=n+e.height;return t[1]>n&&t[1]<r})).map((function(e){return e.id}));return n}function Kd(e,t,n,r,a){var o=t.plotData,i=t.xAccessor,s=t.displayXAccessor,c=t.fullData,u=e.map((function(e){var t=e.yExtentsCalculator,a=e.yExtents,u=e.yScale,l=kd(t)?t({plotData:o,xDomain:n,xAccessor:i,displayXAccessor:s,fullData:c}):function(e,t,n){var r=e.map((function(e){return n.map(Yd(e))})),a=Wd()(r);return t.invert?(0,Qg.extent)(a):(0,xd.set)(a).values()}(a,u,o);return{realYDomain:l,yDomainDY:kd(r)?u.range().map((function(e){return e-r})).map(u.invert):u.domain(),prevYDomain:u.domain()}})),l=function(){var e=ed;function t(){var t=arguments.length;if(!t)return[];var r=(0,Qg.min)(arguments,n),a=void 0,o=new Array(r);for(a=-1;++a<r;){for(var i=-1,s=o[a]=new Array(t);++i<t;)s[i]=arguments[i][a];o[a]=e.apply(this,o[a])}return o}function n(e){return e.length}return t.combine=function(n){return arguments.length?(e=n,t):e},t}().combine((function(e,t){var n=t.realYDomain,r=t.yDomainDY,o=t.prevYDomain,i=e.id,s=e.padding,c=e.height,u=e.yScale,l=e.yPan,g=e.flipYScale,d=e.yPanEnabled,p=void 0!==d&&d,h=!kd(a)||a.indexOf(i)>-1,f=l&&p?h?r:o:n,I=function(e,t,n,r){if(e.rangeRoundPoints||Zd(e.invert)){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");e.rangeRoundPoints&&e.rangeRoundPoints(r?[0,t]:[t,0],n),e.rangeRound&&e.range(r?[0,t]:[t,0]).padding(n)}else{var a=isNaN(n)?n:{top:n,bottom:n},o=a.top,i=a.bottom;e.range(r?[o,t-i]:[t-i,o])}return e}(u.copy().domain(f),c,s,g);return Fd({},e,{yScale:I,realYDomain:n})}));return l(e,u)}function zd(e,t,n,r){var a=void 0;if(e.invert)a=function(e,t,n,r){var a=bd(e,t,n),o=a.left,i=a.right;if(o===i)return e[o];var s=Math.abs(n(e[o])-t)<Math.abs(n(e[i])-t)?e[o]:e[i];return r&&console.log(e[o],e[i],s,o,i),s}(r,e.invert(n[0]),t);else{var o=e.range().map((function(e,t){return{x:Math.abs(e-n[0]),idx:t}})).reduce((function(e,t){return e.x<t.x?e:t}));a=kd(o)?r[o.idx]:r[0]}return a}var Ld=__webpack_require__(9261),Pd=__webpack_require__(2923),_d=__webpack_require__(2698),Od=__webpack_require__(9064),Ud=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Qd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function qd(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var $d=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleEnter=t.handleEnter.bind(t),t.handleLeave=t.handleLeave.bind(t),t.handleWheel=t.handleWheel.bind(t),t.handleMouseMove=t.handleMouseMove.bind(t),t.handleMouseDown=t.handleMouseDown.bind(t),t.handlePanEnd=t.handlePanEnd.bind(t),t.handlePan=t.handlePan.bind(t),t.handleTouchStart=t.handleTouchStart.bind(t),t.handleTouchMove=t.handleTouchMove.bind(t),t.handlePinchZoom=t.handlePinchZoom.bind(t),t.handlePinchZoomEnd=t.handlePinchZoomEnd.bind(t),t.handleClick=t.handleClick.bind(t),t.handleRightClick=t.handleRightClick.bind(t),t.handleDrag=t.handleDrag.bind(t),t.handleDragEnd=t.handleDragEnd.bind(t),t.shouldPan=t.shouldPan.bind(t),t.canPan=t.canPan.bind(t),t.setCursorClass=t.setCursorClass.bind(t),t.saveNode=t.saveNode.bind(t),t.mouseInside=!1,t.mouseInteraction=!0,t.state={panInProgress:!1},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),Qd(n,[{key:"saveNode",value:function(e){this.node=e}},{key:"componentWillMount",value:function(){this.focus=this.props.focus}},{key:"componentDidMount",value:function(){this.node&&(0,Ld.Z)(this.node).on(pd,this.handleEnter).on(hd,this.handleLeave)}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"componentWillUnmount",value:function(){if(this.node){(0,Ld.Z)(this.node).on(pd,null).on(hd,null);var e=dd(this.node);(0,Ld.Z)(e).on(fd,null)}}},{key:"handleEnter",value:function(){var e=Pd.B,t=this.props.onMouseEnter;if(this.mouseInside=!0,!this.state.panInProgress&&!this.state.dragInProgress){var n=dd(this.node);(0,Ld.Z)(n).on(fd,this.handleMouseMove)}t(e)}},{key:"handleLeave",value:function(e){var t=this.props.onMouseLeave;if(this.mouseInside=!1,!this.state.panInProgress&&!this.state.dragInProgress){var n=dd(this.node);(0,Ld.Z)(n).on(fd,null)}t(e)}},{key:"handleWheel",value:function(e){var t=this.props,n=t.zoom,r=t.onZoom,a=this.state.panInProgress,o=Math.abs(e.deltaY)>Math.abs(e.deltaX)&&Math.abs(e.deltaY)>0,i=wd(e);if(e.preventDefault(),n&&this.focus&&o&&!a)r(e.deltaY>0?1:-1,i,e);else if(this.focus){if(this.shouldPan()){var s=this.state.panStart,c=s.panStartXScale,u=s.chartsToPan;this.lastNewPos=i,this.panHappened=!0,this.dx+=e.deltaX,this.dy+=e.deltaY;var l={dx:this.dx,dy:this.dy};this.props.onPan(i,c,l,u,e)}else{var g=this.props,d=g.xScale,p=Dd(g.chartConfig,i);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:d,panOrigin:i,chartsToPan:p}})}this.queuePanEnd()}}},{key:"queuePanEnd",value:function(){var e=this;kd(this.panEndTimeout)&&clearTimeout(this.panEndTimeout),this.panEndTimeout=setTimeout((function(){e.handlePanEnd()}),100)}},{key:"handleMouseMove",value:function(){var e=Pd.B,t=this.props,n=t.onMouseMove,r=t.mouseMove;this.mouseInteraction&&r&&!this.state.panInProgress&&n((0,_d.Z)(this.node),"mouse",e)}},{key:"handleClick",value:function(e){var t=this,n=wd(e),r=this.props,a=r.onClick,o=r.onDoubleClick;this.panHappened||this.dragHappened||(this.clicked?(o(n,e),this.clicked=!1):(a(n,e),this.clicked=!0,setTimeout((function(){t.clicked&&(t.clicked=!1)}),400)))}},{key:"handleRightClick",value:function(e){e.stopPropagation(),e.preventDefault();var t=this.props,n=t.onContextMenu,r=t.onPanEnd,a=wd(e,this.node.getBoundingClientRect());if(kd(this.state.panStart)){var o=this.state.panStart,i=o.panStartXScale,s=o.panOrigin,c=o.chartsToPan;this.panHappened&&r(a,i,s,c,e);var u=dd(this.node);(0,Ld.Z)(u).on(fd,null).on(Id,null),this.setState({panInProgress:!1,panStart:null})}n(a,e)}},{key:"handleDrag",value:function(){var e=Pd.B;if(this.props.onDrag){this.dragHappened=!0;var t=(0,_d.Z)(this.node);this.props.onDrag({startPos:this.state.dragStartPosition,mouseXY:t},e)}}},{key:"cancelDrag",value:function(){var e=dd(this.node);(0,Ld.Z)(e).on(fd,this.mouseInside?this.handleMouseMove:null).on(Id,null),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}},{key:"handleDragEnd",value:function(){var e=Pd.B,t=(0,_d.Z)(this.node),n=dd(this.node);(0,Ld.Z)(n).on(fd,this.mouseInside?this.handleMouseMove:null).on(Id,null),this.dragHappened&&this.props.onDragComplete({mouseXY:t},e),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}},{key:"canPan",value:function(){var e=this.props.getAllPanConditions,t=this.props.pan,n=e().reduce((function(e,t){return{draggable:e.draggable||t.draggable,panEnabled:e.panEnabled&&t.panEnabled}}),{draggable:!1,panEnabled:t});return{panEnabled:n.panEnabled,somethingSelected:n.draggable}}},{key:"handleMouseDown",value:function(e){if(0===e.button){var t=this.props,n=t.xScale,r=t.chartConfig,a=t.onMouseDown;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){var o=wd(e),i=Dd(r,o),s=this.canPan(),c=s.panEnabled,u=s.somethingSelected,l=c&&!u;if(l){this.setState({panInProgress:l,panStart:{panStartXScale:n,panOrigin:o,chartsToPan:i}});var g=dd(this.node);(0,Ld.Z)(g).on(fd,this.handlePan).on(Id,this.handlePanEnd)}else if(u){this.setState({panInProgress:!1,dragInProgress:!0,panStart:null,dragStartPosition:o}),this.props.onDragStart({startPos:o},e);var d=dd(this.node);(0,Ld.Z)(d).on(fd,this.handleDrag).on(Id,this.handleDragEnd)}a(o,i,e)}e.preventDefault()}}},{key:"shouldPan",value:function(){var e=this.props,t=e.pan,n=e.onPan;return t&&n&&kd(this.state.panStart)}},{key:"handlePan",value:function(){var e=Pd.B;if(this.shouldPan()){this.panHappened=!0;var t=this.state.panStart,n=t.panStartXScale,r=t.panOrigin,a=t.chartsToPan,o=this.mouseInteraction?(0,_d.Z)(this.node):(0,Od.Z)(this.node)[0];this.lastNewPos=o;var i=o[0]-r[0],s=o[1]-r[1];this.dx=i,this.dy=s,this.props.onPan(o,n,{dx:i,dy:s},a,e)}}},{key:"handlePanEnd",value:function(){var e=Pd.B,t=this.props,n=t.pan,r=t.onPanEnd;if(kd(this.state.panStart)){var a=this.state.panStart,o=a.panStartXScale,i=a.chartsToPan,s=dd(this.node);if((0,Ld.Z)(s).on(fd,this.mouseInside?this.handleMouseMove:null).on(Id,null).on(Cd,null).on(md,null),this.panHappened&&n&&r){var c=this.dx,u=this.dy;delete this.dx,delete this.dy,r(this.lastNewPos,o,{dx:c,dy:u},i,e)}this.setState({panInProgress:!1,panStart:null})}}},{key:"handleTouchMove",value:function(e){(0,this.props.onMouseMove)(Sd(vd(e.touches[0]),e),"touch",e)}},{key:"handleTouchStart",value:function(e){this.mouseInteraction=!1;var t=this.props,n=t.pan,r=t.chartConfig,a=t.onMouseMove,o=this.props,i=o.xScale,s=o.onPanEnd;if(1===e.touches.length){this.panHappened=!1;var c=Sd(vd(e.touches[0]),e);if(a(c,"touch",e),n){var u=Dd(r,c);this.setState({panInProgress:!0,panStart:{panStartXScale:i,panOrigin:c,chartsToPan:u}});var l=dd(this.node);(0,Ld.Z)(l).on(Cd,this.handlePan,!1).on(md,this.handlePanEnd,!1)}}else if(2===e.touches.length){var g=this.state,d=g.panInProgress,p=g.panStart;if(d&&n&&s){var h=p.panStartXScale,f=p.panOrigin,I=p.chartsToPan,C=dd(this.node);(0,Ld.Z)(C).on(fd,this.mouseInside?this.handleMouseMove:null).on(Id,null).on(Cd,this.handlePinchZoom,!1).on(md,this.handlePinchZoomEnd,!1);var m=Sd(vd(e.touches[0]),e),v=Sd(vd(e.touches[1]),e);this.panHappened&&n&&s&&s(this.lastNewPos,h,f,I,e),this.setState({panInProgress:!1,pinchZoomStart:{xScale:i,touch1Pos:m,touch2Pos:v,range:i.range(),chartsToPan:I}})}}}},{key:"handlePinchZoom",value:function(){var e=Pd.B,t=(0,Od.Z)(this.node),n=jd(t,2),r=n[0],a=n[1],o=this.props,i=o.xScale,s=o.zoom,c=o.onPinchZoom,u=this.state.pinchZoomStart,l=(u.chartsToPan,qd(u,["chartsToPan"]));s&&c&&c(l,{touch1Pos:r,touch2Pos:a,xScale:i},e)}},{key:"handlePinchZoomEnd",value:function(){var e=Pd.B,t=dd(this.node);(0,Ld.Z)(t).on(Cd,null).on(md,null);var n=this.props,r=n.zoom,a=n.onPinchZoomEnd,o=this.state.pinchZoomStart,i=(o.chartsToPan,qd(o,["chartsToPan"]));r&&a&&a(i,e),this.setState({pinchZoomStart:null})}},{key:"setCursorClass",value:function(e){e!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:e})}},{key:"render",value:function(){var e=this.props,n=e.height,r=e.width,a=e.disableInteraction,o=e.useCrossHairStyleCursor,i=null!=this.state.cursorOverrideClass?this.state.cursorOverrideClass:o?this.state.panInProgress?"react-stockcharts-grabbing-cursor":"react-stockcharts-crosshair-cursor":"",s=a||{onWheel:this.handleWheel,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return t.createElement("rect",Ud({ref:this.saveNode,className:i,width:r,height:n,style:{opacity:0}},s))}}]),n}(t.Component);$d.propTypes={mouseMove:lc().bool.isRequired,zoom:lc().bool.isRequired,pan:lc().bool.isRequired,panSpeedMultiplier:lc().number.isRequired,focus:lc().bool.isRequired,useCrossHairStyleCursor:lc().bool.isRequired,width:lc().number.isRequired,height:lc().number.isRequired,chartConfig:lc().array,xScale:lc().func.isRequired,xAccessor:lc().func.isRequired,disableInteraction:lc().bool.isRequired,getAllPanConditions:lc().func.isRequired,onMouseMove:lc().func,onMouseEnter:lc().func,onMouseLeave:lc().func,onZoom:lc().func,onPinchZoom:lc().func,onPinchZoomEnd:lc().func.isRequired,onPan:lc().func,onPanEnd:lc().func,onDragStart:lc().func,onDrag:lc().func,onDragComplete:lc().func,onClick:lc().func,onDoubleClick:lc().func,onContextMenu:lc().func,onMouseDown:lc().func,children:lc().node},$d.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,onDragComplete:$g,disableInteraction:!1};var ep=$d,tp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var np=ud(),rp=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.setDrawCanvas=t.setDrawCanvas.bind(t),t.drawCanvas={},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),tp(n,[{key:"setDrawCanvas",value:function(e){kd(e)?this.drawCanvas[e.id]=e.getContext("2d"):this.drawCanvas={}}},{key:"getCanvasContexts",value:function(){if(kd(this.drawCanvas.axes))return this.drawCanvas}},{key:"render",value:function(){var e=this.props,n=e.height,r=e.width,a=e.type,o=e.zIndex,i=e.ratio;return"svg"===a?null:(np("using ratio ",i),t.createElement("div",{style:{position:"absolute",zIndex:o}},t.createElement("canvas",{id:"bg",ref:this.setDrawCanvas,width:r*i,height:n*i,style:{position:"absolute",width:r,height:n}}),t.createElement("canvas",{id:"axes",ref:this.setDrawCanvas,width:r*i,height:n*i,style:{position:"absolute",width:r,height:n}}),t.createElement("canvas",{id:"mouseCoord",ref:this.setDrawCanvas,width:r*i,height:n*i,style:{position:"absolute",width:r,height:n}})))}}]),n}(t.Component);rp.propTypes={width:lc().number.isRequired,height:lc().number.isRequired,type:lc().string.isRequired,zIndex:lc().number,ratio:lc().number.isRequired};var ap=rp,op=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ip=ud();function sp(e,t,n,r){var a=e.lastItem,o=e.lastItemX,i=t(a),s=n.range(),c=op(s,2),u=c[0];return(c[1]-u)/(o-u)*(i-r)+r}function cp(e,t,n,r){return t>function(e,t){return Math.max(1,Math.ceil(e*t))}(e,r)&&t<up(e,n)}function up(e,t){return Math.floor(e*t)}function lp(e,t){return Math.floor(.97*up(e,t))}function gp(e,t,n,r){var a=bd(e,t,r).right,o=bd(e,n,r).left;return e.slice(a,o+1)}function dp(e){var t=e.xScale,n=e.useWholeData,r=e.clamp,a=e.pointsPerPxThreshold,o=e.minPointsPerPxThreshold,i=e.flipXScale;return function(e,t,n,r,a){return{filterData:function(o,i,s,c){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=u.currentPlotData,g=u.currentDomain,d=u.fallbackStart,p=u.fallbackEnd;if(e)return{plotData:o,domain:i};var h=Ad(i),f=yd(i),I=i,C=gp(o,h,f,s);1===C.length&&kd(d)&&(I=[h=d,f=sp(p,s,c,h)],C=gp(o,h,f,s)),"function"===typeof t?I=t(I,[s(Ad(o)),s(yd(o))]):("left"!==t&&"both"!==t&&!0!==t||(I=[Math.max(h,s(Ad(o))),I[1]]),"right"!==t&&"both"!==t&&!0!==t||(I=[I[0],Math.min(f,s(yd(o)))])),I!==i&&(C=gp(o,I[0],I[1],s));var m=I,v=c.copy().domain(m),b=Math.floor(v(s(yd(C)))-v(s(Ad(C))));a&&b<0&&(b*=-1);var A=void 0,y=void 0,k=yd(v.range())-Ad(v.range());if(ip("Trying to show "+C.length+" points in "+b+"px, I can show up to "+(up(b,n)-1)+" points in that width. Also FYI the entire chart width is "+k+"px and pointsPerPxThreshold is "+n),cp(b,C.length,n,r))A=C,y=m,ip("AND IT WORKED");else if(k>up(b,n)&&kd(p)){A=C;var Z=sp(p,s,c,Ad(m));y=[Ad(m),Z];var S=v.copy().domain(y),w=Math.floor(S(s(yd(A)))-S(s(Ad(A))));ip("and ouch, that is too much, so instead showing "+A.length+" in "+w+"px")}else{A=l||C.slice(C.length-lp(b,n)),y=g||[s(Ad(A)),s(yd(A))];var B=v.copy().domain(y),G=Math.floor(B(s(yd(A)))-B(s(Ad(A))));ip("and ouch, that is too much, so instead showing "+A.length+" in "+G+"px")}return{plotData:A,domain:y}}}}(n||Zd(t.invert),r,a,o,i)}var pp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),hp=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},fp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Ip(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}ud();var Cp=["seriesName"];function mp(e){return{height:e.height-e.margin.top-e.margin.bottom,width:e.width-e.margin.left-e.margin.right}}function vp(e){return e?-1:1}function bp(e){var t=e.data,n=e.plotFull,r=e.xScale,a=e.clamp,o=e.pointsPerPxThreshold,i=e.flipXScale,s=e.xAccessor,c=e.displayXAccessor,u=e.minPointsPerPxThreshold,l=dp({xScale:r,useWholeData:kd(n)?n:s===ed,clamp:a,pointsPerPxThreshold:o,minPointsPerPxThreshold:u,flipXScale:i}).filterData;return{xAccessor:s,displayXAccessor:c||s,xScale:r.copy(),fullData:t,filterData:l}}function Ap(e){var t=yp(e),n=t.xAccessor,r=t.displayXAccessor,a=t.fullData,o=t.plotData,i=t.xScale,s=e.postCalculator,c=e.children,u=s(o),l=mp(e),g=Kd(Md(l,c),{plotData:u,xAccessor:n,displayXAccessor:r,fullData:a},i.domain());return fp({},t,{xScale:i,plotData:u,chartConfig:g})}function yp(e){var t=e.xAccessor,n=e.xExtents,r=e.data,a=e.padding,o=vp(e.flipXScale),i=mp(e),s="function"===typeof n?n(r):(0,Qg.extent)(n.map((function(e){return ld(e)})).map((function(e){return e(r,t)}))),c=bp(e),u=c.xAccessor,l=c.displayXAccessor,g=c.xScale,d=c.fullData,p=c.filterData,h=kp(g,i,a,o),f=p(d,s,t,h),I=f.plotData,C=f.domain;return{plotData:I,xScale:h.domain(C),xAccessor:u,displayXAccessor:l,fullData:d,filterData:p}}function kp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");e.rangeRoundPoints([0,t.width],n)}else if(e.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");e.range([0,t.width]),e.padding(n/2)}else{var a=isNaN(n)?n:{left:n,right:n},o=a.left,i=a.right;r>0?e.range([o,t.width-i]):e.range([t.width-i,o])}return e}function Zp(e){var t=e.touch1Pos,n=e.touch2Pos;return{topLeft:[Math.min(t[0],n[0]),Math.min(t[1],n[1])],bottomRight:[Math.max(t[0],n[0]),Math.max(t[1],n[1])]}}var Sp=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.getDataInfo=e.getDataInfo.bind(e),e.getCanvasContexts=e.getCanvasContexts.bind(e),e.handleMouseMove=e.handleMouseMove.bind(e),e.handleMouseEnter=e.handleMouseEnter.bind(e),e.handleMouseLeave=e.handleMouseLeave.bind(e),e.handleZoom=e.handleZoom.bind(e),e.handlePinchZoom=e.handlePinchZoom.bind(e),e.handlePinchZoomEnd=e.handlePinchZoomEnd.bind(e),e.handlePan=e.handlePan.bind(e),e.handlePanEnd=e.handlePanEnd.bind(e),e.handleClick=e.handleClick.bind(e),e.handleMouseDown=e.handleMouseDown.bind(e),e.handleDoubleClick=e.handleDoubleClick.bind(e),e.handleContextMenu=e.handleContextMenu.bind(e),e.handleDragStart=e.handleDragStart.bind(e),e.handleDrag=e.handleDrag.bind(e),e.handleDragEnd=e.handleDragEnd.bind(e),e.panHelper=e.panHelper.bind(e),e.pinchZoomHelper=e.pinchZoomHelper.bind(e),e.xAxisZoom=e.xAxisZoom.bind(e),e.yAxisZoom=e.yAxisZoom.bind(e),e.resetYDomain=e.resetYDomain.bind(e),e.calculateStateForDomain=e.calculateStateForDomain.bind(e),e.generateSubscriptionId=e.generateSubscriptionId.bind(e),e.draw=e.draw.bind(e),e.redraw=e.redraw.bind(e),e.getAllPanConditions=e.getAllPanConditions.bind(e),e.subscriptions=[],e.subscribe=e.subscribe.bind(e),e.unsubscribe=e.unsubscribe.bind(e),e.amIOnTop=e.amIOnTop.bind(e),e.saveEventCaptureNode=e.saveEventCaptureNode.bind(e),e.saveCanvasContainerNode=e.saveCanvasContainerNode.bind(e),e.setCursorClass=e.setCursorClass.bind(e),e.getMutableState=e.getMutableState.bind(e),e.interactiveState=[],e.panInProgress=!1,e.state={},e.mutableState={},e.lastSubscriptionId=0,e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),pp(n,[{key:"saveEventCaptureNode",value:function(e){this.eventCaptureNode=e}},{key:"saveCanvasContainerNode",value:function(e){this.canvasContainerNode=e}},{key:"getMutableState",value:function(){return this.mutableState}},{key:"getDataInfo",value:function(){return fp({},this.state,{fullData:this.fullData})}},{key:"getCanvasContexts",value:function(){if(this.canvasContainerNode)return this.canvasContainerNode.getCanvasContexts()}},{key:"generateSubscriptionId",value:function(){return this.lastSubscriptionId++,this.lastSubscriptionId}},{key:"clearBothCanvas",value:function(){var e=this.getCanvasContexts();e&&e.axes&&Bd([e.axes,e.mouseCoord],this.props.ratio)}},{key:"clearMouseCanvas",value:function(){var e=this.getCanvasContexts();e&&e.mouseCoord&&Bd([e.mouseCoord],this.props.ratio)}},{key:"clearThreeCanvas",value:function(){var e=this.getCanvasContexts();e&&e.axes&&Bd([e.axes,e.mouseCoord,e.bg],this.props.ratio)}},{key:"subscribe",value:function(e,t){var n=t.getPanConditions,r=void 0===n?ld({draggable:!1,panEnabled:!0}):n;this.subscriptions=this.subscriptions.concat(fp({id:e},t,{getPanConditions:r}))}},{key:"unsubscribe",value:function(e){this.subscriptions=this.subscriptions.filter((function(t){return t.id!==e}))}},{key:"getAllPanConditions",value:function(){return this.subscriptions.map((function(e){return e.getPanConditions()}))}},{key:"setCursorClass",value:function(e){null!=this.eventCaptureNode&&this.eventCaptureNode.setCursorClass(e)}},{key:"amIOnTop",value:function(e){var t=this.subscriptions.filter((function(e){return e.getPanConditions().draggable}));return t.length>0&&yd(t).id===e}},{key:"handleContextMenu",value:function(e,t){var n=this.state,r=n.xAccessor,a=n.chartConfig,o=n.plotData,i=n.xScale,s=Dd(a,e),c=zd(i,r,e,o);this.triggerEvent("contextmenu",{mouseXY:e,currentItem:c,currentCharts:s},t)}},{key:"calculateStateForDomain",value:function(e){var t=this.state,n=t.xAccessor,r=t.displayXAccessor,a=t.xScale,o=t.chartConfig,i=t.plotData,s=this.state.filterData,c=this.fullData,u=this.props.postCalculator,l=s(c,e,n,a,{currentPlotData:i,currentDomain:a.domain()}),g=l.plotData,d=l.domain,p=u(g),h=a.copy().domain(d),f=Kd(o,{plotData:p,xAccessor:n,displayXAccessor:r,fullData:c},h.domain());return{xScale:h,plotData:p,chartConfig:f}}},{key:"pinchZoomHelper",value:function(e,t){var n=e.xScale,r=this.state,a=r.xScale,o=r.chartConfig,i=r.plotData,s=r.xAccessor,c=r.displayXAccessor,u=this.state.filterData,l=this.fullData,g=this.props.postCalculator,d=Zp(e),p=d.topLeft,h=d.bottomRight,f=Zp(t),I=f.topLeft,C=f.bottomRight,m=n.range()[1],v=Math.round(-(h[0]*I[0]-p[0]*C[0])/(p[0]-h[0])),b=Math.round(m+((m-h[0])*(m-I[0])-(m-p[0])*(m-C[0]))/(m-p[0]-(m-h[0]))),A=u(l,[Math.round(-v*p[0]/(-v+I[0])),Math.round(m-(b-m)*(m-p[0])/(b+(m-I[0])))].map(n.invert),s,n,{currentPlotData:i,currentDomain:a.domain()}),y=A.plotData,k=A.domain,Z=g(y),S=a.copy().domain(k),w=t.touch1Pos;return{chartConfig:Kd(o,{plotData:Z,xAccessor:s,displayXAccessor:c,fullData:l},S.domain()),xScale:S,plotData:Z,mouseXY:w,currentItem:zd(S,s,w,Z)}}},{key:"cancelDrag",value:function(){this.eventCaptureNode.cancelDrag(),this.triggerEvent("dragcancel")}},{key:"handlePinchZoom",value:function(e,t,n){var r=this;if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;var a=this.pinchZoomHelper(e,t);this.triggerEvent("pinchzoom",a,n),this.finalPinch=t,requestAnimationFrame((function(){r.clearBothCanvas(),r.draw({trigger:"pinchzoom"}),r.waitingForPinchZoomAnimationFrame=!1}))}}},{key:"handlePinchZoomEnd",value:function(e,t){var n=this.state.xAccessor;if(this.finalPinch){var r=this.pinchZoomHelper(e,this.finalPinch),a=r.xScale;this.triggerEvent("pinchzoom",r,t),this.finalPinch=null,this.clearThreeCanvas();var o=Ad(this.fullData),i=Ad(a.domain()),s=n(o),c=this.props.onLoadMore;this.setState(r,(function(){i<s&&c(i,s)}))}}},{key:"handleZoom",value:function(e,t,n){if(!this.panInProgress){var r=this.state,a=r.xAccessor,o=r.xScale,i=r.plotData,s=this.props,c=s.zoomMultiplier,u=s.zoomAnchor,l=this.fullData,g=o(u({xScale:o,xAccessor:a,mouseXY:t,plotData:i,fullData:l})),d=e>0?1*c:1/c,p=o.range().map((function(e){return g+(e-g)*d})).map(o.invert),h=this.calculateStateForDomain(p),f=h.xScale,I=h.plotData,C=h.chartConfig,m=zd(f,a,t,I),v=Dd(C,t);this.clearThreeCanvas();var b=Ad(l),A=Ad(f.domain()),y=a(b),k=this.props.onLoadMore;this.mutableState={mouseXY:t,currentItem:m,currentCharts:v},this.triggerEvent("zoom",{xScale:f,plotData:I,chartConfig:C,mouseXY:t,currentCharts:v,currentItem:m,show:!0},n),this.setState({xScale:f,plotData:I,chartConfig:C},(function(){A<y&&k(A,y)}))}}},{key:"xAxisZoom",value:function(e){var t=this.calculateStateForDomain(e),n=t.xScale,r=t.plotData,a=t.chartConfig;this.clearThreeCanvas();var o=this.state.xAccessor,i=Ad(this.fullData),s=Ad(n.domain()),c=o(i),u=this.props.onLoadMore;this.setState({xScale:n,plotData:r,chartConfig:a},(function(){s<c&&u(s,c)}))}},{key:"yAxisZoom",value:function(e,t){this.clearThreeCanvas();var n=this.state.chartConfig.map((function(n){if(n.id===e){var r=n.yScale;return fp({},n,{yScale:r.copy().domain(t),yPanEnabled:!0})}return n}));this.setState({chartConfig:n})}},{key:"triggerEvent",value:function(e,t,n){var r=this;this.subscriptions.forEach((function(a){var o=fp({},r.state,{fullData:r.fullData,subscriptions:r.subscriptions});a.listener(e,t,o,n)}))}},{key:"draw",value:function(e){this.subscriptions.forEach((function(t){kd(t.draw)&&t.draw(e)}))}},{key:"redraw",value:function(){this.clearThreeCanvas(),this.draw({force:!0})}},{key:"panHelper",value:function(e,t,n,r){var a=n.dx,o=n.dy,i=this.state,s=i.xAccessor,c=i.displayXAccessor,u=i.chartConfig,l=this.state.filterData,g=this.fullData,d=this.props.postCalculator;if(Zd(t.invert))throw new Error("xScale provided does not have an invert() method.You are likely using an ordinal scale. This scale does not support zoom, pan");var p=t.range().map((function(e){return e-a})).map(t.invert),h=l(g,p,s,t,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain}),f=h.plotData,I=h.domain,C=t.copy().domain(I),m=d(f),v=zd(C,s,e,m),b=Kd(u,{plotData:m,xAccessor:s,displayXAccessor:c,fullData:g},C.domain(),o,r);return{xScale:C,plotData:m,chartConfig:b,mouseXY:e,currentCharts:Dd(b,e),currentItem:v}}},{key:"handlePan",value:function(e,t,n,r,a){var o=this;if(!this.waitingForPanAnimationFrame){this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=this.hackyWayToStopPanBeyondBounds__plotData||this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=this.hackyWayToStopPanBeyondBounds__domain||this.state.xScale.domain();var i=this.panHelper(e,t,n,r);this.hackyWayToStopPanBeyondBounds__plotData=i.plotData,this.hackyWayToStopPanBeyondBounds__domain=i.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",i,a),this.mutableState={mouseXY:i.mouseXY,currentItem:i.currentItem,currentCharts:i.currentCharts},requestAnimationFrame((function(){o.waitingForPanAnimationFrame=!1,o.clearBothCanvas(),o.draw({trigger:"pan"})}))}}},{key:"handlePanEnd",value:function(e,t,n,r,a){var o=this,i=this.panHelper(e,t,n,r);this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1;var s=i.xScale,c=i.plotData,u=i.chartConfig;this.triggerEvent("panend",i,a),requestAnimationFrame((function(){var e=o.state.xAccessor,t=Ad(o.fullData),n=Ad(s.domain()),r=e(t),a=o.props.onLoadMore;o.clearThreeCanvas(),o.setState({xScale:s,plotData:c,chartConfig:u},(function(){n<r&&a(n,r)}))}))}},{key:"handleMouseDown",value:function(e,t,n){this.triggerEvent("mousedown",this.mutableState,n)}},{key:"handleMouseEnter",value:function(e){this.triggerEvent("mouseenter",{show:!0},e)}},{key:"handleMouseMove",value:function(e,t,n){var r=this;if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;var a=this.state,o=a.chartConfig,i=a.plotData,s=a.xScale,c=a.xAccessor,u=Dd(o,e),l=zd(s,c,e,i);this.triggerEvent("mousemove",{show:!0,mouseXY:e,prevMouseXY:this.prevMouseXY,currentItem:l,currentCharts:u},n),this.prevMouseXY=e,this.mutableState={mouseXY:e,currentItem:l,currentCharts:u},requestAnimationFrame((function(){r.clearMouseCanvas(),r.draw({trigger:"mousemove"}),r.waitingForMouseMoveAnimationFrame=!1}))}}},{key:"handleMouseLeave",value:function(e){this.triggerEvent("mouseleave",{show:!1},e),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})}},{key:"handleDragStart",value:function(e,t){var n=e.startPos;this.triggerEvent("dragstart",{startPos:n},t)}},{key:"handleDrag",value:function(e,t){var n=this,r=e.startPos,a=e.mouseXY,o=this.state,i=o.chartConfig,s=o.plotData,c=o.xScale,u=o.xAccessor,l=Dd(i,a),g=zd(c,u,a,s);this.triggerEvent("drag",{startPos:r,mouseXY:a,currentItem:g,currentCharts:l},t),this.mutableState={mouseXY:a,currentItem:g,currentCharts:l},requestAnimationFrame((function(){n.clearMouseCanvas(),n.draw({trigger:"drag"})}))}},{key:"handleDragEnd",value:function(e,t){var n=this,r=e.mouseXY;this.triggerEvent("dragend",{mouseXY:r},t),requestAnimationFrame((function(){n.clearMouseCanvas(),n.draw({trigger:"dragend"})}))}},{key:"handleClick",value:function(e,t){var n=this;this.triggerEvent("click",this.mutableState,t),requestAnimationFrame((function(){n.clearMouseCanvas(),n.draw({trigger:"click"})}))}},{key:"handleDoubleClick",value:function(e,t){this.triggerEvent("dblclick",{},t)}},{key:"getChildContext",value:function(){var e=mp(this.props);return{fullData:this.fullData,plotData:this.state.plotData,width:e.width,height:e.height,chartConfig:this.state.chartConfig,xScale:this.state.xScale,xAccessor:this.state.xAccessor,displayXAccessor:this.state.displayXAccessor,chartCanvasType:this.props.type,margin:this.props.margin,ratio:this.props.ratio,xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}},{key:"componentWillMount",value:function(){var e=Ap(this.props,!0),t=e.fullData,n=Ip(e,["fullData"]);this.setState(n),this.fullData=t}},{key:"componentWillReceiveProps",value:function(e){var t=function(e,t){return!Cp.every((function(n){return nd(e[n],t[n])}))}(this.props,e),n=wp(this.state.xScale,this.state.xAccessor,this.state.plotData),r=this.state.chartConfig,a=void 0;if(n&&!t&&nd(this.props.xExtents,e.xExtents)){var o=this.state.xScale.domain(),i=hp(o,2),s=i[0],c=i[1],u=yd(this.fullData),l=bp(e),g=l.xAccessor,d=g(u)<=c&&g(u)>=s;0,a=function(e,t,n,r,a){var o=e.fullData,i=e.xScale,s=e.xAccessor,c=e.displayXAccessor,u=e.filterData,l=yd(o),g=t.domain(),d=hp(g,2),p=d[0],h=d[1],f=n.postCalculator,I=n.children,C=n.padding,m=n.flipXScale,v=n.maintainPointsPerPixelOnResize,b=vp(m),A=mp(n),y=kp(i,A,C,b),k=void 0;if(!r||h>=s(l)){var Z=t.range(),S=hp(Z,2),w=S[0],B=S[1],G=y.range(),x=hp(G,2),R=x[0],W=x[1],V=v?h-(W-R)/(B-w)*(h-p):p,N=t(s(l)),X=u(o,[V,h],s,y,{fallbackStart:p,fallbackEnd:{lastItem:l,lastItemX:N}});k=X.plotData,y.domain(X.domain)}else if(r&&h<s(l)){var J=t(s(l))-t.range()[1],F=t.range().map((function(e){return e+J})).map(t.invert),E=hp(F,2),T=u(o,[E[0],E[1]],s,y);k=T.plotData,y.domain(T.domain)}var Y=f(k),H=Kd(Md(A,I,a),{plotData:Y,xAccessor:s,displayXAccessor:c,fullData:o},y.domain());return{xScale:y,xAccessor:s,chartConfig:H,plotData:Y,fullData:o,filterData:u}}(l,this.state.xScale,e,d,r)}else a=Ap(e),this.mutableState={};var p=a,h=p.fullData,f=Ip(p,["fullData"]);this.panInProgress||(this.clearThreeCanvas(),this.setState(f)),this.fullData=h}},{key:"resetYDomain",value:function(e){var t=this.state.chartConfig,n=!1,r=t.map((function(t){return!Zd(e)&&t.id!==e||nd(t.yScale.domain(),t.realYDomain)?t:(n=!0,fp({},t,{yScale:t.yScale.domain(t.realYDomain),yPanEnabled:!1}))}));n&&(this.clearThreeCanvas(),this.setState({chartConfig:r}))}},{key:"shouldComponentUpdate",value:function(){return!this.panInProgress}},{key:"render",value:function(){var e=this.props,n=e.type,r=e.height,a=e.width,o=e.margin,i=e.className,s=e.zIndex,c=e.defaultFocus,u=e.ratio,l=e.mouseMoveEvent,g=e.panEvent,d=e.zoomEvent,p=this.props,h=p.useCrossHairStyleCursor,f=p.onSelect,I=this.state,C=I.plotData,m=I.xScale,v=I.xAccessor,b=I.chartConfig,A=mp(this.props),y=wp(m,v,C),k=h&&y,Z=t.createElement("style",{type:"text/css"},"\n\t.react-stockcharts-grabbing-cursor {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.react-stockcharts-crosshair-cursor {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t.react-stockcharts-tooltip-hover {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-avoid-interaction {\n\t\tpointer-events: none;\n\t}\n\t.react-stockcharts-enable-interaction {\n\t\tpointer-events: all;\n\t}\n\t.react-stockcharts-tooltip {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-default-cursor {\n\t\tcursor: default;\n\t}\n\t.react-stockcharts-move-cursor {\n\t\tcursor: move;\n\t}\n\t.react-stockcharts-pointer-cursor {\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-ns-resize-cursor {\n\t\tcursor: ns-resize;\n\t}\n\t.react-stockcharts-ew-resize-cursor {\n\t\tcursor: ew-resize;\n\t}");return t.createElement("div",{style:{position:"relative",width:a,height:r},className:i,onClick:f},t.createElement(ap,{ref:this.saveCanvasContainerNode,type:n,ratio:u,width:a,height:r,zIndex:s}),t.createElement("svg",{className:i,width:a,height:r,style:{position:"absolute",zIndex:s+5}},Z,t.createElement("defs",null,t.createElement("clipPath",{id:"chart-area-clip"},t.createElement("rect",{x:"0",y:"0",width:A.width,height:A.height})),b.map((function(e,n){return t.createElement("clipPath",{key:n,id:"chart-area-clip-"+e.id},t.createElement("rect",{x:"0",y:"0",width:e.width,height:e.height}))}))),t.createElement("g",{transform:"translate("+(o.left+.5)+", "+(o.top+.5)+")"},t.createElement(ep,{ref:this.saveEventCaptureNode,useCrossHairStyleCursor:k,mouseMove:l&&y,zoom:d&&y,pan:g&&y,width:A.width,height:A.height,chartConfig:b,xScale:m,xAccessor:v,focus:c,disableInteraction:this.props.disableInteraction,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),t.createElement("g",{className:"react-stockcharts-avoid-interaction"},this.props.children))))}}]),n}(t.Component);function wp(e,t,n){return!isNaN(e(t(Ad(n))))&&kd(e.invert)}Sp.propTypes={width:lc().number.isRequired,height:lc().number.isRequired,margin:lc().object,ratio:lc().number.isRequired,type:lc().oneOf(["svg","hybrid"]),pointsPerPxThreshold:lc().number,minPointsPerPxThreshold:lc().number,data:lc().array.isRequired,xAccessor:lc().func,xExtents:lc().oneOfType([lc().array,lc().func]),zoomAnchor:lc().func,className:lc().string,seriesName:lc().string.isRequired,zIndex:lc().number,children:lc().node.isRequired,xScale:lc().func.isRequired,postCalculator:lc().func,flipXScale:lc().bool,useCrossHairStyleCursor:lc().bool,padding:lc().oneOfType([lc().number,lc().shape({left:lc().number,right:lc().number})]),defaultFocus:lc().bool,zoomMultiplier:lc().number,onLoadMore:lc().func,displayXAccessor:function(e,t){if(Zd(e[t]))console.warn("`displayXAccessor` is not defined, will use the value from `xAccessor` as `displayXAccessor`. This might be ok if you do not use a discontinuous scale but if you do, provide a `displayXAccessor` prop to `ChartCanvas`");else if("function"!==typeof e[t])return new Error("displayXAccessor has to be a function")},mouseMoveEvent:lc().bool,panEvent:lc().bool,clamp:lc().oneOfType([lc().string,lc().bool,lc().func]),zoomEvent:lc().bool,onSelect:lc().func,maintainPointsPerPixelOnResize:lc().bool,disableInteraction:lc().bool},Sp.defaultProps={margin:{top:20,right:30,bottom:30,left:80},type:"hybrid",pointsPerPxThreshold:2,minPointsPerPxThreshold:.01,className:"react-stockchart",zIndex:1,xExtents:[Qg.min,Qg.max],postCalculator:ed,padding:0,xAccessor:ed,flipXScale:!1,useCrossHairStyleCursor:!0,defaultFocus:!0,onLoadMore:$g,onSelect:$g,mouseMoveEvent:!0,panEvent:!0,zoomEvent:!0,zoomMultiplier:1.1,clamp:!1,zoomAnchor:function(e){var t=e.xScale,n=e.xAccessor,r=e.mouseXY,a=e.plotData;return e.fullData,n(zd(t,n,r,a))},maintainPointsPerPixelOnResize:!0,disableInteraction:!1},Sp.childContextTypes={plotData:lc().array,fullData:lc().array,chartConfig:lc().arrayOf(lc().shape({id:lc().oneOfType([lc().number,lc().string]).isRequired,origin:lc().arrayOf(lc().number).isRequired,padding:lc().oneOfType([lc().number,lc().shape({top:lc().number,bottom:lc().number})]),yExtents:lc().arrayOf(lc().func),yExtentsProvider:lc().func,yScale:lc().func.isRequired,mouseCoordinates:lc().shape({at:lc().string,format:lc().func}),width:lc().number.isRequired,height:lc().number.isRequired})).isRequired,xScale:lc().func.isRequired,xAccessor:lc().func.isRequired,displayXAccessor:lc().func.isRequired,width:lc().number.isRequired,height:lc().number.isRequired,chartCanvasType:lc().oneOf(["svg","hybrid"]).isRequired,margin:lc().object.isRequired,ratio:lc().number.isRequired,getCanvasContexts:lc().func,xAxisZoom:lc().func,yAxisZoom:lc().func,amIOnTop:lc().func,redraw:lc().func,subscribe:lc().func,unsubscribe:lc().func,setCursorClass:lc().func,generateSubscriptionId:lc().func,getMutableState:lc().func},Sp.ohlcv=function(e){return{date:e.date,open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume}};var Bp=Sp,Gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Rp={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag"},Wp=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));r.drawOnCanvas=r.drawOnCanvas.bind(r),r.getMoreProps=r.getMoreProps.bind(r),r.listener=r.listener.bind(r),r.draw=r.draw.bind(r),r.updateMoreProps=r.updateMoreProps.bind(r),r.evaluateType=r.evaluateType.bind(r),r.isHover=r.isHover.bind(r),r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.getPanConditions=r.getPanConditions.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r);var a=t.generateSubscriptionId;return r.suscriberId=a(),r.moreProps={},r.state={updateCount:0},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),xp(n,[{key:"updateMoreProps",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.moreProps[n]=e[n]}))}},{key:"shouldTypeProceed",value:function(){return!0}},{key:"preEvaluate",value:function(){}},{key:"listener",value:function(e,t,n,r){kd(t)&&this.updateMoreProps(t),this.evaluationInProgress=!0,this.evaluateType(e,r),this.evaluationInProgress=!1}},{key:"evaluateType",value:function(e,t){var n=Rp[e]||e;if(this.props.drawOn.indexOf(n)>-1&&(this.preEvaluate(e,this.moreProps,t),this.shouldTypeProceed(e,this.moreProps)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":this.moreProps.hovering=!1;var r=this.getMoreProps();this.props.onUnHover&&this.props.onUnHover(r,t);break;case"contextmenu":this.props.onContextMenu&&this.props.onContextMenu(this.getMoreProps(),t),this.moreProps.hovering&&this.props.onContextMenuWhenHover&&this.props.onContextMenuWhenHover(this.getMoreProps(),t);break;case"mousedown":this.props.onMouseDown&&this.props.onMouseDown(this.getMoreProps(),t);break;case"click":var a=this.getMoreProps();this.moreProps.hovering?this.props.onClickWhenHover(a,t):this.props.onClickOutside(a,t),this.props.onClick&&this.props.onClick(a,t);break;case"mousemove":var o=this.moreProps.hovering;this.moreProps.hovering=this.isHover(t);var i=this.context,s=i.amIOnTop,c=i.setCursorClass;this.moreProps.hovering&&!this.props.selected&&s(this.suscriberId)&&kd(this.props.onHover)?(c("react-stockcharts-pointer-cursor"),this.iSetTheCursorClass=!0):this.moreProps.hovering&&this.props.selected&&s(this.suscriberId)?(c(this.props.interactiveCursorClass),this.iSetTheCursorClass=!0):o&&!this.moreProps.hovering&&this.iSetTheCursorClass&&(this.iSetTheCursorClass=!1,c(null));var u=this.getMoreProps();this.moreProps.hovering&&!o&&this.props.onHover&&this.props.onHover(u,t),o&&!this.moreProps.hovering&&this.props.onUnHover&&this.props.onUnHover(u,t),this.props.onMouseMove&&this.props.onMouseMove(u,t);break;case"dblclick":var l=this.getMoreProps();this.props.onDoubleClick&&this.props.onDoubleClick(l,t),this.moreProps.hovering&&this.props.onDoubleClickWhenHover&&this.props.onDoubleClickWhenHover(l,t);break;case"pan":this.moreProps.hovering=!1,this.props.onPan&&this.props.onPan(this.getMoreProps(),t);break;case"panend":this.props.onPanEnd&&this.props.onPanEnd(this.getMoreProps(),t);break;case"dragstart":if(this.getPanConditions().draggable)(0,this.context.amIOnTop)(this.suscriberId)&&(this.dragInProgress=!0,this.props.onDragStart(this.getMoreProps(),t));this.someDragInProgress=!0;break;case"drag":this.dragInProgress&&this.props.onDrag&&this.props.onDrag(this.getMoreProps(),t);break;case"dragend":this.dragInProgress&&this.props.onDragComplete&&this.props.onDragComplete(this.getMoreProps(),t),this.dragInProgress=!1,this.someDragInProgress=!1;break;case"dragcancel":if(this.dragInProgress||this.iSetTheCursorClass)(0,this.context.setCursorClass)(null)}}},{key:"isHover",value:function(e){return!!kd(this.props.isHover)&&this.props.isHover(this.getMoreProps(),e)}},{key:"getPanConditions",value:function(){return{draggable:!(!this.props.selected||!this.moreProps.hovering)||this.props.enableDragOnHover&&this.moreProps.hovering,panEnabled:!this.props.disablePan}}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!1},t=e.trigger,n=e.force,r=Rp[t]||t,a=this.props.drawOn.indexOf(r)>-1;if(a||this.props.selected||n){var o=this.context.chartCanvasType,i=this.props.canvasDraw;if(Zd(i)||"svg"===o){var s=this.state.updateCount;this.setState({updateCount:s+1})}else this.drawOnCanvas()}}},{key:"componentWillMount",value:function(){var e=this.context,t=e.subscribe,n=e.chartId,r=this.props,a=r.clip,o=r.edgeClip;t(this.suscriberId,{chartId:n,clip:a,edgeClip:o,listener:this.listener,draw:this.draw,getPanConditions:this.getPanConditions}),this.componentWillReceiveProps(this.props,this.context)}},{key:"componentWillUnmount",value:function(){((0,this.context.unsubscribe)(this.suscriberId),this.iSetTheCursorClass)&&(0,this.context.setCursorClass)(null)}},{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.context.chartCanvasType,n=this.props,r=n.canvasDraw,a=n.selected,o=n.interactiveCursorClass;if(e.selected!==a){var i=this.context.setCursorClass;a&&this.moreProps.hovering?(this.iSetTheCursorClass=!0,i(o)):(this.iSetTheCursorClass=!1,i(null))}kd(r)&&!this.evaluationInProgress&&"svg"!==t&&(this.updateMoreProps(this.moreProps),this.drawOnCanvas())}},{key:"componentWillReceiveProps",value:function(e,t){var n=t.xScale,r=t.plotData,a=t.chartConfig,o=t.getMutableState;this.props.debug(t),this.moreProps=Gp({},this.moreProps,o(),{xScale:n,plotData:r,chartConfig:a})}},{key:"getMoreProps",value:function(){var e=this.context,t=e.xScale,n=e.plotData,r=e.chartConfig,a=e.morePropsDecorator,o=e.xAccessor,i=e.displayXAccessor,s=e.width,c=e.height,u=this.context,l=u.chartId,g=u.fullData,d=Gp({xScale:t,plotData:n,chartConfig:r,xAccessor:o,displayXAccessor:i,width:s,height:c,chartId:l,fullData:g},this.moreProps);return(a||ed)(d)}},{key:"preCanvasDraw",value:function(){}},{key:"postCanvasDraw",value:function(){}},{key:"drawOnCanvas",value:function(){var e=this.props,t=e.canvasDraw,n=e.canvasToDraw,r=this.context.getCanvasContexts,a=this.getMoreProps(),o=n(r());this.preCanvasDraw(o,a),t(o,a),this.postCanvasDraw(o,a)}},{key:"render",value:function(){var e=this.context,n=e.chartCanvasType,r=e.chartId,a=this.props,o=a.canvasDraw,i=a.clip,s=a.svgDraw;if(kd(o)&&"svg"!==n)return null;var c=kd(r)?"-"+r:"",u=i?{clipPath:"url(#chart-area-clip"+c+")"}:null;return t.createElement("g",{style:u},s(this.getMoreProps()))}}]),n}(t.Component);Wp.propTypes={svgDraw:lc().func.isRequired,canvasDraw:lc().func,drawOn:lc().array.isRequired,clip:lc().bool.isRequired,edgeClip:lc().bool.isRequired,interactiveCursorClass:lc().string,selected:lc().bool.isRequired,enableDragOnHover:lc().bool.isRequired,disablePan:lc().bool.isRequired,canvasToDraw:lc().func.isRequired,isHover:lc().func,onClick:lc().func,onClickWhenHover:lc().func,onClickOutside:lc().func,onPan:lc().func,onPanEnd:lc().func,onDragStart:lc().func,onDrag:lc().func,onDragComplete:lc().func,onDoubleClick:lc().func,onDoubleClickWhenHover:lc().func,onContextMenu:lc().func,onContextMenuWhenHover:lc().func,onMouseMove:lc().func,onMouseDown:lc().func,onHover:lc().func,onUnHover:lc().func,debug:lc().func},Wp.defaultProps={svgDraw:ld(null),draw:[],canvasToDraw:function(e){return e.mouseCoord},clip:!0,edgeClip:!1,selected:!1,disablePan:!1,enableDragOnHover:!1,onClickWhenHover:$g,onClickOutside:$g,onDragStart:$g,onMouseMove:$g,onMouseDown:$g,debug:$g},Wp.contextTypes={width:lc().number.isRequired,height:lc().number.isRequired,margin:lc().object.isRequired,chartId:lc().oneOfType([lc().number,lc().string]),getCanvasContexts:lc().func,chartCanvasType:lc().string,xScale:lc().func.isRequired,xAccessor:lc().func.isRequired,displayXAccessor:lc().func.isRequired,plotData:lc().array.isRequired,fullData:lc().array.isRequired,chartConfig:lc().oneOfType([lc().array,lc().object]).isRequired,morePropsDecorator:lc().func,generateSubscriptionId:lc().func,getMutableState:lc().func.isRequired,amIOnTop:lc().func.isRequired,subscribe:lc().func.isRequired,unsubscribe:lc().func.isRequired,setCursorClass:lc().func.isRequired};var Vp=Wp;var Np=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Jp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Fp=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0};var Ep=["drag","dragend"],Tp=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Jp(t,[{key:"preCanvasDraw",value:function(e,n){Fp(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"preCanvasDraw",this).call(this,e,n),e.save();var r=this.context,a=r.margin,o=r.ratio,i=n.chartConfig,s=.5*o+i.origin[0]+a.left,c=.5*o+i.origin[1]+a.top,u=n.chartConfig,l=u.width,g=u.height,d=this.props,p=d.clip,h=d.edgeClip;e.setTransform(1,0,0,1,0,0),e.scale(o,o),h&&(e.beginPath(),e.rect(-1,c-10,l+a.left+a.right+1,g+20),e.clip()),e.translate(s,c),p&&(e.beginPath(),e.rect(-1,-1,l+1,g+1),e.clip())}},{key:"postCanvasDraw",value:function(e,n){Fp(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCanvasDraw",this).call(this,e,n),e.restore()}},{key:"updateMoreProps",value:function(e){Fp(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMoreProps",this).call(this,e);var n=e.chartConfig;if(n&&Array.isArray(n)){var r=this.context.chartId,a=gd(n,(function(e){return e.id===r}));this.moreProps.chartConfig=a}if(kd(this.moreProps.chartConfig)){var o=Xp(this.moreProps.chartConfig.origin,2),i=o[0],s=o[1];if(kd(e.mouseXY)){var c=Xp(e.mouseXY,2),u=c[0],l=c[1];this.moreProps.mouseXY=[u-i,l-s]}if(kd(e.startPos)){var g=Xp(e.startPos,2),d=g[0],p=g[1];this.moreProps.startPos=[d-i,p-s]}}}},{key:"preEvaluate",value:function(){}},{key:"shouldTypeProceed",value:function(e,t){return!("mousemove"!==e&&"click"!==e||!this.props.disablePan)||(-1!==Ep.indexOf(e)||!kd(t)||!kd(t.currentCharts)||t.currentCharts.indexOf(this.context.chartId)>-1)}}]),t}(Vp);Tp.propTypes=Vp.propTypes,Tp.defaultProps=Vp.defaultProps,Tp.contextTypes=Np({},Vp.contextTypes,{canvasOriginX:lc().number,canvasOriginY:lc().number,chartId:lc().oneOfType([lc().number,lc().string]).isRequired,chartConfig:lc().object.isRequired,ratio:lc().number.isRequired});var Yp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Hp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mp(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Dp=function(e){function n(){return Hp(this,n),Mp(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),Yp(n,[{key:"componentDidMount",value:function(){if("svg"!==this.context.chartCanvasType&&kd(this.context.getCanvasContexts)){var e=this.context.getCanvasContexts();e&&n.drawOnCanvas(e.bg,this.props,this.context,this.props.children)}}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){if("svg"!==this.context.chartCanvasType)return null;var e=this.props,n={x:e.x,y:e.y,fill:e.fill,opacity:e.opacity,stroke:e.stroke,strokeOpacity:e.strokeOpacity,fontFamily:e.fontFamily,fontSize:e.fontSize,textAnchor:e.textAnchor};return t.createElement("text",n,"this.props.children(interval)")}}]),n}(sd);Dp.drawOnCanvas=function(e,t,n,r){var a=n.interval;e.clearRect(-1,-1,e.canvas.width+2,e.canvas.height+2),e.save(),e.setTransform(1,0,0,1,0,0),e.translate(.5,.5);var o=t.x,i=t.y,s=t.fill,c=t.opacity,u=t.stroke,l=t.strokeOpacity,g=t.fontFamily,d=t.fontSize,p=t.textAnchor,h=r(a);e.strokeStyle=Gd(u,l),e.font=d+"px "+g,e.fillStyle=Gd(s,c),e.textAlign="middle"===p?"center":p,"none"!==u&&e.strokeText(h,o,i),e.fillText(h,o,i),e.restore()},Dp.propTypes={x:lc().number.isRequired,y:lc().number.isRequired,fontFamily:lc().string,fontSize:lc().number.isRequired,fill:lc().string,stroke:lc().string,opacity:lc().number,strokeOpacity:lc().number,textAnchor:lc().string,children:lc().func},Dp.defaultProps={opacity:.3,fill:"#9E7523",stroke:"#9E7523",strokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,textAnchor:"middle"},Dp.contextTypes={interval:lc().string.isRequired,getCanvasContexts:lc().func,chartCanvasType:lc().string};var Kp=__webpack_require__(3339),zp=__webpack_require__(3135),Lp=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Pp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _p=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleZoomOut=t.handleZoomOut.bind(t),t.handleZoomIn=t.handleZoomIn.bind(t),t.zoom=t.zoom.bind(t),t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),Pp(n,[{key:"zoom",value:function(e){var t=this,n=this.context,r=n.xAxisZoom,a=n.xScale,o=n.plotData,i=a((0,n.xAccessor)(yd(o))),s=this.props.zoomMultiplier,c=e>0?1*s:1/s,u=a.domain(),l=Lp(u,2),g=l[0],d=l[1],p=a.range().map((function(e){return i+(e-i)*c})).map(a.invert),h=Lp(p,2),f=h[0],I=h[1],C=(0,zp.Z)(g,f),m=(0,zp.Z)(d,I),v=[.25,.3,.5,.6,.75,1].map((function(e){return[C(e),m(e)]}));this.interval=setInterval((function(){r(v.shift()),0===v.length&&(clearInterval(t.interval),delete t.interval)}),10)}},{key:"handleZoomOut",value:function(){this.interval||this.zoom(1)}},{key:"handleZoomIn",value:function(){this.interval||this.zoom(-1)}},{key:"render",value:function(){var e=this.context.chartConfig,n=e.width,r=e.height,a=this.props,o=a.size,i=a.heightFromBase,s=a.rx,c=a.ry,u=this.props,l=u.stroke,g=u.strokeOpacity,d=u.fill,p=u.strokeWidth,h=u.fillOpacity,f=this.props,I=f.textFill,C=f.textStrokeWidth,m=this.props.onReset,v=Math.round(n/2),b=r-i,A=Lp(o,2),y=A[0],k=A[1],Z=Math.round(b+k/2),S=v,w=(0,Kp.Z)(),B=v-y-2*p;w.moveTo(B-6,Z),w.lineTo(B+6,Z),w.closePath();var G=(0,Kp.Z)(),x=v+y+2*p;return G.moveTo(x-6,Z),G.lineTo(x+6,Z),G.moveTo(x,Z-5),G.lineTo(x,Z+5),t.createElement("g",{className:"react-stockcharts-zoom-button"},t.createElement("rect",{x:B-y/2,y:b,rx:s,ry:c,height:k,width:y,fill:d,fillOpacity:h,stroke:l,strokeOpacity:g,strokeWidth:p}),t.createElement("path",{d:w.toString(),stroke:I,strokeWidth:C}),t.createElement("rect",{x:S-y/2,y:b,rx:s,ry:c,height:k,width:y,fill:d,fillOpacity:h,stroke:l,strokeOpacity:g,strokeWidth:p}),t.createElement("g",{transform:"translate ("+S+", "+(b+k/4)+") scale(.14)"},t.createElement("path",{d:"M31 13C23.4 5.3 12.8.5 1.1.5c-23.3 0-42.3 19-42.3 42.5s18.9 42.5 42.3 42.5c13.8 0 26-6.6 33.7-16.9l-16.5-1.8C13.5 70.4 7.5 72.5 1 72.5c-16.2 0-29.3-13.2-29.3-29.4S-15.2 13.7 1 13.7c8.1 0 15.4 3.3 20.7 8.6l-10.9 11h32.5V.5L31 13z",fill:I})),t.createElement("rect",{x:x-y/2,y:b,rx:s,ry:c,height:k,width:y,fill:d,fillOpacity:h,stroke:l,strokeOpacity:g,strokeWidth:p}),t.createElement("path",{d:G.toString(),stroke:I,strokeWidth:C}),t.createElement("rect",{className:"react-stockcharts-enable-interaction out",onClick:this.handleZoomOut,x:B-y/2,y:b,rx:s,ry:c,height:k,width:y,fill:"none"}),t.createElement("rect",{className:"react-stockcharts-enable-interaction reset",onClick:m,x:S-y/2,y:b,rx:s,ry:c,height:k,width:y,fill:"none"}),t.createElement("rect",{className:"react-stockcharts-enable-interaction in",onClick:this.handleZoomIn,x:x-y/2,y:b,rx:s,ry:c,height:k,width:y,fill:"none"}))}}]),n}(t.Component);_p.propTypes={zoomMultiplier:lc().number.isRequired,size:lc().array.isRequired,heightFromBase:lc().number.isRequired,rx:lc().number.isRequired,ry:lc().number.isRequired,stroke:lc().string.isRequired,strokeWidth:lc().number.isRequired,strokeOpacity:lc().number.isRequired,fill:lc().string.isRequired,fillOpacity:lc().number.isRequired,fontSize:lc().number.isRequired,textDy:lc().string.isRequired,textFill:lc().string.isRequired,textStrokeWidth:lc().number.isRequired,onReset:lc().func},_p.defaultProps={size:[30,24],heightFromBase:50,rx:3,ry:3,stroke:"#000000",strokeOpacity:.3,strokeWidth:1,fill:"#D6D6D6",fillOpacity:.4,fontSize:16,textDy:".3em",textFill:"#000000",textStrokeWidth:2,zoomMultiplier:1.5,onReset:$g},_p.contextTypes={xScale:lc().func.isRequired,chartConfig:lc().object.isRequired,plotData:lc().array.isRequired,xAccessor:lc().func.isRequired,xAxisZoom:lc().func.isRequired};var Op=__webpack_require__(919),Up=__webpack_require__(2771),jp=__webpack_require__(464),Qp=__webpack_require__(5418),qp=function(e){var n=e.type,r=e.width,o=e.ratio,i=e.allData,s=x().search,c=Ss.parse(s),u=(c.periodid,c.sensortype,(0,t.useState)(null)),l=(0,a.Z)(u,2);l[0],l[1];(0,t.useEffect)((function(){console.log(n),console.log(r),console.log(o),console.log(i)}));return(0,_.jsx)("div",{className:"ChartJS",children:null!=i?(0,_.jsx)(Bp,{height:400,ratio:o,width:r,margin:{left:50,right:50,top:10,bottom:30},type:n,data:i,seriesName:"MSFT",xAccessor:function(e){return e.date},xScale:jg(),xExtents:[new Date,new Date(2021,1,15)],children:(0,_.jsxs)(Jd,{id:1,yExtents:function(e){return[e.high,e.low]},children:[(0,_.jsx)(Up.Kc,{axisAt:"bottom",orient:"bottom",ticks:10}),(0,_.jsx)(Up.B2,{axisAt:"left",orient:"left",ticks:5}),(0,_.jsx)(Op.$Y,{width:(0,Qp.timeIntervalBarWidth)(eu)})]})}):null})};qp.prototype={data:lc().array.isRequired,width:lc().number.isRequired,ratio:lc().number.isRequired,type:lc().oneOf(["svg","hybrid"]).isRequired},qp.defaultProps={type:"svg"};var $p=qp=(0,jp.V6)(qp),eh=function(){var e=x().search,n=Ss.parse(e),r=n.periodid,o=n.sensortype,i=(0,t.useState)([]),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)([]),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(["sensortype.sensortype","value","updatedAt","record.record"]),f=(0,a.Z)(h,2),I=f[0],C=(f[1],(0,t.useState)(["#","Sensor Type","Value","Updated Date","Record Type"])),m=(0,a.Z)(C,2),v=m[0],b=(m[1],(0,t.useState)([])),A=(0,a.Z)(b,2),y=A[0],k=A[1],Z=(0,t.useState)(!0),S=(0,a.Z)(Z,2),w=S[0],B=S[1];(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n,a,i,s,c,l,g;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/sensorrecord/query?periodid=").concat(r,"&sensortype=").concat(o));case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t=[];case 13:t.ok&&(u(t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})}))),p(t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})}))),t=t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})),a=t[0].updatedAt,i=t[0].value,s=t[0].value,c=t[0].value,l=t[0].value,g=[],t.map((function(e,n){n===t.length-1?(c=e.value>c?e.value:c,l=e.value<l?e.value:l,i=e.value,g.push({date:new Date(a),open:i,close:s,high:c,low:l})):e.updatedAt!=a?(g.push({date:new Date(a),open:i,close:s,high:c,low:l}),a=e.updatedAt,c=e.value,l=e.value,i=e.value,s=e.value):(i=e.value,c=e.value>c?e.value:c,l=e.value<l?e.value:l)})),k(g.sort((function(e,t){return e.date>t.date?1:-1}))),B(!1));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);return w?(0,_.jsx)(Ws,{}):(0,_.jsxs)(_.Fragment,{children:[y.length>1?(0,_.jsx)($p,{allData:y}):null,(0,_.jsx)("input",{className:"search-box",placeholder:"Search...",onChange:function(e){var t=e.target.value.toLowerCase(),n=d.filter((function(e){return"".concat(e.value," ").concat(e.updatedAt," ").concat(e.record.record).toLowerCase().includes(t)}));u(n)}}),(0,_.jsx)(ks,{data:c,header:v,accessor:I})]})};function th(e,t){if(null==e)return{};var n,r,a=(0,Vt.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var nh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh="object"===("undefined"===typeof window?"undefined":nh(window))&&"object"===("undefined"===typeof document?"undefined":nh(document))&&9===document.nodeType,ah={}.constructor;function oh(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(oh);if(e.constructor!==ah)return e;var t={};for(var n in e)t[n]=oh(e[n]);return t}function ih(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=oh(t),o=r.plugins.onCreateRule(e,a,n);return o||(e[0],null)}var sh=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},ch=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=sh(e[r]," ");else n=sh(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function uh(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function lh(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function gh(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,o=void 0===a?0:a,i=t.fallbacks;!1===n.format&&(o=-1/0);var s=uh(n),c=s.linebreak,u=s.space;if(e&&o++,i)if(Array.isArray(i))for(var l=0;l<i.length;l++){var g=i[l];for(var d in g){var p=g[d];null!=p&&(r&&(r+=c),r+=lh(d+":"+u+ch(p)+";",o))}}else for(var h in i){var f=i[h];null!=f&&(r&&(r+=c),r+=lh(h+":"+u+ch(f)+";",o))}for(var I in t){var C=t[I];null!=C&&"fallbacks"!==I&&(r&&(r+=c),r+=lh(I+":"+u+ch(C)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r=""+c+r+c),lh(""+e+u+"{"+r,--o)+lh("}",o)):r}var dh=/([[\].#*$><+~=|^:(),"'`\s])/g,ph="undefined"!==typeof CSS&&CSS.escape,hh=function(e){return ph?ph(e):e.replace(dh,"\\$1")},fh=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==a||!1===a,i=e in this.style;if(o&&!i&&!r)return this;var s=o&&i;if(s?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var c=this.options.sheet;return c&&c.attached,this},e}(),Ih=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var o=r.selector,i=r.scoped,s=r.sheet,c=r.generateId;return o?a.selectorText=o:!1!==i&&(a.id=c((0,ti.Z)((0,ti.Z)(a)),s),a.selectorText="."+hh(a.id)),a}Or(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=ch(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,l.Z)({},e,{allowEmpty:!0}):e;return gh(this.selectorText,this.style,n)},(0,Aa.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(fh),Ch={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Ih(e,t,n)}},mh={indent:1,children:!0},vh=/@([\w-]+)/,bh=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(vh);for(var a in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new zh((0,l.Z)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=mh);var t=uh(e).linebreak;if(null==e.indent&&(e.indent=mh.indent),null==e.children&&(e.children=mh.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),Ah=/@media|@supports\s+/,yh={onCreateRule:function(e,t,n){return Ah.test(e)?new bh(e,t,n):null}},kh={indent:1,children:!0},Zh=/@keyframes\s+([\w-]+)/,Sh=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(Zh);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,o=n.sheet,i=n.generateId;for(var s in this.id=!1===a?this.name:hh(i(this,o)),this.rules=new zh((0,l.Z)({},n,{parent:this})),t)this.rules.add(s,t[s],(0,l.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=kh);var t=uh(e).linebreak;if(null==e.indent&&(e.indent=kh.indent),null==e.children&&(e.children=kh.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),wh=/@keyframes\s+/,Bh=/\$([\w-]+)/g,Gh=function(e,t){return"string"===typeof e?e.replace(Bh,(function(e,n){return n in t?t[n]:e})):e},xh=function(e,t,n){var r=e[t],a=Gh(r,n);a!==r&&(e[t]=a)},Rh={onCreateRule:function(e,t,n){return"string"===typeof e&&wh.test(e)?new Sh(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&xh(e,"animation-name",n.keyframes),"animation"in e&&xh(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return Gh(e,r.keyframes);default:return e}}},Wh=function(e){function t(){return e.apply(this,arguments)||this}return Or(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,l.Z)({},e,{allowEmpty:!0}):e;return gh(this.key,this.style,n)},t}(fh),Vh={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new Wh(e,t,n):null}},Nh=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=uh(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=gh(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return gh(this.at,this.style,e)},e}(),Xh=/@font-face/,Jh={onCreateRule:function(e,t,n){return Xh.test(e)?new Nh(e,t,n):null}},Fh=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return gh(this.key,this.style,e)},e}(),Eh={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new Fh(e,t,n):null}},Th=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Yh={"@charset":!0,"@import":!0,"@namespace":!0},Hh={onCreateRule:function(e,t,n){return e in Yh?new Th(e,t,n):null}},Mh=[Ch,yh,Rh,Vh,Jh,Eh,Hh],Dh={process:!0},Kh={force:!0,process:!0},zh=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,a=r.parent,o=r.sheet,i=r.jss,s=r.Renderer,c=r.generateId,u=r.scoped,g=(0,l.Z)({classes:this.classes,parent:a,sheet:o,jss:i,Renderer:s,generateId:c,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(g.selector="."+hh(this.classes[d]));var p=ih(d,t,g);if(!p)return null;this.register(p);var h=void 0===g.index?this.index.length:g.index;return this.index.splice(h,0,p),p},t.replace=function(e,t,n){var r=this.get(e),a=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==a&&(o=(0,l.Z)({},n,{index:a})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Ih?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Sh&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Ih?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Sh&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=Dh);var a=this.options,o=a.jss.plugins,i=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(o.onUpdate(n,t,i,r),r.process&&s&&s!==t.style){for(var c in o.onProcessStyle(t.style,t,i),t.style){var u=t.style[c];u!==s[c]&&t.prop(c,u,Kh)}for(var l in s){var g=t.style[l],d=s[l];null==g&&g!==d&&t.prop(l,null,Kh)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=uh(e).linebreak,o=0;o<this.index.length;o++){var i=this.index[o].toString(e);(i||r)&&(t&&(t+=a),t+=i)}return t},e}(),Lh=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,l.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new zh(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Ph=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),_h=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,Vt.Z)(t,["attached"]),a=uh(r).linebreak,o="",i=0;i<this.registry.length;i++){var s=this.registry[i];null!=n&&s.attached!==n||(o&&(o+=a),o+=s.toString(r))}return o},(0,Aa.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),Oh=new _h,Uh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),jh="2f1acc6c3a606b082e5eef5e54414ffb";null==Uh[jh]&&(Uh[jh]=0);var Qh=Uh[jh]++,qh=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(o||"c")+Qh+a+t:o+n.key+"-"+Qh+(a?"-"+a:"")+"-"+t}},$h=function(e){var t;return function(){return t||(t=e()),t}},ef=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},tf=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=ch(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(a){return!1}return!0},nf=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},rf=function(e,t){return e.selectorText=t,e.selectorText===t},af=$h((function(){return document.querySelector("head")}));function of(e){var t=Oh.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=af(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var sf=$h((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),cf=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},uf=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},lf=function(){function e(e){this.getPropertyValue=ef,this.setProperty=tf,this.removeProperty=nf,this.setSelector=rf,this.hasInsertedRules=!1,this.cssRules=[],e&&Oh.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=sf();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=of(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,o=a.parentNode;o&&o.insertBefore(e,a.nextSibling)}else af().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var o=uf(n,t);if(!1===(a=cf(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,a)}return this.insertRules(r.rules,a),a}var i=e.toString();if(!i)return!1;var s=uf(n,t),c=cf(n,i,s);return!1!==c&&(this.hasInsertedRules=!0,this.refCssRule(e,s,c),c)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Lh&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),gf=0,df=function(){function e(e){this.id=gf++,this.version="10.9.0",this.plugins=new Ph,this.options={id:{minify:!1},createGenerateId:qh,Renderer:rh?lf:null,plugins:[]},this.generateId=qh({minify:!1});for(var t=0;t<Mh.length;t++)this.plugins.use(Mh[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,l.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===Oh.index?0:Oh.index+1);var r=new Lh(e,(0,l.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),Oh.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,l.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var a=ih(e,t,r);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),pf=function(e){return new df(e)},hf="object"===typeof CSS&&null!=CSS&&"number"in CSS;function ff(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var o=ff(r);o&&(t||(t={}),t[n]=o)}}return t}pf();function If(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,l.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var Cf={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},mf=Cf;var vf=t.createContext(null);function bf(){return t.useContext(vf)}var Af="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",yf=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var kf=Date.now(),Zf="fnValues"+kf,Sf="fnStyle"+ ++kf,wf=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=ih(e,{},n);return r[Sf]=t,r},onProcessStyle:function(e,t){if(Zf in t||Sf in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[Zf]=n,e},onUpdate:function(e,t,n,r){var a=t,o=a[Sf];o&&(a.style=o(e)||{});var i=a[Zf];if(i)for(var s in i)a.prop(s,i[s](e),r)}}},Bf="@global",Gf="@global ",xf=function(){function e(e,t,n){for(var r in this.type="global",this.at=Bf,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new zh((0,l.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Rf=function(){function e(e,t,n){this.type="global",this.at=Bf,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(Gf.length);this.rule=n.jss.createRule(r,t,(0,l.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Wf=/\s*,\s*/g;function Vf(e,t){for(var n=e.split(Wf),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var Nf=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Bf)return new xf(e,t,n);if("@"===e[0]&&e.substr(0,Gf.length)===Gf)return new Rf(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,a=r?r[Bf]:null;if(a){for(var o in a)t.addRule(o,a[o],(0,l.Z)({},n,{selector:Vf(o,e.selector)}));delete r[Bf]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var a in r)if("@"===a[0]&&a.substr(0,Bf.length)===Bf){var o=Vf(a.substr(Bf.length),e.selector);t.addRule(o,r[a],(0,l.Z)({},n,{selector:o})),delete r[a]}}(e,t))}}},Xf=/\s*,\s*/g,Jf=/&/g,Ff=/\$([\w-]+)/g;var Ef=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(Xf),r=e.split(Xf),a="",o=0;o<n.length;o++)for(var i=n[o],s=0;s<r.length;s++){var c=r[s];a&&(a+=", "),a+=-1!==c.indexOf("&")?c.replace(Jf,i):i+" "+c}return a}function n(e,t,n){if(n)return(0,l.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var a=(0,l.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(r,a,o){if("style"!==a.type)return r;var i,s,c=a,u=c.options.parent;for(var g in r){var d=-1!==g.indexOf("&"),p="@"===g[0];if(d||p){if(i=n(c,u,i),d){var h=t(g,c.selector);s||(s=e(u,o)),h=h.replace(Ff,s);var f=c.key+"-"+g;"replaceRule"in u?u.replaceRule(f,r[g],(0,l.Z)({},i,{selector:h})):u.addRule(f,r[g],(0,l.Z)({},i,{selector:h}))}else p&&u.addRule(g,{},i).addRule(c.key,r[g],{selector:c.selector});delete r[g]}}return r}}},Tf=/[A-Z]/g,Yf=/^ms-/,Hf={};function Mf(e){return"-"+e.toLowerCase()}var Df=function(e){if(Hf.hasOwnProperty(e))return Hf[e];var t=e.replace(Tf,Mf);return Hf[e]=Yf.test(t)?"-"+t:t};function Kf(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Df(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Kf):t.fallbacks=Kf(e.fallbacks)),t}var zf=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Kf(e[t]);return e}return Kf(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Df(t);return t===r?e:(n.prop(r,e),null)}}},Lf=hf&&CSS?CSS.px:"px",Pf=hf&&CSS?CSS.ms:"ms",_f=hf&&CSS?CSS.percent:"%";function Of(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var Uf=Of({"animation-delay":Pf,"animation-duration":Pf,"background-position":Lf,"background-position-x":Lf,"background-position-y":Lf,"background-size":Lf,border:Lf,"border-bottom":Lf,"border-bottom-left-radius":Lf,"border-bottom-right-radius":Lf,"border-bottom-width":Lf,"border-left":Lf,"border-left-width":Lf,"border-radius":Lf,"border-right":Lf,"border-right-width":Lf,"border-top":Lf,"border-top-left-radius":Lf,"border-top-right-radius":Lf,"border-top-width":Lf,"border-width":Lf,"border-block":Lf,"border-block-end":Lf,"border-block-end-width":Lf,"border-block-start":Lf,"border-block-start-width":Lf,"border-block-width":Lf,"border-inline":Lf,"border-inline-end":Lf,"border-inline-end-width":Lf,"border-inline-start":Lf,"border-inline-start-width":Lf,"border-inline-width":Lf,"border-start-start-radius":Lf,"border-start-end-radius":Lf,"border-end-start-radius":Lf,"border-end-end-radius":Lf,margin:Lf,"margin-bottom":Lf,"margin-left":Lf,"margin-right":Lf,"margin-top":Lf,"margin-block":Lf,"margin-block-end":Lf,"margin-block-start":Lf,"margin-inline":Lf,"margin-inline-end":Lf,"margin-inline-start":Lf,padding:Lf,"padding-bottom":Lf,"padding-left":Lf,"padding-right":Lf,"padding-top":Lf,"padding-block":Lf,"padding-block-end":Lf,"padding-block-start":Lf,"padding-inline":Lf,"padding-inline-end":Lf,"padding-inline-start":Lf,"mask-position-x":Lf,"mask-position-y":Lf,"mask-size":Lf,height:Lf,width:Lf,"min-height":Lf,"max-height":Lf,"min-width":Lf,"max-width":Lf,bottom:Lf,left:Lf,top:Lf,right:Lf,inset:Lf,"inset-block":Lf,"inset-block-end":Lf,"inset-block-start":Lf,"inset-inline":Lf,"inset-inline-end":Lf,"inset-inline-start":Lf,"box-shadow":Lf,"text-shadow":Lf,"column-gap":Lf,"column-rule":Lf,"column-rule-width":Lf,"column-width":Lf,"font-size":Lf,"font-size-delta":Lf,"letter-spacing":Lf,"text-decoration-thickness":Lf,"text-indent":Lf,"text-stroke":Lf,"text-stroke-width":Lf,"word-spacing":Lf,motion:Lf,"motion-offset":Lf,outline:Lf,"outline-offset":Lf,"outline-width":Lf,perspective:Lf,"perspective-origin-x":_f,"perspective-origin-y":_f,"transform-origin":_f,"transform-origin-x":_f,"transform-origin-y":_f,"transform-origin-z":_f,"transition-delay":Pf,"transition-duration":Pf,"vertical-align":Lf,"flex-basis":Lf,"shape-margin":Lf,size:Lf,gap:Lf,grid:Lf,"grid-gap":Lf,"row-gap":Lf,"grid-row-gap":Lf,"grid-column-gap":Lf,"grid-template-rows":Lf,"grid-template-columns":Lf,"grid-auto-rows":Lf,"grid-auto-columns":Lf,"box-shadow-x":Lf,"box-shadow-y":Lf,"box-shadow-blur":Lf,"box-shadow-spread":Lf,"font-line-height":Lf,"text-shadow-x":Lf,"text-shadow-y":Lf,"text-shadow-blur":Lf});function jf(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=jf(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=jf(a,t[a],n);else for(var o in t)t[o]=jf(e+"-"+o,t[o],n);else if("number"===typeof t&&!1===isNaN(t)){var i=n[e]||Uf[e];return!i||0===t&&i===Lf?t.toString():"function"===typeof i?i(t).toString():""+t+i}return t}var Qf=function(e){void 0===e&&(e={});var t=Of(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=jf(r,e[r],t);return e},onChangeValue:function(e,n){return jf(n,e,t)}}},qf="",$f="",eI="",tI="",nI=rh&&"ontouchstart"in document.documentElement;if(rh){var rI={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},aI=document.createElement("p").style;for(var oI in rI)if(oI+"Transform"in aI){qf=oI,$f=rI[oI];break}"Webkit"===qf&&"msHyphens"in aI&&(qf="ms",$f=rI.ms,tI="edge"),"Webkit"===qf&&"-apple-trailing-word"in aI&&(eI="apple")}var iI=qf,sI=$f,cI=eI,uI=tI,lI=nI;var gI={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===iI?"-webkit-"+e:sI+e)}},dI={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===iI?sI+"print-"+e:e)}},pI=/[-\s]+(.)?/g;function hI(e,t){return t?t.toUpperCase():""}function fI(e){return e.replace(pI,hI)}function II(e){return fI("-"+e)}var CI,mI={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===iI){var n="mask-image";if(fI(n)in t)return e;if(iI+II(n)in t)return sI+e}return e}},vI={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==cI||lI?e:sI+e)}},bI={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:sI+e)}},AI={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:sI+e)}},yI={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===iI||"ms"===iI&&"edge"!==uI?sI+e:e)}},kI={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===iI||"ms"===iI||"apple"===cI?sI+e:e)}},ZI={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===iI?"WebkitColumn"+II(e)in t&&sI+"column-"+e:"Moz"===iI&&("page"+II(e)in t&&"page-"+e))}},SI={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===iI)return e;var n=e.replace("-inline","");return iI+II(n)in t&&sI+n}},wI={supportedProperty:function(e,t){return fI(e)in t&&e}},BI={supportedProperty:function(e,t){var n=II(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:iI+n in t?sI+e:"Webkit"!==iI&&"Webkit"+n in t&&"-webkit-"+e}},GI={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===iI?""+sI+e:e)}},xI={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===iI?sI+"scroll-chaining":e)}},RI={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},WI={supportedProperty:function(e,t){var n=RI[e];return!!n&&(iI+II(n)in t&&sI+n)}},VI={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},NI=Object.keys(VI),XI=function(e){return sI+e},JI={supportedProperty:function(e,t,n){var r=n.multiple;if(NI.indexOf(e)>-1){var a=VI[e];if(!Array.isArray(a))return iI+II(a)in t&&sI+a;if(!r)return!1;for(var o=0;o<a.length;o++)if(!(iI+II(a[0])in t))return!1;return a.map(XI)}return!1}},FI=[gI,dI,mI,vI,bI,AI,yI,kI,ZI,SI,wI,BI,GI,xI,WI,JI],EI=FI.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),TI=FI.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,Yt.Z)(t.noPrefill)),e}),[]),YI={};if(rh){CI=document.createElement("p");var HI=window.getComputedStyle(document.documentElement,"");for(var MI in HI)isNaN(MI)||(YI[HI[MI]]=HI[MI]);TI.forEach((function(e){return delete YI[e]}))}function DI(e,t){if(void 0===t&&(t={}),!CI)return e;if(null!=YI[e])return YI[e];"transition"!==e&&"transform"!==e||(t[e]=e in CI.style);for(var n=0;n<EI.length&&(YI[e]=EI[n](e,CI.style,t),!YI[e]);n++);try{CI.style[e]=""}catch(r){return!1}return YI[e]}var KI,zI={},LI={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},PI=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function _I(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?DI(t):", "+DI(n);return r||(t||n)}function OI(e,t){var n=t;if(!KI||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=zI[r])return zI[r];try{KI.style[e]=n}catch(a){return zI[r]=!1,!1}if(LI[e])n=n.replace(PI,_I);else if(""===KI.style[e]&&("-ms-flex"===(n=sI+n)&&(KI.style[e]="-ms-flexbox"),KI.style[e]=n,""===KI.style[e]))return zI[r]=!1,!1;return KI.style[e]="",zI[r]=n,zI[r]}rh&&(KI=document.createElement("p"));var UI=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,o=DI(n);o&&o!==n&&(a=!0);var i=!1,s=OI(o,ch(r));s&&s!==r&&(i=!0),(a||i)&&(a&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===iI?e:"@"+sI+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return OI(t,ch(e))||e}}};var jI=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),o=0;o<a.length;o++)r[a[o]]=t[a[o]];return r}}};var QI=pf({plugins:[wf(),Nf(),Ef(),zf(),Qf(),"undefined"===typeof window?null:UI(),jI()]}),qI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,o=e.seed,i=void 0===o?"":o,s=""===i?"":"".concat(i,"-"),c=0,u=function(){return c+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==yf.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[Af]&&""===i?"".concat(o,"-").concat(u()):o}return"".concat(s).concat(a).concat(u())}}(),$I={disableGeneration:!1,generateClassName:qI,jss:QI,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},eC=t.createContext($I);var tC=-1e9;function nC(){return tC+=1}var rC=__webpack_require__(7478);function aC(e){return e&&"object"===(0,rC.Z)(e)&&e.constructor===Object}function oC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,l.Z)({},e):e;return aC(e)&&aC(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(aC(t[a])&&a in e?r[a]=oC(e[a],t[a],n):r[a]=t[a])})),r}function iC(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return a;var o=n.overrides[r],i=(0,l.Z)({},a);return Object.keys(o).forEach((function(e){i[e]=oC(i[e],o[e])})),i},options:{}}}var sC={};function cC(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=If({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function uC(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,o=e.stylesCreator,i=e.name;if(!a.disableGeneration){var s=mf.get(a.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},mf.set(a.sheetsManager,o,r,s));var c=(0,l.Z)({},o.options,a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var u=a.sheetsRegistry;if(0===s.refs){var g;a.sheetsCache&&(g=mf.get(a.sheetsCache,o,r));var d=o.create(r,i);g||((g=a.jss.createStyleSheet(d,(0,l.Z)({link:!1},c))).attach(),a.sheetsCache&&mf.set(a.sheetsCache,o,r,g)),u&&u.add(g),s.staticSheet=g,s.dynamicStyles=ff(d)}if(s.dynamicStyles){var p=a.jss.createStyleSheet(s.dynamicStyles,(0,l.Z)({link:!0},c));p.update(t),p.attach(),n.dynamicSheet=p,n.classes=If({baseClasses:s.staticSheet.classes,newClasses:p.classes}),u&&u.add(p)}else n.classes=s.staticSheet.classes;s.refs+=1}}function lC(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function gC(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var o=mf.get(r.sheetsManager,a,n);o.refs-=1;var i=r.sheetsRegistry;0===o.refs&&(mf.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(o.staticSheet),i&&i.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),i&&i.remove(t.dynamicSheet))}}function dC(e,n){var r,a=t.useRef([]),o=t.useMemo((function(){return{}}),n);a.current!==o&&(a.current=o,r=e()),t.useEffect((function(){return function(){r&&r()}}),[o])}function pC(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,a=n.classNamePrefix,o=n.Component,i=n.defaultTheme,s=void 0===i?sC:i,c=th(n,["name","classNamePrefix","Component","defaultTheme"]),u=iC(e),g=r||a||"makeStyles";u.options={index:nC(),name:r,meta:g,classNamePrefix:g};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=bf()||s,a=(0,l.Z)({},t.useContext(eC),c),i=t.useRef(),g=t.useRef();dC((function(){var t={name:r,state:{},stylesCreator:u,stylesOptions:a,theme:n};return uC(t,e),g.current=!1,i.current=t,function(){gC(t)}}),[n,u]),t.useEffect((function(){g.current&&lC(i.current,e),g.current=!0}));var d=cC(i.current,e.classes,o);return d};return d}function hC(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,o=t.props[n];for(a in o)void 0===r[a]&&(r[a]=o[a]);return r}var fC=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var a=n.defaultTheme,o=n.withTheme,i=void 0!==o&&o,s=n.name,c=th(n,["defaultTheme","withTheme","name"]);var u=s,g=pC(e,(0,l.Z)({defaultTheme:a,Component:r,name:s||r.displayName,classNamePrefix:u},c)),d=t.forwardRef((function(e,n){e.classes;var o,c=e.innerRef,u=th(e,["classes","innerRef"]),d=g((0,l.Z)({},r.defaultProps,e)),p=u;return("string"===typeof s||i)&&(o=bf()||a,s&&(p=hC({theme:o,name:s,props:u})),i&&!p.theme&&(p.theme=o)),t.createElement(r,(0,l.Z)({ref:c||n,classes:d},p))}));return ie()(d,r),d}},IC=["xs","sm","md","lg","xl"];function CC(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,o=e.step,i=void 0===o?5:o,s=th(e,["values","unit","step"]);function c(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function u(e,t){var r=IC.indexOf(t);return r===IC.length-1?c(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[IC[r+1]]?n[IC[r+1]]:t)-i/100).concat(a,")")}return(0,l.Z)({keys:IC,values:n,up:c,down:function(e){var t=IC.indexOf(e)+1,r=n[IC[t]];return t===IC.length?c("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-i/100).concat(a,")")},between:u,only:function(e){return u(e,e)},width:function(e){return n[e]}},s)}function mC(e,t,n){var r;return(0,l.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,l.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,Tt.Z)({},e.up("sm"),(0,l.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,Tt.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,Tt.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}function vC(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var bC={black:"#000",white:"#fff"},AC={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},yC={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},kC={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},ZC={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},SC={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},wC={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},BC={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function GC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function xC(e){if(e.type)return e;if("#"===e.charAt(0))return xC(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(vC(3,e));var r=e.substring(t+1,e.length-1).split(",");return r=r.map((function(e){return parseFloat(e)})),{type:n,values:r}}function RC(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function WC(e){var t="hsl"===(e=xC(e)).type?xC(function(e){var t=(e=xC(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,o=r*Math.min(a,1-a),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",c=[Math.round(255*i(0)),Math.round(255*i(8)),Math.round(255*i(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),RC({type:s,values:c})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function VC(e,t){return e=xC(e),t=GC(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,RC(e)}function NC(e,t){if(e=xC(e),t=GC(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return RC(e)}function XC(e,t){if(e=xC(e),t=GC(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return RC(e)}var JC={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:bC.white,default:AC[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},FC={text:{primary:bC.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:AC[800],default:"#303030"},action:{active:bC.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function EC(e,t,n,r){var a=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=XC(e.main,a):"dark"===t&&(e.dark=NC(e.main,o)))}function TC(e){var t=e.primary,n=void 0===t?{light:yC[300],main:yC[500],dark:yC[700]}:t,r=e.secondary,a=void 0===r?{light:kC.A200,main:kC.A400,dark:kC.A700}:r,o=e.error,i=void 0===o?{light:ZC[300],main:ZC[500],dark:ZC[700]}:o,s=e.warning,c=void 0===s?{light:SC[300],main:SC[500],dark:SC[700]}:s,u=e.info,g=void 0===u?{light:wC[300],main:wC[500],dark:wC[700]}:u,d=e.success,p=void 0===d?{light:BC[300],main:BC[500],dark:BC[700]}:d,h=e.type,f=void 0===h?"light":h,I=e.contrastThreshold,C=void 0===I?3:I,m=e.tonalOffset,v=void 0===m?.2:m,b=th(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function A(e){var t=function(e,t){var n=WC(e),r=WC(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,FC.text.primary)>=C?FC.text.primary:JC.text.primary;return t}var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,l.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(vC(4,t));if("string"!==typeof e.main)throw new Error(vC(5,JSON.stringify(e.main)));return EC(e,"light",n,v),EC(e,"dark",r,v),e.contrastText||(e.contrastText=A(e.main)),e},k={dark:FC,light:JC};return oC((0,l.Z)({common:bC,type:f,primary:y(n),secondary:y(a,"A400","A200","A700"),error:y(i),warning:y(c),info:y(g),success:y(p),grey:AC,contrastThreshold:C,getContrastText:A,augmentColor:y,tonalOffset:v},k[f]),b)}function YC(e){return Math.round(1e5*e)/1e5}function HC(e){return YC(e)}var MC={textTransform:"uppercase"},DC='"Roboto", "Helvetica", "Arial", sans-serif';function KC(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?DC:r,o=n.fontSize,i=void 0===o?14:o,s=n.fontWeightLight,c=void 0===s?300:s,u=n.fontWeightRegular,g=void 0===u?400:u,d=n.fontWeightMedium,p=void 0===d?500:d,h=n.fontWeightBold,f=void 0===h?700:h,I=n.htmlFontSize,C=void 0===I?16:I,m=n.allVariants,v=n.pxToRem,b=th(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var A=i/14,y=v||function(e){return"".concat(e/C*A,"rem")},k=function(e,t,n,r,o){return(0,l.Z)({fontFamily:a,fontWeight:e,fontSize:y(t),lineHeight:n},a===DC?{letterSpacing:"".concat(YC(r/t),"em")}:{},o,m)},Z={h1:k(c,96,1.167,-1.5),h2:k(c,60,1.2,-.5),h3:k(g,48,1.167,0),h4:k(g,34,1.235,.25),h5:k(g,24,1.334,0),h6:k(p,20,1.6,.15),subtitle1:k(g,16,1.75,.15),subtitle2:k(p,14,1.57,.1),body1:k(g,16,1.5,.15),body2:k(g,14,1.43,.15),button:k(p,14,1.75,.4,MC),caption:k(g,12,1.66,.4),overline:k(g,12,2.66,1,MC)};return oC((0,l.Z)({htmlFontSize:C,pxToRem:y,round:HC,fontFamily:a,fontSize:i,fontWeightLight:c,fontWeightRegular:g,fontWeightMedium:p,fontWeightBold:f},Z),b,{clone:!1})}function zC(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var LC=["none",zC(0,2,1,-1,0,1,1,0,0,1,3,0),zC(0,3,1,-2,0,2,2,0,0,1,5,0),zC(0,3,3,-2,0,3,4,0,0,1,8,0),zC(0,2,4,-1,0,4,5,0,0,1,10,0),zC(0,3,5,-1,0,5,8,0,0,1,14,0),zC(0,3,5,-1,0,6,10,0,0,1,18,0),zC(0,4,5,-2,0,7,10,1,0,2,16,1),zC(0,5,5,-3,0,8,10,1,0,3,14,2),zC(0,5,6,-3,0,9,12,1,0,3,16,2),zC(0,6,6,-3,0,10,14,1,0,4,18,3),zC(0,6,7,-4,0,11,15,1,0,4,20,3),zC(0,7,8,-4,0,12,17,2,0,5,22,4),zC(0,7,8,-4,0,13,19,2,0,5,24,4),zC(0,7,9,-4,0,14,21,2,0,5,26,4),zC(0,8,9,-5,0,15,22,2,0,6,28,5),zC(0,8,10,-5,0,16,24,2,0,6,30,5),zC(0,8,11,-5,0,17,26,2,0,6,32,5),zC(0,9,11,-5,0,18,28,2,0,7,34,6),zC(0,9,12,-6,0,19,29,2,0,7,36,6),zC(0,10,13,-6,0,20,31,3,0,8,38,7),zC(0,10,13,-6,0,21,33,3,0,8,40,7),zC(0,10,14,-6,0,22,35,3,0,8,42,7),zC(0,11,14,-7,0,23,36,3,0,9,44,8),zC(0,11,15,-7,0,24,38,3,0,9,46,8)],PC={borderRadius:4},_C={xs:0,sm:600,md:960,lg:1280,xl:1920},OC={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(_C[e],"px)")}};var UC=function(e,t){return t?oC(e,t,{clone:!1}):e};var jC={m:"margin",p:"padding"},QC={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},qC={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},$C=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!qC[e])return[e];e=qC[e]}var t=e.split(""),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=jC[r],s=QC[o]||"";return Array.isArray(s)?s.map((function(e){return i+e})):[i+s]})),em=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function tm(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function nm(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function rm(e){var t=tm(e.theme);return Object.keys(e).map((function(n){if(-1===em.indexOf(n))return null;var r=nm($C(n),t),a=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||OC;return t.reduce((function(e,a,o){return e[r.up(r.keys[o])]=n(t[o]),e}),{})}if("object"===(0,rC.Z)(t)){var a=e.theme.breakpoints||OC;return Object.keys(t).reduce((function(e,r){return e[a.up(r)]=n(t[r]),e}),{})}return n(t)}(e,a,r)})).reduce(UC,{})}rm.propTypes={},rm.filterProps=em;function am(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=tm({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var om={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},im={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function sm(e){return"".concat(Math.round(e),"ms")}var cm={easing:om,duration:im,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?im.standard:n,a=t.easing,o=void 0===a?om.easeInOut:a,i=t.delay,s=void 0===i?0:i;th(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:sm(r)," ").concat(o," ").concat("string"===typeof s?s:sm(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},um={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function lm(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,a=void 0===r?{}:r,o=e.palette,i=void 0===o?{}:o,s=e.spacing,c=e.typography,u=void 0===c?{}:c,l=th(e,["breakpoints","mixins","palette","spacing","typography"]),g=TC(i),d=CC(n),p=am(s),h=oC({breakpoints:d,direction:"ltr",mixins:mC(d,p,a),overrides:{},palette:g,props:{},shadows:LC,typography:KC(g,u),spacing:p,shape:PC,transitions:cm,zIndex:um},l),f=arguments.length,I=new Array(f>1?f-1:0),C=1;C<f;C++)I[C-1]=arguments[C];return h=I.reduce((function(e,t){return oC(e,t)}),h)}var gm=lm();var dm=function(e,t){return fC(e,(0,l.Z)({defaultTheme:gm},t))};function pm(e){if("string"!==typeof e)throw new Error(vC(7));return e.charAt(0).toUpperCase()+e.slice(1)}var hm=t.forwardRef((function(e,n){var r=e.classes,a=e.className,o=e.component,i=void 0===o?"div":o,s=e.disableGutters,c=void 0!==s&&s,u=e.fixed,g=void 0!==u&&u,d=e.maxWidth,p=void 0===d?"lg":d,h=th(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return t.createElement(i,(0,l.Z)({className:(0,Nt.Z)(r.root,a,g&&r.fixed,c&&r.disableGutters,!1!==p&&r["maxWidth".concat(pm(String(p)))]),ref:n},h))})),fm=dm((function(e){return{root:(0,Tt.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:(0,Tt.Z)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:(0,Tt.Z)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:(0,Tt.Z)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:(0,Tt.Z)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:(0,Tt.Z)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(hm),Im=t.forwardRef((function(e,n){var r=e.classes,a=e.className,o=e.component,i=void 0===o?"div":o,s=e.square,c=void 0!==s&&s,u=e.elevation,g=void 0===u?1:u,d=e.variant,p=void 0===d?"elevation":d,h=th(e,["classes","className","component","square","elevation","variant"]);return t.createElement(i,(0,l.Z)({className:(0,Nt.Z)(r.root,a,"outlined"===p?r.outlined:r["elevation".concat(g)],!c&&r.rounded),ref:n},h))})),Cm=dm((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),(0,l.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(Im),mm=t.forwardRef((function(e,n){var r=e.classes,a=e.className,o=e.raised,i=void 0!==o&&o,s=th(e,["classes","className","raised"]);return t.createElement(Cm,(0,l.Z)({className:(0,Nt.Z)(r.root,a),elevation:i?8:1,ref:n},s))})),vm=dm({root:{overflow:"hidden"}},{name:"MuiCard"})(mm),bm=t.forwardRef((function(e,n){var r=e.classes,a=e.className,o=e.component,i=void 0===o?"div":o,s=th(e,["classes","className","component"]);return t.createElement(i,(0,l.Z)({className:(0,Nt.Z)(r.root,a),ref:n},s))})),Am=dm({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(bm),ym=[0,1,2,3,4,5,6,7,8,9,10],km=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function Zm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var Sm=t.forwardRef((function(e,n){var r=e.alignContent,a=void 0===r?"stretch":r,o=e.alignItems,i=void 0===o?"stretch":o,s=e.classes,c=e.className,u=e.component,g=void 0===u?"div":u,d=e.container,p=void 0!==d&&d,h=e.direction,f=void 0===h?"row":h,I=e.item,C=void 0!==I&&I,m=e.justify,v=e.justifyContent,b=void 0===v?"flex-start":v,A=e.lg,y=void 0!==A&&A,k=e.md,Z=void 0!==k&&k,S=e.sm,w=void 0!==S&&S,B=e.spacing,G=void 0===B?0:B,x=e.wrap,R=void 0===x?"wrap":x,W=e.xl,V=void 0!==W&&W,N=e.xs,X=void 0!==N&&N,J=e.zeroMinWidth,F=void 0!==J&&J,E=th(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),T=(0,Nt.Z)(s.root,c,p&&[s.container,0!==G&&s["spacing-xs-".concat(String(G))]],C&&s.item,F&&s.zeroMinWidth,"row"!==f&&s["direction-xs-".concat(String(f))],"wrap"!==R&&s["wrap-xs-".concat(String(R))],"stretch"!==i&&s["align-items-xs-".concat(String(i))],"stretch"!==a&&s["align-content-xs-".concat(String(a))],"flex-start"!==(m||b)&&s["justify-content-xs-".concat(String(m||b))],!1!==X&&s["grid-xs-".concat(String(X))],!1!==w&&s["grid-sm-".concat(String(w))],!1!==Z&&s["grid-md-".concat(String(Z))],!1!==y&&s["grid-lg-".concat(String(y))],!1!==V&&s["grid-xl-".concat(String(V))]);return t.createElement(g,(0,l.Z)({className:T,ref:n},E))})),wm=dm((function(e){return(0,l.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return ym.forEach((function(r){var a=e.spacing(r);0!==a&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(Zm(a,2)),width:"calc(100% + ".concat(Zm(a),")"),"& > $item":{padding:Zm(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};km.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,l.Z)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(Sm),Bm=wm;function Gm(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var xm=t.createContext();var Rm=xm;function Wm(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Vm(e,n){return t.useMemo((function(){return null==e&&null==n?null:function(t){Wm(e,t),Wm(n,t)}}),[e,n])}function Nm(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=this,s=function(){e.apply(i,a)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}function Xm(e,t){return parseInt(e[t],10)||0}var Jm="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,Fm={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Em=t.forwardRef((function(e,n){var r=e.onChange,a=e.rows,o=e.rowsMax,i=e.rowsMin,s=e.maxRows,c=e.minRows,u=void 0===c?1:c,g=e.style,d=e.value,p=th(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),h=s||o,f=a||i||u,I=t.useRef(null!=d).current,C=t.useRef(null),m=Vm(n,C),v=t.useRef(null),b=t.useRef(0),A=t.useState({}),y=A[0],k=A[1],Z=t.useCallback((function(){var t=C.current,n=window.getComputedStyle(t),r=v.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],o=Xm(n,"padding-bottom")+Xm(n,"padding-top"),i=Xm(n,"border-bottom-width")+Xm(n,"border-top-width"),s=r.scrollHeight-o;r.value="x";var c=r.scrollHeight-o,u=s;f&&(u=Math.max(Number(f)*c,u)),h&&(u=Math.min(Number(h)*c,u));var l=(u=Math.max(u,c))+("border-box"===a?o+i:0),g=Math.abs(u-s)<=1;k((function(e){return b.current<20&&(l>0&&Math.abs((e.outerHeightStyle||0)-l)>1||e.overflow!==g)?(b.current+=1,{overflow:g,outerHeightStyle:l}):e}))}),[h,f,e.placeholder]);t.useEffect((function(){var e=Nm((function(){b.current=0,Z()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[Z]),Jm((function(){Z()})),t.useEffect((function(){b.current=0}),[d]);return t.createElement(t.Fragment,null,t.createElement("textarea",(0,l.Z)({value:d,onChange:function(e){b.current=0,I||Z(),r&&r(e)},ref:m,rows:f,style:(0,l.Z)({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},g)},p)),t.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:(0,l.Z)({},Fm,g)}))})),Tm=Em;function Ym(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Hm(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Ym(e.value)&&""!==e.value||t&&Ym(e.defaultValue)&&""!==e.defaultValue)}var Mm="undefined"===typeof window?t.useEffect:t.useLayoutEffect,Dm=t.forwardRef((function(e,n){var r=e["aria-describedby"],a=e.autoComplete,o=e.autoFocus,i=e.classes,s=e.className,c=(e.color,e.defaultValue),u=e.disabled,g=e.endAdornment,d=(e.error,e.fullWidth),p=void 0!==d&&d,h=e.id,f=e.inputComponent,I=void 0===f?"input":f,C=e.inputProps,m=void 0===C?{}:C,v=e.inputRef,b=(e.margin,e.multiline),A=void 0!==b&&b,y=e.name,k=e.onBlur,Z=e.onChange,S=e.onClick,w=e.onFocus,B=e.onKeyDown,G=e.onKeyUp,x=e.placeholder,R=e.readOnly,W=e.renderSuffix,V=e.rows,N=e.rowsMax,X=e.rowsMin,J=e.maxRows,F=e.minRows,E=e.startAdornment,T=e.type,Y=void 0===T?"text":T,H=e.value,M=th(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),D=null!=m.value?m.value:H,K=t.useRef(null!=D).current,z=t.useRef(),L=t.useCallback((function(e){0}),[]),P=Vm(m.ref,L),_=Vm(v,P),O=Vm(z,_),U=t.useState(!1),j=U[0],Q=U[1],q=t.useContext(xm);var $=Gm({props:e,muiFormControl:q,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});$.focused=q?q.focused:j,t.useEffect((function(){!q&&u&&j&&(Q(!1),k&&k())}),[q,u,j,k]);var ee=q&&q.onFilled,te=q&&q.onEmpty,ne=t.useCallback((function(e){Hm(e)?ee&&ee():te&&te()}),[ee,te]);Mm((function(){K&&ne({value:D})}),[D,ne,K]);t.useEffect((function(){ne(z.current)}),[]);var re=I,ae=(0,l.Z)({},m,{ref:O});"string"!==typeof re?ae=(0,l.Z)({inputRef:O,type:Y},ae,{ref:null}):A?!V||J||F||N||X?(ae=(0,l.Z)({minRows:V||F,rowsMax:N,maxRows:J},ae),re=Tm):re="textarea":ae=(0,l.Z)({type:Y},ae);return t.useEffect((function(){q&&q.setAdornedStart(Boolean(E))}),[q,E]),t.createElement("div",(0,l.Z)({className:(0,Nt.Z)(i.root,i["color".concat(pm($.color||"primary"))],s,$.disabled&&i.disabled,$.error&&i.error,p&&i.fullWidth,$.focused&&i.focused,q&&i.formControl,A&&i.multiline,E&&i.adornedStart,g&&i.adornedEnd,"dense"===$.margin&&i.marginDense),onClick:function(e){z.current&&e.currentTarget===e.target&&z.current.focus(),S&&S(e)},ref:n},M),E,t.createElement(Rm.Provider,{value:null},t.createElement(re,(0,l.Z)({"aria-invalid":$.error,"aria-describedby":r,autoComplete:a,autoFocus:o,defaultValue:c,disabled:$.disabled,id:h,onAnimationStart:function(e){ne("mui-auto-fill-cancel"===e.animationName?z.current:{value:"x"})},name:y,placeholder:x,readOnly:R,required:$.required,rows:V,value:D,onKeyDown:B,onKeyUp:G},ae,{className:(0,Nt.Z)(i.input,m.className,$.disabled&&i.disabled,A&&i.inputMultiline,$.hiddenLabel&&i.inputHiddenLabel,E&&i.inputAdornedStart,g&&i.inputAdornedEnd,"search"===Y&&i.inputTypeSearch,"dense"===$.margin&&i.inputMarginDense),onBlur:function(e){k&&k(e),m.onBlur&&m.onBlur(e),q&&q.onBlur?q.onBlur(e):Q(!1)},onChange:function(e){if(!K){var t=e.target||z.current;if(null==t)throw new Error(vC(1));ne({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];m.onChange&&m.onChange.apply(m,[e].concat(r)),Z&&Z.apply(void 0,[e].concat(r))},onFocus:function(e){$.disabled?e.stopPropagation():(w&&w(e),m.onFocus&&m.onFocus(e),q&&q.onFocus?q.onFocus(e):Q(!0))}}))),g,W?W((0,l.Z)({},$,{startAdornment:E})):null)})),Km=dm((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},a={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,l.Z)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(Dm),zm=t.forwardRef((function(e,n){var r=e.disableUnderline,a=e.classes,o=e.fullWidth,i=void 0!==o&&o,s=e.inputComponent,c=void 0===s?"input":s,u=e.multiline,g=void 0!==u&&u,d=e.type,p=void 0===d?"text":d,h=th(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return t.createElement(Km,(0,l.Z)({classes:(0,l.Z)({},a,{root:(0,Nt.Z)(a.root,!r&&a.underline),underline:null}),fullWidth:i,inputComponent:c,multiline:g,ref:n,type:p},h))}));zm.muiName="Input";var Lm=dm((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(zm),Pm=t.forwardRef((function(e,n){var r=e.disableUnderline,a=e.classes,o=e.fullWidth,i=void 0!==o&&o,s=e.inputComponent,c=void 0===s?"input":s,u=e.multiline,g=void 0!==u&&u,d=e.type,p=void 0===d?"text":d,h=th(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return t.createElement(Km,(0,l.Z)({classes:(0,l.Z)({},a,{root:(0,Nt.Z)(a.root,!r&&a.underline),underline:null}),fullWidth:i,inputComponent:c,multiline:g,ref:n,type:p},h))}));Pm.muiName="Input";var _m=dm((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(Pm);function Om(){return bf()||gm}var Um=t.forwardRef((function(e,n){e.children;var r=e.classes,a=e.className,o=e.label,i=e.labelWidth,s=e.notched,c=e.style,u=th(e,["children","classes","className","label","labelWidth","notched","style"]),g="rtl"===Om().direction?"right":"left";if(void 0!==o)return t.createElement("fieldset",(0,l.Z)({"aria-hidden":!0,className:(0,Nt.Z)(r.root,a),ref:n,style:c},u),t.createElement("legend",{className:(0,Nt.Z)(r.legendLabelled,s&&r.legendNotched)},o?t.createElement("span",null,o):t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var d=i>0?.75*i+8:.01;return t.createElement("fieldset",(0,l.Z)({"aria-hidden":!0,style:(0,l.Z)((0,Tt.Z)({},"padding".concat(pm(g)),8),c),className:(0,Nt.Z)(r.root,a),ref:n},u),t.createElement("legend",{className:r.legend,style:{width:s?d:.01}},t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),jm=dm((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(Um),Qm=t.forwardRef((function(e,n){var r=e.classes,a=e.fullWidth,o=void 0!==a&&a,i=e.inputComponent,s=void 0===i?"input":i,c=e.label,u=e.labelWidth,g=void 0===u?0:u,d=e.multiline,p=void 0!==d&&d,h=e.notched,f=e.type,I=void 0===f?"text":f,C=th(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return t.createElement(Km,(0,l.Z)({renderSuffix:function(e){return t.createElement(jm,{className:r.notchedOutline,label:c,labelWidth:g,notched:"undefined"!==typeof h?h:Boolean(e.startAdornment||e.filled||e.focused)})},classes:(0,l.Z)({},r,{root:(0,Nt.Z)(r.root,r.underline),notchedOutline:null}),fullWidth:o,inputComponent:s,multiline:p,ref:n,type:I},C))}));Qm.muiName="Input";var qm=dm((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(Qm);function $m(){return t.useContext(Rm)}var ev=t.forwardRef((function(e,n){var r=e.children,a=e.classes,o=e.className,i=(e.color,e.component),s=void 0===i?"label":i,c=(e.disabled,e.error,e.filled,e.focused,e.required,th(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),u=Gm({props:e,muiFormControl:$m(),states:["color","required","focused","disabled","error","filled"]});return t.createElement(s,(0,l.Z)({className:(0,Nt.Z)(a.root,a["color".concat(pm(u.color||"primary"))],o,u.disabled&&a.disabled,u.error&&a.error,u.filled&&a.filled,u.focused&&a.focused,u.required&&a.required),ref:n},c),r,u.required&&t.createElement("span",{"aria-hidden":!0,className:(0,Nt.Z)(a.asterisk,u.error&&a.error)},"\u2009","*"))})),tv=dm((function(e){return{root:(0,l.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(ev),nv=t.forwardRef((function(e,n){var r=e.classes,a=e.className,o=e.disableAnimation,i=void 0!==o&&o,s=(e.margin,e.shrink),c=(e.variant,th(e,["classes","className","disableAnimation","margin","shrink","variant"])),u=$m(),g=s;"undefined"===typeof g&&u&&(g=u.filled||u.focused||u.adornedStart);var d=Gm({props:e,muiFormControl:u,states:["margin","variant"]});return t.createElement(tv,(0,l.Z)({"data-shrink":g,className:(0,Nt.Z)(r.root,a,u&&r.formControl,!i&&r.animated,g&&r.shrink,"dense"===d.margin&&r.marginDense,{filled:r.filled,outlined:r.outlined}[d.variant]),classes:{focused:r.focused,disabled:r.disabled,error:r.error,required:r.required,asterisk:r.asterisk},ref:n},c))})),rv=dm((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(nv);function av(e,n){return t.isValidElement(e)&&-1!==n.indexOf(e.type.muiName)}var ov=t.forwardRef((function(e,n){var r=e.children,a=e.classes,o=e.className,i=e.color,s=void 0===i?"primary":i,c=e.component,u=void 0===c?"div":c,g=e.disabled,d=void 0!==g&&g,p=e.error,h=void 0!==p&&p,f=e.fullWidth,I=void 0!==f&&f,C=e.focused,m=e.hiddenLabel,v=void 0!==m&&m,b=e.margin,A=void 0===b?"none":b,y=e.required,k=void 0!==y&&y,Z=e.size,S=e.variant,w=void 0===S?"standard":S,B=th(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),G=t.useState((function(){var e=!1;return r&&t.Children.forEach(r,(function(t){if(av(t,["Input","Select"])){var n=av(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),x=G[0],R=G[1],W=t.useState((function(){var e=!1;return r&&t.Children.forEach(r,(function(t){av(t,["Input","Select"])&&Hm(t.props,!0)&&(e=!0)})),e})),V=W[0],N=W[1],X=t.useState(!1),J=X[0],F=X[1],E=void 0!==C?C:J;d&&E&&F(!1);var T=t.useCallback((function(){N(!0)}),[]),Y={adornedStart:x,setAdornedStart:R,color:s,disabled:d,error:h,filled:V,focused:E,fullWidth:I,hiddenLabel:v,margin:("small"===Z?"dense":void 0)||A,onBlur:function(){F(!1)},onEmpty:t.useCallback((function(){N(!1)}),[]),onFilled:T,onFocus:function(){F(!0)},registerEffect:undefined,required:k,variant:w};return t.createElement(Rm.Provider,{value:Y},t.createElement(u,(0,l.Z)({className:(0,Nt.Z)(a.root,o,"none"!==A&&a["margin".concat(pm(A))],I&&a.fullWidth),ref:n},B),r))})),iv=dm({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(ov),sv=t.forwardRef((function(e,n){var r=e.children,a=e.classes,o=e.className,i=e.component,s=void 0===i?"p":i,c=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,th(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),u=Gm({props:e,muiFormControl:$m(),states:["variant","margin","disabled","error","filled","focused","required"]});return t.createElement(s,(0,l.Z)({className:(0,Nt.Z)(a.root,("filled"===u.variant||"outlined"===u.variant)&&a.contained,o,u.disabled&&a.disabled,u.error&&a.error,u.filled&&a.filled,u.focused&&a.focused,u.required&&a.required,"dense"===u.margin&&a.marginDense),ref:n},c)," "===r?t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):r)})),cv=dm((function(e){return{root:(0,l.Z)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(sv);function uv(e){return e&&e.ownerDocument||document}function lv(e){return uv(e).defaultView||window}function gv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var dv="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;var pv=t.forwardRef((function(e,n){var a=e.children,o=e.container,i=e.disablePortal,s=void 0!==i&&i,c=e.onRendered,u=t.useState(null),l=u[0],g=u[1],d=Vm(t.isValidElement(a)?a.ref:null,n);return dv((function(){s||g(function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(o)||document.body)}),[o,s]),dv((function(){if(l&&!s)return Wm(n,l),function(){Wm(n,null)}}),[n,l,s]),dv((function(){c&&(l||s)&&c()}),[c,l,s]),s?t.isValidElement(a)?t.cloneElement(a,{ref:d}):a:l?r.createPortal(a,l):l})),hv="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function fv(e){var n=t.useRef(e);return hv((function(){n.current=e})),t.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}function Iv(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function Cv(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function mv(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function vv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,o=[t,n].concat((0,Yt.Z)(r)),i=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===i.indexOf(e.tagName)&&Cv(e,a)}))}function bv(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Av(e,t){var n,r=[],a=[],o=e.container;if(!t.disableScrollLock){if(function(e){var t=uv(e);return t.body===e?lv(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(o)){var i=Iv();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(mv(o)+i,"px"),n=uv(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){a.push(e.style.paddingRight),e.style.paddingRight="".concat(mv(e)+i,"px")}))}var s=o.parentElement,c="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:c.style.overflow,key:"overflow",el:c}),c.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){a[t]?e.style.paddingRight=a[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var yv=function(){function e(){(0,ba.Z)(this,e),this.modals=[],this.containers=[]}return(0,Aa.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Cv(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);vv(t,e.mountNode,e.modalRef,r,!0);var a=bv(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=bv(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Av(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=bv(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&Cv(e.modalRef,!0),vv(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&Cv(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var kv=function(e){var n=e.children,a=e.disableAutoFocus,o=void 0!==a&&a,i=e.disableEnforceFocus,s=void 0!==i&&i,c=e.disableRestoreFocus,u=void 0!==c&&c,l=e.getDoc,g=e.isEnabled,d=e.open,p=t.useRef(),h=t.useRef(null),f=t.useRef(null),I=t.useRef(),C=t.useRef(null),m=t.useCallback((function(e){C.current=r.findDOMNode(e)}),[]),v=Vm(n.ref,m),b=t.useRef();return t.useEffect((function(){b.current=d}),[d]),!b.current&&d&&"undefined"!==typeof window&&(I.current=l().activeElement),t.useEffect((function(){if(d){var e=uv(C.current);o||!C.current||C.current.contains(e.activeElement)||(C.current.hasAttribute("tabIndex")||C.current.setAttribute("tabIndex",-1),C.current.focus());var t=function(){null!==C.current&&(e.hasFocus()&&!s&&g()&&!p.current?C.current&&!C.current.contains(e.activeElement)&&C.current.focus():p.current=!1)},n=function(t){!s&&g()&&9===t.keyCode&&e.activeElement===C.current&&(p.current=!0,t.shiftKey?f.current.focus():h.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),u||(I.current&&I.current.focus&&I.current.focus(),I.current=null)}}}),[o,s,u,g,d]),t.createElement(t.Fragment,null,t.createElement("div",{tabIndex:0,ref:h,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:v}),t.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelEnd"}))},Zv={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},Sv=t.forwardRef((function(e,n){var r=e.invisible,a=void 0!==r&&r,o=e.open,i=th(e,["invisible","open"]);return o?t.createElement("div",(0,l.Z)({"aria-hidden":!0,ref:n},i,{style:(0,l.Z)({},Zv.root,a?Zv.invisible:{},i.style)})):null}));var wv=new yv,Bv=t.forwardRef((function(e,n){var a=bf(),o=hC({name:"MuiModal",props:(0,l.Z)({},e),theme:a}),i=o.BackdropComponent,s=void 0===i?Sv:i,c=o.BackdropProps,u=o.children,g=o.closeAfterTransition,d=void 0!==g&&g,p=o.container,h=o.disableAutoFocus,f=void 0!==h&&h,I=o.disableBackdropClick,C=void 0!==I&&I,m=o.disableEnforceFocus,v=void 0!==m&&m,b=o.disableEscapeKeyDown,A=void 0!==b&&b,y=o.disablePortal,k=void 0!==y&&y,Z=o.disableRestoreFocus,S=void 0!==Z&&Z,w=o.disableScrollLock,B=void 0!==w&&w,G=o.hideBackdrop,x=void 0!==G&&G,R=o.keepMounted,W=void 0!==R&&R,V=o.manager,N=void 0===V?wv:V,X=o.onBackdropClick,J=o.onClose,F=o.onEscapeKeyDown,E=o.onRendered,T=o.open,Y=th(o,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),H=t.useState(!0),M=H[0],D=H[1],K=t.useRef({}),z=t.useRef(null),L=t.useRef(null),P=Vm(L,n),_=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(o),O=function(){return uv(z.current)},U=function(){return K.current.modalRef=L.current,K.current.mountNode=z.current,K.current},j=function(){N.mount(U(),{disableScrollLock:B}),L.current.scrollTop=0},Q=fv((function(){var e=function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(p)||O().body;N.add(U(),e),L.current&&j()})),q=t.useCallback((function(){return N.isTopModal(U())}),[N]),$=fv((function(e){z.current=e,e&&(E&&E(),T&&q()?j():Cv(L.current,!0))})),ee=t.useCallback((function(){N.remove(U())}),[N]);if(t.useEffect((function(){return function(){ee()}}),[ee]),t.useEffect((function(){T?Q():_&&d||ee()}),[T,ee,_,d,Q]),!W&&!T&&(!_||M))return null;var te=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(a||{zIndex:um}),ne={};return void 0===u.props.tabIndex&&(ne.tabIndex=u.props.tabIndex||"-1"),_&&(ne.onEnter=gv((function(){D(!1)}),u.props.onEnter),ne.onExited=gv((function(){D(!0),d&&ee()}),u.props.onExited)),t.createElement(pv,{ref:$,container:p,disablePortal:k},t.createElement("div",(0,l.Z)({ref:P,onKeyDown:function(e){"Escape"===e.key&&q()&&(F&&F(e),A||(e.stopPropagation(),J&&J(e,"escapeKeyDown")))},role:"presentation"},Y,{style:(0,l.Z)({},te.root,!T&&M?te.hidden:{},Y.style)}),x?null:t.createElement(s,(0,l.Z)({open:T,onClick:function(e){e.target===e.currentTarget&&(X&&X(e),!C&&J&&J(e,"backdropClick"))}},c)),t.createElement(kv,{disableEnforceFocus:v,disableAutoFocus:f,disableRestoreFocus:S,getDoc:O,isEnabled:q,open:T},t.cloneElement(u,ne))))}));function Gv(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:a.transitionDelay}}function xv(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var Rv={entering:{opacity:1,transform:xv(1)},entered:{opacity:1,transform:"none"}},Wv=t.forwardRef((function(e,n){var r=e.children,o=e.disableStrictModeCompat,i=void 0!==o&&o,s=e.in,c=e.onEnter,u=e.onEntered,g=e.onEntering,d=e.onExit,p=e.onExited,h=e.onExiting,f=e.style,I=e.timeout,C=void 0===I?"auto":I,m=e.TransitionComponent,v=void 0===m?aa:m,b=th(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),A=t.useRef(),y=t.useRef(),k=Om(),Z=k.unstable_strictMode&&!i,S=t.useRef(null),w=Vm(r.ref,n),B=Vm(Z?S:void 0,w),G=function(e){return function(t,n){if(e){var r=Z?[S.current,t]:[t,n],o=(0,a.Z)(r,2),i=o[0],s=o[1];void 0===s?e(i):e(i,s)}}},x=G(g),R=G((function(e,t){!function(e){e.scrollTop}(e);var n,r=Gv({style:f,timeout:C},{mode:"enter"}),a=r.duration,o=r.delay;"auto"===C?(n=k.transitions.getAutoHeightDuration(e.clientHeight),y.current=n):n=a,e.style.transition=[k.transitions.create("opacity",{duration:n,delay:o}),k.transitions.create("transform",{duration:.666*n,delay:o})].join(","),c&&c(e,t)})),W=G(u),V=G(h),N=G((function(e){var t,n=Gv({style:f,timeout:C},{mode:"exit"}),r=n.duration,a=n.delay;"auto"===C?(t=k.transitions.getAutoHeightDuration(e.clientHeight),y.current=t):t=r,e.style.transition=[k.transitions.create("opacity",{duration:t,delay:a}),k.transitions.create("transform",{duration:.666*t,delay:a||.333*t})].join(","),e.style.opacity="0",e.style.transform=xv(.75),d&&d(e)})),X=G(p);return t.useEffect((function(){return function(){clearTimeout(A.current)}}),[]),t.createElement(v,(0,l.Z)({appear:!0,in:s,nodeRef:Z?S:void 0,onEnter:R,onEntered:W,onEntering:x,onExit:N,onExited:X,onExiting:V,addEndListener:function(e,t){var n=Z?e:t;"auto"===C&&(A.current=setTimeout(n,y.current||0))},timeout:"auto"===C?null:C},b),(function(e,n){return t.cloneElement(r,(0,l.Z)({style:(0,l.Z)({opacity:0,transform:xv(.75),visibility:"exited"!==e||s?void 0:"hidden"},Rv[e],f,r.props.style),ref:B},n))}))}));Wv.muiSupportAuto=!0;var Vv=Wv;function Nv(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Xv(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function Jv(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function Fv(e){return"function"===typeof e?e():e}var Ev=t.forwardRef((function(e,n){var a=e.action,o=e.anchorEl,i=e.anchorOrigin,s=void 0===i?{vertical:"top",horizontal:"left"}:i,c=e.anchorPosition,u=e.anchorReference,g=void 0===u?"anchorEl":u,d=e.children,p=e.classes,h=e.className,f=e.container,I=e.elevation,C=void 0===I?8:I,m=e.getContentAnchorEl,v=e.marginThreshold,b=void 0===v?16:v,A=e.onEnter,y=e.onEntered,k=e.onEntering,Z=e.onExit,S=e.onExited,w=e.onExiting,B=e.open,G=e.PaperProps,x=void 0===G?{}:G,R=e.transformOrigin,W=void 0===R?{vertical:"top",horizontal:"left"}:R,V=e.TransitionComponent,N=void 0===V?Vv:V,X=e.transitionDuration,J=void 0===X?"auto":X,F=e.TransitionProps,E=void 0===F?{}:F,T=th(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),Y=t.useRef(),H=t.useCallback((function(e){if("anchorPosition"===g)return c;var t=Fv(o),n=(t&&1===t.nodeType?t:uv(Y.current).body).getBoundingClientRect(),r=0===e?s.vertical:"center";return{top:n.top+Nv(n,r),left:n.left+Xv(n,s.horizontal)}}),[o,s.horizontal,s.vertical,c,g]),M=t.useCallback((function(e){var t=0;if(m&&"anchorEl"===g){var n=m(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[s.vertical,g,m]),D=t.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:Nv(e,W.vertical)+t,horizontal:Xv(e,W.horizontal)}}),[W.horizontal,W.vertical]),K=t.useCallback((function(e){var t=M(e),n={width:e.offsetWidth,height:e.offsetHeight},r=D(n,t);if("none"===g)return{top:null,left:null,transformOrigin:Jv(r)};var a=H(t),i=a.top-r.vertical,s=a.left-r.horizontal,c=i+n.height,u=s+n.width,l=lv(Fv(o)),d=l.innerHeight-b,p=l.innerWidth-b;if(i<b){var h=i-b;i-=h,r.vertical+=h}else if(c>d){var f=c-d;i-=f,r.vertical+=f}if(s<b){var I=s-b;s-=I,r.horizontal+=I}else if(u>p){var C=u-p;s-=C,r.horizontal+=C}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:Jv(r)}}),[o,g,H,M,D,b]),z=t.useCallback((function(){var e=Y.current;if(e){var t=K(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[K]),L=t.useCallback((function(e){Y.current=r.findDOMNode(e)}),[]);t.useEffect((function(){B&&z()})),t.useImperativeHandle(a,(function(){return B?{updatePosition:function(){z()}}:null}),[B,z]),t.useEffect((function(){if(B){var e=Nm((function(){z()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[B,z]);var P=J;"auto"!==J||N.muiSupportAuto||(P=void 0);var _=f||(o?uv(Fv(o)).body:void 0);return t.createElement(Bv,(0,l.Z)({container:_,open:B,ref:n,BackdropProps:{invisible:!0},className:(0,Nt.Z)(p.root,h)},T),t.createElement(N,(0,l.Z)({appear:!0,in:B,onEnter:A,onEntered:y,onExit:Z,onExited:S,onExiting:w,timeout:P},E,{onEntering:gv((function(e,t){k&&k(e,t),z()}),E.onEntering)}),t.createElement(Cm,(0,l.Z)({elevation:C,ref:L},x,{className:(0,Nt.Z)(p.paper,x.className)}),d)))})),Tv=dm({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(Ev);var Yv=t.createContext({}),Hv=t.forwardRef((function(e,n){var r=e.children,a=e.classes,o=e.className,i=e.component,s=void 0===i?"ul":i,c=e.dense,u=void 0!==c&&c,g=e.disablePadding,d=void 0!==g&&g,p=e.subheader,h=th(e,["children","classes","className","component","dense","disablePadding","subheader"]),f=t.useMemo((function(){return{dense:u}}),[u]);return t.createElement(Yv.Provider,{value:f},t.createElement(s,(0,l.Z)({className:(0,Nt.Z)(a.root,o,u&&a.dense,!d&&a.padding,p&&a.subheader),ref:n},h),p,r))})),Mv=dm({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(Hv);function Dv(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Kv(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function zv(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Lv(e,t,n,r,a,o){for(var i=!1,s=a(e,t,!!t&&n);s;){if(s===e.firstChild){if(i)return;i=!0}var c=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&zv(s,o)&&!c)return void s.focus();s=a(e,s,n)}}var Pv="undefined"===typeof window?t.useEffect:t.useLayoutEffect,_v=t.forwardRef((function(e,n){var a=e.actions,o=e.autoFocus,i=void 0!==o&&o,s=e.autoFocusItem,c=void 0!==s&&s,u=e.children,g=e.className,d=e.disabledItemsFocusable,p=void 0!==d&&d,h=e.disableListWrap,f=void 0!==h&&h,I=e.onKeyDown,C=e.variant,m=void 0===C?"selectedMenu":C,v=th(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),b=t.useRef(null),A=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Pv((function(){i&&b.current.focus()}),[i]),t.useImperativeHandle(a,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!b.current.style.width;if(e.clientHeight<b.current.clientHeight&&n){var r="".concat(Iv(),"px");b.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,b.current.style.width="calc(100% + ".concat(r,")")}return b.current}}}),[]);var y=Vm(t.useCallback((function(e){b.current=r.findDOMNode(e)}),[]),n),k=-1;t.Children.forEach(u,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===m&&e.props.selected||-1===k)&&(k=n))}));var Z=t.Children.map(u,(function(e,n){if(n===k){var r={};return c&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===m&&(r.tabIndex=0),t.cloneElement(e,r)}return e}));return t.createElement(Mv,(0,l.Z)({role:"menu",ref:y,className:g,onKeyDown:function(e){var t=b.current,n=e.key,r=uv(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Lv(t,r,f,p,Dv);else if("ArrowUp"===n)e.preventDefault(),Lv(t,r,f,p,Kv);else if("Home"===n)e.preventDefault(),Lv(t,null,f,p,Dv);else if("End"===n)e.preventDefault(),Lv(t,null,f,p,Kv);else if(1===n.length){var a=A.current,o=n.toLowerCase(),i=performance.now();a.keys.length>0&&(i-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&o!==a.keys[0]&&(a.repeating=!1)),a.lastTime=i,a.keys.push(o);var s=r&&!a.repeating&&zv(r,a);a.previousKeyMatched&&(s||Lv(t,r,!1,p,Dv,a))?e.preventDefault():a.previousKeyMatched=!1}I&&I(e)},tabIndex:i?0:-1},v),Z)})),Ov=_v,Uv={vertical:"top",horizontal:"right"},jv={vertical:"top",horizontal:"left"},Qv=t.forwardRef((function(e,n){var a=e.autoFocus,o=void 0===a||a,i=e.children,s=e.classes,c=e.disableAutoFocusItem,u=void 0!==c&&c,g=e.MenuListProps,d=void 0===g?{}:g,p=e.onClose,h=e.onEntering,f=e.open,I=e.PaperProps,C=void 0===I?{}:I,m=e.PopoverClasses,v=e.transitionDuration,b=void 0===v?"auto":v,A=e.TransitionProps,y=(A=void 0===A?{}:A).onEntering,k=th(A,["onEntering"]),Z=e.variant,S=void 0===Z?"selectedMenu":Z,w=th(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),B=Om(),G=o&&!u&&f,x=t.useRef(null),R=t.useRef(null),W=-1;t.Children.map(i,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("menu"!==S&&e.props.selected||-1===W)&&(W=n))}));var V=t.Children.map(i,(function(e,n){return n===W?t.cloneElement(e,{ref:function(t){R.current=r.findDOMNode(t),Wm(e.ref,t)}}):e}));return t.createElement(Tv,(0,l.Z)({getContentAnchorEl:function(){return R.current},classes:m,onClose:p,TransitionProps:(0,l.Z)({onEntering:function(e,t){x.current&&x.current.adjustStyleForScrollbar(e,B),h&&h(e,t),y&&y(e,t)}},k),anchorOrigin:"rtl"===B.direction?Uv:jv,transformOrigin:"rtl"===B.direction?Uv:jv,PaperProps:(0,l.Z)({},C,{classes:(0,l.Z)({},C.classes,{root:s.paper})}),open:f,ref:n,transitionDuration:b},w),t.createElement(Ov,(0,l.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),p&&p(e,"tabKeyDown"))},actions:x,autoFocus:o&&(-1===W||u),autoFocusItem:G,variant:S},d,{className:(0,Nt.Z)(s.list,d.className)}),V))})),qv=dm({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(Qv);function $v(e,t){return"object"===(0,rC.Z)(t)&&null!==t?e===t:String(e)===String(t)}var eb=t.forwardRef((function(e,n){var r=e["aria-label"],o=e.autoFocus,i=e.autoWidth,s=e.children,c=e.classes,u=e.className,g=e.defaultValue,d=e.disabled,p=e.displayEmpty,h=e.IconComponent,f=e.inputRef,I=e.labelId,C=e.MenuProps,m=void 0===C?{}:C,v=e.multiple,b=e.name,A=e.onBlur,y=e.onChange,k=e.onClose,Z=e.onFocus,S=e.onOpen,w=e.open,B=e.readOnly,G=e.renderValue,x=e.SelectDisplayProps,R=void 0===x?{}:x,W=e.tabIndex,V=(e.type,e.value),N=e.variant,X=void 0===N?"standard":N,J=th(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),F=function(e){var n=e.controlled,r=e.default,a=(e.name,e.state,t.useRef(void 0!==n).current),o=t.useState(r),i=o[0],s=o[1];return[a?n:i,t.useCallback((function(e){a||s(e)}),[])]}({controlled:V,default:g,name:"Select"}),E=(0,a.Z)(F,2),T=E[0],Y=E[1],H=t.useRef(null),M=t.useState(null),D=M[0],K=M[1],z=t.useRef(null!=w).current,L=t.useState(),P=L[0],_=L[1],O=t.useState(!1),U=O[0],j=O[1],Q=Vm(n,f);t.useImperativeHandle(Q,(function(){return{focus:function(){D.focus()},node:H.current,value:T}}),[D,T]),t.useEffect((function(){o&&D&&D.focus()}),[o,D]),t.useEffect((function(){if(D){var e=uv(D).getElementById(I);if(e){var t=function(){getSelection().isCollapsed&&D.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[I,D]);var q,$,ee=function(e,t){e?S&&S(t):k&&k(t),z||(_(i?null:D.clientWidth),j(e))},te=t.Children.toArray(s),ne=function(e){return function(t){var n;if(v||ee(!1,t),v){n=Array.isArray(T)?T.slice():[];var r=T.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),T!==n&&(Y(n),y&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:b}}),y(t,e)))}},re=null!==D&&(z?w:U);delete J["aria-invalid"];var ae=[],oe=!1;(Hm({value:T})||p)&&(G?q=G(T):oe=!0);var ie=te.map((function(e){if(!t.isValidElement(e))return null;var n;if(v){if(!Array.isArray(T))throw new Error(vC(2));n=T.some((function(t){return $v(t,e.props.value)})),n&&oe&&ae.push(e.props.children)}else(n=$v(T,e.props.value))&&oe&&($=e.props.children);return n&&!0,t.cloneElement(e,{"aria-selected":n?"true":void 0,onClick:ne(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));oe&&(q=v?ae.join(", "):$);var se,ce=P;!i&&z&&D&&(ce=D.clientWidth),se="undefined"!==typeof W?W:d?null:0;var ue=R.id||(b?"mui-component-select-".concat(b):void 0);return t.createElement(t.Fragment,null,t.createElement("div",(0,l.Z)({className:(0,Nt.Z)(c.root,c.select,c.selectMenu,c[X],u,d&&c.disabled),ref:K,tabIndex:se,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":re?"true":void 0,"aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[I,ue].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!B){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ee(!0,e))}},onMouseDown:d||B?null:function(e){0===e.button&&(e.preventDefault(),D.focus(),ee(!0,e))},onBlur:function(e){!re&&A&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:T,name:b}}),A(e))},onFocus:Z},R,{id:ue}),function(e){return null==e||"string"===typeof e&&!e.trim()}(q)?t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):q),t.createElement("input",(0,l.Z)({value:Array.isArray(T)?T.join(","):T,name:b,ref:H,"aria-hidden":!0,onChange:function(e){var t=te.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=te[t];Y(n.props.value),y&&y(e,n)}},tabIndex:-1,className:c.nativeInput,autoFocus:o},J)),t.createElement(h,{className:(0,Nt.Z)(c.icon,c["icon".concat(pm(X))],re&&c.iconOpen,d&&c.disabled)}),t.createElement(qv,(0,l.Z)({id:"menu-".concat(b||""),anchorEl:D,open:re,onClose:function(e){ee(!1,e)}},m,{MenuListProps:(0,l.Z)({"aria-labelledby":I,role:"listbox",disableListWrap:!0},m.MenuListProps),PaperProps:(0,l.Z)({},m.PaperProps,{style:(0,l.Z)({minWidth:ce},null!=m.PaperProps?m.PaperProps.style:null)})}),ie))})),tb=eb,nb=t.forwardRef((function(e,n){var r=e.children,a=e.classes,o=e.className,i=e.color,s=void 0===i?"inherit":i,c=e.component,u=void 0===c?"svg":c,g=e.fontSize,d=void 0===g?"medium":g,p=e.htmlColor,h=e.titleAccess,f=e.viewBox,I=void 0===f?"0 0 24 24":f,C=th(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return t.createElement(u,(0,l.Z)({className:(0,Nt.Z)(a.root,o,"inherit"!==s&&a["color".concat(pm(s))],"default"!==d&&"medium"!==d&&a["fontSize".concat(pm(d))]),focusable:"false",viewBox:I,color:p,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:n},C),r,h?t.createElement("title",null,h):null)}));nb.muiName="SvgIcon";var rb=dm((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(nb);var ab=function(e,n){var r=function(n,r){return t.createElement(rb,(0,l.Z)({ref:r},n),e)};return r.muiName=rb.muiName,t.memo(t.forwardRef(r))}(t.createElement("path",{d:"M7 10l5 5 5-5z"})),ob=t.forwardRef((function(e,n){var r=e.classes,a=e.className,o=e.disabled,i=e.IconComponent,s=e.inputRef,c=e.variant,u=void 0===c?"standard":c,g=th(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return t.createElement(t.Fragment,null,t.createElement("select",(0,l.Z)({className:(0,Nt.Z)(r.root,r.select,r[u],a,o&&r.disabled),disabled:o,ref:s||n},g)),e.multiple?null:t.createElement(i,{className:(0,Nt.Z)(r.icon,r["icon".concat(pm(u))],o&&r.disabled)}))})),ib=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},sb=t.createElement(Lm,null),cb=t.forwardRef((function(e,n){var r=e.children,a=e.classes,o=e.IconComponent,i=void 0===o?ab:o,s=e.input,c=void 0===s?sb:s,u=e.inputProps,g=(e.variant,th(e,["children","classes","IconComponent","input","inputProps","variant"])),d=Gm({props:e,muiFormControl:$m(),states:["variant"]});return t.cloneElement(c,(0,l.Z)({inputComponent:ob,inputProps:(0,l.Z)({children:r,classes:a,IconComponent:i,variant:d.variant,type:void 0},u,c?c.props.inputProps:{}),ref:n},g))}));cb.muiName="Select";dm(ib,{name:"MuiNativeSelect"})(cb);var ub=ib,lb=t.createElement(Lm,null),gb=t.createElement(_m,null),db=t.forwardRef((function e(n,r){var a=n.autoWidth,o=void 0!==a&&a,i=n.children,s=n.classes,c=n.displayEmpty,u=void 0!==c&&c,g=n.IconComponent,d=void 0===g?ab:g,p=n.id,h=n.input,f=n.inputProps,I=n.label,C=n.labelId,m=n.labelWidth,v=void 0===m?0:m,b=n.MenuProps,A=n.multiple,y=void 0!==A&&A,k=n.native,Z=void 0!==k&&k,S=n.onClose,w=n.onOpen,B=n.open,G=n.renderValue,x=n.SelectDisplayProps,R=n.variant,W=void 0===R?"standard":R,V=th(n,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),N=Z?ob:tb,X=Gm({props:n,muiFormControl:$m(),states:["variant"]}).variant||W,J=h||{standard:lb,outlined:t.createElement(qm,{label:I,labelWidth:v}),filled:gb}[X];return t.cloneElement(J,(0,l.Z)({inputComponent:N,inputProps:(0,l.Z)({children:i,IconComponent:d,variant:X,type:void 0,multiple:y},Z?{id:p}:{autoWidth:o,displayEmpty:u,labelId:C,MenuProps:b,onClose:S,onOpen:w,open:B,renderValue:G,SelectDisplayProps:(0,l.Z)({id:p},x)},f,{classes:f?If({baseClasses:s,newClasses:f.classes,Component:e}):s},h?h.props.inputProps:{}),ref:r},V))}));db.muiName="Select";var pb=dm(ub,{name:"MuiSelect"})(db),hb={standard:Lm,filled:_m,outlined:qm},fb=t.forwardRef((function(e,n){var r=e.autoComplete,a=e.autoFocus,o=void 0!==a&&a,i=e.children,s=e.classes,c=e.className,u=e.color,g=void 0===u?"primary":u,d=e.defaultValue,p=e.disabled,h=void 0!==p&&p,f=e.error,I=void 0!==f&&f,C=e.FormHelperTextProps,m=e.fullWidth,v=void 0!==m&&m,b=e.helperText,A=e.hiddenLabel,y=e.id,k=e.InputLabelProps,Z=e.inputProps,S=e.InputProps,w=e.inputRef,B=e.label,G=e.multiline,x=void 0!==G&&G,R=e.name,W=e.onBlur,V=e.onChange,N=e.onFocus,X=e.placeholder,J=e.required,F=void 0!==J&&J,E=e.rows,T=e.rowsMax,Y=e.maxRows,H=e.minRows,M=e.select,D=void 0!==M&&M,K=e.SelectProps,z=e.type,L=e.value,P=e.variant,_=void 0===P?"standard":P,O=th(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var U={};if("outlined"===_&&(k&&"undefined"!==typeof k.shrink&&(U.notched=k.shrink),B)){var j,Q=null!==(j=null===k||void 0===k?void 0:k.required)&&void 0!==j?j:F;U.label=t.createElement(t.Fragment,null,B,Q&&"\xa0*")}D&&(K&&K.native||(U.id=void 0),U["aria-describedby"]=void 0);var q=b&&y?"".concat(y,"-helper-text"):void 0,$=B&&y?"".concat(y,"-label"):void 0,ee=hb[_],te=t.createElement(ee,(0,l.Z)({"aria-describedby":q,autoComplete:r,autoFocus:o,defaultValue:d,fullWidth:v,multiline:x,name:R,rows:E,rowsMax:T,maxRows:Y,minRows:H,type:z,value:L,id:y,inputRef:w,onBlur:W,onChange:V,onFocus:N,placeholder:X,inputProps:Z},U,S));return t.createElement(iv,(0,l.Z)({className:(0,Nt.Z)(s.root,c),disabled:h,error:I,fullWidth:v,hiddenLabel:A,ref:n,required:F,color:g,variant:_},O),B&&t.createElement(rv,(0,l.Z)({htmlFor:y,id:$},k),B),D?t.createElement(pb,(0,l.Z)({"aria-describedby":q,id:y,labelId:$,value:L,input:te},K),i):te,b&&t.createElement(cv,(0,l.Z)({id:q},C),b))})),Ib=dm({root:{}},{name:"MuiTextField"})(fb),Cb=!0,mb=!1,vb=null,bb={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Ab(e){e.metaKey||e.altKey||e.ctrlKey||(Cb=!0)}function yb(){Cb=!1}function kb(){"hidden"===this.visibilityState&&mb&&(Cb=!0)}function Zb(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return Cb||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!bb[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function Sb(){mb=!0,window.clearTimeout(vb),vb=window.setTimeout((function(){mb=!1}),100)}function wb(){return{isFocusVisible:Zb,onBlurVisible:Sb,ref:t.useCallback((function(e){var t,n=r.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",Ab,!0),t.addEventListener("mousedown",yb,!0),t.addEventListener("pointerdown",yb,!0),t.addEventListener("touchstart",yb,!0),t.addEventListener("visibilitychange",kb,!0))}),[])}}var Bb="undefined"===typeof window?t.useEffect:t.useLayoutEffect;var Gb=function(e){var n=e.classes,r=e.pulsate,a=void 0!==r&&r,o=e.rippleX,i=e.rippleY,s=e.rippleSize,c=e.in,u=e.onExited,l=void 0===u?function(){}:u,g=e.timeout,d=t.useState(!1),p=d[0],h=d[1],f=(0,Nt.Z)(n.ripple,n.rippleVisible,a&&n.ripplePulsate),I={width:s,height:s,top:-s/2+i,left:-s/2+o},C=(0,Nt.Z)(n.child,p&&n.childLeaving,a&&n.childPulsate),m=fv(l);return Bb((function(){if(!c){h(!0);var e=setTimeout(m,g);return function(){clearTimeout(e)}}}),[m,c,g]),t.createElement("span",{className:f,style:I},t.createElement("span",{className:C}))},xb=t.forwardRef((function(e,n){var r=e.center,a=void 0!==r&&r,o=e.classes,i=e.className,s=th(e,["center","classes","className"]),c=t.useState([]),u=c[0],g=c[1],d=t.useRef(0),p=t.useRef(null);t.useEffect((function(){p.current&&(p.current(),p.current=null)}),[u]);var h=t.useRef(!1),f=t.useRef(null),I=t.useRef(null),C=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(f.current)}}),[]);var m=t.useCallback((function(e){var n=e.pulsate,r=e.rippleX,a=e.rippleY,i=e.rippleSize,s=e.cb;g((function(e){return[].concat((0,Yt.Z)(e),[t.createElement(Gb,{key:d.current,classes:o,timeout:550,pulsate:n,rippleX:r,rippleY:a,rippleSize:i})])})),d.current+=1,p.current=s}),[o]),v=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,o=void 0!==r&&r,i=t.center,s=void 0===i?a||t.pulsate:i,c=t.fakeElement,u=void 0!==c&&c;if("mousedown"===e.type&&h.current)h.current=!1;else{"touchstart"===e.type&&(h.current=!0);var l,g,d,p=u?null:C.current,v=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(v.width/2),g=Math.round(v.height/2);else{var b=e.touches?e.touches[0]:e,A=b.clientX,y=b.clientY;l=Math.round(A-v.left),g=Math.round(y-v.top)}if(s)(d=Math.sqrt((2*Math.pow(v.width,2)+Math.pow(v.height,2))/3))%2===0&&(d+=1);else{var k=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,Z=2*Math.max(Math.abs((p?p.clientHeight:0)-g),g)+2;d=Math.sqrt(Math.pow(k,2)+Math.pow(Z,2))}e.touches?null===I.current&&(I.current=function(){m({pulsate:o,rippleX:l,rippleY:g,rippleSize:d,cb:n})},f.current=setTimeout((function(){I.current&&(I.current(),I.current=null)}),80)):m({pulsate:o,rippleX:l,rippleY:g,rippleSize:d,cb:n})}}),[a,m]),b=t.useCallback((function(){v({},{pulsate:!0})}),[v]),A=t.useCallback((function(e,t){if(clearTimeout(f.current),"touchend"===e.type&&I.current)return e.persist(),I.current(),I.current=null,void(f.current=setTimeout((function(){A(e,t)})));I.current=null,g((function(e){return e.length>0?e.slice(1):e})),p.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:b,start:v,stop:A}}),[b,v,A]),t.createElement("span",(0,l.Z)({className:(0,Nt.Z)(o.root,i),ref:C},s),t.createElement(si,{component:null,exit:!0},u))})),Rb=dm((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(t.memo(xb)),Wb=t.forwardRef((function(e,n){var a=e.action,o=e.buttonRef,i=e.centerRipple,s=void 0!==i&&i,c=e.children,u=e.classes,g=e.className,d=e.component,p=void 0===d?"button":d,h=e.disabled,f=void 0!==h&&h,I=e.disableRipple,C=void 0!==I&&I,m=e.disableTouchRipple,v=void 0!==m&&m,b=e.focusRipple,A=void 0!==b&&b,y=e.focusVisibleClassName,k=e.onBlur,Z=e.onClick,S=e.onFocus,w=e.onFocusVisible,B=e.onKeyDown,G=e.onKeyUp,x=e.onMouseDown,R=e.onMouseLeave,W=e.onMouseUp,V=e.onTouchEnd,N=e.onTouchMove,X=e.onTouchStart,J=e.onDragLeave,F=e.tabIndex,E=void 0===F?0:F,T=e.TouchRippleProps,Y=e.type,H=void 0===Y?"button":Y,M=th(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),D=t.useRef(null);var K=t.useRef(null),z=t.useState(!1),L=z[0],P=z[1];f&&L&&P(!1);var _=wb(),O=_.isFocusVisible,U=_.onBlurVisible,j=_.ref;function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return fv((function(r){return t&&t(r),!n&&K.current&&K.current[e](r),!0}))}t.useImperativeHandle(a,(function(){return{focusVisible:function(){P(!0),D.current.focus()}}}),[]),t.useEffect((function(){L&&A&&!C&&K.current.pulsate()}),[C,A,L]);var q=Q("start",x),$=Q("stop",J),ee=Q("stop",W),te=Q("stop",(function(e){L&&e.preventDefault(),R&&R(e)})),ne=Q("start",X),re=Q("stop",V),ae=Q("stop",N),oe=Q("stop",(function(e){L&&(U(e),P(!1)),k&&k(e)}),!1),ie=fv((function(e){D.current||(D.current=e.currentTarget),O(e)&&(P(!0),w&&w(e)),S&&S(e)})),se=function(){var e=r.findDOMNode(D.current);return p&&"button"!==p&&!("A"===e.tagName&&e.href)},ce=t.useRef(!1),ue=fv((function(e){A&&!ce.current&&L&&K.current&&" "===e.key&&(ce.current=!0,e.persist(),K.current.stop(e,(function(){K.current.start(e)}))),e.target===e.currentTarget&&se()&&" "===e.key&&e.preventDefault(),B&&B(e),e.target===e.currentTarget&&se()&&"Enter"===e.key&&!f&&(e.preventDefault(),Z&&Z(e))})),le=fv((function(e){A&&" "===e.key&&K.current&&L&&!e.defaultPrevented&&(ce.current=!1,e.persist(),K.current.stop(e,(function(){K.current.pulsate(e)}))),G&&G(e),Z&&e.target===e.currentTarget&&se()&&" "===e.key&&!e.defaultPrevented&&Z(e)})),ge=p;"button"===ge&&M.href&&(ge="a");var de={};"button"===ge?(de.type=H,de.disabled=f):("a"===ge&&M.href||(de.role="button"),de["aria-disabled"]=f);var pe=Vm(o,n),he=Vm(j,D),fe=Vm(pe,he),Ie=t.useState(!1),Ce=Ie[0],me=Ie[1];t.useEffect((function(){me(!0)}),[]);var ve=Ce&&!C&&!f;return t.createElement(ge,(0,l.Z)({className:(0,Nt.Z)(u.root,g,L&&[u.focusVisible,y],f&&u.disabled),onBlur:oe,onClick:Z,onFocus:ie,onKeyDown:ue,onKeyUp:le,onMouseDown:q,onMouseLeave:te,onMouseUp:ee,onDragLeave:$,onTouchEnd:re,onTouchMove:ae,onTouchStart:ne,ref:fe,tabIndex:f?-1:E},de,M),c,ve?t.createElement(Rb,(0,l.Z)({ref:K,center:s},T)):null)})),Vb=dm({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(Wb),Nb=t.forwardRef((function(e,n){var r=e.children,a=e.classes,o=e.className,i=e.color,s=void 0===i?"default":i,c=e.component,u=void 0===c?"button":c,g=e.disabled,d=void 0!==g&&g,p=e.disableElevation,h=void 0!==p&&p,f=e.disableFocusRipple,I=void 0!==f&&f,C=e.endIcon,m=e.focusVisibleClassName,v=e.fullWidth,b=void 0!==v&&v,A=e.size,y=void 0===A?"medium":A,k=e.startIcon,Z=e.type,S=void 0===Z?"button":Z,w=e.variant,B=void 0===w?"text":w,G=th(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),x=k&&t.createElement("span",{className:(0,Nt.Z)(a.startIcon,a["iconSize".concat(pm(y))])},k),R=C&&t.createElement("span",{className:(0,Nt.Z)(a.endIcon,a["iconSize".concat(pm(y))])},C);return t.createElement(Vb,(0,l.Z)({className:(0,Nt.Z)(a.root,a[B],o,"inherit"===s?a.colorInherit:"default"!==s&&a["".concat(B).concat(pm(s))],"medium"!==y&&[a["".concat(B,"Size").concat(pm(y))],a["size".concat(pm(y))]],h&&a.disableElevation,d&&a.disabled,b&&a.fullWidth),component:u,disabled:d,focusRipple:!I,focusVisibleClassName:(0,Nt.Z)(a.focusVisible,m),ref:n,type:S},G),t.createElement("span",{className:a.label},x,r,R))})),Xb=dm((function(e){return{root:(0,l.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:VC(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:VC(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:VC(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(VC(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:VC(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(VC(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:VC(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(Nb);var Jb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pC(e,(0,l.Z)({defaultTheme:gm},t))},Fb=Jb((function(e){return{Container:{marginTop:10},title:{display:"flex",justifyContent:"center",alignItems:"center",background:"#3f51b5",color:"#fff",padding:20},btn:{marginTop:10,marginBottom:20}}})),Eb=function(){var e=Fb(),n=(0,t.useState)(""),r=(0,a.Z)(n,2),o=r[0],s=r[1],c=(0,t.useState)(""),l=(0,a.Z)(c,2),g=l[0],d=l[1],p=((0,t.useRef)(null),(0,t.useState)("")),h=(0,a.Z)(p,2),f=(h[0],h[1],(0,t.useState)("")),I=(0,a.Z)(f,2),C=I[0],m=I[1],v=function(){var e=(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.toDataURL(o);case 3:t=e.sent,d(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,_.jsx)(fm,{className:e.container,children:(0,_.jsxs)(vm,{children:[(0,_.jsx)("h2",{className:e.title,children:"Generate Download & Scan QR code with react.js"}),(0,_.jsx)(Am,{children:(0,_.jsxs)(Bm,{container:!0,spacing:2,children:[(0,_.jsxs)(Bm,{item:!0,xl:4,lg:5,md:6,sm:12,xs:12,children:[(0,_.jsx)(Ib,{label:"Enter Text Here",onChange:function(e){s(e.target.value)}}),(0,_.jsx)(Xb,{className:"btn",variant:"contained",color:"primary",onClick:function(){return v()},children:"Generate"}),g?(0,_.jsx)("a",{href:g,download:!0,children:(0,_.jsx)("img",{src:g,alt:"img"})}):null]}),(0,_.jsxs)(Bm,{item:!0,xl:4,lg:5,md:6,sm:12,xs:12,children:[(0,_.jsx)("h3",{children:"Qr Code Scan by Web Cam"}),(0,_.jsx)(i(),{delay:300,style:{width:"100%"},onError:function(e){console.log(e)},onScan:function(e){console.log(e),e&&m(e.text)}}),(0,_.jsxs)("h3",{children:["Scanned By WebCam :",C]})]})]})})]})})},Tb=function(){var e=(0,t.useState)(),n=(0,a.Z)(e,2),r=(n[0],n[1]),o="".concat("http://localhost:5000/","api/fishpond/query");return(0,t.useEffect)((function(){var e=function(){var e=(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(o);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r(n),console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.stack);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();(0,as.Z)(is().mark((function t(){return is().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}),[]),(0,_.jsx)(_.Fragment,{})},Yb=function(e){var n=e.Login,r=e.error,o=(0,t.useState)({email:"",password:""}),i=(0,a.Z)(o,2),s=i[0],c=i[1];return(0,_.jsx)("form",{className:"loginform",onSubmit:function(e){e.preventDefault(),n(s)},children:(0,_.jsxs)("div",{className:"form-inner",children:[(0,_.jsx)("h2",{children:"Login"}),""!=r?(0,_.jsx)("div",{className:"error",children:r}):null,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"email",type:"email",label:"Email",variant:"outlined",onChange:function(e){return c(As(As({},s),{},{email:e.target.value}))},value:s.email})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"password",type:"password",label:"Password",variant:"outlined",onChange:function(e){return c(As(As({},s),{},{password:e.target.value}))},value:s.password})}),(0,_.jsx)("input",{className:"login",type:"submit",value:"LOGIN"})]})})},Hb=function(){var e=(0,t.useState)({name:"",email:""}),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=R(),g=function(e){(0,as.Z)(is().mark((function t(){var n;return is().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("http://localhost:5000/","api/auth/login"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}).then((function(e){return e.json()}));case 3:(n=t.sent).ok?(Is(n.token),l("/")):u(n.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()};return(0,_.jsx)("div",{className:"loginpage",children:""!=r.email?(0,_.jsxs)("div",{className:"welcome",children:[(0,_.jsxs)("h2",{children:[" Welcome, ",(0,_.jsx)("span",{children:r.email})]}),(0,_.jsx)("button",{className:"login",onClick:function(){console.log("Logout"),o({name:"",email:""})},children:"Logout"})]}):(0,_.jsx)(Yb,{Login:g,error:c})})},Mb=function(e){return(0,_.jsx)("div",{className:"FuncBox",children:(0,_.jsx)("div",{className:"FuncboxText",children:e.text})})},Db=function(){R();return(0,_.jsx)("div",{className:"FuncBoxContainer",children:["fishponds","periods","sensors","fishs","records"].map((function(e,t){return(0,_.jsx)(gs,{to:e,children:(0,_.jsx)(Mb,{text:e},t)},t)}))})},Kb=function(){var e=x(),n=(0,t.useState)(10),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(["#","ID","Location","Length","Height","Width"]),c=(0,a.Z)(s,2),u=c[0],l=(c[1],(0,t.useState)(["fishpondId","location","length","height","width"])),g=(0,a.Z)(l,2),d=g[0],p=(g[1],(0,t.useState)([])),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,t.useState)([]),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=(0,t.useState)([]),y=(0,a.Z)(A,2),k=y[0],Z=y[1],S=(0,t.useState)(["".concat(e.pathname,"/edit"),"fishpondId"]),w=(0,a.Z)(S,2),B=w[0],G=(w[1],(0,t.useState)(!0)),W=(0,a.Z)(G,2),V=W[0],N=W[1],X=R(),J=Cs();(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n,r;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:J}}).then((function(e){return e.json()}));case 3:return n=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/fishpond/query"));case 6:return r=e.sent,e.next=9,r.json();case 9:(t=e.sent).ok&&n.ok&&(I(t.data),b(t.data),N(!1)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t=[];case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]),(0,t.useEffect)((function(){i(Math.ceil(v.length/10)),Z(v.slice(0,10))}),[v]);return V?(0,_.jsx)(Js,{}):(0,_.jsxs)("div",{className:"container",children:[(0,_.jsx)(Xs(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:o,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){Z(v.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,_.jsxs)("div",{className:"searchbar-container",children:[(0,_.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(e.pathname,"/add"))},children:"Add"}),(0,_.jsx)(qo,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=f.filter((function(e){return"".concat(d.map((function(t,n){return e[t]+""}))).toLowerCase().includes(t)}));b(n)},InputProps:{startAdornment:(0,_.jsx)(ts,{position:"start",children:(0,_.jsx)(Yi.Z,{fontSize:"large",color:"info"})})}})]}),(0,_.jsx)(ks,{accessor:d,header:u,data:k,link:B})]})},zb=function(){var e=x(),n=(0,t.useState)(10),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(["#","Fish Type","Last Update"]),c=(0,a.Z)(s,2),u=c[0],l=(c[1],(0,t.useState)(["fishtype","updatedAt"])),g=(0,a.Z)(l,2),d=g[0],p=(g[1],(0,t.useState)([])),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,t.useState)([]),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=(0,t.useState)([]),y=(0,a.Z)(A,2),k=y[0],Z=y[1],S=(0,t.useState)(["".concat(e.pathname,"/edit"),"fishtype"]),w=(0,a.Z)(S,2),B=w[0],G=(w[1],(0,t.useState)(!0)),W=(0,a.Z)(G,2),V=W[0],N=W[1],X=R(),J=Cs();(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n,r;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:J}}).then((function(e){return e.json()}));case 3:return n=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/fishtype/query"));case 6:return r=e.sent,e.next=9,r.json();case 9:(t=e.sent).ok&&n.ok&&(t.data=t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})),I(t.data),b(t.data),N(!1)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t=[];case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]),(0,t.useEffect)((function(){i(Math.ceil(v.length/10)),Z(v.slice(0,10))}),[v]);return V?(0,_.jsx)(Js,{}):(0,_.jsxs)("div",{className:"container",children:[(0,_.jsx)(Xs(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:o,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(v.length),console.log(e.selected),Z(v.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,_.jsxs)("div",{className:"searchbar-container",children:[(0,_.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(e.pathname,"/add"))},children:"Add"}),"   ",(0,_.jsx)(qo,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=f.filter((function(e){return"".concat(d.map((function(t,n){return e[t]+""}))).toLowerCase().includes(t)}));console.log(n),b(n)},InputProps:{startAdornment:(0,_.jsx)(ts,{position:"start",children:(0,_.jsx)(Yi.Z,{fontSize:"large",color:"info"})})}})]}),(0,_.jsx)(ks,{accessor:d,header:u,data:k,link:B})]})},Lb=function(){var e=x(),n=(0,t.useState)(10),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(["#","Fishpond ID","Period ID","Fish Type","Last Update"]),c=(0,a.Z)(s,2),u=c[0],l=(c[1],(0,t.useState)(["fishpond.fishpondId","periodId","fishtype.fishtype","updatedAt"])),g=(0,a.Z)(l,2),d=g[0],p=(g[1],(0,t.useState)([])),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,t.useState)([]),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=(0,t.useState)([]),y=(0,a.Z)(A,2),k=y[0],Z=y[1],S=(0,t.useState)(["".concat(e.pathname,"/edit"),"periodId"]),w=(0,a.Z)(S,2),B=w[0],G=(w[1],(0,t.useState)(!0)),W=(0,a.Z)(G,2),V=W[0],N=W[1],X=R(),J=Cs();(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n,r;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:J}}).then((function(e){return e.json()}));case 3:return n=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/period/query"));case 6:return r=e.sent,e.next=9,r.json();case 9:(t=e.sent).ok&&n.ok&&(t.data=t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})),I(t.data),b(t.data),N(!1)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t=[];case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]),(0,t.useEffect)((function(){i(Math.ceil(v.length/10)),Z(v.slice(0,10))}),[v]);return V?(0,_.jsx)(Js,{}):(0,_.jsxs)("div",{className:"container",children:[(0,_.jsx)(Xs(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:o,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(v.length),console.log(e.selected),Z(v.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,_.jsxs)("div",{className:"searchbar-container",children:[(0,_.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(e.pathname,"/add"))},children:"Add"}),"  ",(0,_.jsx)(qo,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=f.filter((function(e){return"".concat(d.map((function(t,n){return e[t]+""}))).toLowerCase().includes(t)}));console.log(n),b(n)},InputProps:{startAdornment:(0,_.jsx)(ts,{position:"start",children:(0,_.jsx)(Yi.Z,{fontSize:"large",color:"info"})})}})]}),(0,_.jsx)(ks,{accessor:d,header:u,data:k,link:B})]})},Pb=function(){var e=x(),n=(0,t.useState)(10),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(["#","Sensor Type","Symbol"]),c=(0,a.Z)(s,2),u=c[0],l=(c[1],(0,t.useState)(["sensortype","unit"])),g=(0,a.Z)(l,2),d=g[0],p=(g[1],(0,t.useState)([])),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,t.useState)([]),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=(0,t.useState)([]),y=(0,a.Z)(A,2),k=y[0],Z=y[1],S=(0,t.useState)(["".concat(e.pathname,"/edit"),"sensortype"]),w=(0,a.Z)(S,2),B=w[0],G=(w[1],(0,t.useState)(!0)),W=(0,a.Z)(G,2),V=W[0],N=W[1],X=R();(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n,r,a;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cs();case 2:return n=e.sent,e.prev=3,e.next=6,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:n}}).then((function(e){return e.json()}));case 6:return r=e.sent,e.next=9,fetch("".concat("http://localhost:5000/","api/sensortype/query"),{headers:{token:"".concat(n)}});case 9:return a=e.sent,e.next=12,a.json();case 12:(t=e.sent).ok&&r.ok&&(I(t.data),b(t.data),N(!1)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0),t=[];case 20:case"end":return e.stop()}}),e,null,[[3,16]])})))()}),[]),(0,t.useEffect)((function(){i(Math.ceil(v.length/10)),Z(v.slice(0,10))}),[v]);return V?(0,_.jsx)(Js,{}):(0,_.jsxs)("div",{className:"container",children:[(0,_.jsx)(Xs(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:o,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(v.length),console.log(e.selected),Z(v.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,_.jsxs)("div",{className:"searchbar-container",children:[(0,_.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(e.pathname,"/add"))},children:"Add"}),"  ",(0,_.jsx)(qo,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=f.filter((function(e){return"".concat(d.map((function(t,n){return e[t]+""}))).toLowerCase().includes(t)}));console.log(n),b(n)},InputProps:{startAdornment:(0,_.jsx)(ts,{position:"start",children:(0,_.jsx)(Yi.Z,{fontSize:"large",color:"info"})})}})]}),(0,_.jsx)(ks,{accessor:d,header:u,data:k,link:B})]})},_b=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(""),f=(0,a.Z)(h,2),I=f[0],C=f[1],m=(0,t.useState)(""),v=(0,a.Z)(m,2),b=v[0],A=v[1],y=(0,t.useState)(""),k=(0,a.Z)(y,2),Z=k[0],S=k[1],w=Cs();return(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:w}}).then((function(e){return e.json()}));case 3:e.sent.ok&&o(!1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=d&&""!=I&&""!=b?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/fishpond"),{method:"POST",headers:{token:"".concat(w),"Content-type":"application/json"},body:JSON.stringify({location:c,length:d,height:I,width:b})}).then((function(e){return e.json()}));case 3:t=e.sent,S(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("h2",{children:"Add Fishponds"}),Z,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"location",value:c,label:"Location",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"length",value:d,label:"Length",variant:"outlined",onChange:function(e){return p(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"height",value:I,label:"Height",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"height",value:b,label:"Width",variant:"outlined",onChange:function(e){return A(e.target.value)}})}),(0,_.jsx)("input",{className:"add",type:"submit"})]})})})},Ob=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(""),f=(0,a.Z)(h,2),I=f[0],C=f[1],m=(0,t.useState)(""),v=(0,a.Z)(m,2),b=v[0],A=v[1],y=(0,t.useState)(""),k=(0,a.Z)(y,2),Z=k[0],S=k[1],w=(0,t.useState)({}),B=(0,a.Z)(w,2),G=(B[0],B[1]),R=x().search,W=Ss.parse(R).id,V=Cs();(0,t.useEffect)((function(){null!=W&&(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/api/auth/check",{method:"POST",headers:{token:V}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.next=6,fetch("http://localhost:5000/api/fishpond/query?fishpondid=".concat(W)).then((function(e){return e.json()}));case 6:n=e.sent,t.ok&&n.ok&&(u(n.data[0].location),p(n.data[0].length),C(n.data[0].height),A(n.data[0].width),G(n.data[0]),o(!1)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);return r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsxs)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=d&&""!=I&&""!=b?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/fishpond/").concat(W),{method:"PUT",headers:{token:"".concat(V),"Content-type":"application/json"},body:JSON.stringify({location:c,length:d,height:I,width:b})}).then((function(e){return e.json()}));case 3:t=e.sent,S(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:[(0,_.jsx)("div",{}),(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("div",{}),(0,_.jsx)("h2",{children:"Edit Fishponds"}),Z,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"id",value:W,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"location",value:c,label:"Location",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"length",value:d,label:"Length",variant:"outlined",onChange:function(e){return p(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"height",value:I,label:"Height",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"height",value:b,label:"Width",variant:"outlined",onChange:function(e){return A(e.target.value)}})}),(0,_.jsxs)("div",{className:"addbtn-container",children:[(0,_.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,_.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/fishpond/").concat(W),{method:"DELETE",headers:{token:"".concat(V),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,S(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})]})})},Ub=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=Cs();return(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:h}}).then((function(e){return e.json()}));case 3:e.sent.ok&&o(!1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/fishtype"),{method:"POST",headers:{token:"".concat(h),"Content-type":"application/json"},body:JSON.stringify({fishtype:c})}).then((function(e){return e.json()}));case 3:t=e.sent,p(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("h2",{children:"Add Fish Type"}),d,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"fishtype",value:c,label:"Fish Type",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),(0,_.jsx)("input",{className:"add",type:"submit"})]})})})},jb=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)({}),f=(0,a.Z)(h,2),I=(f[0],f[1]),C=x().search,m=Ss.parse(C).id,v=Cs(),b=(0,t.useState)(""),A=(0,a.Z)(b,2),y=A[0],k=A[1];(0,t.useEffect)((function(){null!=m&&(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:v}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/fishtype/admin/query?fishtype=").concat(m),{headers:{token:v}}).then((function(e){return e.json()}));case 6:(n=e.sent).ok&&t.ok&&(u(n.data[0].fishtype),k(n.data[0]._id),I(n.data[0]),o(!1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);return r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/fishtype/").concat(y),{method:"PUT",headers:{token:"".concat(v),"Content-type":"application/json"},body:JSON.stringify({fishtype:c})}).then((function(e){return e.json()}));case 3:t=e.sent,p(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("div",{}),(0,_.jsx)("h2",{children:"Edit Fishponds"}),d,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"objectid",value:y,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"fishtype",value:c,label:"Fish Type",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),(0,_.jsxs)("div",{className:"addbtn-container",children:[(0,_.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,_.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/fishtype/").concat(y),{method:"DELETE",headers:{token:"".concat(v),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,p(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})})})},Qb=__webpack_require__(8959);function qb(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function $b(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}var eA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,n=void 0===t||t,r=e.ignoreCase,a=void 0===r||r,o=e.limit,i=e.matchFrom,s=void 0===i?"any":i,c=e.stringify,u=e.trim,l=void 0!==u&&u;return function(e,t){var r=t.inputValue,i=t.getOptionLabel,u=l?r.trim():r;a&&(u=u.toLowerCase()),n&&(u=qb(u));var g=e.filter((function(e){var t=(c||i)(e);return a&&(t=t.toLowerCase()),n&&(t=qb(t)),"start"===s?0===t.indexOf(u):t.indexOf(u)>-1}));return"number"===typeof o?g.slice(0,o):g}}();function tA(e){var n,r=e.autoComplete,o=void 0!==r&&r,i=e.autoHighlight,s=void 0!==i&&i,c=e.autoSelect,u=void 0!==c&&c,g=e.blurOnSelect,d=void 0!==g&&g,p=e.disabled,h=e.clearOnBlur,f=void 0===h?!e.freeSolo:h,I=e.clearOnEscape,C=void 0!==I&&I,m=e.componentName,v=void 0===m?"useAutocomplete":m,b=e.defaultValue,A=void 0===b?e.multiple?[]:null:b,y=e.disableClearable,k=void 0!==y&&y,Z=e.disableCloseOnSelect,S=void 0!==Z&&Z,w=e.disabledItemsFocusable,B=void 0!==w&&w,G=e.disableListWrap,x=void 0!==G&&G,R=e.filterOptions,W=void 0===R?eA:R,V=e.filterSelectedOptions,N=void 0!==V&&V,X=e.freeSolo,J=void 0!==X&&X,F=e.getOptionDisabled,E=e.getOptionLabel,T=void 0===E?function(e){var t;return null!=(t=e.label)?t:e}:E,Y=e.isOptionEqualToValue,H=void 0===Y?function(e,t){return e===t}:Y,M=e.groupBy,D=e.handleHomeEndKeys,K=void 0===D?!e.freeSolo:D,z=e.id,L=e.includeInputInList,P=void 0!==L&&L,_=e.inputValue,O=e.multiple,U=void 0!==O&&O,j=e.onChange,Q=e.onClose,q=e.onHighlightChange,$=e.onInputChange,ee=e.onOpen,te=e.open,ne=e.openOnFocus,re=void 0!==ne&&ne,ae=e.options,oe=e.readOnly,ie=void 0!==oe&&oe,se=e.selectOnFocus,ce=void 0===se?!e.freeSolo:se,ue=e.value,le=(0,Jt.Z)(z);n=function(e){var t=T(e);return"string"!==typeof t?String(t):t};var ge=t.useRef(!1),de=t.useRef(!0),pe=t.useRef(null),he=t.useRef(null),fe=t.useState(null),Ie=(0,a.Z)(fe,2),Ce=Ie[0],me=Ie[1],ve=t.useState(-1),be=(0,a.Z)(ve,2),Ae=be[0],ye=be[1],ke=s?0:-1,Ze=t.useRef(ke),Se=(0,Qb.Z)({controlled:ue,default:A,name:v}),we=(0,a.Z)(Se,2),Be=we[0],Ge=we[1],xe=(0,Qb.Z)({controlled:_,default:"",name:v,state:"inputValue"}),Re=(0,a.Z)(xe,2),We=Re[0],Ve=Re[1],Ne=t.useState(!1),Xe=(0,a.Z)(Ne,2),Je=Xe[0],Fe=Xe[1],Ee=t.useCallback((function(e,t){if((U?Be.length<t.length:null!==t)||f){var r;if(U)r="";else if(null==t)r="";else{var a=n(t);r="string"===typeof a?a:""}We!==r&&(Ve(r),$&&$(e,r,"reset"))}}),[n,We,U,$,Ve,f,Be]),Te=t.useRef();t.useEffect((function(){var e=Be!==Te.current;Te.current=Be,Je&&!e||J&&!e||Ee(null,Be)}),[Be,Ee,Je,Te,J]);var Ye=(0,Qb.Z)({controlled:te,default:!1,name:v,state:"open"}),He=(0,a.Z)(Ye,2),Me=He[0],De=He[1],Ke=t.useState(!0),ze=(0,a.Z)(Ke,2),Le=ze[0],Pe=ze[1],_e=!U&&null!=Be&&We===n(Be),Oe=Me&&!ie,Ue=Oe?W(ae.filter((function(e){return!N||!(U?Be:[Be]).some((function(t){return null!==t&&H(e,t)}))})),{inputValue:_e&&Le?"":We,getOptionLabel:n}):[],je=Me&&Ue.length>0&&!ie,Qe=(0,Ia.Z)((function(e){-1===e?pe.current.focus():Ce.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));t.useEffect((function(){U&&Ae>Be.length-1&&(ye(-1),Qe(-1))}),[Be,U,Ae,Qe]);var qe=(0,Ia.Z)((function(e){var t=e.event,n=e.index,r=e.reason,a=void 0===r?"auto":r;if(Ze.current=n,-1===n?pe.current.removeAttribute("aria-activedescendant"):pe.current.setAttribute("aria-activedescendant","".concat(le,"-option-").concat(n)),q&&q(t,-1===n?null:Ue[n],a),he.current){var o=he.current.querySelector('[role="option"].Mui-focused');o&&(o.classList.remove("Mui-focused"),o.classList.remove("Mui-focusVisible"));var i=he.current.parentElement.querySelector('[role="listbox"]');if(i)if(-1!==n){var s=he.current.querySelector('[data-option-index="'.concat(n,'"]'));if(s&&(s.classList.add("Mui-focused"),"keyboard"===a&&s.classList.add("Mui-focusVisible"),i.scrollHeight>i.clientHeight&&"mouse"!==a)){var c=s,u=i.clientHeight+i.scrollTop,l=c.offsetTop+c.offsetHeight;l>u?i.scrollTop=l-i.clientHeight:c.offsetTop-c.offsetHeight*(M?1.3:0)<i.scrollTop&&(i.scrollTop=c.offsetTop-c.offsetHeight*(M?1.3:0))}}else i.scrollTop=0}})),$e=(0,Ia.Z)((function(e){var t=e.event,r=e.diff,a=e.direction,i=void 0===a?"next":a,s=e.reason,c=void 0===s?"auto":s;if(Oe){var u=function(e,t){if(!he.current||-1===e)return-1;for(var n=e;;){if("next"===t&&n===Ue.length||"previous"===t&&-1===n)return-1;var r=he.current.querySelector('[data-option-index="'.concat(n,'"]')),a=!B&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(!(r&&!r.hasAttribute("tabindex")||a))return n;n+="next"===t?1:-1}}(function(){var e=Ue.length-1;if("reset"===r)return ke;if("start"===r)return 0;if("end"===r)return e;var t=Ze.current+r;return t<0?-1===t&&P?-1:x&&-1!==Ze.current||Math.abs(r)>1?0:e:t>e?t===e+1&&P?-1:x||Math.abs(r)>1?e:0:t}(),i);if(qe({index:u,reason:c,event:t}),o&&"reset"!==r)if(-1===u)pe.current.value=We;else{var l=n(Ue[u]);pe.current.value=l,0===l.toLowerCase().indexOf(We.toLowerCase())&&We.length>0&&pe.current.setSelectionRange(We.length,l.length)}}})),et=t.useCallback((function(){if(Oe){var e=U?Be[0]:Be;if(0!==Ue.length&&null!=e){if(he.current)if(null==e)Ze.current>=Ue.length-1?qe({index:Ue.length-1}):qe({index:Ze.current});else{var t=Ue[Ze.current];if(U&&t&&-1!==$b(Be,(function(e){return H(t,e)})))return;var n=$b(Ue,(function(t){return H(t,e)}));-1===n?$e({diff:"reset"}):qe({index:n})}}else $e({diff:"reset"})}}),[Ue.length,!U&&Be,N,$e,qe,Oe,We,U]),tt=(0,Ia.Z)((function(e){(0,ma.Z)(he,e),e&&et()}));t.useEffect((function(){et()}),[et]);var nt=function(e){Me||(De(!0),Pe(!0),ee&&ee(e))},rt=function(e,t){Me&&(De(!1),Q&&Q(e,t))},at=function(e,t,n,r){if(Array.isArray(Be)){if(Be.length===t.length&&Be.every((function(e,n){return e===t[n]})))return}else if(Be===t)return;j&&j(e,t,n,r),Ge(t)},ot=t.useRef(!1),it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",a=n,o=t;if(U){var i=$b(o=Array.isArray(Be)?Be.slice():[],(function(e){return H(t,e)}));-1===i?o.push(t):"freeSolo"!==r&&(o.splice(i,1),a="removeOption")}Ee(e,o),at(e,o,a,{option:t}),S||e.ctrlKey||e.metaKey||rt(e,a),(!0===d||"touch"===d&&ot.current||"mouse"===d&&!ot.current)&&pe.current.blur()};var st=function(e,t){if(U){rt(e,"toggleInput");var n=Ae;-1===Ae?""===We&&"previous"===t&&(n=Be.length-1):((n+="next"===t?1:-1)<0&&(n=0),n===Be.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;for(var n=e;;){if("next"===t&&n===Be.length||"previous"===t&&-1===n)return-1;var r=Ce.querySelector('[data-tag-index="'.concat(n,'"]'));if(r&&r.hasAttribute("tabindex")&&!r.disabled&&"true"!==r.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),ye(n),Qe(n)}},ct=function(e){ge.current=!0,Ve(""),$&&$(e,"","clear"),at(e,U?[]:null,"clear")},ut=function(e){return function(t){if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Ae&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(ye(-1),Qe(-1)),229!==t.which))switch(t.key){case"Home":Oe&&K&&(t.preventDefault(),$e({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":Oe&&K&&(t.preventDefault(),$e({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),$e({diff:-5,direction:"previous",reason:"keyboard",event:t}),nt(t);break;case"PageDown":t.preventDefault(),$e({diff:5,direction:"next",reason:"keyboard",event:t}),nt(t);break;case"ArrowDown":t.preventDefault(),$e({diff:1,direction:"next",reason:"keyboard",event:t}),nt(t);break;case"ArrowUp":t.preventDefault(),$e({diff:-1,direction:"previous",reason:"keyboard",event:t}),nt(t);break;case"ArrowLeft":st(t,"previous");break;case"ArrowRight":st(t,"next");break;case"Enter":if(-1!==Ze.current&&Oe){var n=Ue[Ze.current],r=!!F&&F(n);if(t.preventDefault(),r)return;it(t,n,"selectOption"),o&&pe.current.setSelectionRange(pe.current.value.length,pe.current.value.length)}else J&&""!==We&&!1===_e&&(U&&t.preventDefault(),it(t,We,"createOption","freeSolo"));break;case"Escape":Oe?(t.preventDefault(),t.stopPropagation(),rt(t,"escape")):C&&(""!==We||U&&Be.length>0)&&(t.preventDefault(),t.stopPropagation(),ct(t));break;case"Backspace":if(U&&!ie&&""===We&&Be.length>0){var a=-1===Ae?Be.length-1:Ae,i=Be.slice();i.splice(a,1),at(t,i,"removeOption",{option:Be[a]})}}}},lt=function(e){Fe(!0),re&&!ge.current&&nt(e)},gt=function(e){null!==he.current&&he.current.parentElement.contains(document.activeElement)?pe.current.focus():(Fe(!1),de.current=!0,ge.current=!1,u&&-1!==Ze.current&&Oe?it(e,Ue[Ze.current],"blur"):u&&J&&""!==We?it(e,We,"blur","freeSolo"):f&&Ee(e,Be),rt(e,"blur"))},dt=function(e){var t=e.target.value;We!==t&&(Ve(t),Pe(!1),$&&$(e,t,"input")),""===t?k||U||at(e,null,"clear"):nt(e)},pt=function(e){qe({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},ht=function(){ot.current=!0},ft=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));it(e,Ue[t],"selectOption"),ot.current=!1},It=function(e){return function(t){var n=Be.slice();n.splice(e,1),at(t,n,"removeOption",{option:Be[e]})}},Ct=function(e){Me?rt(e,"toggleInput"):nt(e)},mt=function(e){e.target.getAttribute("id")!==le&&e.preventDefault()},vt=function(){pe.current.focus(),ce&&de.current&&pe.current.selectionEnd-pe.current.selectionStart===0&&pe.current.select(),de.current=!1},bt=function(e){""!==We&&Me||Ct(e)},At=J&&We.length>0;At=At||(U?Be.length>0:null!==Be);var yt=Ue;if(M){new Map;yt=Ue.reduce((function(e,t,n){var r=M(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return p&&Je&&gt(),{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.Z)({"aria-owns":je?"".concat(le,"-listbox"):null},e,{onKeyDown:ut(e),onMouseDown:mt,onClick:vt})},getInputLabelProps:function(){return{id:"".concat(le,"-label"),htmlFor:le}},getInputProps:function(){return{id:le,value:We,onBlur:gt,onFocus:lt,onChange:dt,onMouseDown:bt,"aria-activedescendant":Oe?"":null,"aria-autocomplete":o?"both":"list","aria-controls":je?"".concat(le,"-listbox"):void 0,"aria-expanded":je,autoComplete:"off",ref:pe,autoCapitalize:"none",spellCheck:"false",role:"combobox"}},getClearProps:function(){return{tabIndex:-1,onClick:ct}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:Ct}},getTagProps:function(e){var t=e.index;return(0,l.Z)({key:t,"data-tag-index":t,tabIndex:-1},!ie&&{onDelete:It(t)})},getListboxProps:function(){return{role:"listbox",id:"".concat(le,"-listbox"),"aria-labelledby":"".concat(le,"-label"),ref:tt,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var t=e.index,r=e.option,a=(U?Be:[Be]).some((function(e){return null!=e&&H(r,e)})),o=!!F&&F(r);return{key:n(r),tabIndex:-1,role:"option",id:"".concat(le,"-option-").concat(t),onMouseOver:pt,onClick:ft,onTouchStart:ht,"data-option-index":t,"aria-disabled":o,"aria-selected":a}},id:le,inputValue:We,value:Be,dirty:At,popupOpen:Oe,focused:Je||-1!==Ae,anchorEl:Ce,setAnchorEl:me,focusedTag:Ae,groupedOptions:yt}}function nA(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rA(e){return e instanceof nA(e).Element||e instanceof Element}function aA(e){return e instanceof nA(e).HTMLElement||e instanceof HTMLElement}function oA(e){return"undefined"!==typeof ShadowRoot&&(e instanceof nA(e).ShadowRoot||e instanceof ShadowRoot)}var iA=Math.max,sA=Math.min,cA=Math.round;function uA(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,a=1;if(aA(e)&&t){var o=e.offsetHeight,i=e.offsetWidth;i>0&&(r=cA(n.width)/i||1),o>0&&(a=cA(n.height)/o||1)}return{width:n.width/r,height:n.height/a,top:n.top/a,right:n.right/r,bottom:n.bottom/a,left:n.left/r,x:n.left/r,y:n.top/a}}function lA(e){var t=nA(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function gA(e){return e?(e.nodeName||"").toLowerCase():null}function dA(e){return((rA(e)?e.ownerDocument:e.document)||window.document).documentElement}function pA(e){return uA(dA(e)).left+lA(e).scrollLeft}function hA(e){return nA(e).getComputedStyle(e)}function fA(e){var t=hA(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function IA(e,t,n){void 0===n&&(n=!1);var r=aA(t),a=aA(t)&&function(e){var t=e.getBoundingClientRect(),n=cA(t.width)/e.offsetWidth||1,r=cA(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=dA(t),i=uA(e,a),s={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&(("body"!==gA(t)||fA(o))&&(s=function(e){return e!==nA(e)&&aA(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:lA(e);var t}(t)),aA(t)?((c=uA(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=pA(o))),{x:i.left+s.scrollLeft-c.x,y:i.top+s.scrollTop-c.y,width:i.width,height:i.height}}function CA(e){var t=uA(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function mA(e){return"html"===gA(e)?e:e.assignedSlot||e.parentNode||(oA(e)?e.host:null)||dA(e)}function vA(e){return["html","body","#document"].indexOf(gA(e))>=0?e.ownerDocument.body:aA(e)&&fA(e)?e:vA(mA(e))}function bA(e,t){var n;void 0===t&&(t=[]);var r=vA(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),o=nA(r),i=a?[o].concat(o.visualViewport||[],fA(r)?r:[]):r,s=t.concat(i);return a?s:s.concat(bA(mA(i)))}function AA(e){return["table","td","th"].indexOf(gA(e))>=0}function yA(e){return aA(e)&&"fixed"!==hA(e).position?e.offsetParent:null}function kA(e){for(var t=nA(e),n=yA(e);n&&AA(n)&&"static"===hA(n).position;)n=yA(n);return n&&("html"===gA(n)||"body"===gA(n)&&"static"===hA(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&aA(e)&&"fixed"===hA(e).position)return null;var n=mA(e);for(oA(n)&&(n=n.host);aA(n)&&["html","body"].indexOf(gA(n))<0;){var r=hA(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var ZA="top",SA="bottom",wA="right",BA="left",GA="auto",xA=[ZA,SA,wA,BA],RA="start",WA="end",VA="viewport",NA="popper",XA=xA.reduce((function(e,t){return e.concat([t+"-"+RA,t+"-"+WA])}),[]),JA=[].concat(xA,[GA]).reduce((function(e,t){return e.concat([t,t+"-"+RA,t+"-"+WA])}),[]),FA=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function EA(e){var t=new Map,n=new Set,r=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&a(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),r}function TA(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var YA={placement:"bottom",modifiers:[],strategy:"absolute"};function HA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function MA(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,o=void 0===a?YA:a;return function(e,t,n){void 0===n&&(n=o);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},YA,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},i=[],s=!1,c={state:a,setOptions:function(n){var s="function"===typeof n?n(a.options):n;u(),a.options=Object.assign({},o,a.options,s),a.scrollParents={reference:rA(e)?bA(e):e.contextElement?bA(e.contextElement):[],popper:bA(t)};var l=function(e){var t=EA(e);return FA.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=l.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:a,name:t,instance:c,options:r}),u=function(){};i.push(s||u)}})),c.update()},forceUpdate:function(){if(!s){var e=a.elements,t=e.reference,n=e.popper;if(HA(t,n)){a.rects={reference:IA(t,kA(n),"fixed"===a.options.strategy),popper:CA(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var o=a.orderedModifiers[r],i=o.fn,u=o.options,l=void 0===u?{}:u,g=o.name;"function"===typeof i&&(a=i({state:a,options:l,name:g,instance:c})||a)}else a.reset=!1,r=-1}}},update:TA((function(){return new Promise((function(e){c.forceUpdate(),e(a)}))})),destroy:function(){u(),s=!0}};if(!HA(e,t))return c;function u(){i.forEach((function(e){return e()})),i=[]}return c.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}var DA={passive:!0};var KA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,o=void 0===a||a,i=r.resize,s=void 0===i||i,c=nA(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach((function(e){e.addEventListener("scroll",n.update,DA)})),s&&c.addEventListener("resize",n.update,DA),function(){o&&u.forEach((function(e){e.removeEventListener("scroll",n.update,DA)})),s&&c.removeEventListener("resize",n.update,DA)}},data:{}};function zA(e){return e.split("-")[0]}function LA(e){return e.split("-")[1]}function PA(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _A(e){var t,n=e.reference,r=e.element,a=e.placement,o=a?zA(a):null,i=a?LA(a):null,s=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case ZA:t={x:s,y:n.y-r.height};break;case SA:t={x:s,y:n.y+n.height};break;case wA:t={x:n.x+n.width,y:c};break;case BA:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=o?PA(o):null;if(null!=u){var l="y"===u?"height":"width";switch(i){case RA:t[u]=t[u]-(n[l]/2-r[l]/2);break;case WA:t[u]=t[u]+(n[l]/2-r[l]/2)}}return t}var OA={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=_A({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},UA={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jA(e){var t,n=e.popper,r=e.popperRect,a=e.placement,o=e.variation,i=e.offsets,s=e.position,c=e.gpuAcceleration,u=e.adaptive,l=e.roundOffsets,g=e.isFixed,d=i.x,p=void 0===d?0:d,h=i.y,f=void 0===h?0:h,I="function"===typeof l?l({x:p,y:f}):{x:p,y:f};p=I.x,f=I.y;var C=i.hasOwnProperty("x"),m=i.hasOwnProperty("y"),v=BA,b=ZA,A=window;if(u){var y=kA(n),k="clientHeight",Z="clientWidth";if(y===nA(n)&&"static"!==hA(y=dA(n)).position&&"absolute"===s&&(k="scrollHeight",Z="scrollWidth"),y=y,a===ZA||(a===BA||a===wA)&&o===WA)b=SA,f-=(g&&y===A&&A.visualViewport?A.visualViewport.height:y[k])-r.height,f*=c?1:-1;if(a===BA||(a===ZA||a===SA)&&o===WA)v=wA,p-=(g&&y===A&&A.visualViewport?A.visualViewport.width:y[Z])-r.width,p*=c?1:-1}var S,w=Object.assign({position:s},u&&UA),B=!0===l?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:cA(t*r)/r||0,y:cA(n*r)/r||0}}({x:p,y:f}):{x:p,y:f};return p=B.x,f=B.y,c?Object.assign({},w,((S={})[b]=m?"0":"",S[v]=C?"0":"",S.transform=(A.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",S)):Object.assign({},w,((t={})[b]=m?f+"px":"",t[v]=C?p+"px":"",t.transform="",t))}var QA={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},a=t.elements[e];aA(a)&&gA(a)&&(Object.assign(a.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],a=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});aA(r)&&gA(r)&&(Object.assign(r.style,o),Object.keys(a).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var qA={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,o=void 0===a?[0,0]:a,i=JA.reduce((function(e,n){return e[n]=function(e,t,n){var r=zA(e),a=[BA,ZA].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,i=o[0],s=o[1];return i=i||0,s=(s||0)*a,[BA,wA].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}(n,t.rects,o),e}),{}),s=i[t.placement],c=s.x,u=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=i}},$A={left:"right",right:"left",bottom:"top",top:"bottom"};function ey(e){return e.replace(/left|right|bottom|top/g,(function(e){return $A[e]}))}var ty={start:"end",end:"start"};function ny(e){return e.replace(/start|end/g,(function(e){return ty[e]}))}function ry(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&oA(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ay(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oy(e,t){return t===VA?ay(function(e){var t=nA(e),n=dA(e),r=t.visualViewport,a=n.clientWidth,o=n.clientHeight,i=0,s=0;return r&&(a=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=r.offsetLeft,s=r.offsetTop)),{width:a,height:o,x:i+pA(e),y:s}}(e)):rA(t)?function(e){var t=uA(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):ay(function(e){var t,n=dA(e),r=lA(e),a=null==(t=e.ownerDocument)?void 0:t.body,o=iA(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=iA(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+pA(e),c=-r.scrollTop;return"rtl"===hA(a||n).direction&&(s+=iA(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:i,x:s,y:c}}(dA(e)))}function iy(e,t,n){var r="clippingParents"===t?function(e){var t=bA(mA(e)),n=["absolute","fixed"].indexOf(hA(e).position)>=0&&aA(e)?kA(e):e;return rA(n)?t.filter((function(e){return rA(e)&&ry(e,n)&&"body"!==gA(e)})):[]}(e):[].concat(t),a=[].concat(r,[n]),o=a[0],i=a.reduce((function(t,n){var r=oy(e,n);return t.top=iA(r.top,t.top),t.right=sA(r.right,t.right),t.bottom=sA(r.bottom,t.bottom),t.left=iA(r.left,t.left),t}),oy(e,o));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function sy(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function cy(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function uy(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,o=n.boundary,i=void 0===o?"clippingParents":o,s=n.rootBoundary,c=void 0===s?VA:s,u=n.elementContext,l=void 0===u?NA:u,g=n.altBoundary,d=void 0!==g&&g,p=n.padding,h=void 0===p?0:p,f=sy("number"!==typeof h?h:cy(h,xA)),I=l===NA?"reference":NA,C=e.rects.popper,m=e.elements[d?I:l],v=iy(rA(m)?m:m.contextElement||dA(e.elements.popper),i,c),b=uA(e.elements.reference),A=_A({reference:b,element:C,strategy:"absolute",placement:a}),y=ay(Object.assign({},C,A)),k=l===NA?y:b,Z={top:v.top-k.top+f.top,bottom:k.bottom-v.bottom+f.bottom,left:v.left-k.left+f.left,right:k.right-v.right+f.right},S=e.modifiersData.offset;if(l===NA&&S){var w=S[a];Object.keys(Z).forEach((function(e){var t=[wA,SA].indexOf(e)>=0?1:-1,n=[ZA,SA].indexOf(e)>=0?"y":"x";Z[e]+=w[n]*t}))}return Z}var ly={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,o=void 0===a||a,i=n.altAxis,s=void 0===i||i,c=n.fallbackPlacements,u=n.padding,l=n.boundary,g=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=void 0===p||p,f=n.allowedAutoPlacements,I=t.options.placement,C=zA(I),m=c||(C===I||!h?[ey(I)]:function(e){if(zA(e)===GA)return[];var t=ey(e);return[ny(e),t,ny(t)]}(I)),v=[I].concat(m).reduce((function(e,n){return e.concat(zA(n)===GA?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,o=n.rootBoundary,i=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?JA:c,l=LA(r),g=l?s?XA:XA.filter((function(e){return LA(e)===l})):xA,d=g.filter((function(e){return u.indexOf(e)>=0}));0===d.length&&(d=g);var p=d.reduce((function(t,n){return t[n]=uy(e,{placement:n,boundary:a,rootBoundary:o,padding:i})[zA(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:l,rootBoundary:g,padding:u,flipVariations:h,allowedAutoPlacements:f}):n)}),[]),b=t.rects.reference,A=t.rects.popper,y=new Map,k=!0,Z=v[0],S=0;S<v.length;S++){var w=v[S],B=zA(w),G=LA(w)===RA,x=[ZA,SA].indexOf(B)>=0,R=x?"width":"height",W=uy(t,{placement:w,boundary:l,rootBoundary:g,altBoundary:d,padding:u}),V=x?G?wA:BA:G?SA:ZA;b[R]>A[R]&&(V=ey(V));var N=ey(V),X=[];if(o&&X.push(W[B]<=0),s&&X.push(W[V]<=0,W[N]<=0),X.every((function(e){return e}))){Z=w,k=!1;break}y.set(w,X)}if(k)for(var J=function(e){var t=v.find((function(t){var n=y.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return Z=t,"break"},F=h?3:1;F>0;F--){if("break"===J(F))break}t.placement!==Z&&(t.modifiersData[r]._skip=!0,t.placement=Z,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function gy(e,t,n){return iA(e,sA(t,n))}var dy={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,o=void 0===a||a,i=n.altAxis,s=void 0!==i&&i,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,g=n.padding,d=n.tether,p=void 0===d||d,h=n.tetherOffset,f=void 0===h?0:h,I=uy(t,{boundary:c,rootBoundary:u,padding:g,altBoundary:l}),C=zA(t.placement),m=LA(t.placement),v=!m,b=PA(C),A="x"===b?"y":"x",y=t.modifiersData.popperOffsets,k=t.rects.reference,Z=t.rects.popper,S="function"===typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,w="number"===typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),B=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(y){if(o){var x,R="y"===b?ZA:BA,W="y"===b?SA:wA,V="y"===b?"height":"width",N=y[b],X=N+I[R],J=N-I[W],F=p?-Z[V]/2:0,E=m===RA?k[V]:Z[V],T=m===RA?-Z[V]:-k[V],Y=t.elements.arrow,H=p&&Y?CA(Y):{width:0,height:0},M=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},D=M[R],K=M[W],z=gy(0,k[V],H[V]),L=v?k[V]/2-F-z-D-w.mainAxis:E-z-D-w.mainAxis,P=v?-k[V]/2+F+z+K+w.mainAxis:T+z+K+w.mainAxis,_=t.elements.arrow&&kA(t.elements.arrow),O=_?"y"===b?_.clientTop||0:_.clientLeft||0:0,U=null!=(x=null==B?void 0:B[b])?x:0,j=N+P-U,Q=gy(p?sA(X,N+L-U-O):X,N,p?iA(J,j):J);y[b]=Q,G[b]=Q-N}if(s){var q,$="x"===b?ZA:BA,ee="x"===b?SA:wA,te=y[A],ne="y"===A?"height":"width",re=te+I[$],ae=te-I[ee],oe=-1!==[ZA,BA].indexOf(C),ie=null!=(q=null==B?void 0:B[A])?q:0,se=oe?re:te-k[ne]-Z[ne]-ie+w.altAxis,ce=oe?te+k[ne]+Z[ne]-ie-w.altAxis:ae,ue=p&&oe?function(e,t,n){var r=gy(e,t,n);return r>n?n:r}(se,te,ce):gy(p?se:re,te,p?ce:ae);y[A]=ue,G[A]=ue-te}t.modifiersData[r]=G}},requiresIfExists:["offset"]};var py={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=e.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,s=zA(n.placement),c=PA(s),u=[BA,wA].indexOf(s)>=0?"height":"width";if(o&&i){var l=function(e,t){return sy("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:cy(e,xA))}(a.padding,n),g=CA(o),d="y"===c?ZA:BA,p="y"===c?SA:wA,h=n.rects.reference[u]+n.rects.reference[c]-i[c]-n.rects.popper[u],f=i[c]-n.rects.reference[c],I=kA(o),C=I?"y"===c?I.clientHeight||0:I.clientWidth||0:0,m=h/2-f/2,v=l[d],b=C-g[u]-l[p],A=C/2-g[u]/2+m,y=gy(v,A,b),k=c;n.modifiersData[r]=((t={})[k]=y,t.centerOffset=y-A,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&ry(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hy(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function fy(e){return[ZA,wA,SA,BA].some((function(t){return e[t]>=0}))}var Iy={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,i=uy(t,{elementContext:"reference"}),s=uy(t,{altBoundary:!0}),c=hy(i,r),u=hy(s,a,o),l=fy(c),g=fy(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":g})}},Cy=MA({defaultModifiers:[KA,OA,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,o=n.adaptive,i=void 0===o||o,s=n.roundOffsets,c=void 0===s||s,u={placement:zA(t.placement),variation:LA(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,jA(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,jA(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},QA,qA,ly,dy,py,Iy]}),my=["anchorEl","children","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],vy=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function by(e){return"function"===typeof e?e():e}var Ay={},yy=t.forwardRef((function(e,n){var r=e.anchorEl,o=e.children,i=e.direction,s=e.disablePortal,c=e.modifiers,u=e.open,g=e.placement,d=e.popperOptions,p=e.popperRef,h=e.TransitionProps,f=(0,Vt.Z)(e,my),I=t.useRef(null),C=(0,Dt.Z)(I,n),m=t.useRef(null),v=(0,Dt.Z)(m,p),b=t.useRef(v);(0,Lt.Z)((function(){b.current=v}),[v]),t.useImperativeHandle(p,(function(){return m.current}),[]);var A=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(g,i),y=t.useState(A),k=(0,a.Z)(y,2),Z=k[0],S=k[1];t.useEffect((function(){m.current&&m.current.forceUpdate()})),(0,Lt.Z)((function(){if(r&&u){by(r);var e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(e){!function(e){S(e.placement)}(e.state)}}];null!=c&&(e=e.concat(c)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));var t=Cy(by(r),I.current,(0,l.Z)({placement:A},d,{modifiers:e}));return b.current(t),function(){t.destroy(),b.current(null)}}}),[r,s,c,u,d,A]);var w={placement:Z};return null!==h&&(w.TransitionProps=h),(0,_.jsx)("div",(0,l.Z)({ref:C,role:"tooltip"},f,{children:"function"===typeof o?o(w):o}))})),ky=t.forwardRef((function(e,n){var r=e.anchorEl,o=e.children,i=e.container,s=e.direction,c=void 0===s?"ltr":s,u=e.disablePortal,g=void 0!==u&&u,d=e.keepMounted,p=void 0!==d&&d,h=e.modifiers,f=e.open,I=e.placement,C=void 0===I?"bottom":I,m=e.popperOptions,v=void 0===m?Ay:m,b=e.popperRef,A=e.style,y=e.transition,k=void 0!==y&&y,Z=(0,Vt.Z)(e,vy),S=t.useState(!0),w=(0,a.Z)(S,2),B=w[0],G=w[1];if(!p&&!f&&(!k||B))return null;var x=i||(r?(0,fa.Z)(by(r)).body:void 0);return(0,_.jsx)(va,{disablePortal:g,container:x,children:(0,_.jsx)(yy,(0,l.Z)({anchorEl:r,direction:c,disablePortal:g,modifiers:h,ref:n,open:k?!B:f,placement:C,popperOptions:v,popperRef:b},Z,{style:(0,l.Z)({position:"fixed",top:0,left:0,display:f||!p||k&&!B?null:"none"},A),TransitionProps:k?{in:f,onEnter:function(){G(!1)},onExited:function(){G(!0)}}:null,children:o}))})})),Zy=ky,Sy=__webpack_require__(7301),wy=(0,Ft.ZP)(Zy,{name:"MuiPopper",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),By=t.forwardRef((function(e,t){var n=(0,Sy.Z)(),r=(0,Et.Z)({props:e,name:"MuiPopper"});return(0,_.jsx)(wy,(0,l.Z)({direction:null==n?void 0:n.direction},r,{ref:t}))}));function Gy(e){return(0,Cn.Z)("MuiListSubheader",e)}(0,mn.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var xy=["className","color","component","disableGutters","disableSticky","inset"],Ry=(0,Ft.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,tn.Z)(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:t.palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:t.palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:t.palette.background.paper})})),Wy=t.forwardRef((function(e,t){var n=(0,Et.Z)({props:e,name:"MuiListSubheader"}),r=n.className,a=n.color,o=void 0===a?"default":a,i=n.component,s=void 0===i?"li":i,c=n.disableGutters,u=void 0!==c&&c,g=n.disableSticky,d=void 0!==g&&g,p=n.inset,h=void 0!==p&&p,f=(0,Vt.Z)(n,xy),I=(0,l.Z)({},n,{color:o,component:s,disableGutters:u,disableSticky:d,inset:h}),C=function(e){var t=e.classes,n=e.color,r=e.disableGutters,a=e.inset,o=e.disableSticky,i={root:["root","default"!==n&&"color".concat((0,tn.Z)(n)),!r&&"gutters",a&&"inset",!o&&"sticky"]};return(0,Xt.Z)(i,Gy,t)}(I);return(0,_.jsx)(Ry,(0,l.Z)({as:s,className:(0,Nt.Z)(C.root,r),ref:t,ownerState:I},f))})),Vy=Wy,Ny=(0,To.Z)((0,_.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Xy(e){return(0,Cn.Z)("MuiChip",e)}var Jy=(0,mn.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]),Fy=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],Ey=(0,Ft.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.color,a=n.clickable,o=n.onDelete,i=n.size,s=n.variant;return[(0,Tt.Z)({},"& .".concat(Jy.avatar),t.avatar),(0,Tt.Z)({},"& .".concat(Jy.avatar),t["avatar".concat((0,tn.Z)(i))]),(0,Tt.Z)({},"& .".concat(Jy.avatar),t["avatarColor".concat((0,tn.Z)(r))]),(0,Tt.Z)({},"& .".concat(Jy.icon),t.icon),(0,Tt.Z)({},"& .".concat(Jy.icon),t["icon".concat((0,tn.Z)(i))]),(0,Tt.Z)({},"& .".concat(Jy.icon),t["iconColor".concat((0,tn.Z)(r))]),(0,Tt.Z)({},"& .".concat(Jy.deleteIcon),t.deleteIcon),(0,Tt.Z)({},"& .".concat(Jy.deleteIcon),t["deleteIcon".concat((0,tn.Z)(i))]),(0,Tt.Z)({},"& .".concat(Jy.deleteIcon),t["deleteIconColor".concat((0,tn.Z)(r))]),(0,Tt.Z)({},"& .".concat(Jy.deleteIcon),t["deleteIconOutlinedColor".concat((0,tn.Z)(r))]),t.root,t["size".concat((0,tn.Z)(i))],t["color".concat((0,tn.Z)(r))],a&&t.clickable,a&&"default"!==r&&t["clickableColor".concat((0,tn.Z)(r),")")],o&&t.deletable,o&&"default"!==r&&t["deletableColor".concat((0,tn.Z)(r))],t[s],"outlined"===s&&t["outlined".concat((0,tn.Z)(r))]]}})((function(e){var t,n=e.theme,r=e.ownerState,a=(0,Yr.Fq)(n.palette.text.primary,.26);return(0,l.Z)((t={maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:n.palette.text.primary,backgroundColor:n.palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},(0,Tt.Z)(t,"&.".concat(Jy.disabled),{opacity:n.palette.action.disabledOpacity,pointerEvents:"none"}),(0,Tt.Z)(t,"& .".concat(Jy.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300],fontSize:n.typography.pxToRem(12)}),(0,Tt.Z)(t,"& .".concat(Jy.avatarColorPrimary),{color:n.palette.primary.contrastText,backgroundColor:n.palette.primary.dark}),(0,Tt.Z)(t,"& .".concat(Jy.avatarColorSecondary),{color:n.palette.secondary.contrastText,backgroundColor:n.palette.secondary.dark}),(0,Tt.Z)(t,"& .".concat(Jy.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)}),(0,Tt.Z)(t,"& .".concat(Jy.icon),(0,l.Z)({color:"light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300],marginLeft:5,marginRight:-6},"small"===r.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==r.color&&{color:"inherit"})),(0,Tt.Z)(t,"& .".concat(Jy.deleteIcon),(0,l.Z)({WebkitTapHighlightColor:"transparent",color:a,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,Yr.Fq)(a,.4)}},"small"===r.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==r.color&&{color:(0,Yr.Fq)(n.palette[r.color].contrastText,.7),"&:hover, &:active":{color:n.palette[r.color].contrastText}})),t),"small"===r.size&&{height:24},"default"!==r.color&&{backgroundColor:n.palette[r.color].main,color:n.palette[r.color].contrastText},r.onDelete&&(0,Tt.Z)({},"&.".concat(Jy.focusVisible),{backgroundColor:(0,Yr.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),r.onDelete&&"default"!==r.color&&(0,Tt.Z)({},"&.".concat(Jy.focusVisible),{backgroundColor:n.palette[r.color].dark}))}),(function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({},r.clickable&&(t={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:(0,Yr.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}},(0,Tt.Z)(t,"&.".concat(Jy.focusVisible),{backgroundColor:(0,Yr.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),(0,Tt.Z)(t,"&:active",{boxShadow:n.shadows[1]}),t),r.clickable&&"default"!==r.color&&(0,Tt.Z)({},"&:hover, &.".concat(Jy.focusVisible),{backgroundColor:n.palette[r.color].dark}))}),(function(e){var t,n,r=e.theme,a=e.ownerState;return(0,l.Z)({},"outlined"===a.variant&&(t={backgroundColor:"transparent",border:"1px solid ".concat("light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[700])},(0,Tt.Z)(t,"&.".concat(Jy.clickable,":hover"),{backgroundColor:r.palette.action.hover}),(0,Tt.Z)(t,"&.".concat(Jy.focusVisible),{backgroundColor:r.palette.action.focus}),(0,Tt.Z)(t,"& .".concat(Jy.avatar),{marginLeft:4}),(0,Tt.Z)(t,"& .".concat(Jy.avatarSmall),{marginLeft:2}),(0,Tt.Z)(t,"& .".concat(Jy.icon),{marginLeft:4}),(0,Tt.Z)(t,"& .".concat(Jy.iconSmall),{marginLeft:2}),(0,Tt.Z)(t,"& .".concat(Jy.deleteIcon),{marginRight:5}),(0,Tt.Z)(t,"& .".concat(Jy.deleteIconSmall),{marginRight:3}),t),"outlined"===a.variant&&"default"!==a.color&&(n={color:r.palette[a.color].main,border:"1px solid ".concat((0,Yr.Fq)(r.palette[a.color].main,.7))},(0,Tt.Z)(n,"&.".concat(Jy.clickable,":hover"),{backgroundColor:(0,Yr.Fq)(r.palette[a.color].main,r.palette.action.hoverOpacity)}),(0,Tt.Z)(n,"&.".concat(Jy.focusVisible),{backgroundColor:(0,Yr.Fq)(r.palette[a.color].main,r.palette.action.focusOpacity)}),(0,Tt.Z)(n,"& .".concat(Jy.deleteIcon),{color:(0,Yr.Fq)(r.palette[a.color].main,.7),"&:hover, &:active":{color:r.palette[a.color].main}}),n))})),Ty=(0,Ft.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(e,t){var n=e.ownerState.size;return[t.label,t["label".concat((0,tn.Z)(n))]]}})((function(e){var t=e.ownerState;return(0,l.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function Yy(e){return"Backspace"===e.key||"Delete"===e.key}var Hy=t.forwardRef((function(e,n){var r=(0,Et.Z)({props:e,name:"MuiChip"}),a=r.avatar,o=r.className,i=r.clickable,s=r.color,c=void 0===s?"default":s,u=r.component,g=r.deleteIcon,d=r.disabled,p=void 0!==d&&d,h=r.icon,f=r.label,I=r.onClick,C=r.onDelete,m=r.onKeyDown,v=r.onKeyUp,b=r.size,A=void 0===b?"medium":b,y=r.variant,k=void 0===y?"filled":y,Z=(0,Vt.Z)(r,Fy),S=t.useRef(null),w=(0,nn.Z)(S,n),B=function(e){e.stopPropagation(),C&&C(e)},G=!(!1===i||!I)||i,x="small"===A,R=G||C?Vi:u||"div",W=(0,l.Z)({},r,{component:R,disabled:p,size:A,color:c,onDelete:!!C,clickable:G,variant:k}),V=function(e){var t=e.classes,n=e.disabled,r=e.size,a=e.color,o=e.onDelete,i=e.clickable,s=e.variant,c={root:["root",s,n&&"disabled","size".concat((0,tn.Z)(r)),"color".concat((0,tn.Z)(a)),i&&"clickable",i&&"clickableColor".concat((0,tn.Z)(a)),o&&"deletable",o&&"deletableColor".concat((0,tn.Z)(a)),"".concat(s).concat((0,tn.Z)(a))],label:["label","label".concat((0,tn.Z)(r))],avatar:["avatar","avatar".concat((0,tn.Z)(r)),"avatarColor".concat((0,tn.Z)(a))],icon:["icon","icon".concat((0,tn.Z)(r)),"iconColor".concat((0,tn.Z)(a))],deleteIcon:["deleteIcon","deleteIcon".concat((0,tn.Z)(r)),"deleteIconColor".concat((0,tn.Z)(a)),"deleteIconOutlinedColor".concat((0,tn.Z)(a))]};return(0,Xt.Z)(c,Xy,t)}(W),N=R===Vi?(0,l.Z)({component:u||"div",focusVisibleClassName:V.focusVisible},C&&{disableRipple:!0}):{},X=null;if(C){var J=(0,Nt.Z)("default"!==c&&("outlined"===k?V["deleteIconOutlinedColor".concat((0,tn.Z)(c))]:V["deleteIconColor".concat((0,tn.Z)(c))]),x&&V.deleteIconSmall);X=g&&t.isValidElement(g)?t.cloneElement(g,{className:(0,Nt.Z)(g.props.className,V.deleteIcon,J),onClick:B}):(0,_.jsx)(Ny,{className:(0,Nt.Z)(V.deleteIcon,J),onClick:B})}var F=null;a&&t.isValidElement(a)&&(F=t.cloneElement(a,{className:(0,Nt.Z)(V.avatar,a.props.className)}));var E=null;return h&&t.isValidElement(h)&&(E=t.cloneElement(h,{className:(0,Nt.Z)(V.icon,h.props.className)})),(0,_.jsxs)(Ey,(0,l.Z)({as:R,className:(0,Nt.Z)(V.root,o),disabled:!(!G||!p)||void 0,onClick:I,onKeyDown:function(e){e.currentTarget===e.target&&Yy(e)&&e.preventDefault(),m&&m(e)},onKeyUp:function(e){e.currentTarget===e.target&&(C&&Yy(e)?C(e):"Escape"===e.key&&S.current&&S.current.blur()),v&&v(e)},ref:w,ownerState:W},N,Z,{children:[F||E,(0,_.jsx)(Ty,{className:(0,Nt.Z)(V.label),ownerState:W,children:f}),X]}))})),My=Hy,Dy=(0,To.Z)((0,_.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function Ky(e){return(0,Cn.Z)("MuiAutocomplete",e)}var zy,Ly,Py=(0,mn.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),_y=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"],Oy=(0,Ft.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.fullWidth,a=n.hasClearIcon,o=n.hasPopupIcon,i=n.inputFocused,s=n.size;return[(0,Tt.Z)({},"& .".concat(Py.tag),t.tag),(0,Tt.Z)({},"& .".concat(Py.tag),t["tagSize".concat((0,tn.Z)(s))]),(0,Tt.Z)({},"& .".concat(Py.inputRoot),t.inputRoot),(0,Tt.Z)({},"& .".concat(Py.input),t.input),(0,Tt.Z)({},"& .".concat(Py.input),i&&t.inputFocused),t.root,r&&t.fullWidth,o&&t.hasPopupIcon,a&&t.hasClearIcon]}})((function(e){var t,n,r,a,o,i=e.ownerState;return(0,l.Z)((t={},(0,Tt.Z)(t,"&.".concat(Py.focused," .").concat(Py.clearIndicator),{visibility:"visible"}),(0,Tt.Z)(t,"@media (pointer: fine)",(0,Tt.Z)({},"&:hover .".concat(Py.clearIndicator),{visibility:"visible"})),t),i.fullWidth&&{width:"100%"},(o={},(0,Tt.Z)(o,"& .".concat(Py.tag),(0,l.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===i.size&&{margin:2,maxWidth:"calc(100% - 4px)"})),(0,Tt.Z)(o,"& .".concat(Py.inputRoot),(n={flexWrap:"wrap"},(0,Tt.Z)(n,".".concat(Py.hasPopupIcon,"&, .").concat(Py.hasClearIcon,"&"),{paddingRight:30}),(0,Tt.Z)(n,".".concat(Py.hasPopupIcon,".").concat(Py.hasClearIcon,"&"),{paddingRight:56}),(0,Tt.Z)(n,"& .".concat(Py.input),{width:0,minWidth:30}),n)),(0,Tt.Z)(o,"& .".concat(Rn.root),{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}}),(0,Tt.Z)(o,"& .".concat(Rn.root,".").concat(bn.sizeSmall),(0,Tt.Z)({},"& .".concat(Rn.input),{padding:"2px 4px 3px 0"})),(0,Tt.Z)(o,"& .".concat(On.root),(r={padding:9},(0,Tt.Z)(r,".".concat(Py.hasPopupIcon,"&, .").concat(Py.hasClearIcon,"&"),{paddingRight:39}),(0,Tt.Z)(r,".".concat(Py.hasPopupIcon,".").concat(Py.hasClearIcon,"&"),{paddingRight:65}),(0,Tt.Z)(r,"& .".concat(Py.input),{padding:"7.5px 4px 7.5px 6px"}),(0,Tt.Z)(r,"& .".concat(Py.endAdornment),{right:9}),r)),(0,Tt.Z)(o,"& .".concat(On.root,".").concat(bn.sizeSmall),(0,Tt.Z)({padding:6},"& .".concat(Py.input),{padding:"2.5px 4px 2.5px 6px"})),(0,Tt.Z)(o,"& .".concat(En.root),(a={paddingTop:19,paddingLeft:8},(0,Tt.Z)(a,".".concat(Py.hasPopupIcon,"&, .").concat(Py.hasClearIcon,"&"),{paddingRight:39}),(0,Tt.Z)(a,".".concat(Py.hasPopupIcon,".").concat(Py.hasClearIcon,"&"),{paddingRight:65}),(0,Tt.Z)(a,"& .".concat(En.input),{padding:"7px 4px"}),(0,Tt.Z)(a,"& .".concat(Py.endAdornment),{right:9}),a)),(0,Tt.Z)(o,"& .".concat(En.root,".").concat(bn.sizeSmall),(0,Tt.Z)({paddingBottom:1},"& .".concat(En.input),{padding:"2.5px 4px"})),(0,Tt.Z)(o,"& .".concat(bn.hiddenLabel),{paddingTop:8}),(0,Tt.Z)(o,"& .".concat(Py.input),(0,l.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},i.inputFocused&&{opacity:1})),o))})),Uy=(0,Ft.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:function(e,t){return t.endAdornment}})({position:"absolute",right:0,top:"calc(50% - 14px)"}),jy=(0,Ft.ZP)(Ti,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:function(e,t){return t.clearIndicator}})({marginRight:-2,padding:4,visibility:"hidden"}),Qy=(0,Ft.ZP)(Ti,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:function(e,t){var n=e.ownerState;return(0,l.Z)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})((function(e){var t=e.ownerState;return(0,l.Z)({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})})),qy=(0,Ft.ZP)(By,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[(0,Tt.Z)({},"& .".concat(Py.option),t.option),t.popper,n.disablePortal&&t.popperDisablePortal]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({zIndex:t.zIndex.modal},n.disablePortal&&{position:"absolute"})})),$y=(0,Ft.ZP)(zr,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){var t=e.theme;return(0,l.Z)({},t.typography.body1,{overflow:"auto"})})),ek=(0,Ft.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:function(e,t){return t.loading}})((function(e){return{color:e.theme.palette.text.secondary,padding:"14px 16px"}})),tk=(0,Ft.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:function(e,t){return t.noOptions}})((function(e){return{color:e.theme.palette.text.secondary,padding:"14px 16px"}})),nk=(0,Ft.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:function(e,t){return t.listbox}})((function(e){var t,n,r=e.theme;return(0,Tt.Z)({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},"& .".concat(Py.option),(n={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},(0,Tt.Z)(n,r.breakpoints.up("sm"),{minHeight:"auto"}),(0,Tt.Z)(n,"&.".concat(Py.focused),{backgroundColor:r.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),(0,Tt.Z)(n,'&[aria-disabled="true"]',{opacity:r.palette.action.disabledOpacity,pointerEvents:"none"}),(0,Tt.Z)(n,"&.".concat(Py.focusVisible),{backgroundColor:r.palette.action.focus}),(0,Tt.Z)(n,'&[aria-selected="true"]',(t={backgroundColor:(0,Yr.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},(0,Tt.Z)(t,"&.".concat(Py.focused),{backgroundColor:(0,Yr.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.palette.action.selected}}),(0,Tt.Z)(t,"&.".concat(Py.focusVisible),{backgroundColor:(0,Yr.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),t)),n))})),rk=(0,Ft.ZP)(Vy,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:function(e,t){return t.groupLabel}})((function(e){return{backgroundColor:e.theme.palette.background.paper,top:-8}})),ak=(0,Ft.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:function(e,t){return t.groupUl}})((0,Tt.Z)({padding:0},"& .".concat(Py.option),{paddingLeft:24})),ok=t.forwardRef((function(e,n){var r,a,o,i=(0,Et.Z)({props:e,name:"MuiAutocomplete"}),s=(i.autoComplete,i.autoHighlight,i.autoSelect,i.blurOnSelect,i.ChipProps),c=i.className,u=i.clearIcon,g=void 0===u?zy||(zy=(0,_.jsx)(Dy,{fontSize:"small"})):u,d=i.clearOnBlur,p=(void 0===d&&i.freeSolo,i.clearOnEscape,i.clearText),h=void 0===p?"Clear":p,f=i.closeText,I=void 0===f?"Close":f,C=i.componentsProps,m=void 0===C?{}:C,v=i.defaultValue,b=(void 0===v&&i.multiple,i.disableClearable),A=void 0!==b&&b,y=(i.disableCloseOnSelect,i.disabled),k=void 0!==y&&y,Z=(i.disabledItemsFocusable,i.disableListWrap,i.disablePortal),S=void 0!==Z&&Z,w=(i.filterSelectedOptions,i.forcePopupIcon),B=void 0===w?"auto":w,G=i.freeSolo,x=void 0!==G&&G,R=i.fullWidth,W=void 0!==R&&R,V=i.getLimitTagsText,N=void 0===V?function(e){return"+".concat(e)}:V,X=i.getOptionLabel,J=void 0===X?function(e){var t;return null!=(t=e.label)?t:e}:X,F=i.groupBy,E=i.handleHomeEndKeys,T=(void 0===E&&i.freeSolo,i.includeInputInList,i.limitTags),Y=void 0===T?-1:T,H=i.ListboxComponent,M=void 0===H?"ul":H,D=i.ListboxProps,K=i.loading,z=void 0!==K&&K,L=i.loadingText,P=void 0===L?"Loading\u2026":L,O=i.multiple,U=void 0!==O&&O,j=i.noOptionsText,Q=void 0===j?"No options":j,q=(i.openOnFocus,i.openText),$=void 0===q?"Open":q,ee=i.PaperComponent,te=void 0===ee?zr:ee,ne=i.PopperComponent,re=void 0===ne?By:ne,ae=i.popupIcon,oe=void 0===ae?Ly||(Ly=(0,_.jsx)(Yo,{})):ae,ie=i.readOnly,se=void 0!==ie&&ie,ce=i.renderGroup,ue=i.renderInput,le=i.renderOption,ge=i.renderTags,de=i.selectOnFocus,pe=(void 0===de&&i.freeSolo,i.size),he=void 0===pe?"medium":pe,fe=(0,Vt.Z)(i,_y),Ie=tA((0,l.Z)({},i,{componentName:"Autocomplete"})),Ce=Ie.getRootProps,me=Ie.getInputProps,ve=Ie.getInputLabelProps,be=Ie.getPopupIndicatorProps,Ae=Ie.getClearProps,ye=Ie.getTagProps,ke=Ie.getListboxProps,Ze=Ie.getOptionProps,Se=Ie.value,we=Ie.dirty,Be=Ie.id,Ge=Ie.popupOpen,xe=Ie.focused,Re=Ie.focusedTag,We=Ie.anchorEl,Ve=Ie.setAnchorEl,Ne=Ie.inputValue,Xe=Ie.groupedOptions,Je=!A&&!k&&we&&!se,Fe=(!x||!0===B)&&!1!==B,Ee=(0,l.Z)({},i,{disablePortal:S,focused:xe,fullWidth:W,hasClearIcon:Je,hasPopupIcon:Fe,inputFocused:-1===Re,popupOpen:Ge,size:he}),Te=function(e){var t=e.classes,n=e.disablePortal,r=e.focused,a=e.fullWidth,o=e.hasClearIcon,i=e.hasPopupIcon,s=e.inputFocused,c=e.popupOpen,u=e.size,l={root:["root",r&&"focused",a&&"fullWidth",o&&"hasClearIcon",i&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag","tagSize".concat((0,tn.Z)(u))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,Xt.Z)(l,Ky,t)}(Ee);if(U&&Se.length>0){var Ye=function(e){return(0,l.Z)({className:(0,Nt.Z)(Te.tag),disabled:k},ye(e))};o=ge?ge(Se,Ye):Se.map((function(e,t){return(0,_.jsx)(My,(0,l.Z)({label:J(e),size:he},Ye({index:t}),s))}))}if(Y>-1&&Array.isArray(o)){var He=o.length-Y;!xe&&He>0&&(o=o.splice(0,Y)).push((0,_.jsx)("span",{className:Te.tag,children:N(He)},o.length))}var Me=ce||function(e){return(0,_.jsxs)("li",{children:[(0,_.jsx)(rk,{className:Te.groupLabel,ownerState:Ee,component:"div",children:e.group}),(0,_.jsx)(ak,{className:Te.groupUl,ownerState:Ee,children:e.children})]},e.key)},De=le||function(e,t){return(0,_.jsx)("li",(0,l.Z)({},e,{children:J(t)}))},Ke=function(e,t){var n=Ze({option:e,index:t});return De((0,l.Z)({},n,{className:Te.option}),e,{selected:n["aria-selected"],inputValue:Ne})};return(0,_.jsxs)(t.Fragment,{children:[(0,_.jsx)(Oy,(0,l.Z)({ref:n,className:(0,Nt.Z)(Te.root,c),ownerState:Ee},Ce(fe),{children:ue({id:Be,disabled:k,fullWidth:!0,size:"small"===he?"small":void 0,InputLabelProps:ve(),InputProps:{ref:Ve,className:Te.inputRoot,startAdornment:o,endAdornment:(0,_.jsxs)(Uy,{className:Te.endAdornment,ownerState:Ee,children:[Je?(0,_.jsx)(jy,(0,l.Z)({},Ae(),{"aria-label":h,title:h,ownerState:Ee},m.clearIndicator,{className:(0,Nt.Z)(Te.clearIndicator,null==(r=m.clearIndicator)?void 0:r.className),children:g})):null,Fe?(0,_.jsx)(Qy,(0,l.Z)({},be(),{disabled:k,"aria-label":Ge?I:$,title:Ge?I:$,className:(0,Nt.Z)(Te.popupIndicator),ownerState:Ee,children:oe})):null]})},inputProps:(0,l.Z)({className:(0,Nt.Z)(Te.input),disabled:k,readOnly:se},me())})})),Ge&&We?(0,_.jsx)(qy,{as:re,className:(0,Nt.Z)(Te.popper),disablePortal:S,style:{width:We?We.clientWidth:null},ownerState:Ee,role:"presentation",anchorEl:We,open:!0,children:(0,_.jsxs)($y,(0,l.Z)({ownerState:Ee,as:te},m.paper,{className:(0,Nt.Z)(Te.paper,null==(a=m.paper)?void 0:a.className),children:[z&&0===Xe.length?(0,_.jsx)(ek,{className:Te.loading,ownerState:Ee,children:P}):null,0!==Xe.length||x||z?null:(0,_.jsx)(tk,{className:Te.noOptions,ownerState:Ee,role:"presentation",onMouseDown:function(e){e.preventDefault()},children:Q}),Xe.length>0?(0,_.jsx)(nk,(0,l.Z)({as:M,className:Te.listbox,ownerState:Ee},ke(),D,{children:Xe.map((function(e,t){return F?Me({key:e.key,group:e.group,children:e.options.map((function(t,n){return Ke(t,e.index+n)}))}):Ke(e,t)}))})):null]}))}):null]})})),ik=ok,sk=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(""),f=(0,a.Z)(h,2),I=f[0],C=f[1],m=(0,t.useState)(""),v=(0,a.Z)(m,2),b=v[0],A=v[1],y=(0,t.useState)(""),k=(0,a.Z)(y,2),Z=k[0],S=k[1],w=Cs(),B=(0,t.useState)([]),G=(0,a.Z)(B,2),x=G[0],R=G[1],W=(0,t.useState)([]),V=(0,a.Z)(W,2),N=V[0],X=V[1],J={options:x,getOptionLabel:function(e){return e.fishpondId}},F={options:N,getOptionLabel:function(e){return e.fishtype}};return(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:w}}).then((function(e){return e.json()}));case 3:return e.sent.ok&&o(!1),e.next=7,fetch("".concat("http://localhost:5000/","api/fishpond/query")).then((function(e){return e.json()}));case 7:return(t=e.sent).ok&&R(t.data),e.next=11,fetch("".concat("http://localhost:5000/","api/fishtype/query")).then((function(e){return e.json()}));case 11:(n=e.sent).ok&&X(n.data),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})))()}),[]),r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=d&&""!=I?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/period"),{method:"POST",headers:{token:"".concat(w),"Content-type":"application/json"},body:JSON.stringify({fishpondId:c,fishtype:d,start_quantity:I,alert_email:b})}).then((function(e){return e.json()}));case 3:t=e.sent,S(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("h2",{children:"Add Periods"}),Z,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(ik,As(As({},J),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:c,onInputChange:function(e,t){u(t)},renderInput:function(e){return(0,_.jsx)(qo,As(As({},e),{},{label:"Fishpond ID",variant:"outlined"}))}}))}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(ik,As(As({},F),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:d,onInputChange:function(e,t){p(t)},renderInput:function(e){return(0,_.jsx)(qo,As(As({},e),{},{label:"Fish Type",variant:"outlined"}))}}))}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"email",type:"email",value:b,label:"Email",variant:"outlined",onChange:function(e){return A(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"username",value:I,label:"Quantity",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group"}),(0,_.jsx)("input",{className:"add",type:"submit"})]})})})},ck=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)({}),g=(0,a.Z)(l,2),d=(g[0],g[1]),p=x().search,h=Ss.parse(p).id,f=Cs(),I=(0,t.useState)(""),C=(0,a.Z)(I,2),m=C[0],v=C[1],b=(0,t.useState)(""),A=(0,a.Z)(b,2),y=A[0],k=A[1],Z=(0,t.useState)(""),S=(0,a.Z)(Z,2),w=S[0],B=S[1],G=(0,t.useState)(""),R=(0,a.Z)(G,2),W=R[0],V=R[1],N=(0,t.useState)(!1),X=(0,a.Z)(N,2),J=X[0],F=X[1],E=(0,t.useState)(""),T=(0,a.Z)(E,2),Y=T[0],H=T[1],M=(0,t.useState)(""),D=(0,a.Z)(M,2),K=D[0],z=D[1];(0,t.useEffect)((function(){null!=h&&(0,as.Z)(is().mark((function e(){var t,n,r;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:f}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/period/admin/query?periodid=").concat(h),{headers:{token:f}}).then((function(e){return e.json()}));case 6:return n=e.sent,t.ok&&n.ok&&(B(n.data[0].fishtype.fishtype),v(n.data[0]._id),k(n.data[0].periodId),V(n.data[0].start_quantity),F(n.data[0].isEnd),z(n.data[0].alert_email),d(n.data[0]),o(!1)),e.next=10,fetch("".concat("http://localhost:5000/","api/fishtype/query")).then((function(e){return e.json()}));case 10:(r=e.sent).ok&&U(r.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()}),[]);var L=(0,t.useState)([]),P=(0,a.Z)(L,2),O=P[0],U=P[1],j={options:O,getOptionLabel:function(e){return e.fishtype}};return r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=y&&""!=w&&""!=W&&(!0===J&&""!=Y||!1===J)?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/period/").concat(m),{method:"PUT",headers:{token:"".concat(f),"Content-type":"application/json"},body:JSON.stringify({isEnd:J,fishtype:w,start_quantity:W,end_quantity:Y})}).then((function(e){return e.json()}));case 3:t=e.sent,u(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("div",{}),(0,_.jsx)("h2",{children:"Edit Period"}),c,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"periodid",label:"periodid",variant:"outlined",value:y,readOnly:!0})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(ik,As(As({},j),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:w,onInputChange:function(e,t){B(t)},renderInput:function(e){return(0,_.jsx)(qo,As(As({},e),{},{label:"Fish Type",variant:"outlined"}))}}))}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"startquantity",name:"startquantity",value:W,label:"Start Quantity",variant:"outlined",onChange:function(e){return V(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"email",name:"email",type:"email",value:K,label:"Email",variant:"outlined",onChange:function(e){return z(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(Ds,{control:(0,_.jsx)(rc,{checked:J,onChange:function(e){return F(!J)}}),label:"Ended"})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"endquantity",name:"endquantity",value:Y,label:"End Quantity",variant:"outlined",onChange:function(e){return H(e.target.value)}})}),(0,_.jsxs)("div",{className:"addbtn-container",children:[(0,_.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,_.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/period/").concat(m),{method:"DELETE",headers:{token:"".concat(f),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,u(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})})})},uk=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)({}),g=(0,a.Z)(l,2),d=(g[0],g[1]),p=x().search,h=Ss.parse(p).id,f=Cs(),I=(0,t.useState)(""),C=(0,a.Z)(I,2),m=C[0],v=C[1],b=(0,t.useState)(""),A=(0,a.Z)(b,2),y=A[0],k=A[1],Z=(0,t.useState)(""),S=(0,a.Z)(Z,2),w=S[0],B=S[1],G=(0,t.useState)(""),R=(0,a.Z)(G,2),W=R[0],V=R[1];(0,t.useEffect)((function(){null!=h&&(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:f}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/sensortype/admin/query?sensortype=").concat(h),{headers:{token:f}}).then((function(e){return e.json()}));case 6:n=e.sent,t.ok&&n.ok&&(v(n.data[0]._id),B(n.data[0].unit),k(n.data[0].sensortype),V(n.data[0].abbreviation),d(n.data[0]),o(!1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);return r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=y&&""!=w?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(" ".concat("http://localhost:5000/","api/sensortype/").concat(m),{method:"PUT",headers:{token:"".concat(f),"Content-type":"application/json"},body:JSON.stringify({unit:w,sensortype:y,abbreviation:W})}).then((function(e){return e.json()}));case 3:t=e.sent,u(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("div",{}),(0,_.jsx)("h2",{children:"Edit Sensors"}),c,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"objectid",value:m,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"sensortype",value:y,label:"Sensor Type",variant:"outlined",onChange:function(e){return k(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"abbreviation",value:W,label:"Abbreviation",variant:"outlined",onChange:function(e){return V(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"unit",value:w,label:"Unit (Symbol)",variant:"outlined",onChange:function(e){return B(e.target.value)}})}),(0,_.jsxs)("div",{className:"addbtn-container",children:[(0,_.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,_.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/sensortype/").concat(m),{method:"DELETE",headers:{token:"".concat(f),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,u(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})})})},lk=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(""),f=(0,a.Z)(h,2),I=f[0],C=f[1],m=(0,t.useState)(""),v=(0,a.Z)(m,2),b=v[0],A=v[1],y=Cs();return(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:y}}).then((function(e){return e.json()}));case 3:e.sent.ok&&o(!1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=d&&""!=c&&""!=I?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/sensortype"),{method:"POST",headers:{token:"".concat(y),"Content-type":"application/json"},body:JSON.stringify({sensortype:c,abbreviation:I,unit:d})}).then((function(e){return e.json()}));case 3:t=e.sent,A(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("h2",{children:"Add Sensors"}),b,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"sensortype",value:c,label:"Sensor Type",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"abbreviation",value:I,label:"Abbreviation",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"unit",value:d,label:"Unit (Symbol)",variant:"outlined",onChange:function(e){return p(e.target.value)}})}),(0,_.jsx)("input",{className:"add",type:"submit"})]})})})},gk=function(){var e=x(),n=(0,t.useState)(10),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=(0,t.useState)(["#","Period ID","record Type","Sensor Type","Value","Date"]),c=(0,a.Z)(s,2),u=c[0],l=(c[1],(0,t.useState)(["period.periodId","record.record","sensortype.sensortype","value","updatedAt"])),g=(0,a.Z)(l,2),d=g[0],p=(g[1],(0,t.useState)([])),h=(0,a.Z)(p,2),f=h[0],I=h[1],C=(0,t.useState)([]),m=(0,a.Z)(C,2),v=m[0],b=m[1],A=(0,t.useState)([]),y=(0,a.Z)(A,2),k=y[0],Z=y[1],S=(0,t.useState)(["".concat(e.pathname,"/edit"),"_id"]),w=(0,a.Z)(S,2),B=w[0],G=(w[1],(0,t.useState)(!0)),W=(0,a.Z)(G,2),V=W[0],N=W[1],X=R(),J=Cs();(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n,r;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:J}}).then((function(e){return e.json()}));case 3:return n=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/sensorrecord/admin/query"),{headers:{token:J}});case 6:return r=e.sent,e.next=9,r.json();case 9:(t=e.sent).ok&&n.ok&&(t.data=t.data.map((function(e){return As(As({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})),I(t.data),b(t.data),N(!1)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t=[];case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]),(0,t.useEffect)((function(){i(Math.ceil(v.length/10)),Z(v.slice(0,10))}),[v]);return V?(0,_.jsx)(Js,{}):(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)(Xs(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:o,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(v.length),console.log(e.selected),Z(v.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,_.jsxs)("div",{className:"searchbar-container",children:[(0,_.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(e.pathname,"/add"))},children:"Add"}),"  ",(0,_.jsx)(qo,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=f.filter((function(e){return"".concat(d.map((function(t,n){return e[t]+""}))).toLowerCase().includes(t)}));b(n)},InputProps:{startAdornment:(0,_.jsx)(ts,{position:"start",children:(0,_.jsx)(Yi.Z,{fontSize:"large",color:"info"})})}})]}),(0,_.jsx)(ks,{accessor:d,header:u,data:k,link:B})]})},dk=function(){var e=(0,t.useState)(!0),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,t.useState)(""),s=(0,a.Z)(i,2),c=s[0],u=s[1],l=(0,t.useState)(""),g=(0,a.Z)(l,2),d=g[0],p=g[1],h=(0,t.useState)(""),f=(0,a.Z)(h,2),I=f[0],C=f[1],m=(0,t.useState)("manual"),v=(0,a.Z)(m,2),b=v[0],A=(v[1],(0,t.useState)("")),y=(0,a.Z)(A,2),k=y[0],Z=y[1],S=Cs();(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){var t,n;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:S}}).then((function(e){return e.json()}));case 3:return e.sent.ok&&o(!1),e.next=7,fetch("".concat("http://localhost:5000/","api/period/query")).then((function(e){return e.json()}));case 7:return(t=e.sent).ok&&x(t.data),e.next=11,fetch("".concat("http://localhost:5000/","api/sensortype/query"),{headers:{token:S}}).then((function(e){return e.json()}));case 11:(n=e.sent).ok&&N(n.data),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})))()}),[]);var w=(0,t.useState)([]),B=(0,a.Z)(w,2),G=B[0],x=B[1],R=(0,t.useState)([]),W=(0,a.Z)(R,2),V=W[0],N=W[1],X={options:G,getOptionLabel:function(e){return e.periodId}},J={options:V,getOptionLabel:function(e){return e.sensortype}};return r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=d&&""!=I?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/sensorrecord"),{method:"POST",headers:{token:"".concat(S),"Content-type":"application/json"},body:JSON.stringify({sensortype:c,value:d,periodid:I,record:b})}).then((function(e){return e.json()}));case 3:t=e.sent,Z(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("h2",{children:"Add Records"}),k,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(ik,As(As({},X),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:I,onInputChange:function(e,t){C(t)},renderInput:function(e){return(0,_.jsx)(qo,As(As({},e),{},{label:"Period ID",variant:"outlined"}))}}))}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(ik,As(As({},J),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:c,onInputChange:function(e,t){u(t)},renderInput:function(e){return(0,_.jsx)(qo,As(As({},e),{},{label:"Sensor Type",variant:"outlined"}))}}))}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"value",value:d,label:"Value",variant:"outlined",onChange:function(e){return p(e.target.value)}})}),(0,_.jsx)("input",{className:"add",type:"submit"})]})})})},pk=function(){var e=(0,t.useState)(""),n=(0,a.Z)(e,2),r=n[0],o=(n[1],(0,t.useState)("")),i=(0,a.Z)(o,2),s=i[0],c=i[1],u=(0,t.useState)({}),l=(0,a.Z)(u,2),g=(l[0],l[1]),d=x().search,p=Ss.parse(d).id,h=Cs(),f=(0,t.useState)(""),I=(0,a.Z)(f,2),C=I[0],m=I[1],v=(0,t.useState)(""),b=(0,a.Z)(v,2),A=b[0],y=b[1],k=(0,t.useState)(""),Z=(0,a.Z)(k,2),S=Z[0],w=Z[1],B=(0,t.useState)(""),G=(0,a.Z)(B,2),R=G[0],W=G[1],V=(0,t.useState)(""),N=(0,a.Z)(V,2),X=N[0],J=N[1],F=(0,t.useState)(!1),E=(0,a.Z)(F,2),T=E[0];E[1];(0,t.useEffect)((function(){console.log(T)}),[T]),(0,t.useEffect)((function(){null!=p&&(0,as.Z)(is().mark((function e(){var t,n,r,a;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/auth/check"),{method:"POST",headers:{token:h}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.next=6,fetch("".concat("http://localhost:5000/","api/sensorrecord/admin/query?_id=").concat(p),{headers:{token:h}}).then((function(e){return e.json()}));case 6:return n=e.sent,t.ok&&n.ok&&(m(n.data[0]._id),y(n.data[0].period.periodId),w(n.data[0].sensortype.sensortype),W(n.data[0].value),J(n.data[0].record.record),g(n.data[0])),e.next=10,fetch("".concat("http://localhost:5000/","api/sensortype/query"),{headers:{token:h}}).then((function(e){return e.json()}));case 10:return(r=e.sent).ok&&O(r.data),e.next=14,fetch("".concat("http://localhost:5000/","api/record/query"),{headers:{token:h}}).then((function(e){return e.json()}));case 14:(a=e.sent).ok&&D(a.data),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()}),[]);var Y=(0,t.useState)([]),H=(0,a.Z)(Y,2),M=H[0],D=H[1],K={options:M,getOptionLabel:function(e){return e.record}},z=(0,t.useState)([]),L=(0,a.Z)(z,2),P=L[0],O=L[1],U={options:P,getOptionLabel:function(e){return e.sensortype}};return r?(0,_.jsx)(Js,{}):(0,_.jsx)("div",{className:"addpage",children:(0,_.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=A&&""!=R&&""!=S?(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/sensorrecord/").concat(C),{method:"PUT",headers:{token:"".concat(h),"Content-type":"application/json"},body:JSON.stringify({record:X,periodid:A,sensortype:S,value:R})}).then((function(e){return e.json()}));case 3:t=e.sent,c(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:t.msg})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,_.jsxs)("div",{className:"form",children:[(0,_.jsx)("div",{}),(0,_.jsx)("h2",{children:"Edit Record"}),s,(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"objectid",value:C,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"periodid",value:A,label:"Period ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(ik,As(As({},U),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:S,onInputChange:function(e,t){w(t)},renderInput:function(e){return(0,_.jsx)(qo,As(As({},e),{},{label:"Sensor Type",variant:"outlined"}))}}))}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(qo,{fullWidth:!0,id:"value",value:R,label:"Value",variant:"outlined",onChange:function(e){return W(e.target.value)}})}),(0,_.jsx)("div",{className:"form-group",children:(0,_.jsx)(ik,As(As({},K),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:X,onInputChange:function(e,t){J(t)},renderInput:function(e){return(0,_.jsx)(qo,As(As({},e),{},{label:"Record Type",variant:"outlined"}))}}))}),(0,_.jsxs)("div",{className:"addbtn-container",children:[(0,_.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,_.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){(0,as.Z)(is().mark((function e(){var t;return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000/","api/period/").concat(C),{method:"DELETE",headers:{token:"".concat(h),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,c(t.ok?(0,_.jsx)("h3",{children:t.msg}):(0,_.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})})})},hk=function(){var e=R();return(0,t.useEffect)((function(){(0,as.Z)(is().mark((function e(){return is().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:5000/","api/auth/deletecookie"),{method:"GET",credentials:"include"}).then((function(e){return e.json()}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))(),Is("");var t=setTimeout((function(){e("/")}),1e5);return function(){return clearInterval(t)}}),[]),(0,_.jsx)("div",{children:"Logged Out"})},fk=(__webpack_require__(97),__webpack_require__(9451),__webpack_require__(8472)),Ik=__webpack_require__(5735);function Ck(e){return(0,Cn.Z)("MuiButton",e)}var mk=(0,mn.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var vk=t.createContext({}),bk=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ak=function(e){return(0,l.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},yk=(0,Ft.ZP)(Vi,{shouldForwardProp:function(e){return(0,Ft.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,tn.Z)(n.color))],t["size".concat((0,tn.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,tn.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({},n.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:n.shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":(0,l.Z)({textDecoration:"none",backgroundColor:(0,Yr.Fq)(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===r.variant&&"inherit"!==r.color&&{backgroundColor:(0,Yr.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===r.variant&&"inherit"!==r.color&&{border:"1px solid ".concat(n.palette[r.color].main),backgroundColor:(0,Yr.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===r.variant&&{backgroundColor:n.palette.grey.A100,boxShadow:n.shadows[4],"@media (hover: none)":{boxShadow:n.shadows[2],backgroundColor:n.palette.grey[300]}},"contained"===r.variant&&"inherit"!==r.color&&{backgroundColor:n.palette[r.color].dark,"@media (hover: none)":{backgroundColor:n.palette[r.color].main}}),"&:active":(0,l.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[8]})},(0,Tt.Z)(t,"&.".concat(mk.focusVisible),(0,l.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[6]})),(0,Tt.Z)(t,"&.".concat(mk.disabled),(0,l.Z)({color:n.palette.action.disabled},"outlined"===r.variant&&{border:"1px solid ".concat(n.palette.action.disabledBackground)},"outlined"===r.variant&&"secondary"===r.color&&{border:"1px solid ".concat(n.palette.action.disabled)},"contained"===r.variant&&{color:n.palette.action.disabled,boxShadow:n.shadows[0],backgroundColor:n.palette.action.disabledBackground})),t),"text"===r.variant&&{padding:"6px 8px"},"text"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main},"outlined"===r.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main,border:"1px solid ".concat((0,Yr.Fq)(n.palette[r.color].main,.5))},"contained"===r.variant&&{color:n.palette.getContrastText(n.palette.grey[300]),backgroundColor:n.palette.grey[300],boxShadow:n.shadows[2]},"contained"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].contrastText,backgroundColor:n.palette[r.color].main},"inherit"===r.color&&{color:"inherit",borderColor:"currentColor"},"small"===r.size&&"text"===r.variant&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"text"===r.variant&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"outlined"===r.variant&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"outlined"===r.variant&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"contained"===r.variant&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"contained"===r.variant&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},r.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,Tt.Z)(t,"&.".concat(mk.focusVisible),{boxShadow:"none"}),(0,Tt.Z)(t,"&:active",{boxShadow:"none"}),(0,Tt.Z)(t,"&.".concat(mk.disabled),{boxShadow:"none"}),t)})),kk=(0,Ft.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,tn.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Ak(t))})),Zk=(0,Ft.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,tn.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Ak(t))})),Sk=t.forwardRef((function(e,n){var r=t.useContext(vk),a=(0,Ik.Z)(r,e),o=(0,Et.Z)({props:a,name:"MuiButton"}),i=o.children,s=o.color,c=void 0===s?"primary":s,u=o.component,g=void 0===u?"button":u,d=o.className,p=o.disabled,h=void 0!==p&&p,f=o.disableElevation,I=void 0!==f&&f,C=o.disableFocusRipple,m=void 0!==C&&C,v=o.endIcon,b=o.focusVisibleClassName,A=o.fullWidth,y=void 0!==A&&A,k=o.size,Z=void 0===k?"medium":k,S=o.startIcon,w=o.type,B=o.variant,G=void 0===B?"text":B,x=(0,Vt.Z)(o,bk),R=(0,l.Z)({},o,{color:c,component:g,disabled:h,disableElevation:I,disableFocusRipple:m,fullWidth:y,size:Z,type:w,variant:G}),W=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,a=e.size,o=e.variant,i=e.classes,s={root:["root",o,"".concat(o).concat((0,tn.Z)(t)),"size".concat((0,tn.Z)(a)),"".concat(o,"Size").concat((0,tn.Z)(a)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,tn.Z)(a))],endIcon:["endIcon","iconSize".concat((0,tn.Z)(a))]},c=(0,Xt.Z)(s,Ck,i);return(0,l.Z)({},i,c)}(R),V=S&&(0,_.jsx)(kk,{className:W.startIcon,ownerState:R,children:S}),N=v&&(0,_.jsx)(Zk,{className:W.endIcon,ownerState:R,children:v});return(0,_.jsxs)(yk,(0,l.Z)({ownerState:R,className:(0,Nt.Z)(d,r.className),component:g,disabled:h,focusRipple:!m,focusVisibleClassName:(0,Nt.Z)(W.focusVisible,b),ref:n,type:w},x,{classes:W,children:[V,i,N]}))})),wk=Sk,Bk={filename:"Report.csv",headers:[{label:"First Name",key:"firstName"},{label:"Last Name",key:"lastName"},{label:"Email",key:"email"},{label:"Age",key:"age"}],data:[{firstName:"Warren",lastName:"Morrow",email:"sokyt@mailinator.com",age:"36"},{firstName:"Gwendolyn",lastName:"Galloway",email:"weciz@mailinator.com",age:"76"},{firstName:"Astra",lastName:"Wyatt",email:"quvyn@mailinator.com",age:"57"},{firstName:"Jasmine",lastName:"Wong",email:"toxazoc@mailinator.com",age:"42"},{firstName:"Brooke",lastName:"Mcconnell",email:"vyry@mailinator.com",age:"56"},{firstName:"Christen",lastName:"Haney",email:"pagevolal@mailinator.com",age:"23"},{firstName:"Tate",lastName:"Vega",email:"dycubo@mailinator.com",age:"87"},{firstName:"Amber",lastName:"Brady",email:"vyconixy@mailinator.com",age:"78"},{firstName:"Philip",lastName:"Whitfield",email:"velyfi@mailinator.com",age:"22"},{firstName:"Kitra",lastName:"Hammond",email:"fiwiloqu@mailinator.com",age:"35"},{firstName:"Charity",lastName:"Mathews",email:"fubigonero@mailinator.com",age:"63"}]},Gk=function(){return(0,_.jsx)("div",{children:(0,_.jsx)(wk,{children:(0,_.jsx)(fk.CSVLink,As(As({},Bk),{},{children:"Download"}))})})},xk=function(){return(0,t.useEffect)((function(){ms()})),(0,_.jsxs)(_.Fragment,{children:[console.log("http://localhost:5000/"),(0,_.jsx)("div",{className:"content",children:(0,_.jsxs)(ls,{children:[(0,_.jsx)(vs,{}),(0,_.jsxs)(w,{children:[(0,_.jsx)(Z,{path:"/testingCSV",element:(0,_.jsx)(Gk,{})}),(0,_.jsx)(Z,{path:"/logout",element:(0,_.jsx)(hk,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/records/edit",element:(0,_.jsx)(pk,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/records/add",element:(0,_.jsx)(dk,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/sensors/edit",element:(0,_.jsx)(uk,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/sensors/add",element:(0,_.jsx)(lk,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/periods/edit",element:(0,_.jsx)(ck,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/periods/add",element:(0,_.jsx)(sk,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/fishs/edit",element:(0,_.jsx)(jb,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/fishs/add",element:(0,_.jsx)(Ub,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/fishponds/edit",element:(0,_.jsx)(Ob,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/fishponds/add",element:(0,_.jsx)(_b,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/records",element:(0,_.jsx)(gk,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/periods",element:(0,_.jsx)(Lb,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/sensors",element:(0,_.jsx)(Pb,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/fishs",element:(0,_.jsx)(zb,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement/fishponds",element:(0,_.jsx)(Kb,{})}),(0,_.jsx)(Z,{path:"/login",element:(0,_.jsx)(Hb,{})}),(0,_.jsx)(Z,{path:"/fishpondsmanagement",element:(0,_.jsx)(Db,{})}),(0,_.jsx)(Z,{path:"/testingAPI",element:(0,_.jsx)(Tb,{})}),(0,_.jsx)(Z,{path:"/",element:(0,_.jsx)(rs,{})}),(0,_.jsx)(Z,{path:"/fish",element:(0,_.jsx)(U,{})}),(0,_.jsx)(Z,{path:"/fishponds",element:(0,_.jsx)(Zs,{})}),(0,_.jsx)(Z,{path:"/sensordetails",element:(0,_.jsx)(eh,{})}),(0,_.jsx)(Z,{path:"/dashboard",element:(0,_.jsx)(Vs,{})}),(0,_.jsx)(Z,{path:"/userlist",element:(0,_.jsx)(Fs,{})}),(0,_.jsx)(Z,{path:"/userlist/add",element:(0,_.jsx)(ac,{})}),(0,_.jsx)(Z,{path:"/userlist/edit",element:(0,_.jsx)(sc,{})}),(0,_.jsx)(Z,{path:"/qrcode",element:(0,_.jsx)(Eb,{})}),(0,_.jsx)(Z,{path:"*",element:(0,_.jsx)(Ws,{})})]})]})}),(0,_.jsx)(cc,{})]})},Rk=function(e){e&&e instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};r.render((0,_.jsx)(t.StrictMode,{children:(0,_.jsx)(xk,{})}),document.getElementById("root")),Rk()}()})();
//# sourceMappingURL=main.1208cfa4.js.map